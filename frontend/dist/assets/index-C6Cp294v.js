function y5(e,t){for(var a=0;a<t.length;a++){const n=t[a];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gg={exports:{}},td={},xg={exports:{}},or={};var VN;function b5(){if(VN)return or;VN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,v={};function b(U,ae,W){this.props=U,this.context=ae,this.refs=v,this.updater=W||w}b.prototype.isReactComponent={},b.prototype.setState=function(U,ae){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ae,"setState")},b.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function I(){}I.prototype=b.prototype;function T(U,ae,W){this.props=U,this.context=ae,this.refs=v,this.updater=W||w}var P=T.prototype=new I;P.constructor=T,j(P,b.prototype),P.isPureReactComponent=!0;var A=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function R(U,ae,W){var fe,Se={},Ie=null,te=null;if(ae!=null)for(fe in ae.ref!==void 0&&(te=ae.ref),ae.key!==void 0&&(Ie=""+ae.key),ae)k.call(ae,fe)&&!_.hasOwnProperty(fe)&&(Se[fe]=ae[fe]);var se=arguments.length-2;if(se===1)Se.children=W;else if(1<se){for(var Q=Array(se),de=0;de<se;de++)Q[de]=arguments[de+2];Se.children=Q}if(U&&U.defaultProps)for(fe in se=U.defaultProps,se)Se[fe]===void 0&&(Se[fe]=se[fe]);return{$$typeof:e,type:U,key:Ie,ref:te,props:Se,_owner:E.current}}function $(U,ae){return{$$typeof:e,type:U.type,key:ae,ref:U.ref,props:U.props,_owner:U._owner}}function H(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var ae={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(W){return ae[W]})}var Y=/\/+/g;function X(U,ae){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):ae.toString(36)}function me(U,ae,W,fe,Se){var Ie=typeof U;(Ie==="undefined"||Ie==="boolean")&&(U=null);var te=!1;if(U===null)te=!0;else switch(Ie){case"string":case"number":te=!0;break;case"object":switch(U.$$typeof){case e:case t:te=!0}}if(te)return te=U,Se=Se(te),U=fe===""?"."+X(te,0):fe,A(Se)?(W="",U!=null&&(W=U.replace(Y,"$&/")+"/"),me(Se,ae,W,"",function(de){return de})):Se!=null&&(H(Se)&&(Se=$(Se,W+(!Se.key||te&&te.key===Se.key?"":(""+Se.key).replace(Y,"$&/")+"/")+U)),ae.push(Se)),1;if(te=0,fe=fe===""?".":fe+":",A(U))for(var se=0;se<U.length;se++){Ie=U[se];var Q=fe+X(Ie,se);te+=me(Ie,ae,W,Q,Se)}else if(Q=x(U),typeof Q=="function")for(U=Q.call(U),se=0;!(Ie=U.next()).done;)Ie=Ie.value,Q=fe+X(Ie,se++),te+=me(Ie,ae,W,Q,Se);else if(Ie==="object")throw ae=String(U),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return te}function K(U,ae,W){if(U==null)return U;var fe=[],Se=0;return me(U,fe,"","",function(Ie){return ae.call(W,Ie,Se++)}),fe}function oe(U){if(U._status===-1){var ae=U._result;ae=ae(),ae.then(function(W){(U._status===0||U._status===-1)&&(U._status=1,U._result=W)},function(W){(U._status===0||U._status===-1)&&(U._status=2,U._result=W)}),U._status===-1&&(U._status=0,U._result=ae)}if(U._status===1)return U._result.default;throw U._result}var G={current:null},B={transition:null},F={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:B,ReactCurrentOwner:E};function re(){throw Error("act(...) is not supported in production builds of React.")}return or.Children={map:K,forEach:function(U,ae,W){K(U,function(){ae.apply(this,arguments)},W)},count:function(U){var ae=0;return K(U,function(){ae++}),ae},toArray:function(U){return K(U,function(ae){return ae})||[]},only:function(U){if(!H(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},or.Component=b,or.Fragment=a,or.Profiler=s,or.PureComponent=T,or.StrictMode=n,or.Suspense=u,or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,or.act=re,or.cloneElement=function(U,ae,W){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var fe=j({},U.props),Se=U.key,Ie=U.ref,te=U._owner;if(ae!=null){if(ae.ref!==void 0&&(Ie=ae.ref,te=E.current),ae.key!==void 0&&(Se=""+ae.key),U.type&&U.type.defaultProps)var se=U.type.defaultProps;for(Q in ae)k.call(ae,Q)&&!_.hasOwnProperty(Q)&&(fe[Q]=ae[Q]===void 0&&se!==void 0?se[Q]:ae[Q])}var Q=arguments.length-2;if(Q===1)fe.children=W;else if(1<Q){se=Array(Q);for(var de=0;de<Q;de++)se[de]=arguments[de+2];fe.children=se}return{$$typeof:e,type:U.type,key:Se,ref:Ie,props:fe,_owner:te}},or.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},or.createElement=R,or.createFactory=function(U){var ae=R.bind(null,U);return ae.type=U,ae},or.createRef=function(){return{current:null}},or.forwardRef=function(U){return{$$typeof:d,render:U}},or.isValidElement=H,or.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:oe}},or.memo=function(U,ae){return{$$typeof:m,type:U,compare:ae===void 0?null:ae}},or.startTransition=function(U){var ae=B.transition;B.transition={};try{U()}finally{B.transition=ae}},or.unstable_act=re,or.useCallback=function(U,ae){return G.current.useCallback(U,ae)},or.useContext=function(U){return G.current.useContext(U)},or.useDebugValue=function(){},or.useDeferredValue=function(U){return G.current.useDeferredValue(U)},or.useEffect=function(U,ae){return G.current.useEffect(U,ae)},or.useId=function(){return G.current.useId()},or.useImperativeHandle=function(U,ae,W){return G.current.useImperativeHandle(U,ae,W)},or.useInsertionEffect=function(U,ae){return G.current.useInsertionEffect(U,ae)},or.useLayoutEffect=function(U,ae){return G.current.useLayoutEffect(U,ae)},or.useMemo=function(U,ae){return G.current.useMemo(U,ae)},or.useReducer=function(U,ae,W){return G.current.useReducer(U,ae,W)},or.useRef=function(U){return G.current.useRef(U)},or.useState=function(U){return G.current.useState(U)},or.useSyncExternalStore=function(U,ae,W){return G.current.useSyncExternalStore(U,ae,W)},or.useTransition=function(){return G.current.useTransition()},or.version="18.3.1",or}var GN;function mu(){return GN||(GN=1,xg.exports=b5()),xg.exports}var KN;function v5(){if(KN)return td;KN=1;var e=mu(),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,m){var p,f={},x=null,w=null;m!==void 0&&(x=""+m),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(w=u.ref);for(p in u)n.call(u,p)&&!o.hasOwnProperty(p)&&(f[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)f[p]===void 0&&(f[p]=u[p]);return{$$typeof:t,type:d,key:x,ref:w,props:f,_owner:s.current}}return td.Fragment=a,td.jsx=l,td.jsxs=l,td}var YN;function j5(){return YN||(YN=1,gg.exports=v5()),gg.exports}var r=j5(),Cm={},yg={exports:{}},kn={},bg={exports:{}},vg={};var XN;function w5(){return XN||(XN=1,(function(e){function t(B,F){var re=B.length;B.push(F);e:for(;0<re;){var U=re-1>>>1,ae=B[U];if(0<s(ae,F))B[U]=F,B[re]=ae,re=U;else break e}}function a(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var F=B[0],re=B.pop();if(re!==F){B[0]=re;e:for(var U=0,ae=B.length,W=ae>>>1;U<W;){var fe=2*(U+1)-1,Se=B[fe],Ie=fe+1,te=B[Ie];if(0>s(Se,re))Ie<ae&&0>s(te,Se)?(B[U]=te,B[Ie]=re,U=Ie):(B[U]=Se,B[fe]=re,U=fe);else if(Ie<ae&&0>s(te,re))B[U]=te,B[Ie]=re,U=Ie;else break e}}return F}function s(B,F){var re=B.sortIndex-F.sortIndex;return re!==0?re:B.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],m=[],p=1,f=null,x=3,w=!1,j=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(B){for(var F=a(m);F!==null;){if(F.callback===null)n(m);else if(F.startTime<=B)n(m),F.sortIndex=F.expirationTime,t(u,F);else break;F=a(m)}}function A(B){if(v=!1,P(B),!j)if(a(u)!==null)j=!0,oe(k);else{var F=a(m);F!==null&&G(A,F.startTime-B)}}function k(B,F){j=!1,v&&(v=!1,I(R),R=-1),w=!0;var re=x;try{for(P(F),f=a(u);f!==null&&(!(f.expirationTime>F)||B&&!L());){var U=f.callback;if(typeof U=="function"){f.callback=null,x=f.priorityLevel;var ae=U(f.expirationTime<=F);F=e.unstable_now(),typeof ae=="function"?f.callback=ae:f===a(u)&&n(u),P(F)}else n(u);f=a(u)}if(f!==null)var W=!0;else{var fe=a(m);fe!==null&&G(A,fe.startTime-F),W=!1}return W}finally{f=null,x=re,w=!1}}var E=!1,_=null,R=-1,$=5,H=-1;function L(){return!(e.unstable_now()-H<$)}function Y(){if(_!==null){var B=e.unstable_now();H=B;var F=!0;try{F=_(!0,B)}finally{F?X():(E=!1,_=null)}}else E=!1}var X;if(typeof T=="function")X=function(){T(Y)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,K=me.port2;me.port1.onmessage=Y,X=function(){K.postMessage(null)}}else X=function(){b(Y,0)};function oe(B){_=B,E||(E=!0,X())}function G(B,F){R=b(function(){B(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,oe(k))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return a(u)},e.unstable_next=function(B){switch(x){case 1:case 2:case 3:var F=3;break;default:F=x}var re=x;x=F;try{return B()}finally{x=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=x;x=B;try{return F()}finally{x=re}},e.unstable_scheduleCallback=function(B,F,re){var U=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?U+re:U):re=U,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=re+ae,B={id:p++,callback:F,priorityLevel:B,startTime:re,expirationTime:ae,sortIndex:-1},re>U?(B.sortIndex=re,t(m,B),a(u)===null&&B===a(m)&&(v?(I(R),R=-1):v=!0,G(A,re-U))):(B.sortIndex=ae,t(u,B),j||w||(j=!0,oe(k))),B},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(B){var F=x;return function(){var re=x;x=F;try{return B.apply(this,arguments)}finally{x=re}}}})(vg)),vg}var JN;function N5(){return JN||(JN=1,bg.exports=w5()),bg.exports}var ZN;function S5(){if(ZN)return kn;ZN=1;var e=mu(),t=N5();function a(i){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,c){l(i,c),l(i+"Capture",c)}function l(i,c){for(s[i]=c,i=0;i<c.length;i++)n.add(c[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function x(i){return u.call(f,i)?!0:u.call(p,i)?!1:m.test(i)?f[i]=!0:(p[i]=!0,!1)}function w(i,c,h,y){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,c,h,y){if(c===null||typeof c>"u"||w(i,c,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function v(i,c,h,y,C,M,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=C,this.mustUseProperty=h,this.propertyName=i,this.type=c,this.sanitizeURL=M,this.removeEmptyString=V}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new v(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var c=i[0];b[c]=new v(c,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new v(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new v(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new v(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new v(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var c=i.replace(I,T);b[c]=new v(c,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var c=i.replace(I,T);b[c]=new v(c,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var c=i.replace(I,T);b[c]=new v(c,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,c,h,y){var C=b.hasOwnProperty(c)?b[c]:null;(C!==null?C.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,C,y)&&(h=null),y||C===null?x(c)&&(h===null?i.removeAttribute(c):i.setAttribute(c,""+h)):C.mustUseProperty?i[C.propertyName]=h===null?C.type===3?!1:"":h:(c=C.attributeName,y=C.attributeNamespace,h===null?i.removeAttribute(c):(C=C.type,h=C===3||C===4&&h===!0?"":""+h,y?i.setAttributeNS(y,c,h):i.setAttribute(c,h))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),L=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),B=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var re=Object.assign,U;function ae(i){if(U===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+i}var W=!1;function fe(i,c){if(!i||W)return"";W=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ze){var y=ze}Reflect.construct(i,[],c)}else{try{c.call()}catch(ze){y=ze}i.call(c.prototype)}else{try{throw Error()}catch(ze){y=ze}i()}}catch(ze){if(ze&&y&&typeof ze.stack=="string"){for(var C=ze.stack.split(`
`),M=y.stack.split(`
`),V=C.length-1,he=M.length-1;1<=V&&0<=he&&C[V]!==M[he];)he--;for(;1<=V&&0<=he;V--,he--)if(C[V]!==M[he]){if(V!==1||he!==1)do if(V--,he--,0>he||C[V]!==M[he]){var ye=`
`+C[V].replace(" at new "," at ");return i.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",i.displayName)),ye}while(1<=V&&0<=he);break}}}finally{W=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?ae(i):""}function Se(i){switch(i.tag){case 5:return ae(i.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return i=fe(i.type,!1),i;case 11:return i=fe(i.type.render,!1),i;case 1:return i=fe(i.type,!0),i;default:return""}}function Ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case E:return"Portal";case $:return"Profiler";case R:return"StrictMode";case X:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case H:return(i._context.displayName||"Context")+".Provider";case Y:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return c=i.displayName||null,c!==null?c:Ie(i.type)||"Memo";case oe:c=i._payload,i=i._init;try{return Ie(i(c))}catch{}}return null}function te(i){var c=i.type;switch(i.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=c.render,i=i.displayName||i.name||"",c.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Q(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function de(i){var c=Q(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),y=""+i[c];if(!i.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var C=h.get,M=h.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return C.call(this)},set:function(V){y=""+V,M.call(this,V)}}),Object.defineProperty(i,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(V){y=""+V},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function we(i){i._valueTracker||(i._valueTracker=de(i))}function ce(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return i&&(y=Q(i)?i.checked?"true":"false":i.value),i=y,i!==h?(c.setValue(i),!0):!1}function Ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Be(i,c){var h=c.checked;return re({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function at(i,c){var h=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;h=se(c.value!=null?c.value:h),i._wrapperState={initialChecked:y,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function pe(i,c){c=c.checked,c!=null&&P(i,"checked",c,!1)}function tt(i,c){pe(i,c);var h=se(c.value),y=c.type;if(h!=null)y==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(y==="submit"||y==="reset"){i.removeAttribute("value");return}c.hasOwnProperty("value")?vt(i,c.type,h):c.hasOwnProperty("defaultValue")&&vt(i,c.type,se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(i.defaultChecked=!!c.defaultChecked)}function ut(i,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+i._wrapperState.initialValue,h||c===i.value||(i.value=c),i.defaultValue=c}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function vt(i,c,h){(c!=="number"||Ve(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var Nt=Array.isArray;function tr(i,c,h,y){if(i=i.options,c){c={};for(var C=0;C<h.length;C++)c["$"+h[C]]=!0;for(h=0;h<i.length;h++)C=c.hasOwnProperty("$"+i[h].value),i[h].selected!==C&&(i[h].selected=C),C&&y&&(i[h].defaultSelected=!0)}else{for(h=""+se(h),c=null,C=0;C<i.length;C++){if(i[C].value===h){i[C].selected=!0,y&&(i[C].defaultSelected=!0);return}c!==null||i[C].disabled||(c=i[C])}c!==null&&(c.selected=!0)}}function ar(i,c){if(c.dangerouslySetInnerHTML!=null)throw Error(a(91));return re({},c,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function jt(i,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(a(92));if(Nt(h)){if(1<h.length)throw Error(a(93));h=h[0]}c=h}c==null&&(c=""),h=c}i._wrapperState={initialValue:se(h)}}function Kt(i,c){var h=se(c.value),y=se(c.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),c.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),y!=null&&(i.defaultValue=""+y)}function De(i){var c=i.textContent;c===i._wrapperState.initialValue&&c!==""&&c!==null&&(i.value=c)}function et(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(i,c){return i==null||i==="http://www.w3.org/1999/xhtml"?et(c):i==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Xe,ot=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,y,C){MSApp.execUnsafeLocalFunction(function(){return i(c,h,y,C)})}:i})(function(i,c){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=c;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Xe.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;c.firstChild;)i.appendChild(c.firstChild)}});function Ot(i,c){if(c){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=c;return}}i.textContent=c}var Lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(Lt).forEach(function(i){gt.forEach(function(c){c=c+i.charAt(0).toUpperCase()+i.substring(1),Lt[c]=Lt[i]})});function nr(i,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Lt.hasOwnProperty(i)&&Lt[i]?(""+c).trim():c+"px"}function Rt(i,c){i=i.style;for(var h in c)if(c.hasOwnProperty(h)){var y=h.indexOf("--")===0,C=nr(h,c[h],y);h==="float"&&(h="cssFloat"),y?i.setProperty(h,C):i[h]=C}}var Pr=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N(i,c){if(c){if(Pr[i]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(a(137,i));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(a(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(a(61))}if(c.style!=null&&typeof c.style!="object")throw Error(a(62))}}function Ne(i,c){if(i.indexOf("-")===-1)return typeof c.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Br=null;function Zt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pe=null,st=null,qe=null;function lt(i){if(i=Bc(i)){if(typeof Pe!="function")throw Error(a(280));var c=i.stateNode;c&&(c=Fu(c),Pe(i.stateNode,i.type,c))}}function ee(i){st?qe?qe.push(i):qe=[i]:st=i}function Ce(){if(st){var i=st,c=qe;if(qe=st=null,lt(i),c)for(i=0;i<c.length;i++)lt(c[i])}}function Fe(i,c){return i(c)}function ke(){}var Ue=!1;function We(i,c,h){if(Ue)return i(c,h);Ue=!0;try{return Fe(i,c,h)}finally{Ue=!1,(st!==null||qe!==null)&&(ke(),Ce())}}function ft(i,c){var h=i.stateNode;if(h===null)return null;var y=Fu(h);if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(a(231,c,typeof h));return h}var Mt=!1;if(d)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Mt=!1}function Vr(i,c,h,y,C,M,V,he,ye){var ze=Array.prototype.slice.call(arguments,3);try{c.apply(h,ze)}catch(nt){this.onError(nt)}}var Gr=!1,Yt=null,Ur=!1,ur=null,_t={onError:function(i){Gr=!0,Yt=i}};function ra(i,c,h,y,C,M,V,he,ye){Gr=!1,Yt=null,Vr.apply(_t,arguments)}function pr(i,c,h,y,C,M,V,he,ye){if(ra.apply(this,arguments),Gr){if(Gr){var ze=Yt;Gr=!1,Yt=null}else throw Error(a(198));Ur||(Ur=!0,ur=ze)}}function Or(i){var c=i,h=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(h=c.return),i=c.return;while(i)}return c.tag===3?h:null}function Cr(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function La(i){if(Or(i)!==i)throw Error(a(188))}function xn(i){var c=i.alternate;if(!c){if(c=Or(i),c===null)throw Error(a(188));return c!==i?null:i}for(var h=i,y=c;;){var C=h.return;if(C===null)break;var M=C.alternate;if(M===null){if(y=C.return,y!==null){h=y;continue}break}if(C.child===M.child){for(M=C.child;M;){if(M===h)return La(C),i;if(M===y)return La(C),c;M=M.sibling}throw Error(a(188))}if(h.return!==y.return)h=C,y=M;else{for(var V=!1,he=C.child;he;){if(he===h){V=!0,h=C,y=M;break}if(he===y){V=!0,y=C,h=M;break}he=he.sibling}if(!V){for(he=M.child;he;){if(he===h){V=!0,h=M,y=C;break}if(he===y){V=!0,y=M,h=C;break}he=he.sibling}if(!V)throw Error(a(189))}}if(h.alternate!==y)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?i:c}function Aa(i){return i=xn(i),i!==null?Va(i):null}function Va(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var c=Va(i);if(c!==null)return c;i=i.sibling}return null}var Ga=t.unstable_scheduleCallback,Pa=t.unstable_cancelCallback,Is=t.unstable_shouldYield,Pi=t.unstable_requestPaint,kr=t.unstable_now,ja=t.unstable_getCurrentPriorityLevel,As=t.unstable_ImmediatePriority,On=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,yn=t.unstable_LowPriority,nn=t.unstable_IdlePriority,sn=null,Ea=null;function ms(i){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(sn,i,void 0,(i.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:Ps,Xs=Math.log,Js=Math.LN2;function Ps(i){return i>>>=0,i===0?32:31-(Xs(i)/Js|0)|0}var _n=64,hs=4194304;function ca(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Mn(i,c){var h=i.pendingLanes;if(h===0)return 0;var y=0,C=i.suspendedLanes,M=i.pingedLanes,V=h&268435455;if(V!==0){var he=V&~C;he!==0?y=ca(he):(M&=V,M!==0&&(y=ca(M)))}else V=h&~C,V!==0?y=ca(V):M!==0&&(y=ca(M));if(y===0)return 0;if(c!==0&&c!==y&&(c&C)===0&&(C=y&-y,M=c&-c,C>=M||C===16&&(M&4194240)!==0))return c;if((y&4)!==0&&(y|=h&16),c=i.entangledLanes,c!==0)for(i=i.entanglements,c&=y;0<c;)h=31-aa(c),C=1<<h,y|=i[h],c&=~C;return y}function D(i,c){switch(i){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q(i,c){for(var h=i.suspendedLanes,y=i.pingedLanes,C=i.expirationTimes,M=i.pendingLanes;0<M;){var V=31-aa(M),he=1<<V,ye=C[V];ye===-1?((he&h)===0||(he&y)!==0)&&(C[V]=D(he,c)):ye<=c&&(i.expiredLanes|=he),M&=~he}}function Z(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ie(){var i=_n;return _n<<=1,(_n&4194240)===0&&(_n=64),i}function Re(i){for(var c=[],h=0;31>h;h++)c.push(i);return c}function Ee(i,c,h){i.pendingLanes|=c,c!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,c=31-aa(c),i[c]=h}function Ye(i,c){var h=i.pendingLanes&~c;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=c,i.mutableReadLanes&=c,i.entangledLanes&=c,c=i.entanglements;var y=i.eventTimes;for(i=i.expirationTimes;0<h;){var C=31-aa(h),M=1<<C;c[C]=0,y[C]=-1,i[C]=-1,h&=~M}}function dt(i,c){var h=i.entangledLanes|=c;for(i=i.entanglements;h;){var y=31-aa(h),C=1<<y;C&c|i[y]&c&&(i[y]|=c),h&=~C}}var xt=0;function $t(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ht,br,Ka,Fa,g,ue=!1,Te=[],ve=null,le=null,be=null,_e=new Map,Ze=new Map,Ge=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xt(i,c){switch(i){case"focusin":case"focusout":ve=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":be=null;break;case"pointerover":case"pointerout":_e.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ze.delete(c.pointerId)}}function Et(i,c,h,y,C,M){return i===null||i.nativeEvent!==M?(i={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:M,targetContainers:[C]},c!==null&&(c=Bc(c),c!==null&&br(c)),i):(i.eventSystemFlags|=y,c=i.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),i)}function na(i,c,h,y,C){switch(c){case"focusin":return ve=Et(ve,i,c,h,y,C),!0;case"dragenter":return le=Et(le,i,c,h,y,C),!0;case"mouseover":return be=Et(be,i,c,h,y,C),!0;case"pointerover":var M=C.pointerId;return _e.set(M,Et(_e.get(M)||null,i,c,h,y,C)),!0;case"gotpointercapture":return M=C.pointerId,Ze.set(M,Et(Ze.get(M)||null,i,c,h,y,C)),!0}return!1}function It(i){var c=po(i.target);if(c!==null){var h=Or(c);if(h!==null){if(c=h.tag,c===13){if(c=Cr(h),c!==null){i.blockedOn=c,g(i.priority,function(){Ka(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _r(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var h=pa(i.domEventName,i.eventSystemFlags,c[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var y=new h.constructor(h.type,h);Br=y,h.target.dispatchEvent(y),Br=null}else return c=Bc(h),c!==null&&br(c),i.blockedOn=h,!1;c.shift()}return!0}function mr(i,c,h){_r(i)&&h.delete(c)}function Tt(){ue=!1,ve!==null&&_r(ve)&&(ve=null),le!==null&&_r(le)&&(le=null),be!==null&&_r(be)&&(be=null),_e.forEach(mr),Ze.forEach(mr)}function hr(i,c){i.blockedOn===c&&(i.blockedOn=null,ue||(ue=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Tt)))}function Kr(i){function c(C){return hr(C,i)}if(0<Te.length){hr(Te[0],i);for(var h=1;h<Te.length;h++){var y=Te[h];y.blockedOn===i&&(y.blockedOn=null)}}for(ve!==null&&hr(ve,i),le!==null&&hr(le,i),be!==null&&hr(be,i),_e.forEach(c),Ze.forEach(c),h=0;h<Ge.length;h++)y=Ge[h],y.blockedOn===i&&(y.blockedOn=null);for(;0<Ge.length&&(h=Ge[0],h.blockedOn===null);)It(h),h.blockedOn===null&&Ge.shift()}var Qt=A.ReactCurrentBatchConfig,ir=!0;function da(i,c,h,y){var C=xt,M=Qt.transition;Qt.transition=null;try{xt=1,Zr(i,c,h,y)}finally{xt=C,Qt.transition=M}}function Jr(i,c,h,y){var C=xt,M=Qt.transition;Qt.transition=null;try{xt=4,Zr(i,c,h,y)}finally{xt=C,Qt.transition=M}}function Zr(i,c,h,y){if(ir){var C=pa(i,c,h,y);if(C===null)ip(i,c,y,Mr,h),Xt(i,y);else if(na(C,i,c,h,y))y.stopPropagation();else if(Xt(i,y),c&4&&-1<Ke.indexOf(i)){for(;C!==null;){var M=Bc(C);if(M!==null&&Ht(M),M=pa(i,c,h,y),M===null&&ip(i,c,y,Mr,h),M===C)break;C=M}C!==null&&y.stopPropagation()}else ip(i,c,y,null,h)}}var Mr=null;function pa(i,c,h,y){if(Mr=null,i=Zt(y),i=po(i),i!==null)if(c=Or(i),c===null)i=null;else if(h=c.tag,h===13){if(i=Cr(c),i!==null)return i;i=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null);return Mr=i,null}function ua(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ja()){case As:return 1;case On:return 4;case Vn:case yn:return 16;case nn:return 536870912;default:return 16}default:return 16}}var ga=null,vr=null,gr=null;function on(){if(gr)return gr;var i,c=vr,h=c.length,y,C="value"in ga?ga.value:ga.textContent,M=C.length;for(i=0;i<h&&c[i]===C[i];i++);var V=h-i;for(y=1;y<=V&&c[h-y]===C[M-y];y++);return gr=C.slice(i,1<y?1-y:void 0)}function Rn(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function xa(){return!0}function zr(){return!1}function Ba(i){function c(h,y,C,M,V){this._reactName=h,this._targetInst=C,this.type=y,this.nativeEvent=M,this.target=V,this.currentTarget=null;for(var he in i)i.hasOwnProperty(he)&&(h=i[he],this[he]=h?h(M):M[he]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?xa:zr,this.isPropagationStopped=zr,this}return re(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),c}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Ba(Ei),mo=re({},Ei,{view:0,detail:0}),Cc=Ba(mo),Ti,Qs,Es,ho=re({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Es&&(Es&&i.type==="mousemove"?(Ti=i.screenX-Es.screenX,Qs=i.screenY-Es.screenY):Qs=Ti=0,Es=i),Ti)},movementY:function(i){return"movementY"in i?i.movementY:Qs}}),kc=Ba(ho),ku=re({},ho,{dataTransfer:0}),Ic=Ba(ku),ln=re({},mo,{relatedTarget:0}),al=Ba(ln),Ac=re({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Xf=Ba(Ac),Iu=re({},Ei,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nl=Ba(Iu),Au=re({},Ei,{data:0}),Pc=Ba(Au),sl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},il={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=Pu[i])?!!c[i]:!1}function ol(){return Eu}var Ec=re({},mo,{key:function(i){if(i.key){var c=sl[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Rn(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?il[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(i){return i.type==="keypress"?Rn(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rn(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Tu=Ba(Ec),O=re({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z=Ba(O),J=re({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),ne=Ba(J),Le=re({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Me=Ba(Le),Qe=re({},ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=Ba(Qe),Ut=[9,13,27,32],Jt=d&&"CompositionEvent"in window,Wt=null;d&&"documentMode"in document&&(Wt=document.documentMode);var Tr=d&&"TextEvent"in window&&!Wt,Ya=d&&(!Jt||Wt&&8<Wt&&11>=Wt),bn=" ",vn=!1;function fo(i,c){switch(i){case"keyup":return Ut.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ts=!1;function pO(i,c){switch(i){case"compositionend":return Tc(c);case"keypress":return c.which!==32?null:(vn=!0,bn);case"textInput":return i=c.data,i===bn&&vn?null:i;default:return null}}function gO(i,c){if(Ts)return i==="compositionend"||!Jt&&fo(i,c)?(i=on(),gr=vr=ga=null,Ts=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ya&&c.locale!=="ko"?null:c.data;default:return null}}var xO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qj(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!xO[i.type]:c==="textarea"}function Hj(i,c,h,y){ee(y),c=Ru(c,"onChange"),0<c.length&&(h=new Zs("onChange","change",null,h,y),i.push({event:h,listeners:c}))}var Dc=null,Oc=null;function yO(i){lw(i,0)}function Du(i){var c=ml(i);if(ce(c))return i}function bO(i,c){if(i==="change")return c}var Wj=!1;if(d){var Jf;if(d){var Zf="oninput"in document;if(!Zf){var Vj=document.createElement("div");Vj.setAttribute("oninput","return;"),Zf=typeof Vj.oninput=="function"}Jf=Zf}else Jf=!1;Wj=Jf&&(!document.documentMode||9<document.documentMode)}function Gj(){Dc&&(Dc.detachEvent("onpropertychange",Kj),Oc=Dc=null)}function Kj(i){if(i.propertyName==="value"&&Du(Oc)){var c=[];Hj(c,Oc,i,Zt(i)),We(yO,c)}}function vO(i,c,h){i==="focusin"?(Gj(),Dc=c,Oc=h,Dc.attachEvent("onpropertychange",Kj)):i==="focusout"&&Gj()}function jO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Du(Oc)}function wO(i,c){if(i==="click")return Du(c)}function NO(i,c){if(i==="input"||i==="change")return Du(c)}function SO(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var fs=typeof Object.is=="function"?Object.is:SO;function _c(i,c){if(fs(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var h=Object.keys(i),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var C=h[y];if(!u.call(c,C)||!fs(i[C],c[C]))return!1}return!0}function Yj(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xj(i,c){var h=Yj(i);i=0;for(var y;h;){if(h.nodeType===3){if(y=i+h.textContent.length,i<=c&&y>=c)return{node:h,offset:c-i};i=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Yj(h)}}function Jj(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?Jj(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Zj(){for(var i=window,c=Ve();c instanceof i.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)i=c.contentWindow;else break;c=Ve(i.document)}return c}function Qf(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function CO(i){var c=Zj(),h=i.focusedElem,y=i.selectionRange;if(c!==h&&h&&h.ownerDocument&&Jj(h.ownerDocument.documentElement,h)){if(y!==null&&Qf(h)){if(c=y.start,i=y.end,i===void 0&&(i=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(i,h.value.length);else if(i=(c=h.ownerDocument||document)&&c.defaultView||window,i.getSelection){i=i.getSelection();var C=h.textContent.length,M=Math.min(y.start,C);y=y.end===void 0?M:Math.min(y.end,C),!i.extend&&M>y&&(C=y,y=M,M=C),C=Xj(h,M);var V=Xj(h,y);C&&V&&(i.rangeCount!==1||i.anchorNode!==C.node||i.anchorOffset!==C.offset||i.focusNode!==V.node||i.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),i.removeAllRanges(),M>y?(i.addRange(c),i.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),i.addRange(c)))}}for(c=[],i=h;i=i.parentNode;)i.nodeType===1&&c.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)i=c[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var kO=d&&"documentMode"in document&&11>=document.documentMode,ll=null,ep=null,Mc=null,tp=!1;function Qj(i,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;tp||ll==null||ll!==Ve(y)||(y=ll,"selectionStart"in y&&Qf(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Mc&&_c(Mc,y)||(Mc=y,y=Ru(ep,"onSelect"),0<y.length&&(c=new Zs("onSelect","select",null,c,h),i.push({event:c,listeners:y}),c.target=ll)))}function Ou(i,c){var h={};return h[i.toLowerCase()]=c.toLowerCase(),h["Webkit"+i]="webkit"+c,h["Moz"+i]="moz"+c,h}var cl={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},rp={},ew={};d&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function _u(i){if(rp[i])return rp[i];if(!cl[i])return i;var c=cl[i],h;for(h in c)if(c.hasOwnProperty(h)&&h in ew)return rp[i]=c[h];return i}var tw=_u("animationend"),rw=_u("animationiteration"),aw=_u("animationstart"),nw=_u("transitionend"),sw=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(i,c){sw.set(i,c),o(c,[i])}for(var ap=0;ap<iw.length;ap++){var np=iw[ap],IO=np.toLowerCase(),AO=np[0].toUpperCase()+np.slice(1);Di(IO,"on"+AO)}Di(tw,"onAnimationEnd"),Di(rw,"onAnimationIteration"),Di(aw,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(nw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function ow(i,c,h){var y=i.type||"unknown-event";i.currentTarget=h,pr(y,c,void 0,i),i.currentTarget=null}function lw(i,c){c=(c&4)!==0;for(var h=0;h<i.length;h++){var y=i[h],C=y.event;y=y.listeners;e:{var M=void 0;if(c)for(var V=y.length-1;0<=V;V--){var he=y[V],ye=he.instance,ze=he.currentTarget;if(he=he.listener,ye!==M&&C.isPropagationStopped())break e;ow(C,he,ze),M=ye}else for(V=0;V<y.length;V++){if(he=y[V],ye=he.instance,ze=he.currentTarget,he=he.listener,ye!==M&&C.isPropagationStopped())break e;ow(C,he,ze),M=ye}}}if(Ur)throw i=ur,Ur=!1,ur=null,i}function qr(i,c){var h=c[mp];h===void 0&&(h=c[mp]=new Set);var y=i+"__bubble";h.has(y)||(cw(c,i,2,!1),h.add(y))}function sp(i,c,h){var y=0;c&&(y|=4),cw(h,i,y,c)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function $c(i){if(!i[Mu]){i[Mu]=!0,n.forEach(function(h){h!=="selectionchange"&&(PO.has(h)||sp(h,!1,i),sp(h,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[Mu]||(c[Mu]=!0,sp("selectionchange",!1,c))}}function cw(i,c,h,y){switch(ua(c)){case 1:var C=da;break;case 4:C=Jr;break;default:C=Zr}h=C.bind(null,c,h,i),C=void 0,!Mt||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),y?C!==void 0?i.addEventListener(c,h,{capture:!0,passive:C}):i.addEventListener(c,h,!0):C!==void 0?i.addEventListener(c,h,{passive:C}):i.addEventListener(c,h,!1)}function ip(i,c,h,y,C){var M=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var he=y.stateNode.containerInfo;if(he===C||he.nodeType===8&&he.parentNode===C)break;if(V===4)for(V=y.return;V!==null;){var ye=V.tag;if((ye===3||ye===4)&&(ye=V.stateNode.containerInfo,ye===C||ye.nodeType===8&&ye.parentNode===C))return;V=V.return}for(;he!==null;){if(V=po(he),V===null)return;if(ye=V.tag,ye===5||ye===6){y=M=V;continue e}he=he.parentNode}}y=y.return}We(function(){var ze=M,nt=Zt(h),it=[];e:{var rt=sw.get(i);if(rt!==void 0){var wt=Zs,At=i;switch(i){case"keypress":if(Rn(h)===0)break e;case"keydown":case"keyup":wt=Tu;break;case"focusin":At="focus",wt=al;break;case"focusout":At="blur",wt=al;break;case"beforeblur":case"afterblur":wt=al;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=Ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=ne;break;case tw:case rw:case aw:wt=Xf;break;case nw:wt=Me;break;case"scroll":wt=Cc;break;case"wheel":wt=ct;break;case"copy":case"cut":case"paste":wt=nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=z}var Pt=(c&4)!==0,ma=!Pt&&i==="scroll",Oe=Pt?rt!==null?rt+"Capture":null:rt;Pt=[];for(var je=ze,$e;je!==null;){$e=je;var mt=$e.stateNode;if($e.tag===5&&mt!==null&&($e=mt,Oe!==null&&(mt=ft(je,Oe),mt!=null&&Pt.push(Lc(je,mt,$e)))),ma)break;je=je.return}0<Pt.length&&(rt=new wt(rt,At,null,h,nt),it.push({event:rt,listeners:Pt}))}}if((c&7)===0){e:{if(rt=i==="mouseover"||i==="pointerover",wt=i==="mouseout"||i==="pointerout",rt&&h!==Br&&(At=h.relatedTarget||h.fromElement)&&(po(At)||At[ei]))break e;if((wt||rt)&&(rt=nt.window===nt?nt:(rt=nt.ownerDocument)?rt.defaultView||rt.parentWindow:window,wt?(At=h.relatedTarget||h.toElement,wt=ze,At=At?po(At):null,At!==null&&(ma=Or(At),At!==ma||At.tag!==5&&At.tag!==6)&&(At=null)):(wt=null,At=ze),wt!==At)){if(Pt=kc,mt="onMouseLeave",Oe="onMouseEnter",je="mouse",(i==="pointerout"||i==="pointerover")&&(Pt=z,mt="onPointerLeave",Oe="onPointerEnter",je="pointer"),ma=wt==null?rt:ml(wt),$e=At==null?rt:ml(At),rt=new Pt(mt,je+"leave",wt,h,nt),rt.target=ma,rt.relatedTarget=$e,mt=null,po(nt)===ze&&(Pt=new Pt(Oe,je+"enter",At,h,nt),Pt.target=$e,Pt.relatedTarget=ma,mt=Pt),ma=mt,wt&&At)t:{for(Pt=wt,Oe=At,je=0,$e=Pt;$e;$e=dl($e))je++;for($e=0,mt=Oe;mt;mt=dl(mt))$e++;for(;0<je-$e;)Pt=dl(Pt),je--;for(;0<$e-je;)Oe=dl(Oe),$e--;for(;je--;){if(Pt===Oe||Oe!==null&&Pt===Oe.alternate)break t;Pt=dl(Pt),Oe=dl(Oe)}Pt=null}else Pt=null;wt!==null&&dw(it,rt,wt,Pt,!1),At!==null&&ma!==null&&dw(it,ma,At,Pt,!0)}}e:{if(rt=ze?ml(ze):window,wt=rt.nodeName&&rt.nodeName.toLowerCase(),wt==="select"||wt==="input"&&rt.type==="file")var Dt=bO;else if(qj(rt))if(Wj)Dt=NO;else{Dt=jO;var Ft=vO}else(wt=rt.nodeName)&&wt.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Dt=wO);if(Dt&&(Dt=Dt(i,ze))){Hj(it,Dt,h,nt);break e}Ft&&Ft(i,rt,ze),i==="focusout"&&(Ft=rt._wrapperState)&&Ft.controlled&&rt.type==="number"&&vt(rt,"number",rt.value)}switch(Ft=ze?ml(ze):window,i){case"focusin":(qj(Ft)||Ft.contentEditable==="true")&&(ll=Ft,ep=ze,Mc=null);break;case"focusout":Mc=ep=ll=null;break;case"mousedown":tp=!0;break;case"contextmenu":case"mouseup":case"dragend":tp=!1,Qj(it,h,nt);break;case"selectionchange":if(kO)break;case"keydown":case"keyup":Qj(it,h,nt)}var Bt;if(Jt)e:{switch(i){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else Ts?fo(i,h)&&(Vt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Vt="onCompositionStart");Vt&&(Ya&&h.locale!=="ko"&&(Ts||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Ts&&(Bt=on()):(ga=nt,vr="value"in ga?ga.value:ga.textContent,Ts=!0)),Ft=Ru(ze,Vt),0<Ft.length&&(Vt=new Pc(Vt,i,null,h,nt),it.push({event:Vt,listeners:Ft}),Bt?Vt.data=Bt:(Bt=Tc(h),Bt!==null&&(Vt.data=Bt)))),(Bt=Tr?pO(i,h):gO(i,h))&&(ze=Ru(ze,"onBeforeInput"),0<ze.length&&(nt=new Pc("onBeforeInput","beforeinput",null,h,nt),it.push({event:nt,listeners:ze}),nt.data=Bt))}lw(it,c)})}function Lc(i,c,h){return{instance:i,listener:c,currentTarget:h}}function Ru(i,c){for(var h=c+"Capture",y=[];i!==null;){var C=i,M=C.stateNode;C.tag===5&&M!==null&&(C=M,M=ft(i,h),M!=null&&y.unshift(Lc(i,M,C)),M=ft(i,c),M!=null&&y.push(Lc(i,M,C))),i=i.return}return y}function dl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function dw(i,c,h,y,C){for(var M=c._reactName,V=[];h!==null&&h!==y;){var he=h,ye=he.alternate,ze=he.stateNode;if(ye!==null&&ye===y)break;he.tag===5&&ze!==null&&(he=ze,C?(ye=ft(h,M),ye!=null&&V.unshift(Lc(h,ye,he))):C||(ye=ft(h,M),ye!=null&&V.push(Lc(h,ye,he)))),h=h.return}V.length!==0&&i.push({event:c,listeners:V})}var EO=/\r\n?/g,TO=/\u0000|\uFFFD/g;function uw(i){return(typeof i=="string"?i:""+i).replace(EO,`
`).replace(TO,"")}function $u(i,c,h){if(c=uw(c),uw(i)!==c&&h)throw Error(a(425))}function Lu(){}var op=null,lp=null;function cp(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,DO=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,OO=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(i){return mw.resolve(null).then(i).catch(_O)}:dp;function _O(i){setTimeout(function(){throw i})}function up(i,c){var h=c,y=0;do{var C=h.nextSibling;if(i.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(y===0){i.removeChild(C),Kr(c);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=C}while(h);Kr(c)}function Oi(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return i}function hw(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return i;c--}else h==="/$"&&c++}i=i.previousSibling}return null}var ul=Math.random().toString(36).slice(2),Ds="__reactFiber$"+ul,Fc="__reactProps$"+ul,ei="__reactContainer$"+ul,mp="__reactEvents$"+ul,MO="__reactListeners$"+ul,RO="__reactHandles$"+ul;function po(i){var c=i[Ds];if(c)return c;for(var h=i.parentNode;h;){if(c=h[ei]||h[Ds]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(i=hw(i);i!==null;){if(h=i[Ds])return h;i=hw(i)}return c}i=h,h=i.parentNode}return null}function Bc(i){return i=i[Ds]||i[ei],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ml(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(a(33))}function Fu(i){return i[Fc]||null}var hp=[],hl=-1;function _i(i){return{current:i}}function Hr(i){0>hl||(i.current=hp[hl],hp[hl]=null,hl--)}function Rr(i,c){hl++,hp[hl]=i.current,i.current=c}var Mi={},Xa=_i(Mi),jn=_i(!1),go=Mi;function fl(i,c){var h=i.type.contextTypes;if(!h)return Mi;var y=i.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var C={},M;for(M in h)C[M]=c[M];return y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=c,i.__reactInternalMemoizedMaskedChildContext=C),C}function wn(i){return i=i.childContextTypes,i!=null}function Bu(){Hr(jn),Hr(Xa)}function fw(i,c,h){if(Xa.current!==Mi)throw Error(a(168));Rr(Xa,c),Rr(jn,h)}function pw(i,c,h){var y=i.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var C in y)if(!(C in c))throw Error(a(108,te(i)||"Unknown",C));return re({},h,y)}function Uu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mi,go=Xa.current,Rr(Xa,i),Rr(jn,jn.current),!0}function gw(i,c,h){var y=i.stateNode;if(!y)throw Error(a(169));h?(i=pw(i,c,go),y.__reactInternalMemoizedMergedChildContext=i,Hr(jn),Hr(Xa),Rr(Xa,i)):Hr(jn),Rr(jn,h)}var ti=null,zu=!1,fp=!1;function xw(i){ti===null?ti=[i]:ti.push(i)}function $O(i){zu=!0,xw(i)}function Ri(){if(!fp&&ti!==null){fp=!0;var i=0,c=xt;try{var h=ti;for(xt=1;i<h.length;i++){var y=h[i];do y=y(!0);while(y!==null)}ti=null,zu=!1}catch(C){throw ti!==null&&(ti=ti.slice(i+1)),Ga(As,Ri),C}finally{xt=c,fp=!1}}return null}var pl=[],gl=0,qu=null,Hu=0,Gn=[],Kn=0,xo=null,ri=1,ai="";function yo(i,c){pl[gl++]=Hu,pl[gl++]=qu,qu=i,Hu=c}function yw(i,c,h){Gn[Kn++]=ri,Gn[Kn++]=ai,Gn[Kn++]=xo,xo=i;var y=ri;i=ai;var C=32-aa(y)-1;y&=~(1<<C),h+=1;var M=32-aa(c)+C;if(30<M){var V=C-C%5;M=(y&(1<<V)-1).toString(32),y>>=V,C-=V,ri=1<<32-aa(c)+C|h<<C|y,ai=M+i}else ri=1<<M|h<<C|y,ai=i}function pp(i){i.return!==null&&(yo(i,1),yw(i,1,0))}function gp(i){for(;i===qu;)qu=pl[--gl],pl[gl]=null,Hu=pl[--gl],pl[gl]=null;for(;i===xo;)xo=Gn[--Kn],Gn[Kn]=null,ai=Gn[--Kn],Gn[Kn]=null,ri=Gn[--Kn],Gn[Kn]=null}var $n=null,Ln=null,Yr=!1,ps=null;function bw(i,c){var h=Zn(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=i,c=i.deletions,c===null?(i.deletions=[h],i.flags|=16):c.push(h)}function vw(i,c){switch(i.tag){case 5:var h=i.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(i.stateNode=c,$n=i,Ln=Oi(c.firstChild),!0):!1;case 6:return c=i.pendingProps===""||c.nodeType!==3?null:c,c!==null?(i.stateNode=c,$n=i,Ln=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=xo!==null?{id:ri,overflow:ai}:null,i.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Zn(18,null,null,0),h.stateNode=c,h.return=i,i.child=h,$n=i,Ln=null,!0):!1;default:return!1}}function xp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function yp(i){if(Yr){var c=Ln;if(c){var h=c;if(!vw(i,c)){if(xp(i))throw Error(a(418));c=Oi(h.nextSibling);var y=$n;c&&vw(i,c)?bw(y,h):(i.flags=i.flags&-4097|2,Yr=!1,$n=i)}}else{if(xp(i))throw Error(a(418));i.flags=i.flags&-4097|2,Yr=!1,$n=i}}}function jw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$n=i}function Wu(i){if(i!==$n)return!1;if(!Yr)return jw(i),Yr=!0,!1;var c;if((c=i.tag!==3)&&!(c=i.tag!==5)&&(c=i.type,c=c!=="head"&&c!=="body"&&!cp(i.type,i.memoizedProps)),c&&(c=Ln)){if(xp(i))throw ww(),Error(a(418));for(;c;)bw(i,c),c=Oi(c.nextSibling)}if(jw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(c===0){Ln=Oi(i.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}i=i.nextSibling}Ln=null}}else Ln=$n?Oi(i.stateNode.nextSibling):null;return!0}function ww(){for(var i=Ln;i;)i=Oi(i.nextSibling)}function xl(){Ln=$n=null,Yr=!1}function bp(i){ps===null?ps=[i]:ps.push(i)}var LO=A.ReactCurrentBatchConfig;function Uc(i,c,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(a(309));var y=h.stateNode}if(!y)throw Error(a(147,i));var C=y,M=""+i;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===M?c.ref:(c=function(V){var he=C.refs;V===null?delete he[M]:he[M]=V},c._stringRef=M,c)}if(typeof i!="string")throw Error(a(284));if(!h._owner)throw Error(a(290,i))}return i}function Vu(i,c){throw i=Object.prototype.toString.call(c),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i))}function Nw(i){var c=i._init;return c(i._payload)}function Sw(i){function c(Oe,je){if(i){var $e=Oe.deletions;$e===null?(Oe.deletions=[je],Oe.flags|=16):$e.push(je)}}function h(Oe,je){if(!i)return null;for(;je!==null;)c(Oe,je),je=je.sibling;return null}function y(Oe,je){for(Oe=new Map;je!==null;)je.key!==null?Oe.set(je.key,je):Oe.set(je.index,je),je=je.sibling;return Oe}function C(Oe,je){return Oe=Hi(Oe,je),Oe.index=0,Oe.sibling=null,Oe}function M(Oe,je,$e){return Oe.index=$e,i?($e=Oe.alternate,$e!==null?($e=$e.index,$e<je?(Oe.flags|=2,je):$e):(Oe.flags|=2,je)):(Oe.flags|=1048576,je)}function V(Oe){return i&&Oe.alternate===null&&(Oe.flags|=2),Oe}function he(Oe,je,$e,mt){return je===null||je.tag!==6?(je=dg($e,Oe.mode,mt),je.return=Oe,je):(je=C(je,$e),je.return=Oe,je)}function ye(Oe,je,$e,mt){var Dt=$e.type;return Dt===_?nt(Oe,je,$e.props.children,mt,$e.key):je!==null&&(je.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===oe&&Nw(Dt)===je.type)?(mt=C(je,$e.props),mt.ref=Uc(Oe,je,$e),mt.return=Oe,mt):(mt=gm($e.type,$e.key,$e.props,null,Oe.mode,mt),mt.ref=Uc(Oe,je,$e),mt.return=Oe,mt)}function ze(Oe,je,$e,mt){return je===null||je.tag!==4||je.stateNode.containerInfo!==$e.containerInfo||je.stateNode.implementation!==$e.implementation?(je=ug($e,Oe.mode,mt),je.return=Oe,je):(je=C(je,$e.children||[]),je.return=Oe,je)}function nt(Oe,je,$e,mt,Dt){return je===null||je.tag!==7?(je=ko($e,Oe.mode,mt,Dt),je.return=Oe,je):(je=C(je,$e),je.return=Oe,je)}function it(Oe,je,$e){if(typeof je=="string"&&je!==""||typeof je=="number")return je=dg(""+je,Oe.mode,$e),je.return=Oe,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case k:return $e=gm(je.type,je.key,je.props,null,Oe.mode,$e),$e.ref=Uc(Oe,null,je),$e.return=Oe,$e;case E:return je=ug(je,Oe.mode,$e),je.return=Oe,je;case oe:var mt=je._init;return it(Oe,mt(je._payload),$e)}if(Nt(je)||F(je))return je=ko(je,Oe.mode,$e,null),je.return=Oe,je;Vu(Oe,je)}return null}function rt(Oe,je,$e,mt){var Dt=je!==null?je.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Dt!==null?null:he(Oe,je,""+$e,mt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case k:return $e.key===Dt?ye(Oe,je,$e,mt):null;case E:return $e.key===Dt?ze(Oe,je,$e,mt):null;case oe:return Dt=$e._init,rt(Oe,je,Dt($e._payload),mt)}if(Nt($e)||F($e))return Dt!==null?null:nt(Oe,je,$e,mt,null);Vu(Oe,$e)}return null}function wt(Oe,je,$e,mt,Dt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Oe=Oe.get($e)||null,he(je,Oe,""+mt,Dt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case k:return Oe=Oe.get(mt.key===null?$e:mt.key)||null,ye(je,Oe,mt,Dt);case E:return Oe=Oe.get(mt.key===null?$e:mt.key)||null,ze(je,Oe,mt,Dt);case oe:var Ft=mt._init;return wt(Oe,je,$e,Ft(mt._payload),Dt)}if(Nt(mt)||F(mt))return Oe=Oe.get($e)||null,nt(je,Oe,mt,Dt,null);Vu(je,mt)}return null}function At(Oe,je,$e,mt){for(var Dt=null,Ft=null,Bt=je,Vt=je=0,Oa=null;Bt!==null&&Vt<$e.length;Vt++){Bt.index>Vt?(Oa=Bt,Bt=null):Oa=Bt.sibling;var xr=rt(Oe,Bt,$e[Vt],mt);if(xr===null){Bt===null&&(Bt=Oa);break}i&&Bt&&xr.alternate===null&&c(Oe,Bt),je=M(xr,je,Vt),Ft===null?Dt=xr:Ft.sibling=xr,Ft=xr,Bt=Oa}if(Vt===$e.length)return h(Oe,Bt),Yr&&yo(Oe,Vt),Dt;if(Bt===null){for(;Vt<$e.length;Vt++)Bt=it(Oe,$e[Vt],mt),Bt!==null&&(je=M(Bt,je,Vt),Ft===null?Dt=Bt:Ft.sibling=Bt,Ft=Bt);return Yr&&yo(Oe,Vt),Dt}for(Bt=y(Oe,Bt);Vt<$e.length;Vt++)Oa=wt(Bt,Oe,Vt,$e[Vt],mt),Oa!==null&&(i&&Oa.alternate!==null&&Bt.delete(Oa.key===null?Vt:Oa.key),je=M(Oa,je,Vt),Ft===null?Dt=Oa:Ft.sibling=Oa,Ft=Oa);return i&&Bt.forEach(function(Wi){return c(Oe,Wi)}),Yr&&yo(Oe,Vt),Dt}function Pt(Oe,je,$e,mt){var Dt=F($e);if(typeof Dt!="function")throw Error(a(150));if($e=Dt.call($e),$e==null)throw Error(a(151));for(var Ft=Dt=null,Bt=je,Vt=je=0,Oa=null,xr=$e.next();Bt!==null&&!xr.done;Vt++,xr=$e.next()){Bt.index>Vt?(Oa=Bt,Bt=null):Oa=Bt.sibling;var Wi=rt(Oe,Bt,xr.value,mt);if(Wi===null){Bt===null&&(Bt=Oa);break}i&&Bt&&Wi.alternate===null&&c(Oe,Bt),je=M(Wi,je,Vt),Ft===null?Dt=Wi:Ft.sibling=Wi,Ft=Wi,Bt=Oa}if(xr.done)return h(Oe,Bt),Yr&&yo(Oe,Vt),Dt;if(Bt===null){for(;!xr.done;Vt++,xr=$e.next())xr=it(Oe,xr.value,mt),xr!==null&&(je=M(xr,je,Vt),Ft===null?Dt=xr:Ft.sibling=xr,Ft=xr);return Yr&&yo(Oe,Vt),Dt}for(Bt=y(Oe,Bt);!xr.done;Vt++,xr=$e.next())xr=wt(Bt,Oe,Vt,xr.value,mt),xr!==null&&(i&&xr.alternate!==null&&Bt.delete(xr.key===null?Vt:xr.key),je=M(xr,je,Vt),Ft===null?Dt=xr:Ft.sibling=xr,Ft=xr);return i&&Bt.forEach(function(x5){return c(Oe,x5)}),Yr&&yo(Oe,Vt),Dt}function ma(Oe,je,$e,mt){if(typeof $e=="object"&&$e!==null&&$e.type===_&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case k:e:{for(var Dt=$e.key,Ft=je;Ft!==null;){if(Ft.key===Dt){if(Dt=$e.type,Dt===_){if(Ft.tag===7){h(Oe,Ft.sibling),je=C(Ft,$e.props.children),je.return=Oe,Oe=je;break e}}else if(Ft.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===oe&&Nw(Dt)===Ft.type){h(Oe,Ft.sibling),je=C(Ft,$e.props),je.ref=Uc(Oe,Ft,$e),je.return=Oe,Oe=je;break e}h(Oe,Ft);break}else c(Oe,Ft);Ft=Ft.sibling}$e.type===_?(je=ko($e.props.children,Oe.mode,mt,$e.key),je.return=Oe,Oe=je):(mt=gm($e.type,$e.key,$e.props,null,Oe.mode,mt),mt.ref=Uc(Oe,je,$e),mt.return=Oe,Oe=mt)}return V(Oe);case E:e:{for(Ft=$e.key;je!==null;){if(je.key===Ft)if(je.tag===4&&je.stateNode.containerInfo===$e.containerInfo&&je.stateNode.implementation===$e.implementation){h(Oe,je.sibling),je=C(je,$e.children||[]),je.return=Oe,Oe=je;break e}else{h(Oe,je);break}else c(Oe,je);je=je.sibling}je=ug($e,Oe.mode,mt),je.return=Oe,Oe=je}return V(Oe);case oe:return Ft=$e._init,ma(Oe,je,Ft($e._payload),mt)}if(Nt($e))return At(Oe,je,$e,mt);if(F($e))return Pt(Oe,je,$e,mt);Vu(Oe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,je!==null&&je.tag===6?(h(Oe,je.sibling),je=C(je,$e),je.return=Oe,Oe=je):(h(Oe,je),je=dg($e,Oe.mode,mt),je.return=Oe,Oe=je),V(Oe)):h(Oe,je)}return ma}var yl=Sw(!0),Cw=Sw(!1),Gu=_i(null),Ku=null,bl=null,vp=null;function jp(){vp=bl=Ku=null}function wp(i){var c=Gu.current;Hr(Gu),i._currentValue=c}function Np(i,c,h){for(;i!==null;){var y=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),i===h)break;i=i.return}}function vl(i,c){Ku=i,vp=bl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&c)!==0&&(Nn=!0),i.firstContext=null)}function Yn(i){var c=i._currentValue;if(vp!==i)if(i={context:i,memoizedValue:c,next:null},bl===null){if(Ku===null)throw Error(a(308));bl=i,Ku.dependencies={lanes:0,firstContext:i}}else bl=bl.next=i;return c}var bo=null;function Sp(i){bo===null?bo=[i]:bo.push(i)}function kw(i,c,h,y){var C=c.interleaved;return C===null?(h.next=h,Sp(c)):(h.next=C.next,C.next=h),c.interleaved=h,ni(i,y)}function ni(i,c){i.lanes|=c;var h=i.alternate;for(h!==null&&(h.lanes|=c),h=i,i=i.return;i!==null;)i.childLanes|=c,h=i.alternate,h!==null&&(h.childLanes|=c),h=i,i=i.return;return h.tag===3?h.stateNode:null}var $i=!1;function Cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iw(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function si(i,c){return{eventTime:i,lane:c,tag:0,payload:null,callback:null,next:null}}function Li(i,c,h){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,(fr&2)!==0){var C=y.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),y.pending=c,ni(i,h)}return C=y.interleaved,C===null?(c.next=c,Sp(y)):(c.next=C.next,C.next=c),y.interleaved=c,ni(i,h)}function Yu(i,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,dt(i,h)}}function Aw(i,c){var h=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var C=null,M=null;if(h=h.firstBaseUpdate,h!==null){do{var V={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};M===null?C=M=V:M=M.next=V,h=h.next}while(h!==null);M===null?C=M=c:M=M.next=c}else C=M=c;h={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:M,shared:y.shared,effects:y.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=c:i.next=c,h.lastBaseUpdate=c}function Xu(i,c,h,y){var C=i.updateQueue;$i=!1;var M=C.firstBaseUpdate,V=C.lastBaseUpdate,he=C.shared.pending;if(he!==null){C.shared.pending=null;var ye=he,ze=ye.next;ye.next=null,V===null?M=ze:V.next=ze,V=ye;var nt=i.alternate;nt!==null&&(nt=nt.updateQueue,he=nt.lastBaseUpdate,he!==V&&(he===null?nt.firstBaseUpdate=ze:he.next=ze,nt.lastBaseUpdate=ye))}if(M!==null){var it=C.baseState;V=0,nt=ze=ye=null,he=M;do{var rt=he.lane,wt=he.eventTime;if((y&rt)===rt){nt!==null&&(nt=nt.next={eventTime:wt,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var At=i,Pt=he;switch(rt=c,wt=h,Pt.tag){case 1:if(At=Pt.payload,typeof At=="function"){it=At.call(wt,it,rt);break e}it=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Pt.payload,rt=typeof At=="function"?At.call(wt,it,rt):At,rt==null)break e;it=re({},it,rt);break e;case 2:$i=!0}}he.callback!==null&&he.lane!==0&&(i.flags|=64,rt=C.effects,rt===null?C.effects=[he]:rt.push(he))}else wt={eventTime:wt,lane:rt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},nt===null?(ze=nt=wt,ye=it):nt=nt.next=wt,V|=rt;if(he=he.next,he===null){if(he=C.shared.pending,he===null)break;rt=he,he=rt.next,rt.next=null,C.lastBaseUpdate=rt,C.shared.pending=null}}while(!0);if(nt===null&&(ye=it),C.baseState=ye,C.firstBaseUpdate=ze,C.lastBaseUpdate=nt,c=C.shared.interleaved,c!==null){C=c;do V|=C.lane,C=C.next;while(C!==c)}else M===null&&(C.shared.lanes=0);wo|=V,i.lanes=V,i.memoizedState=it}}function Pw(i,c,h){if(i=c.effects,c.effects=null,i!==null)for(c=0;c<i.length;c++){var y=i[c],C=y.callback;if(C!==null){if(y.callback=null,y=h,typeof C!="function")throw Error(a(191,C));C.call(y)}}}var zc={},Os=_i(zc),qc=_i(zc),Hc=_i(zc);function vo(i){if(i===zc)throw Error(a(174));return i}function kp(i,c){switch(Rr(Hc,c),Rr(qc,i),Rr(Os,zc),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ae(null,"");break;default:i=i===8?c.parentNode:c,c=i.namespaceURI||null,i=i.tagName,c=Ae(c,i)}Hr(Os),Rr(Os,c)}function jl(){Hr(Os),Hr(qc),Hr(Hc)}function Ew(i){vo(Hc.current);var c=vo(Os.current),h=Ae(c,i.type);c!==h&&(Rr(qc,i),Rr(Os,h))}function Ip(i){qc.current===i&&(Hr(Os),Hr(qc))}var Qr=_i(0);function Ju(i){for(var c=i;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ap=[];function Pp(){for(var i=0;i<Ap.length;i++)Ap[i]._workInProgressVersionPrimary=null;Ap.length=0}var Zu=A.ReactCurrentDispatcher,Ep=A.ReactCurrentBatchConfig,jo=0,ea=null,wa=null,Ta=null,Qu=!1,Wc=!1,Vc=0,FO=0;function Ja(){throw Error(a(321))}function Tp(i,c){if(c===null)return!1;for(var h=0;h<c.length&&h<i.length;h++)if(!fs(i[h],c[h]))return!1;return!0}function Dp(i,c,h,y,C,M){if(jo=M,ea=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Zu.current=i===null||i.memoizedState===null?qO:HO,i=h(y,C),Wc){M=0;do{if(Wc=!1,Vc=0,25<=M)throw Error(a(301));M+=1,Ta=wa=null,c.updateQueue=null,Zu.current=WO,i=h(y,C)}while(Wc)}if(Zu.current=rm,c=wa!==null&&wa.next!==null,jo=0,Ta=wa=ea=null,Qu=!1,c)throw Error(a(300));return i}function Op(){var i=Vc!==0;return Vc=0,i}function _s(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ta===null?ea.memoizedState=Ta=i:Ta=Ta.next=i,Ta}function Xn(){if(wa===null){var i=ea.alternate;i=i!==null?i.memoizedState:null}else i=wa.next;var c=Ta===null?ea.memoizedState:Ta.next;if(c!==null)Ta=c,wa=i;else{if(i===null)throw Error(a(310));wa=i,i={memoizedState:wa.memoizedState,baseState:wa.baseState,baseQueue:wa.baseQueue,queue:wa.queue,next:null},Ta===null?ea.memoizedState=Ta=i:Ta=Ta.next=i}return Ta}function Gc(i,c){return typeof c=="function"?c(i):c}function _p(i){var c=Xn(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=i;var y=wa,C=y.baseQueue,M=h.pending;if(M!==null){if(C!==null){var V=C.next;C.next=M.next,M.next=V}y.baseQueue=C=M,h.pending=null}if(C!==null){M=C.next,y=y.baseState;var he=V=null,ye=null,ze=M;do{var nt=ze.lane;if((jo&nt)===nt)ye!==null&&(ye=ye.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),y=ze.hasEagerState?ze.eagerState:i(y,ze.action);else{var it={lane:nt,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};ye===null?(he=ye=it,V=y):ye=ye.next=it,ea.lanes|=nt,wo|=nt}ze=ze.next}while(ze!==null&&ze!==M);ye===null?V=y:ye.next=he,fs(y,c.memoizedState)||(Nn=!0),c.memoizedState=y,c.baseState=V,c.baseQueue=ye,h.lastRenderedState=y}if(i=h.interleaved,i!==null){C=i;do M=C.lane,ea.lanes|=M,wo|=M,C=C.next;while(C!==i)}else C===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Mp(i){var c=Xn(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=i;var y=h.dispatch,C=h.pending,M=c.memoizedState;if(C!==null){h.pending=null;var V=C=C.next;do M=i(M,V.action),V=V.next;while(V!==C);fs(M,c.memoizedState)||(Nn=!0),c.memoizedState=M,c.baseQueue===null&&(c.baseState=M),h.lastRenderedState=M}return[M,y]}function Tw(){}function Dw(i,c){var h=ea,y=Xn(),C=c(),M=!fs(y.memoizedState,C);if(M&&(y.memoizedState=C,Nn=!0),y=y.queue,Rp(Mw.bind(null,h,y,i),[i]),y.getSnapshot!==c||M||Ta!==null&&Ta.memoizedState.tag&1){if(h.flags|=2048,Kc(9,_w.bind(null,h,y,C,c),void 0,null),Da===null)throw Error(a(349));(jo&30)!==0||Ow(h,c,C)}return C}function Ow(i,c,h){i.flags|=16384,i={getSnapshot:c,value:h},c=ea.updateQueue,c===null?(c={lastEffect:null,stores:null},ea.updateQueue=c,c.stores=[i]):(h=c.stores,h===null?c.stores=[i]:h.push(i))}function _w(i,c,h,y){c.value=h,c.getSnapshot=y,Rw(c)&&$w(i)}function Mw(i,c,h){return h(function(){Rw(c)&&$w(i)})}function Rw(i){var c=i.getSnapshot;i=i.value;try{var h=c();return!fs(i,h)}catch{return!0}}function $w(i){var c=ni(i,1);c!==null&&bs(c,i,1,-1)}function Lw(i){var c=_s();return typeof i=="function"&&(i=i()),c.memoizedState=c.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:i},c.queue=i,i=i.dispatch=zO.bind(null,ea,i),[c.memoizedState,i]}function Kc(i,c,h,y){return i={tag:i,create:c,destroy:h,deps:y,next:null},c=ea.updateQueue,c===null?(c={lastEffect:null,stores:null},ea.updateQueue=c,c.lastEffect=i.next=i):(h=c.lastEffect,h===null?c.lastEffect=i.next=i:(y=h.next,h.next=i,i.next=y,c.lastEffect=i)),i}function Fw(){return Xn().memoizedState}function em(i,c,h,y){var C=_s();ea.flags|=i,C.memoizedState=Kc(1|c,h,void 0,y===void 0?null:y)}function tm(i,c,h,y){var C=Xn();y=y===void 0?null:y;var M=void 0;if(wa!==null){var V=wa.memoizedState;if(M=V.destroy,y!==null&&Tp(y,V.deps)){C.memoizedState=Kc(c,h,M,y);return}}ea.flags|=i,C.memoizedState=Kc(1|c,h,M,y)}function Bw(i,c){return em(8390656,8,i,c)}function Rp(i,c){return tm(2048,8,i,c)}function Uw(i,c){return tm(4,2,i,c)}function zw(i,c){return tm(4,4,i,c)}function qw(i,c){if(typeof c=="function")return i=i(),c(i),function(){c(null)};if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function Hw(i,c,h){return h=h!=null?h.concat([i]):null,tm(4,4,qw.bind(null,c,i),h)}function $p(){}function Ww(i,c){var h=Xn();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&Tp(c,y[1])?y[0]:(h.memoizedState=[i,c],i)}function Vw(i,c){var h=Xn();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&Tp(c,y[1])?y[0]:(i=i(),h.memoizedState=[i,c],i)}function Gw(i,c,h){return(jo&21)===0?(i.baseState&&(i.baseState=!1,Nn=!0),i.memoizedState=h):(fs(h,c)||(h=ie(),ea.lanes|=h,wo|=h,i.baseState=!0),c)}function BO(i,c){var h=xt;xt=h!==0&&4>h?h:4,i(!0);var y=Ep.transition;Ep.transition={};try{i(!1),c()}finally{xt=h,Ep.transition=y}}function Kw(){return Xn().memoizedState}function UO(i,c,h){var y=zi(i);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},Yw(i))Xw(c,h);else if(h=kw(i,c,h,y),h!==null){var C=dn();bs(h,i,y,C),Jw(h,c,y)}}function zO(i,c,h){var y=zi(i),C={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(Yw(i))Xw(c,C);else{var M=i.alternate;if(i.lanes===0&&(M===null||M.lanes===0)&&(M=c.lastRenderedReducer,M!==null))try{var V=c.lastRenderedState,he=M(V,h);if(C.hasEagerState=!0,C.eagerState=he,fs(he,V)){var ye=c.interleaved;ye===null?(C.next=C,Sp(c)):(C.next=ye.next,ye.next=C),c.interleaved=C;return}}catch{}finally{}h=kw(i,c,C,y),h!==null&&(C=dn(),bs(h,i,y,C),Jw(h,c,y))}}function Yw(i){var c=i.alternate;return i===ea||c!==null&&c===ea}function Xw(i,c){Wc=Qu=!0;var h=i.pending;h===null?c.next=c:(c.next=h.next,h.next=c),i.pending=c}function Jw(i,c,h){if((h&4194240)!==0){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,dt(i,h)}}var rm={readContext:Yn,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useInsertionEffect:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useMutableSource:Ja,useSyncExternalStore:Ja,useId:Ja,unstable_isNewReconciler:!1},qO={readContext:Yn,useCallback:function(i,c){return _s().memoizedState=[i,c===void 0?null:c],i},useContext:Yn,useEffect:Bw,useImperativeHandle:function(i,c,h){return h=h!=null?h.concat([i]):null,em(4194308,4,qw.bind(null,c,i),h)},useLayoutEffect:function(i,c){return em(4194308,4,i,c)},useInsertionEffect:function(i,c){return em(4,2,i,c)},useMemo:function(i,c){var h=_s();return c=c===void 0?null:c,i=i(),h.memoizedState=[i,c],i},useReducer:function(i,c,h){var y=_s();return c=h!==void 0?h(c):c,y.memoizedState=y.baseState=c,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:c},y.queue=i,i=i.dispatch=UO.bind(null,ea,i),[y.memoizedState,i]},useRef:function(i){var c=_s();return i={current:i},c.memoizedState=i},useState:Lw,useDebugValue:$p,useDeferredValue:function(i){return _s().memoizedState=i},useTransition:function(){var i=Lw(!1),c=i[0];return i=BO.bind(null,i[1]),_s().memoizedState=i,[c,i]},useMutableSource:function(){},useSyncExternalStore:function(i,c,h){var y=ea,C=_s();if(Yr){if(h===void 0)throw Error(a(407));h=h()}else{if(h=c(),Da===null)throw Error(a(349));(jo&30)!==0||Ow(y,c,h)}C.memoizedState=h;var M={value:h,getSnapshot:c};return C.queue=M,Bw(Mw.bind(null,y,M,i),[i]),y.flags|=2048,Kc(9,_w.bind(null,y,M,h,c),void 0,null),h},useId:function(){var i=_s(),c=Da.identifierPrefix;if(Yr){var h=ai,y=ri;h=(y&~(1<<32-aa(y)-1)).toString(32)+h,c=":"+c+"R"+h,h=Vc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=FO++,c=":"+c+"r"+h.toString(32)+":";return i.memoizedState=c},unstable_isNewReconciler:!1},HO={readContext:Yn,useCallback:Ww,useContext:Yn,useEffect:Rp,useImperativeHandle:Hw,useInsertionEffect:Uw,useLayoutEffect:zw,useMemo:Vw,useReducer:_p,useRef:Fw,useState:function(){return _p(Gc)},useDebugValue:$p,useDeferredValue:function(i){var c=Xn();return Gw(c,wa.memoizedState,i)},useTransition:function(){var i=_p(Gc)[0],c=Xn().memoizedState;return[i,c]},useMutableSource:Tw,useSyncExternalStore:Dw,useId:Kw,unstable_isNewReconciler:!1},WO={readContext:Yn,useCallback:Ww,useContext:Yn,useEffect:Rp,useImperativeHandle:Hw,useInsertionEffect:Uw,useLayoutEffect:zw,useMemo:Vw,useReducer:Mp,useRef:Fw,useState:function(){return Mp(Gc)},useDebugValue:$p,useDeferredValue:function(i){var c=Xn();return wa===null?c.memoizedState=i:Gw(c,wa.memoizedState,i)},useTransition:function(){var i=Mp(Gc)[0],c=Xn().memoizedState;return[i,c]},useMutableSource:Tw,useSyncExternalStore:Dw,useId:Kw,unstable_isNewReconciler:!1};function gs(i,c){if(i&&i.defaultProps){c=re({},c),i=i.defaultProps;for(var h in i)c[h]===void 0&&(c[h]=i[h]);return c}return c}function Lp(i,c,h,y){c=i.memoizedState,h=h(y,c),h=h==null?c:re({},c,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var am={isMounted:function(i){return(i=i._reactInternals)?Or(i)===i:!1},enqueueSetState:function(i,c,h){i=i._reactInternals;var y=dn(),C=zi(i),M=si(y,C);M.payload=c,h!=null&&(M.callback=h),c=Li(i,M,C),c!==null&&(bs(c,i,C,y),Yu(c,i,C))},enqueueReplaceState:function(i,c,h){i=i._reactInternals;var y=dn(),C=zi(i),M=si(y,C);M.tag=1,M.payload=c,h!=null&&(M.callback=h),c=Li(i,M,C),c!==null&&(bs(c,i,C,y),Yu(c,i,C))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var h=dn(),y=zi(i),C=si(h,y);C.tag=2,c!=null&&(C.callback=c),c=Li(i,C,y),c!==null&&(bs(c,i,y,h),Yu(c,i,y))}};function Zw(i,c,h,y,C,M,V){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,M,V):c.prototype&&c.prototype.isPureReactComponent?!_c(h,y)||!_c(C,M):!0}function Qw(i,c,h){var y=!1,C=Mi,M=c.contextType;return typeof M=="object"&&M!==null?M=Yn(M):(C=wn(c)?go:Xa.current,y=c.contextTypes,M=(y=y!=null)?fl(i,C):Mi),c=new c(h,M),i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=am,i.stateNode=c,c._reactInternals=i,y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=C,i.__reactInternalMemoizedMaskedChildContext=M),c}function eN(i,c,h,y){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==i&&am.enqueueReplaceState(c,c.state,null)}function Fp(i,c,h,y){var C=i.stateNode;C.props=h,C.state=i.memoizedState,C.refs={},Cp(i);var M=c.contextType;typeof M=="object"&&M!==null?C.context=Yn(M):(M=wn(c)?go:Xa.current,C.context=fl(i,M)),C.state=i.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(Lp(i,c,M,h),C.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&am.enqueueReplaceState(C,C.state,null),Xu(i,h,C,y),C.state=i.memoizedState),typeof C.componentDidMount=="function"&&(i.flags|=4194308)}function wl(i,c){try{var h="",y=c;do h+=Se(y),y=y.return;while(y);var C=h}catch(M){C=`
Error generating stack: `+M.message+`
`+M.stack}return{value:i,source:c,stack:C,digest:null}}function Bp(i,c,h){return{value:i,source:null,stack:h??null,digest:c??null}}function Up(i,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var VO=typeof WeakMap=="function"?WeakMap:Map;function tN(i,c,h){h=si(-1,h),h.tag=3,h.payload={element:null};var y=c.value;return h.callback=function(){dm||(dm=!0,rg=y),Up(i,c)},h}function rN(i,c,h){h=si(-1,h),h.tag=3;var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var C=c.value;h.payload=function(){return y(C)},h.callback=function(){Up(i,c)}}var M=i.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(h.callback=function(){Up(i,c),typeof y!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),h}function aN(i,c,h){var y=i.pingCache;if(y===null){y=i.pingCache=new VO;var C=new Set;y.set(c,C)}else C=y.get(c),C===void 0&&(C=new Set,y.set(c,C));C.has(h)||(C.add(h),i=i5.bind(null,i,c,h),c.then(i,i))}function nN(i){do{var c;if((c=i.tag===13)&&(c=i.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return i;i=i.return}while(i!==null);return null}function sN(i,c,h,y,C){return(i.mode&1)===0?(i===c?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=si(-1,1),c.tag=2,Li(h,c,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=C,i)}var GO=A.ReactCurrentOwner,Nn=!1;function cn(i,c,h,y){c.child=i===null?Cw(c,null,h,y):yl(c,i.child,h,y)}function iN(i,c,h,y,C){h=h.render;var M=c.ref;return vl(c,C),y=Dp(i,c,h,y,M,C),h=Op(),i!==null&&!Nn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~C,ii(i,c,C)):(Yr&&h&&pp(c),c.flags|=1,cn(i,c,y,C),c.child)}function oN(i,c,h,y,C){if(i===null){var M=h.type;return typeof M=="function"&&!cg(M)&&M.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=M,lN(i,c,M,y,C)):(i=gm(h.type,null,y,c,c.mode,C),i.ref=c.ref,i.return=c,c.child=i)}if(M=i.child,(i.lanes&C)===0){var V=M.memoizedProps;if(h=h.compare,h=h!==null?h:_c,h(V,y)&&i.ref===c.ref)return ii(i,c,C)}return c.flags|=1,i=Hi(M,y),i.ref=c.ref,i.return=c,c.child=i}function lN(i,c,h,y,C){if(i!==null){var M=i.memoizedProps;if(_c(M,y)&&i.ref===c.ref)if(Nn=!1,c.pendingProps=y=M,(i.lanes&C)!==0)(i.flags&131072)!==0&&(Nn=!0);else return c.lanes=i.lanes,ii(i,c,C)}return zp(i,c,h,y,C)}function cN(i,c,h){var y=c.pendingProps,C=y.children,M=i!==null?i.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(Sl,Fn),Fn|=h;else{if((h&1073741824)===0)return i=M!==null?M.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:i,cachePool:null,transitions:null},c.updateQueue=null,Rr(Sl,Fn),Fn|=i,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=M!==null?M.baseLanes:h,Rr(Sl,Fn),Fn|=y}else M!==null?(y=M.baseLanes|h,c.memoizedState=null):y=h,Rr(Sl,Fn),Fn|=y;return cn(i,c,C,h),c.child}function dN(i,c){var h=c.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function zp(i,c,h,y,C){var M=wn(h)?go:Xa.current;return M=fl(c,M),vl(c,C),h=Dp(i,c,h,y,M,C),y=Op(),i!==null&&!Nn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~C,ii(i,c,C)):(Yr&&y&&pp(c),c.flags|=1,cn(i,c,h,C),c.child)}function uN(i,c,h,y,C){if(wn(h)){var M=!0;Uu(c)}else M=!1;if(vl(c,C),c.stateNode===null)sm(i,c),Qw(c,h,y),Fp(c,h,y,C),y=!0;else if(i===null){var V=c.stateNode,he=c.memoizedProps;V.props=he;var ye=V.context,ze=h.contextType;typeof ze=="object"&&ze!==null?ze=Yn(ze):(ze=wn(h)?go:Xa.current,ze=fl(c,ze));var nt=h.getDerivedStateFromProps,it=typeof nt=="function"||typeof V.getSnapshotBeforeUpdate=="function";it||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(he!==y||ye!==ze)&&eN(c,V,y,ze),$i=!1;var rt=c.memoizedState;V.state=rt,Xu(c,y,V,C),ye=c.memoizedState,he!==y||rt!==ye||jn.current||$i?(typeof nt=="function"&&(Lp(c,h,nt,y),ye=c.memoizedState),(he=$i||Zw(c,h,he,y,rt,ye,ze))?(it||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=ye),V.props=y,V.state=ye,V.context=ze,y=he):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{V=c.stateNode,Iw(i,c),he=c.memoizedProps,ze=c.type===c.elementType?he:gs(c.type,he),V.props=ze,it=c.pendingProps,rt=V.context,ye=h.contextType,typeof ye=="object"&&ye!==null?ye=Yn(ye):(ye=wn(h)?go:Xa.current,ye=fl(c,ye));var wt=h.getDerivedStateFromProps;(nt=typeof wt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(he!==it||rt!==ye)&&eN(c,V,y,ye),$i=!1,rt=c.memoizedState,V.state=rt,Xu(c,y,V,C);var At=c.memoizedState;he!==it||rt!==At||jn.current||$i?(typeof wt=="function"&&(Lp(c,h,wt,y),At=c.memoizedState),(ze=$i||Zw(c,h,ze,y,rt,At,ye)||!1)?(nt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(y,At,ye),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(y,At,ye)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||he===i.memoizedProps&&rt===i.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===i.memoizedProps&&rt===i.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=At),V.props=y,V.state=At,V.context=ye,y=ze):(typeof V.componentDidUpdate!="function"||he===i.memoizedProps&&rt===i.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===i.memoizedProps&&rt===i.memoizedState||(c.flags|=1024),y=!1)}return qp(i,c,h,y,M,C)}function qp(i,c,h,y,C,M){dN(i,c);var V=(c.flags&128)!==0;if(!y&&!V)return C&&gw(c,h,!1),ii(i,c,M);y=c.stateNode,GO.current=c;var he=V&&typeof h.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,i!==null&&V?(c.child=yl(c,i.child,null,M),c.child=yl(c,null,he,M)):cn(i,c,he,M),c.memoizedState=y.state,C&&gw(c,h,!0),c.child}function mN(i){var c=i.stateNode;c.pendingContext?fw(i,c.pendingContext,c.pendingContext!==c.context):c.context&&fw(i,c.context,!1),kp(i,c.containerInfo)}function hN(i,c,h,y,C){return xl(),bp(C),c.flags|=256,cn(i,c,h,y),c.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Wp(i){return{baseLanes:i,cachePool:null,transitions:null}}function fN(i,c,h){var y=c.pendingProps,C=Qr.current,M=!1,V=(c.flags&128)!==0,he;if((he=V)||(he=i!==null&&i.memoizedState===null?!1:(C&2)!==0),he?(M=!0,c.flags&=-129):(i===null||i.memoizedState!==null)&&(C|=1),Rr(Qr,C&1),i===null)return yp(c),i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((c.mode&1)===0?c.lanes=1:i.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=y.children,i=y.fallback,M?(y=c.mode,M=c.child,V={mode:"hidden",children:V},(y&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=V):M=xm(V,y,0,null),i=ko(i,y,h,null),M.return=c,i.return=c,M.sibling=i,c.child=M,c.child.memoizedState=Wp(h),c.memoizedState=Hp,i):Vp(c,V));if(C=i.memoizedState,C!==null&&(he=C.dehydrated,he!==null))return KO(i,c,V,y,he,C,h);if(M){M=y.fallback,V=c.mode,C=i.child,he=C.sibling;var ye={mode:"hidden",children:y.children};return(V&1)===0&&c.child!==C?(y=c.child,y.childLanes=0,y.pendingProps=ye,c.deletions=null):(y=Hi(C,ye),y.subtreeFlags=C.subtreeFlags&14680064),he!==null?M=Hi(he,M):(M=ko(M,V,h,null),M.flags|=2),M.return=c,y.return=c,y.sibling=M,c.child=y,y=M,M=c.child,V=i.child.memoizedState,V=V===null?Wp(h):{baseLanes:V.baseLanes|h,cachePool:null,transitions:V.transitions},M.memoizedState=V,M.childLanes=i.childLanes&~h,c.memoizedState=Hp,y}return M=i.child,i=M.sibling,y=Hi(M,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=h),y.return=c,y.sibling=null,i!==null&&(h=c.deletions,h===null?(c.deletions=[i],c.flags|=16):h.push(i)),c.child=y,c.memoizedState=null,y}function Vp(i,c){return c=xm({mode:"visible",children:c},i.mode,0,null),c.return=i,i.child=c}function nm(i,c,h,y){return y!==null&&bp(y),yl(c,i.child,null,h),i=Vp(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function KO(i,c,h,y,C,M,V){if(h)return c.flags&256?(c.flags&=-257,y=Bp(Error(a(422))),nm(i,c,V,y)):c.memoizedState!==null?(c.child=i.child,c.flags|=128,null):(M=y.fallback,C=c.mode,y=xm({mode:"visible",children:y.children},C,0,null),M=ko(M,C,V,null),M.flags|=2,y.return=c,M.return=c,y.sibling=M,c.child=y,(c.mode&1)!==0&&yl(c,i.child,null,V),c.child.memoizedState=Wp(V),c.memoizedState=Hp,M);if((c.mode&1)===0)return nm(i,c,V,null);if(C.data==="$!"){if(y=C.nextSibling&&C.nextSibling.dataset,y)var he=y.dgst;return y=he,M=Error(a(419)),y=Bp(M,y,void 0),nm(i,c,V,y)}if(he=(V&i.childLanes)!==0,Nn||he){if(y=Da,y!==null){switch(V&-V){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(y.suspendedLanes|V))!==0?0:C,C!==0&&C!==M.retryLane&&(M.retryLane=C,ni(i,C),bs(y,i,C,-1))}return lg(),y=Bp(Error(a(421))),nm(i,c,V,y)}return C.data==="$?"?(c.flags|=128,c.child=i.child,c=o5.bind(null,i),C._reactRetry=c,null):(i=M.treeContext,Ln=Oi(C.nextSibling),$n=c,Yr=!0,ps=null,i!==null&&(Gn[Kn++]=ri,Gn[Kn++]=ai,Gn[Kn++]=xo,ri=i.id,ai=i.overflow,xo=c),c=Vp(c,y.children),c.flags|=4096,c)}function pN(i,c,h){i.lanes|=c;var y=i.alternate;y!==null&&(y.lanes|=c),Np(i.return,c,h)}function Gp(i,c,h,y,C){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:C}:(M.isBackwards=c,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=h,M.tailMode=C)}function gN(i,c,h){var y=c.pendingProps,C=y.revealOrder,M=y.tail;if(cn(i,c,y.children,h),y=Qr.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pN(i,h,c);else if(i.tag===19)pN(i,h,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}y&=1}if(Rr(Qr,y),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(h=c.child,C=null;h!==null;)i=h.alternate,i!==null&&Ju(i)===null&&(C=h),h=h.sibling;h=C,h===null?(C=c.child,c.child=null):(C=h.sibling,h.sibling=null),Gp(c,!1,C,h,M);break;case"backwards":for(h=null,C=c.child,c.child=null;C!==null;){if(i=C.alternate,i!==null&&Ju(i)===null){c.child=C;break}i=C.sibling,C.sibling=h,h=C,C=i}Gp(c,!0,h,null,M);break;case"together":Gp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function sm(i,c){(c.mode&1)===0&&i!==null&&(i.alternate=null,c.alternate=null,c.flags|=2)}function ii(i,c,h){if(i!==null&&(c.dependencies=i.dependencies),wo|=c.lanes,(h&c.childLanes)===0)return null;if(i!==null&&c.child!==i.child)throw Error(a(153));if(c.child!==null){for(i=c.child,h=Hi(i,i.pendingProps),c.child=h,h.return=c;i.sibling!==null;)i=i.sibling,h=h.sibling=Hi(i,i.pendingProps),h.return=c;h.sibling=null}return c.child}function YO(i,c,h){switch(c.tag){case 3:mN(c),xl();break;case 5:Ew(c);break;case 1:wn(c.type)&&Uu(c);break;case 4:kp(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,C=c.memoizedProps.value;Rr(Gu,y._currentValue),y._currentValue=C;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Rr(Qr,Qr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?fN(i,c,h):(Rr(Qr,Qr.current&1),i=ii(i,c,h),i!==null?i.sibling:null);Rr(Qr,Qr.current&1);break;case 19:if(y=(h&c.childLanes)!==0,(i.flags&128)!==0){if(y)return gN(i,c,h);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Rr(Qr,Qr.current),y)break;return null;case 22:case 23:return c.lanes=0,cN(i,c,h)}return ii(i,c,h)}var xN,Kp,yN,bN;xN=function(i,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Kp=function(){},yN=function(i,c,h,y){var C=i.memoizedProps;if(C!==y){i=c.stateNode,vo(Os.current);var M=null;switch(h){case"input":C=Be(i,C),y=Be(i,y),M=[];break;case"select":C=re({},C,{value:void 0}),y=re({},y,{value:void 0}),M=[];break;case"textarea":C=ar(i,C),y=ar(i,y),M=[];break;default:typeof C.onClick!="function"&&typeof y.onClick=="function"&&(i.onclick=Lu)}N(h,y);var V;h=null;for(ze in C)if(!y.hasOwnProperty(ze)&&C.hasOwnProperty(ze)&&C[ze]!=null)if(ze==="style"){var he=C[ze];for(V in he)he.hasOwnProperty(V)&&(h||(h={}),h[V]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(s.hasOwnProperty(ze)?M||(M=[]):(M=M||[]).push(ze,null));for(ze in y){var ye=y[ze];if(he=C?.[ze],y.hasOwnProperty(ze)&&ye!==he&&(ye!=null||he!=null))if(ze==="style")if(he){for(V in he)!he.hasOwnProperty(V)||ye&&ye.hasOwnProperty(V)||(h||(h={}),h[V]="");for(V in ye)ye.hasOwnProperty(V)&&he[V]!==ye[V]&&(h||(h={}),h[V]=ye[V])}else h||(M||(M=[]),M.push(ze,h)),h=ye;else ze==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,he=he?he.__html:void 0,ye!=null&&he!==ye&&(M=M||[]).push(ze,ye)):ze==="children"?typeof ye!="string"&&typeof ye!="number"||(M=M||[]).push(ze,""+ye):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(s.hasOwnProperty(ze)?(ye!=null&&ze==="onScroll"&&qr("scroll",i),M||he===ye||(M=[])):(M=M||[]).push(ze,ye))}h&&(M=M||[]).push("style",h);var ze=M;(c.updateQueue=ze)&&(c.flags|=4)}},bN=function(i,c,h,y){h!==y&&(c.flags|=4)};function Yc(i,c){if(!Yr)switch(i.tailMode){case"hidden":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function Za(i){var c=i.alternate!==null&&i.alternate.child===i.child,h=0,y=0;if(c)for(var C=i.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags&14680064,y|=C.flags&14680064,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=y,i.childLanes=h,c}function XO(i,c,h){var y=c.pendingProps;switch(gp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(c),null;case 1:return wn(c.type)&&Bu(),Za(c),null;case 3:return y=c.stateNode,jl(),Hr(jn),Hr(Xa),Pp(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(i===null||i.child===null)&&(Wu(c)?c.flags|=4:i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ps!==null&&(sg(ps),ps=null))),Kp(i,c),Za(c),null;case 5:Ip(c);var C=vo(Hc.current);if(h=c.type,i!==null&&c.stateNode!=null)yN(i,c,h,y,C),i.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(a(166));return Za(c),null}if(i=vo(Os.current),Wu(c)){y=c.stateNode,h=c.type;var M=c.memoizedProps;switch(y[Ds]=c,y[Fc]=M,i=(c.mode&1)!==0,h){case"dialog":qr("cancel",y),qr("close",y);break;case"iframe":case"object":case"embed":qr("load",y);break;case"video":case"audio":for(C=0;C<Rc.length;C++)qr(Rc[C],y);break;case"source":qr("error",y);break;case"img":case"image":case"link":qr("error",y),qr("load",y);break;case"details":qr("toggle",y);break;case"input":at(y,M),qr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!M.multiple},qr("invalid",y);break;case"textarea":jt(y,M),qr("invalid",y)}N(h,M),C=null;for(var V in M)if(M.hasOwnProperty(V)){var he=M[V];V==="children"?typeof he=="string"?y.textContent!==he&&(M.suppressHydrationWarning!==!0&&$u(y.textContent,he,i),C=["children",he]):typeof he=="number"&&y.textContent!==""+he&&(M.suppressHydrationWarning!==!0&&$u(y.textContent,he,i),C=["children",""+he]):s.hasOwnProperty(V)&&he!=null&&V==="onScroll"&&qr("scroll",y)}switch(h){case"input":we(y),ut(y,M,!0);break;case"textarea":we(y),De(y);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(y.onclick=Lu)}y=C,c.updateQueue=y,y!==null&&(c.flags|=4)}else{V=C.nodeType===9?C:C.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=et(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=V.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof y.is=="string"?i=V.createElement(h,{is:y.is}):(i=V.createElement(h),h==="select"&&(V=i,y.multiple?V.multiple=!0:y.size&&(V.size=y.size))):i=V.createElementNS(i,h),i[Ds]=c,i[Fc]=y,xN(i,c,!1,!1),c.stateNode=i;e:{switch(V=Ne(h,y),h){case"dialog":qr("cancel",i),qr("close",i),C=y;break;case"iframe":case"object":case"embed":qr("load",i),C=y;break;case"video":case"audio":for(C=0;C<Rc.length;C++)qr(Rc[C],i);C=y;break;case"source":qr("error",i),C=y;break;case"img":case"image":case"link":qr("error",i),qr("load",i),C=y;break;case"details":qr("toggle",i),C=y;break;case"input":at(i,y),C=Be(i,y),qr("invalid",i);break;case"option":C=y;break;case"select":i._wrapperState={wasMultiple:!!y.multiple},C=re({},y,{value:void 0}),qr("invalid",i);break;case"textarea":jt(i,y),C=ar(i,y),qr("invalid",i);break;default:C=y}N(h,C),he=C;for(M in he)if(he.hasOwnProperty(M)){var ye=he[M];M==="style"?Rt(i,ye):M==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&ot(i,ye)):M==="children"?typeof ye=="string"?(h!=="textarea"||ye!=="")&&Ot(i,ye):typeof ye=="number"&&Ot(i,""+ye):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?ye!=null&&M==="onScroll"&&qr("scroll",i):ye!=null&&P(i,M,ye,V))}switch(h){case"input":we(i),ut(i,y,!1);break;case"textarea":we(i),De(i);break;case"option":y.value!=null&&i.setAttribute("value",""+se(y.value));break;case"select":i.multiple=!!y.multiple,M=y.value,M!=null?tr(i,!!y.multiple,M,!1):y.defaultValue!=null&&tr(i,!!y.multiple,y.defaultValue,!0);break;default:typeof C.onClick=="function"&&(i.onclick=Lu)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Za(c),null;case 6:if(i&&c.stateNode!=null)bN(i,c,i.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(a(166));if(h=vo(Hc.current),vo(Os.current),Wu(c)){if(y=c.stateNode,h=c.memoizedProps,y[Ds]=c,(M=y.nodeValue!==h)&&(i=$n,i!==null))switch(i.tag){case 3:$u(y.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&$u(y.nodeValue,h,(i.mode&1)!==0)}M&&(c.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[Ds]=c,c.stateNode=y}return Za(c),null;case 13:if(Hr(Qr),y=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Yr&&Ln!==null&&(c.mode&1)!==0&&(c.flags&128)===0)ww(),xl(),c.flags|=98560,M=!1;else if(M=Wu(c),y!==null&&y.dehydrated!==null){if(i===null){if(!M)throw Error(a(318));if(M=c.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(a(317));M[Ds]=c}else xl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Za(c),M=!1}else ps!==null&&(sg(ps),ps=null),M=!0;if(!M)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(y=y!==null,y!==(i!==null&&i.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(i===null||(Qr.current&1)!==0?Na===0&&(Na=3):lg())),c.updateQueue!==null&&(c.flags|=4),Za(c),null);case 4:return jl(),Kp(i,c),i===null&&$c(c.stateNode.containerInfo),Za(c),null;case 10:return wp(c.type._context),Za(c),null;case 17:return wn(c.type)&&Bu(),Za(c),null;case 19:if(Hr(Qr),M=c.memoizedState,M===null)return Za(c),null;if(y=(c.flags&128)!==0,V=M.rendering,V===null)if(y)Yc(M,!1);else{if(Na!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(V=Ju(i),V!==null){for(c.flags|=128,Yc(M,!1),y=V.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=h,h=c.child;h!==null;)M=h,i=y,M.flags&=14680066,V=M.alternate,V===null?(M.childLanes=0,M.lanes=i,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=V.childLanes,M.lanes=V.lanes,M.child=V.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=V.memoizedProps,M.memoizedState=V.memoizedState,M.updateQueue=V.updateQueue,M.type=V.type,i=V.dependencies,M.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return Rr(Qr,Qr.current&1|2),c.child}i=i.sibling}M.tail!==null&&kr()>Cl&&(c.flags|=128,y=!0,Yc(M,!1),c.lanes=4194304)}else{if(!y)if(i=Ju(V),i!==null){if(c.flags|=128,y=!0,h=i.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Yc(M,!0),M.tail===null&&M.tailMode==="hidden"&&!V.alternate&&!Yr)return Za(c),null}else 2*kr()-M.renderingStartTime>Cl&&h!==1073741824&&(c.flags|=128,y=!0,Yc(M,!1),c.lanes=4194304);M.isBackwards?(V.sibling=c.child,c.child=V):(h=M.last,h!==null?h.sibling=V:c.child=V,M.last=V)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=kr(),c.sibling=null,h=Qr.current,Rr(Qr,y?h&1|2:h&1),c):(Za(c),null);case 22:case 23:return og(),y=c.memoizedState!==null,i!==null&&i.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Fn&1073741824)!==0&&(Za(c),c.subtreeFlags&6&&(c.flags|=8192)):Za(c),null;case 24:return null;case 25:return null}throw Error(a(156,c.tag))}function JO(i,c){switch(gp(c),c.tag){case 1:return wn(c.type)&&Bu(),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return jl(),Hr(jn),Hr(Xa),Pp(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 5:return Ip(c),null;case 13:if(Hr(Qr),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(a(340));xl()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return Hr(Qr),null;case 4:return jl(),null;case 10:return wp(c.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var im=!1,Qa=!1,ZO=typeof WeakSet=="function"?WeakSet:Set,St=null;function Nl(i,c){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){sa(i,c,y)}else h.current=null}function Yp(i,c,h){try{h()}catch(y){sa(i,c,y)}}var vN=!1;function QO(i,c){if(op=ir,i=Zj(),Qf(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var C=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{h.nodeType,M.nodeType}catch{h=null;break e}var V=0,he=-1,ye=-1,ze=0,nt=0,it=i,rt=null;t:for(;;){for(var wt;it!==h||C!==0&&it.nodeType!==3||(he=V+C),it!==M||y!==0&&it.nodeType!==3||(ye=V+y),it.nodeType===3&&(V+=it.nodeValue.length),(wt=it.firstChild)!==null;)rt=it,it=wt;for(;;){if(it===i)break t;if(rt===h&&++ze===C&&(he=V),rt===M&&++nt===y&&(ye=V),(wt=it.nextSibling)!==null)break;it=rt,rt=it.parentNode}it=wt}h=he===-1||ye===-1?null:{start:he,end:ye}}else h=null}h=h||{start:0,end:0}}else h=null;for(lp={focusedElem:i,selectionRange:h},ir=!1,St=c;St!==null;)if(c=St,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,St=i;else for(;St!==null;){c=St;try{var At=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(At!==null){var Pt=At.memoizedProps,ma=At.memoizedState,Oe=c.stateNode,je=Oe.getSnapshotBeforeUpdate(c.elementType===c.type?Pt:gs(c.type,Pt),ma);Oe.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(mt){sa(c,c.return,mt)}if(i=c.sibling,i!==null){i.return=c.return,St=i;break}St=c.return}return At=vN,vN=!1,At}function Xc(i,c,h){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&i)===i){var M=C.destroy;C.destroy=void 0,M!==void 0&&Yp(c,h,M)}C=C.next}while(C!==y)}}function om(i,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&i)===i){var y=h.create;h.destroy=y()}h=h.next}while(h!==c)}}function Xp(i){var c=i.ref;if(c!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof c=="function"?c(i):c.current=i}}function jN(i){var c=i.alternate;c!==null&&(i.alternate=null,jN(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&(delete c[Ds],delete c[Fc],delete c[mp],delete c[MO],delete c[RO])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function wN(i){return i.tag===5||i.tag===3||i.tag===4}function NN(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||wN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jp(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(i,c):h.insertBefore(i,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(i,h)):(c=h,c.appendChild(i)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Lu));else if(y!==4&&(i=i.child,i!==null))for(Jp(i,c,h),i=i.sibling;i!==null;)Jp(i,c,h),i=i.sibling}function Zp(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?h.insertBefore(i,c):h.appendChild(i);else if(y!==4&&(i=i.child,i!==null))for(Zp(i,c,h),i=i.sibling;i!==null;)Zp(i,c,h),i=i.sibling}var Ua=null,xs=!1;function Fi(i,c,h){for(h=h.child;h!==null;)SN(i,c,h),h=h.sibling}function SN(i,c,h){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(sn,h)}catch{}switch(h.tag){case 5:Qa||Nl(h,c);case 6:var y=Ua,C=xs;Ua=null,Fi(i,c,h),Ua=y,xs=C,Ua!==null&&(xs?(i=Ua,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):Ua.removeChild(h.stateNode));break;case 18:Ua!==null&&(xs?(i=Ua,h=h.stateNode,i.nodeType===8?up(i.parentNode,h):i.nodeType===1&&up(i,h),Kr(i)):up(Ua,h.stateNode));break;case 4:y=Ua,C=xs,Ua=h.stateNode.containerInfo,xs=!0,Fi(i,c,h),Ua=y,xs=C;break;case 0:case 11:case 14:case 15:if(!Qa&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){C=y=y.next;do{var M=C,V=M.destroy;M=M.tag,V!==void 0&&((M&2)!==0||(M&4)!==0)&&Yp(h,c,V),C=C.next}while(C!==y)}Fi(i,c,h);break;case 1:if(!Qa&&(Nl(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(he){sa(h,c,he)}Fi(i,c,h);break;case 21:Fi(i,c,h);break;case 22:h.mode&1?(Qa=(y=Qa)||h.memoizedState!==null,Fi(i,c,h),Qa=y):Fi(i,c,h);break;default:Fi(i,c,h)}}function CN(i){var c=i.updateQueue;if(c!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new ZO),c.forEach(function(y){var C=l5.bind(null,i,y);h.has(y)||(h.add(y),y.then(C,C))})}}function ys(i,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var C=h[y];try{var M=i,V=c,he=V;e:for(;he!==null;){switch(he.tag){case 5:Ua=he.stateNode,xs=!1;break e;case 3:Ua=he.stateNode.containerInfo,xs=!0;break e;case 4:Ua=he.stateNode.containerInfo,xs=!0;break e}he=he.return}if(Ua===null)throw Error(a(160));SN(M,V,C),Ua=null,xs=!1;var ye=C.alternate;ye!==null&&(ye.return=null),C.return=null}catch(ze){sa(C,c,ze)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)kN(c,i),c=c.sibling}function kN(i,c){var h=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ys(c,i),Ms(i),y&4){try{Xc(3,i,i.return),om(3,i)}catch(Pt){sa(i,i.return,Pt)}try{Xc(5,i,i.return)}catch(Pt){sa(i,i.return,Pt)}}break;case 1:ys(c,i),Ms(i),y&512&&h!==null&&Nl(h,h.return);break;case 5:if(ys(c,i),Ms(i),y&512&&h!==null&&Nl(h,h.return),i.flags&32){var C=i.stateNode;try{Ot(C,"")}catch(Pt){sa(i,i.return,Pt)}}if(y&4&&(C=i.stateNode,C!=null)){var M=i.memoizedProps,V=h!==null?h.memoizedProps:M,he=i.type,ye=i.updateQueue;if(i.updateQueue=null,ye!==null)try{he==="input"&&M.type==="radio"&&M.name!=null&&pe(C,M),Ne(he,V);var ze=Ne(he,M);for(V=0;V<ye.length;V+=2){var nt=ye[V],it=ye[V+1];nt==="style"?Rt(C,it):nt==="dangerouslySetInnerHTML"?ot(C,it):nt==="children"?Ot(C,it):P(C,nt,it,ze)}switch(he){case"input":tt(C,M);break;case"textarea":Kt(C,M);break;case"select":var rt=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!M.multiple;var wt=M.value;wt!=null?tr(C,!!M.multiple,wt,!1):rt!==!!M.multiple&&(M.defaultValue!=null?tr(C,!!M.multiple,M.defaultValue,!0):tr(C,!!M.multiple,M.multiple?[]:"",!1))}C[Fc]=M}catch(Pt){sa(i,i.return,Pt)}}break;case 6:if(ys(c,i),Ms(i),y&4){if(i.stateNode===null)throw Error(a(162));C=i.stateNode,M=i.memoizedProps;try{C.nodeValue=M}catch(Pt){sa(i,i.return,Pt)}}break;case 3:if(ys(c,i),Ms(i),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Kr(c.containerInfo)}catch(Pt){sa(i,i.return,Pt)}break;case 4:ys(c,i),Ms(i);break;case 13:ys(c,i),Ms(i),C=i.child,C.flags&8192&&(M=C.memoizedState!==null,C.stateNode.isHidden=M,!M||C.alternate!==null&&C.alternate.memoizedState!==null||(tg=kr())),y&4&&CN(i);break;case 22:if(nt=h!==null&&h.memoizedState!==null,i.mode&1?(Qa=(ze=Qa)||nt,ys(c,i),Qa=ze):ys(c,i),Ms(i),y&8192){if(ze=i.memoizedState!==null,(i.stateNode.isHidden=ze)&&!nt&&(i.mode&1)!==0)for(St=i,nt=i.child;nt!==null;){for(it=St=nt;St!==null;){switch(rt=St,wt=rt.child,rt.tag){case 0:case 11:case 14:case 15:Xc(4,rt,rt.return);break;case 1:Nl(rt,rt.return);var At=rt.stateNode;if(typeof At.componentWillUnmount=="function"){y=rt,h=rt.return;try{c=y,At.props=c.memoizedProps,At.state=c.memoizedState,At.componentWillUnmount()}catch(Pt){sa(y,h,Pt)}}break;case 5:Nl(rt,rt.return);break;case 22:if(rt.memoizedState!==null){PN(it);continue}}wt!==null?(wt.return=rt,St=wt):PN(it)}nt=nt.sibling}e:for(nt=null,it=i;;){if(it.tag===5){if(nt===null){nt=it;try{C=it.stateNode,ze?(M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(he=it.stateNode,ye=it.memoizedProps.style,V=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,he.style.display=nr("display",V))}catch(Pt){sa(i,i.return,Pt)}}}else if(it.tag===6){if(nt===null)try{it.stateNode.nodeValue=ze?"":it.memoizedProps}catch(Pt){sa(i,i.return,Pt)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===i)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===i)break e;for(;it.sibling===null;){if(it.return===null||it.return===i)break e;nt===it&&(nt=null),it=it.return}nt===it&&(nt=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:ys(c,i),Ms(i),y&4&&CN(i);break;case 21:break;default:ys(c,i),Ms(i)}}function Ms(i){var c=i.flags;if(c&2){try{e:{for(var h=i.return;h!==null;){if(wN(h)){var y=h;break e}h=h.return}throw Error(a(160))}switch(y.tag){case 5:var C=y.stateNode;y.flags&32&&(Ot(C,""),y.flags&=-33);var M=NN(i);Zp(i,M,C);break;case 3:case 4:var V=y.stateNode.containerInfo,he=NN(i);Jp(i,he,V);break;default:throw Error(a(161))}}catch(ye){sa(i,i.return,ye)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function e5(i,c,h){St=i,IN(i)}function IN(i,c,h){for(var y=(i.mode&1)!==0;St!==null;){var C=St,M=C.child;if(C.tag===22&&y){var V=C.memoizedState!==null||im;if(!V){var he=C.alternate,ye=he!==null&&he.memoizedState!==null||Qa;he=im;var ze=Qa;if(im=V,(Qa=ye)&&!ze)for(St=C;St!==null;)V=St,ye=V.child,V.tag===22&&V.memoizedState!==null?EN(C):ye!==null?(ye.return=V,St=ye):EN(C);for(;M!==null;)St=M,IN(M),M=M.sibling;St=C,im=he,Qa=ze}AN(i)}else(C.subtreeFlags&8772)!==0&&M!==null?(M.return=C,St=M):AN(i)}}function AN(i){for(;St!==null;){var c=St;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Qa||om(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Qa)if(h===null)y.componentDidMount();else{var C=c.elementType===c.type?h.memoizedProps:gs(c.type,h.memoizedProps);y.componentDidUpdate(C,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var M=c.updateQueue;M!==null&&Pw(c,M,y);break;case 3:var V=c.updateQueue;if(V!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Pw(c,V,h)}break;case 5:var he=c.stateNode;if(h===null&&c.flags&4){h=he;var ye=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&h.focus();break;case"img":ye.src&&(h.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ze=c.alternate;if(ze!==null){var nt=ze.memoizedState;if(nt!==null){var it=nt.dehydrated;it!==null&&Kr(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Qa||c.flags&512&&Xp(c)}catch(rt){sa(c,c.return,rt)}}if(c===i){St=null;break}if(h=c.sibling,h!==null){h.return=c.return,St=h;break}St=c.return}}function PN(i){for(;St!==null;){var c=St;if(c===i){St=null;break}var h=c.sibling;if(h!==null){h.return=c.return,St=h;break}St=c.return}}function EN(i){for(;St!==null;){var c=St;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{om(4,c)}catch(ye){sa(c,h,ye)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var C=c.return;try{y.componentDidMount()}catch(ye){sa(c,C,ye)}}var M=c.return;try{Xp(c)}catch(ye){sa(c,M,ye)}break;case 5:var V=c.return;try{Xp(c)}catch(ye){sa(c,V,ye)}}}catch(ye){sa(c,c.return,ye)}if(c===i){St=null;break}var he=c.sibling;if(he!==null){he.return=c.return,St=he;break}St=c.return}}var t5=Math.ceil,lm=A.ReactCurrentDispatcher,Qp=A.ReactCurrentOwner,Jn=A.ReactCurrentBatchConfig,fr=0,Da=null,ya=null,za=0,Fn=0,Sl=_i(0),Na=0,Jc=null,wo=0,cm=0,eg=0,Zc=null,Sn=null,tg=0,Cl=1/0,oi=null,dm=!1,rg=null,Bi=null,um=!1,Ui=null,mm=0,Qc=0,ag=null,hm=-1,fm=0;function dn(){return(fr&6)!==0?kr():hm!==-1?hm:hm=kr()}function zi(i){return(i.mode&1)===0?1:(fr&2)!==0&&za!==0?za&-za:LO.transition!==null?(fm===0&&(fm=ie()),fm):(i=xt,i!==0||(i=window.event,i=i===void 0?16:ua(i.type)),i)}function bs(i,c,h,y){if(50<Qc)throw Qc=0,ag=null,Error(a(185));Ee(i,h,y),((fr&2)===0||i!==Da)&&(i===Da&&((fr&2)===0&&(cm|=h),Na===4&&qi(i,za)),Cn(i,y),h===1&&fr===0&&(c.mode&1)===0&&(Cl=kr()+500,zu&&Ri()))}function Cn(i,c){var h=i.callbackNode;q(i,c);var y=Mn(i,i===Da?za:0);if(y===0)h!==null&&Pa(h),i.callbackNode=null,i.callbackPriority=0;else if(c=y&-y,i.callbackPriority!==c){if(h!=null&&Pa(h),c===1)i.tag===0?$O(DN.bind(null,i)):xw(DN.bind(null,i)),OO(function(){(fr&6)===0&&Ri()}),h=null;else{switch($t(y)){case 1:h=As;break;case 4:h=On;break;case 16:h=Vn;break;case 536870912:h=nn;break;default:h=Vn}h=BN(h,TN.bind(null,i))}i.callbackPriority=c,i.callbackNode=h}}function TN(i,c){if(hm=-1,fm=0,(fr&6)!==0)throw Error(a(327));var h=i.callbackNode;if(kl()&&i.callbackNode!==h)return null;var y=Mn(i,i===Da?za:0);if(y===0)return null;if((y&30)!==0||(y&i.expiredLanes)!==0||c)c=pm(i,y);else{c=y;var C=fr;fr|=2;var M=_N();(Da!==i||za!==c)&&(oi=null,Cl=kr()+500,So(i,c));do try{n5();break}catch(he){ON(i,he)}while(!0);jp(),lm.current=M,fr=C,ya!==null?c=0:(Da=null,za=0,c=Na)}if(c!==0){if(c===2&&(C=Z(i),C!==0&&(y=C,c=ng(i,C))),c===1)throw h=Jc,So(i,0),qi(i,y),Cn(i,kr()),h;if(c===6)qi(i,y);else{if(C=i.current.alternate,(y&30)===0&&!r5(C)&&(c=pm(i,y),c===2&&(M=Z(i),M!==0&&(y=M,c=ng(i,M))),c===1))throw h=Jc,So(i,0),qi(i,y),Cn(i,kr()),h;switch(i.finishedWork=C,i.finishedLanes=y,c){case 0:case 1:throw Error(a(345));case 2:Co(i,Sn,oi);break;case 3:if(qi(i,y),(y&130023424)===y&&(c=tg+500-kr(),10<c)){if(Mn(i,0)!==0)break;if(C=i.suspendedLanes,(C&y)!==y){dn(),i.pingedLanes|=i.suspendedLanes&C;break}i.timeoutHandle=dp(Co.bind(null,i,Sn,oi),c);break}Co(i,Sn,oi);break;case 4:if(qi(i,y),(y&4194240)===y)break;for(c=i.eventTimes,C=-1;0<y;){var V=31-aa(y);M=1<<V,V=c[V],V>C&&(C=V),y&=~M}if(y=C,y=kr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*t5(y/1960))-y,10<y){i.timeoutHandle=dp(Co.bind(null,i,Sn,oi),y);break}Co(i,Sn,oi);break;case 5:Co(i,Sn,oi);break;default:throw Error(a(329))}}}return Cn(i,kr()),i.callbackNode===h?TN.bind(null,i):null}function ng(i,c){var h=Zc;return i.current.memoizedState.isDehydrated&&(So(i,c).flags|=256),i=pm(i,c),i!==2&&(c=Sn,Sn=h,c!==null&&sg(c)),i}function sg(i){Sn===null?Sn=i:Sn.push.apply(Sn,i)}function r5(i){for(var c=i;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var C=h[y],M=C.getSnapshot;C=C.value;try{if(!fs(M(),C))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function qi(i,c){for(c&=~eg,c&=~cm,i.suspendedLanes|=c,i.pingedLanes&=~c,i=i.expirationTimes;0<c;){var h=31-aa(c),y=1<<h;i[h]=-1,c&=~y}}function DN(i){if((fr&6)!==0)throw Error(a(327));kl();var c=Mn(i,0);if((c&1)===0)return Cn(i,kr()),null;var h=pm(i,c);if(i.tag!==0&&h===2){var y=Z(i);y!==0&&(c=y,h=ng(i,y))}if(h===1)throw h=Jc,So(i,0),qi(i,c),Cn(i,kr()),h;if(h===6)throw Error(a(345));return i.finishedWork=i.current.alternate,i.finishedLanes=c,Co(i,Sn,oi),Cn(i,kr()),null}function ig(i,c){var h=fr;fr|=1;try{return i(c)}finally{fr=h,fr===0&&(Cl=kr()+500,zu&&Ri())}}function No(i){Ui!==null&&Ui.tag===0&&(fr&6)===0&&kl();var c=fr;fr|=1;var h=Jn.transition,y=xt;try{if(Jn.transition=null,xt=1,i)return i()}finally{xt=y,Jn.transition=h,fr=c,(fr&6)===0&&Ri()}}function og(){Fn=Sl.current,Hr(Sl)}function So(i,c){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,DO(h)),ya!==null)for(h=ya.return;h!==null;){var y=h;switch(gp(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Bu();break;case 3:jl(),Hr(jn),Hr(Xa),Pp();break;case 5:Ip(y);break;case 4:jl();break;case 13:Hr(Qr);break;case 19:Hr(Qr);break;case 10:wp(y.type._context);break;case 22:case 23:og()}h=h.return}if(Da=i,ya=i=Hi(i.current,null),za=Fn=c,Na=0,Jc=null,eg=cm=wo=0,Sn=Zc=null,bo!==null){for(c=0;c<bo.length;c++)if(h=bo[c],y=h.interleaved,y!==null){h.interleaved=null;var C=y.next,M=h.pending;if(M!==null){var V=M.next;M.next=C,y.next=V}h.pending=y}bo=null}return i}function ON(i,c){do{var h=ya;try{if(jp(),Zu.current=rm,Qu){for(var y=ea.memoizedState;y!==null;){var C=y.queue;C!==null&&(C.pending=null),y=y.next}Qu=!1}if(jo=0,Ta=wa=ea=null,Wc=!1,Vc=0,Qp.current=null,h===null||h.return===null){Na=1,Jc=c,ya=null;break}e:{var M=i,V=h.return,he=h,ye=c;if(c=za,he.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var ze=ye,nt=he,it=nt.tag;if((nt.mode&1)===0&&(it===0||it===11||it===15)){var rt=nt.alternate;rt?(nt.updateQueue=rt.updateQueue,nt.memoizedState=rt.memoizedState,nt.lanes=rt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var wt=nN(V);if(wt!==null){wt.flags&=-257,sN(wt,V,he,M,c),wt.mode&1&&aN(M,ze,c),c=wt,ye=ze;var At=c.updateQueue;if(At===null){var Pt=new Set;Pt.add(ye),c.updateQueue=Pt}else At.add(ye);break e}else{if((c&1)===0){aN(M,ze,c),lg();break e}ye=Error(a(426))}}else if(Yr&&he.mode&1){var ma=nN(V);if(ma!==null){(ma.flags&65536)===0&&(ma.flags|=256),sN(ma,V,he,M,c),bp(wl(ye,he));break e}}M=ye=wl(ye,he),Na!==4&&(Na=2),Zc===null?Zc=[M]:Zc.push(M),M=V;do{switch(M.tag){case 3:M.flags|=65536,c&=-c,M.lanes|=c;var Oe=tN(M,ye,c);Aw(M,Oe);break e;case 1:he=ye;var je=M.type,$e=M.stateNode;if((M.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(Bi===null||!Bi.has($e)))){M.flags|=65536,c&=-c,M.lanes|=c;var mt=rN(M,he,c);Aw(M,mt);break e}}M=M.return}while(M!==null)}RN(h)}catch(Dt){c=Dt,ya===h&&h!==null&&(ya=h=h.return);continue}break}while(!0)}function _N(){var i=lm.current;return lm.current=rm,i===null?rm:i}function lg(){(Na===0||Na===3||Na===2)&&(Na=4),Da===null||(wo&268435455)===0&&(cm&268435455)===0||qi(Da,za)}function pm(i,c){var h=fr;fr|=2;var y=_N();(Da!==i||za!==c)&&(oi=null,So(i,c));do try{a5();break}catch(C){ON(i,C)}while(!0);if(jp(),fr=h,lm.current=y,ya!==null)throw Error(a(261));return Da=null,za=0,Na}function a5(){for(;ya!==null;)MN(ya)}function n5(){for(;ya!==null&&!Is();)MN(ya)}function MN(i){var c=FN(i.alternate,i,Fn);i.memoizedProps=i.pendingProps,c===null?RN(i):ya=c,Qp.current=null}function RN(i){var c=i;do{var h=c.alternate;if(i=c.return,(c.flags&32768)===0){if(h=XO(h,c,Fn),h!==null){ya=h;return}}else{if(h=JO(h,c),h!==null){h.flags&=32767,ya=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Na=6,ya=null;return}}if(c=c.sibling,c!==null){ya=c;return}ya=c=i}while(c!==null);Na===0&&(Na=5)}function Co(i,c,h){var y=xt,C=Jn.transition;try{Jn.transition=null,xt=1,s5(i,c,h,y)}finally{Jn.transition=C,xt=y}return null}function s5(i,c,h,y){do kl();while(Ui!==null);if((fr&6)!==0)throw Error(a(327));h=i.finishedWork;var C=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(a(177));i.callbackNode=null,i.callbackPriority=0;var M=h.lanes|h.childLanes;if(Ye(i,M),i===Da&&(ya=Da=null,za=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||um||(um=!0,BN(Vn,function(){return kl(),null})),M=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||M){M=Jn.transition,Jn.transition=null;var V=xt;xt=1;var he=fr;fr|=4,Qp.current=null,QO(i,h),kN(h,i),CO(lp),ir=!!op,lp=op=null,i.current=h,e5(h),Pi(),fr=he,xt=V,Jn.transition=M}else i.current=h;if(um&&(um=!1,Ui=i,mm=C),M=i.pendingLanes,M===0&&(Bi=null),ms(h.stateNode),Cn(i,kr()),c!==null)for(y=i.onRecoverableError,h=0;h<c.length;h++)C=c[h],y(C.value,{componentStack:C.stack,digest:C.digest});if(dm)throw dm=!1,i=rg,rg=null,i;return(mm&1)!==0&&i.tag!==0&&kl(),M=i.pendingLanes,(M&1)!==0?i===ag?Qc++:(Qc=0,ag=i):Qc=0,Ri(),null}function kl(){if(Ui!==null){var i=$t(mm),c=Jn.transition,h=xt;try{if(Jn.transition=null,xt=16>i?16:i,Ui===null)var y=!1;else{if(i=Ui,Ui=null,mm=0,(fr&6)!==0)throw Error(a(331));var C=fr;for(fr|=4,St=i.current;St!==null;){var M=St,V=M.child;if((St.flags&16)!==0){var he=M.deletions;if(he!==null){for(var ye=0;ye<he.length;ye++){var ze=he[ye];for(St=ze;St!==null;){var nt=St;switch(nt.tag){case 0:case 11:case 15:Xc(8,nt,M)}var it=nt.child;if(it!==null)it.return=nt,St=it;else for(;St!==null;){nt=St;var rt=nt.sibling,wt=nt.return;if(jN(nt),nt===ze){St=null;break}if(rt!==null){rt.return=wt,St=rt;break}St=wt}}}var At=M.alternate;if(At!==null){var Pt=At.child;if(Pt!==null){At.child=null;do{var ma=Pt.sibling;Pt.sibling=null,Pt=ma}while(Pt!==null)}}St=M}}if((M.subtreeFlags&2064)!==0&&V!==null)V.return=M,St=V;else e:for(;St!==null;){if(M=St,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Xc(9,M,M.return)}var Oe=M.sibling;if(Oe!==null){Oe.return=M.return,St=Oe;break e}St=M.return}}var je=i.current;for(St=je;St!==null;){V=St;var $e=V.child;if((V.subtreeFlags&2064)!==0&&$e!==null)$e.return=V,St=$e;else e:for(V=je;St!==null;){if(he=St,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:om(9,he)}}catch(Dt){sa(he,he.return,Dt)}if(he===V){St=null;break e}var mt=he.sibling;if(mt!==null){mt.return=he.return,St=mt;break e}St=he.return}}if(fr=C,Ri(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(sn,i)}catch{}y=!0}return y}finally{xt=h,Jn.transition=c}}return!1}function $N(i,c,h){c=wl(h,c),c=tN(i,c,1),i=Li(i,c,1),c=dn(),i!==null&&(Ee(i,1,c),Cn(i,c))}function sa(i,c,h){if(i.tag===3)$N(i,i,h);else for(;c!==null;){if(c.tag===3){$N(c,i,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bi===null||!Bi.has(y))){i=wl(h,i),i=rN(c,i,1),c=Li(c,i,1),i=dn(),c!==null&&(Ee(c,1,i),Cn(c,i));break}}c=c.return}}function i5(i,c,h){var y=i.pingCache;y!==null&&y.delete(c),c=dn(),i.pingedLanes|=i.suspendedLanes&h,Da===i&&(za&h)===h&&(Na===4||Na===3&&(za&130023424)===za&&500>kr()-tg?So(i,0):eg|=h),Cn(i,c)}function LN(i,c){c===0&&((i.mode&1)===0?c=1:(c=hs,hs<<=1,(hs&130023424)===0&&(hs=4194304)));var h=dn();i=ni(i,c),i!==null&&(Ee(i,c,h),Cn(i,h))}function o5(i){var c=i.memoizedState,h=0;c!==null&&(h=c.retryLane),LN(i,h)}function l5(i,c){var h=0;switch(i.tag){case 13:var y=i.stateNode,C=i.memoizedState;C!==null&&(h=C.retryLane);break;case 19:y=i.stateNode;break;default:throw Error(a(314))}y!==null&&y.delete(c),LN(i,h)}var FN;FN=function(i,c,h){if(i!==null)if(i.memoizedProps!==c.pendingProps||jn.current)Nn=!0;else{if((i.lanes&h)===0&&(c.flags&128)===0)return Nn=!1,YO(i,c,h);Nn=(i.flags&131072)!==0}else Nn=!1,Yr&&(c.flags&1048576)!==0&&yw(c,Hu,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;sm(i,c),i=c.pendingProps;var C=fl(c,Xa.current);vl(c,h),C=Dp(null,c,y,i,C,h);var M=Op();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,wn(y)?(M=!0,Uu(c)):M=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Cp(c),C.updater=am,c.stateNode=C,C._reactInternals=c,Fp(c,y,i,h),c=qp(null,c,y,!0,M,h)):(c.tag=0,Yr&&M&&pp(c),cn(null,c,C,h),c=c.child),c;case 16:y=c.elementType;e:{switch(sm(i,c),i=c.pendingProps,C=y._init,y=C(y._payload),c.type=y,C=c.tag=d5(y),i=gs(y,i),C){case 0:c=zp(null,c,y,i,h);break e;case 1:c=uN(null,c,y,i,h);break e;case 11:c=iN(null,c,y,i,h);break e;case 14:c=oN(null,c,y,gs(y.type,i),h);break e}throw Error(a(306,y,""))}return c;case 0:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:gs(y,C),zp(i,c,y,C,h);case 1:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:gs(y,C),uN(i,c,y,C,h);case 3:e:{if(mN(c),i===null)throw Error(a(387));y=c.pendingProps,M=c.memoizedState,C=M.element,Iw(i,c),Xu(c,y,null,h);var V=c.memoizedState;if(y=V.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=M,c.memoizedState=M,c.flags&256){C=wl(Error(a(423)),c),c=hN(i,c,y,h,C);break e}else if(y!==C){C=wl(Error(a(424)),c),c=hN(i,c,y,h,C);break e}else for(Ln=Oi(c.stateNode.containerInfo.firstChild),$n=c,Yr=!0,ps=null,h=Cw(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(xl(),y===C){c=ii(i,c,h);break e}cn(i,c,y,h)}c=c.child}return c;case 5:return Ew(c),i===null&&yp(c),y=c.type,C=c.pendingProps,M=i!==null?i.memoizedProps:null,V=C.children,cp(y,C)?V=null:M!==null&&cp(y,M)&&(c.flags|=32),dN(i,c),cn(i,c,V,h),c.child;case 6:return i===null&&yp(c),null;case 13:return fN(i,c,h);case 4:return kp(c,c.stateNode.containerInfo),y=c.pendingProps,i===null?c.child=yl(c,null,y,h):cn(i,c,y,h),c.child;case 11:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:gs(y,C),iN(i,c,y,C,h);case 7:return cn(i,c,c.pendingProps,h),c.child;case 8:return cn(i,c,c.pendingProps.children,h),c.child;case 12:return cn(i,c,c.pendingProps.children,h),c.child;case 10:e:{if(y=c.type._context,C=c.pendingProps,M=c.memoizedProps,V=C.value,Rr(Gu,y._currentValue),y._currentValue=V,M!==null)if(fs(M.value,V)){if(M.children===C.children&&!jn.current){c=ii(i,c,h);break e}}else for(M=c.child,M!==null&&(M.return=c);M!==null;){var he=M.dependencies;if(he!==null){V=M.child;for(var ye=he.firstContext;ye!==null;){if(ye.context===y){if(M.tag===1){ye=si(-1,h&-h),ye.tag=2;var ze=M.updateQueue;if(ze!==null){ze=ze.shared;var nt=ze.pending;nt===null?ye.next=ye:(ye.next=nt.next,nt.next=ye),ze.pending=ye}}M.lanes|=h,ye=M.alternate,ye!==null&&(ye.lanes|=h),Np(M.return,h,c),he.lanes|=h;break}ye=ye.next}}else if(M.tag===10)V=M.type===c.type?null:M.child;else if(M.tag===18){if(V=M.return,V===null)throw Error(a(341));V.lanes|=h,he=V.alternate,he!==null&&(he.lanes|=h),Np(V,h,c),V=M.sibling}else V=M.child;if(V!==null)V.return=M;else for(V=M;V!==null;){if(V===c){V=null;break}if(M=V.sibling,M!==null){M.return=V.return,V=M;break}V=V.return}M=V}cn(i,c,C.children,h),c=c.child}return c;case 9:return C=c.type,y=c.pendingProps.children,vl(c,h),C=Yn(C),y=y(C),c.flags|=1,cn(i,c,y,h),c.child;case 14:return y=c.type,C=gs(y,c.pendingProps),C=gs(y.type,C),oN(i,c,y,C,h);case 15:return lN(i,c,c.type,c.pendingProps,h);case 17:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:gs(y,C),sm(i,c),c.tag=1,wn(y)?(i=!0,Uu(c)):i=!1,vl(c,h),Qw(c,y,C),Fp(c,y,C,h),qp(null,c,y,!0,i,h);case 19:return gN(i,c,h);case 22:return cN(i,c,h)}throw Error(a(156,c.tag))};function BN(i,c){return Ga(i,c)}function c5(i,c,h,y){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(i,c,h,y){return new c5(i,c,h,y)}function cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function d5(i){if(typeof i=="function")return cg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Y)return 11;if(i===K)return 14}return 2}function Hi(i,c){var h=i.alternate;return h===null?(h=Zn(i.tag,c,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=c,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,c=i.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function gm(i,c,h,y,C,M){var V=2;if(y=i,typeof i=="function")cg(i)&&(V=1);else if(typeof i=="string")V=5;else e:switch(i){case _:return ko(h.children,C,M,c);case R:V=8,C|=8;break;case $:return i=Zn(12,h,c,C|2),i.elementType=$,i.lanes=M,i;case X:return i=Zn(13,h,c,C),i.elementType=X,i.lanes=M,i;case me:return i=Zn(19,h,c,C),i.elementType=me,i.lanes=M,i;case G:return xm(h,C,M,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:V=10;break e;case L:V=9;break e;case Y:V=11;break e;case K:V=14;break e;case oe:V=16,y=null;break e}throw Error(a(130,i==null?i:typeof i,""))}return c=Zn(V,h,c,C),c.elementType=i,c.type=y,c.lanes=M,c}function ko(i,c,h,y){return i=Zn(7,i,y,c),i.lanes=h,i}function xm(i,c,h,y){return i=Zn(22,i,y,c),i.elementType=G,i.lanes=h,i.stateNode={isHidden:!1},i}function dg(i,c,h){return i=Zn(6,i,null,c),i.lanes=h,i}function ug(i,c,h){return c=Zn(4,i.children!==null?i.children:[],i.key,c),c.lanes=h,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function u5(i,c,h,y,C){this.tag=c,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Re(0),this.expirationTimes=Re(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.identifierPrefix=y,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function mg(i,c,h,y,C,M,V,he,ye){return i=new u5(i,c,h,he,ye),c===1?(c=1,M===!0&&(c|=8)):c=0,M=Zn(3,null,null,c),i.current=M,M.stateNode=i,M.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cp(M),i}function m5(i,c,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:y==null?null:""+y,children:i,containerInfo:c,implementation:h}}function UN(i){if(!i)return Mi;i=i._reactInternals;e:{if(Or(i)!==i||i.tag!==1)throw Error(a(170));var c=i;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(a(171))}if(i.tag===1){var h=i.type;if(wn(h))return pw(i,h,c)}return c}function zN(i,c,h,y,C,M,V,he,ye){return i=mg(h,y,!0,i,C,M,V,he,ye),i.context=UN(null),h=i.current,y=dn(),C=zi(h),M=si(y,C),M.callback=c??null,Li(h,M,C),i.current.lanes=C,Ee(i,C,y),Cn(i,y),i}function ym(i,c,h,y){var C=c.current,M=dn(),V=zi(C);return h=UN(h),c.context===null?c.context=h:c.pendingContext=h,c=si(M,V),c.payload={element:i},y=y===void 0?null:y,y!==null&&(c.callback=y),i=Li(C,c,V),i!==null&&(bs(i,C,V,M),Yu(i,C,V)),V}function bm(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function qN(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<c?h:c}}function hg(i,c){qN(i,c),(i=i.alternate)&&qN(i,c)}function h5(){return null}var HN=typeof reportError=="function"?reportError:function(i){console.error(i)};function fg(i){this._internalRoot=i}vm.prototype.render=fg.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(a(409));ym(i,c,null,null)},vm.prototype.unmount=fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;No(function(){ym(null,i,null,null)}),c[ei]=null}};function vm(i){this._internalRoot=i}vm.prototype.unstable_scheduleHydration=function(i){if(i){var c=Fa();i={blockedOn:null,target:i,priority:c};for(var h=0;h<Ge.length&&c!==0&&c<Ge[h].priority;h++);Ge.splice(h,0,i),h===0&&It(i)}};function pg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function jm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function WN(){}function f5(i,c,h,y,C){if(C){if(typeof y=="function"){var M=y;y=function(){var ze=bm(V);M.call(ze)}}var V=zN(c,y,i,0,null,!1,!1,"",WN);return i._reactRootContainer=V,i[ei]=V.current,$c(i.nodeType===8?i.parentNode:i),No(),V}for(;C=i.lastChild;)i.removeChild(C);if(typeof y=="function"){var he=y;y=function(){var ze=bm(ye);he.call(ze)}}var ye=mg(i,0,!1,null,null,!1,!1,"",WN);return i._reactRootContainer=ye,i[ei]=ye.current,$c(i.nodeType===8?i.parentNode:i),No(function(){ym(c,ye,h,y)}),ye}function wm(i,c,h,y,C){var M=h._reactRootContainer;if(M){var V=M;if(typeof C=="function"){var he=C;C=function(){var ye=bm(V);he.call(ye)}}ym(c,V,i,C)}else V=f5(h,c,i,C,y);return bm(V)}Ht=function(i){switch(i.tag){case 3:var c=i.stateNode;if(c.current.memoizedState.isDehydrated){var h=ca(c.pendingLanes);h!==0&&(dt(c,h|1),Cn(c,kr()),(fr&6)===0&&(Cl=kr()+500,Ri()))}break;case 13:No(function(){var y=ni(i,1);if(y!==null){var C=dn();bs(y,i,1,C)}}),hg(i,1)}},br=function(i){if(i.tag===13){var c=ni(i,134217728);if(c!==null){var h=dn();bs(c,i,134217728,h)}hg(i,134217728)}},Ka=function(i){if(i.tag===13){var c=zi(i),h=ni(i,c);if(h!==null){var y=dn();bs(h,i,c,y)}hg(i,c)}},Fa=function(){return xt},g=function(i,c){var h=xt;try{return xt=i,c()}finally{xt=h}},Pe=function(i,c,h){switch(c){case"input":if(tt(i,h),c=h.name,h.type==="radio"&&c!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==i&&y.form===i.form){var C=Fu(y);if(!C)throw Error(a(90));ce(y),tt(y,C)}}}break;case"textarea":Kt(i,h);break;case"select":c=h.value,c!=null&&tr(i,!!h.multiple,c,!1)}},Fe=ig,ke=No;var p5={usingClientEntryPoint:!1,Events:[Bc,ml,Fu,ee,Ce,ig]},ed={findFiberByHostInstance:po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g5={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Aa(i),i===null?null:i.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||h5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{sn=Nm.inject(g5),Ea=Nm}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p5,kn.createPortal=function(i,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pg(c))throw Error(a(200));return m5(i,c,null,h)},kn.createRoot=function(i,c){if(!pg(i))throw Error(a(299));var h=!1,y="",C=HN;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=mg(i,1,!1,null,null,h,!1,y,C),i[ei]=c.current,$c(i.nodeType===8?i.parentNode:i),new fg(c)},kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=Aa(c),i=i===null?null:i.stateNode,i},kn.flushSync=function(i){return No(i)},kn.hydrate=function(i,c,h){if(!jm(c))throw Error(a(200));return wm(null,i,c,!0,h)},kn.hydrateRoot=function(i,c,h){if(!pg(i))throw Error(a(405));var y=h!=null&&h.hydratedSources||null,C=!1,M="",V=HN;if(h!=null&&(h.unstable_strictMode===!0&&(C=!0),h.identifierPrefix!==void 0&&(M=h.identifierPrefix),h.onRecoverableError!==void 0&&(V=h.onRecoverableError)),c=zN(c,null,i,1,h??null,C,!1,M,V),i[ei]=c.current,$c(i),y)for(i=0;i<y.length;i++)h=y[i],C=h._getVersion,C=C(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,C]:c.mutableSourceEagerHydrationData.push(h,C);return new vm(c)},kn.render=function(i,c,h){if(!jm(c))throw Error(a(200));return wm(null,i,c,!1,h)},kn.unmountComponentAtNode=function(i){if(!jm(i))throw Error(a(40));return i._reactRootContainer?(No(function(){wm(null,null,i,!1,function(){i._reactRootContainer=null,i[ei]=null})}),!0):!1},kn.unstable_batchedUpdates=ig,kn.unstable_renderSubtreeIntoContainer=function(i,c,h,y){if(!jm(h))throw Error(a(200));if(i==null||i._reactInternals===void 0)throw Error(a(38));return wm(i,c,h,!1,y)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var QN;function FP(){if(QN)return yg.exports;QN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yg.exports=S5(),yg.exports}var e2;function C5(){if(e2)return Cm;e2=1;var e=FP();return Cm.createRoot=e.createRoot,Cm.hydrateRoot=e.hydrateRoot,Cm}var k5=C5();const I5=Sr(k5);var S=mu();const ge=Sr(S),A5=y5({__proto__:null,default:ge},[S]);FP();function Cd(){return Cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Cd.apply(this,arguments)}var Qi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qi||(Qi={}));const t2="popstate";function P5(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:l,hash:d}=n.location;return Mb("",{pathname:o,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(n,s){return typeof s=="string"?s:Zm(s)}return T5(t,a,null,e)}function ha(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function BP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function E5(){return Math.random().toString(36).substr(2,8)}function r2(e,t){return{usr:e.state,key:e.key,idx:t}}function Mb(e,t,a,n){return a===void 0&&(a=null),Cd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hc(t):t,{state:a,key:t&&t.key||n||E5()})}function Zm(e){let{pathname:t="/",search:a="",hash:n=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hc(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function T5(e,t,a,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,d=Qi.Pop,u=null,m=p();m==null&&(m=0,l.replaceState(Cd({},l.state,{idx:m}),""));function p(){return(l.state||{idx:null}).idx}function f(){d=Qi.Pop;let b=p(),I=b==null?null:b-m;m=b,u&&u({action:d,location:v.location,delta:I})}function x(b,I){d=Qi.Push;let T=Mb(v.location,b,I);m=p()+1;let P=r2(T,m),A=v.createHref(T);try{l.pushState(P,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(A)}o&&u&&u({action:d,location:v.location,delta:1})}function w(b,I){d=Qi.Replace;let T=Mb(v.location,b,I);m=p();let P=r2(T,m),A=v.createHref(T);l.replaceState(P,"",A),o&&u&&u({action:d,location:v.location,delta:0})}function j(b){let I=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof b=="string"?b:Zm(b);return T=T.replace(/ $/,"%20"),ha(I,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,I)}let v={get action(){return d},get location(){return e(s,l)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(t2,f),u=b,()=>{s.removeEventListener(t2,f),u=null}},createHref(b){return t(s,b)},createURL:j,encodeLocation(b){let I=j(b);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:x,replace:w,go(b){return l.go(b)}};return v}var a2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(a2||(a2={}));function D5(e,t,a){return a===void 0&&(a="/"),O5(e,t,a)}function O5(e,t,a,n){let s=typeof t=="string"?hc(t):t,o=C1(s.pathname||"/",a);if(o==null)return null;let l=UP(e);_5(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let m=V5(o);d=q5(l[u],m)}return d}function UP(e,t,a,n){t===void 0&&(t=[]),a===void 0&&(a=[]),n===void 0&&(n="");let s=(o,l,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(ha(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let m=to([n,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(ha(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),UP(o.children,t,p,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:U5(m,o.index),routesMeta:p})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,l);else for(let u of zP(o.path))s(o,l,u)}),t}function zP(e){let t=e.split("/");if(t.length===0)return[];let[a,...n]=t,s=a.endsWith("?"),o=a.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=zP(n.join("/")),d=[];return d.push(...l.map(u=>u===""?o:[o,u].join("/"))),s&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function _5(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:z5(t.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const M5=/^:[\w-]+$/,R5=3,$5=2,L5=1,F5=10,B5=-2,n2=e=>e==="*";function U5(e,t){let a=e.split("/"),n=a.length;return a.some(n2)&&(n+=B5),t&&(n+=$5),a.filter(s=>!n2(s)).reduce((s,o)=>s+(M5.test(o)?R5:o===""?L5:F5),n)}function z5(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function q5(e,t,a){let{routesMeta:n}=e,s={},o="/",l=[];for(let d=0;d<n.length;++d){let u=n[d],m=d===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",f=H5({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},p),x=u.route;if(!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:to([o,f.pathname]),pathnameBase:X5(to([o,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(o=to([o,f.pathnameBase]))}return l}function H5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=W5(e.path,e.caseSensitive,e.end),s=t.match(a);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((m,p,f)=>{let{paramName:x,isOptional:w}=p;if(x==="*"){let v=d[f]||"";l=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const j=d[f];return w&&!j?m[x]=void 0:m[x]=(j||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:e}}function W5(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),BP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(n.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function V5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return BP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function C1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&n!=="/"?null:e.slice(a)||"/"}function G5(e,t){t===void 0&&(t="/");let{pathname:a,search:n="",hash:s=""}=typeof e=="string"?hc(e):e;return{pathname:a?a.startsWith("/")?a:K5(a,t):t,search:J5(n),hash:Z5(s)}}function K5(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function jg(e,t,a,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y5(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function k1(e,t){let a=Y5(e);return t?a.map((n,s)=>s===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function I1(e,t,a,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=hc(e):(s=Cd({},e),ha(!s.pathname||!s.pathname.includes("?"),jg("?","pathname","search",s)),ha(!s.pathname||!s.pathname.includes("#"),jg("#","pathname","hash",s)),ha(!s.search||!s.search.includes("#"),jg("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,d;if(l==null)d=a;else{let f=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}d=f>=0?t[f]:"/"}let u=G5(s,d),m=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&a.endsWith("/");return!u.pathname.endsWith("/")&&(m||p)&&(u.pathname+="/"),u}const to=e=>e.join("/").replace(/\/\/+/g,"/"),X5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qP=["post","put","patch","delete"];new Set(qP);const e6=["get",...qP];new Set(e6);function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},kd.apply(this,arguments)}const A1=S.createContext(null),t6=S.createContext(null),so=S.createContext(null),Zh=S.createContext(null),Si=S.createContext({outlet:null,matches:[],isDataRoute:!1}),HP=S.createContext(null);function r6(e,t){let{relative:a}=t===void 0?{}:t;fc()||ha(!1);let{basename:n,navigator:s}=S.useContext(so),{hash:o,pathname:l,search:d}=VP(e,{relative:a}),u=l;return n!=="/"&&(u=l==="/"?n:to([n,l])),s.createHref({pathname:u,search:d,hash:o})}function fc(){return S.useContext(Zh)!=null}function Gs(){return fc()||ha(!1),S.useContext(Zh).location}function WP(e){S.useContext(so).static||S.useLayoutEffect(e)}function Zo(){let{isDataRoute:e}=S.useContext(Si);return e?x6():a6()}function a6(){fc()||ha(!1);let e=S.useContext(A1),{basename:t,future:a,navigator:n}=S.useContext(so),{matches:s}=S.useContext(Si),{pathname:o}=Gs(),l=JSON.stringify(k1(s,a.v7_relativeSplatPath)),d=S.useRef(!1);return WP(()=>{d.current=!0}),S.useCallback(function(m,p){if(p===void 0&&(p={}),!d.current)return;if(typeof m=="number"){n.go(m);return}let f=I1(m,JSON.parse(l),o,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:to([t,f.pathname])),(p.replace?n.replace:n.push)(f,p.state,p)},[t,n,l,o,e])}const n6=S.createContext(null);function s6(e){let t=S.useContext(Si).outlet;return t&&S.createElement(n6.Provider,{value:e},t)}function VP(e,t){let{relative:a}=t===void 0?{}:t,{future:n}=S.useContext(so),{matches:s}=S.useContext(Si),{pathname:o}=Gs(),l=JSON.stringify(k1(s,n.v7_relativeSplatPath));return S.useMemo(()=>I1(e,JSON.parse(l),o,a==="path"),[e,l,o,a])}function i6(e,t){return o6(e,t)}function o6(e,t,a,n){fc()||ha(!1);let{navigator:s}=S.useContext(so),{matches:o}=S.useContext(Si),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=Gs(),p;if(t){var f;let b=typeof t=="string"?hc(t):t;u==="/"||(f=b.pathname)!=null&&f.startsWith(u)||ha(!1),p=b}else p=m;let x=p.pathname||"/",w=x;if(u!=="/"){let b=u.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(b.length).join("/")}let j=D5(e,{pathname:w}),v=m6(j&&j.map(b=>Object.assign({},b,{params:Object.assign({},d,b.params),pathname:to([u,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:to([u,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,a,n);return t&&v?S.createElement(Zh.Provider,{value:{location:kd({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Qi.Pop}},v):v}function l6(){let e=g6(),t=Q5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),a?S.createElement("pre",{style:s},a):null,null)}const c6=S.createElement(l6,null);class d6 extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?S.createElement(Si.Provider,{value:this.props.routeContext},S.createElement(HP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u6(e){let{routeContext:t,match:a,children:n}=e,s=S.useContext(A1);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),S.createElement(Si.Provider,{value:t},n)}function m6(e,t,a,n){var s;if(t===void 0&&(t=[]),a===void 0&&(a=null),n===void 0&&(n=null),e==null){var o;if(!a)return null;if(a.errors)e=a.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let l=e,d=(s=a)==null?void 0:s.errors;if(d!=null){let p=l.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);p>=0||ha(!1),l=l.slice(0,Math.min(l.length,p+1))}let u=!1,m=-1;if(a&&n&&n.v7_partialHydration)for(let p=0;p<l.length;p++){let f=l[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=p),f.route.id){let{loaderData:x,errors:w}=a,j=f.route.loader&&x[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||j){u=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((p,f,x)=>{let w,j=!1,v=null,b=null;a&&(w=d&&f.route.id?d[f.route.id]:void 0,v=f.route.errorElement||c6,u&&(m<0&&x===0?(y6("route-fallback"),j=!0,b=null):m===x&&(j=!0,b=f.route.hydrateFallbackElement||null)));let I=t.concat(l.slice(0,x+1)),T=()=>{let P;return w?P=v:j?P=b:f.route.Component?P=S.createElement(f.route.Component,null):f.route.element?P=f.route.element:P=p,S.createElement(u6,{match:f,routeContext:{outlet:p,matches:I,isDataRoute:a!=null},children:P})};return a&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?S.createElement(d6,{location:a.location,revalidation:a.revalidation,component:v,error:w,children:T(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):T()},null)}var GP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(GP||{}),KP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(KP||{});function h6(e){let t=S.useContext(A1);return t||ha(!1),t}function f6(e){let t=S.useContext(t6);return t||ha(!1),t}function p6(e){let t=S.useContext(Si);return t||ha(!1),t}function YP(e){let t=p6(),a=t.matches[t.matches.length-1];return a.route.id||ha(!1),a.route.id}function g6(){var e;let t=S.useContext(HP),a=f6(),n=YP();return t!==void 0?t:(e=a.errors)==null?void 0:e[n]}function x6(){let{router:e}=h6(GP.UseNavigateStable),t=YP(KP.UseNavigateStable),a=S.useRef(!1);return WP(()=>{a.current=!0}),S.useCallback(function(s,o){o===void 0&&(o={}),a.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,kd({fromRouteId:t},o)))},[e,t])}const s2={};function y6(e,t,a){s2[e]||(s2[e]=!0)}function b6(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Ls(e){let{to:t,replace:a,state:n,relative:s}=e;fc()||ha(!1);let{future:o,static:l}=S.useContext(so),{matches:d}=S.useContext(Si),{pathname:u}=Gs(),m=Zo(),p=I1(t,k1(d,o.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(p);return S.useEffect(()=>m(JSON.parse(f),{replace:a,state:n,relative:s}),[m,f,s,a,n]),null}function XP(e){return s6(e.context)}function Nr(e){ha(!1)}function v6(e){let{basename:t="/",children:a=null,location:n,navigationType:s=Qi.Pop,navigator:o,static:l=!1,future:d}=e;fc()&&ha(!1);let u=t.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:u,navigator:o,static:l,future:kd({v7_relativeSplatPath:!1},d)}),[u,d,o,l]);typeof n=="string"&&(n=hc(n));let{pathname:p="/",search:f="",hash:x="",state:w=null,key:j="default"}=n,v=S.useMemo(()=>{let b=C1(p,u);return b==null?null:{location:{pathname:b,search:f,hash:x,state:w,key:j},navigationType:s}},[u,p,f,x,w,j,s]);return v==null?null:S.createElement(so.Provider,{value:m},S.createElement(Zh.Provider,{children:a,value:v}))}function JP(e){let{children:t,location:a}=e;return i6(Rb(t),a)}new Promise(()=>{});function Rb(e,t){t===void 0&&(t=[]);let a=[];return S.Children.forEach(e,(n,s)=>{if(!S.isValidElement(n))return;let o=[...t,s];if(n.type===S.Fragment){a.push.apply(a,Rb(n.props.children,o));return}n.type!==Nr&&ha(!1),!n.props.index||!n.props.children||ha(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Rb(n.props.children,o)),a.push(l)}),a}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$b.apply(this,arguments)}function j6(e,t){if(e==null)return{};var a={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(a[s]=e[s]);return a}function w6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function N6(e,t){return e.button===0&&(!t||t==="_self")&&!w6(e)}const S6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C6="6";try{window.__reactRouterVersion=C6}catch{}const k6="startTransition",i2=A5[k6];function I6(e){let{basename:t,children:a,future:n,window:s}=e,o=S.useRef();o.current==null&&(o.current=P5({window:s,v5Compat:!0}));let l=o.current,[d,u]=S.useState({action:l.action,location:l.location}),{v7_startTransition:m}=n||{},p=S.useCallback(f=>{m&&i2?i2(()=>u(f)):u(f)},[u,m]);return S.useLayoutEffect(()=>l.listen(p),[l,p]),S.useEffect(()=>b6(n),[n]),S.createElement(v6,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:l,future:n})}const A6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qm=S.forwardRef(function(t,a){let{onClick:n,relative:s,reloadDocument:o,replace:l,state:d,target:u,to:m,preventScrollReset:p,viewTransition:f}=t,x=j6(t,S6),{basename:w}=S.useContext(so),j,v=!1;if(typeof m=="string"&&P6.test(m)&&(j=m,A6))try{let P=new URL(window.location.href),A=m.startsWith("//")?new URL(P.protocol+m):new URL(m),k=C1(A.pathname,w);A.origin===P.origin&&k!=null?m=k+A.search+A.hash:v=!0}catch{}let b=r6(m,{relative:s}),I=E6(m,{replace:l,state:d,target:u,preventScrollReset:p,relative:s,viewTransition:f});function T(P){n&&n(P),P.defaultPrevented||I(P)}return S.createElement("a",$b({},x,{href:j||b,onClick:v||o?n:T,ref:a,target:u}))});var o2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(o2||(o2={}));var l2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(l2||(l2={}));function E6(e,t){let{target:a,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:d}=t===void 0?{}:t,u=Zo(),m=Gs(),p=VP(e,{relative:l});return S.useCallback(f=>{if(N6(f,a)){f.preventDefault();let x=n!==void 0?n:Zm(m)===Zm(p);u(e,{replace:x,state:s,preventScrollReset:o,relative:l,viewTransition:d})}},[m,u,p,n,s,a,e,o,l,d])}const ZP="https://erp-backend-1jtx.onrender.com/api";async function T6(e){try{if(e.schoolCode)return await c2(e);try{return await D6(e)}catch(t){if((e.role==="admin"||e.role==="teacher"||e.role==="student"||e.role==="parent")&&e.schoolCode)return await c2(e);throw t}}catch(t){throw console.error("[LOGIN ERROR]",t),t}}async function D6(e){const t=`${ZP}/auth/login`;console.log(`[LOGIN] Trying regular login for: ${e.email}`);const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,role:e.role})});if(!a.ok){const m=(await a.json().catch(()=>({}))).message||"Login failed";throw console.error("[REGULAR LOGIN FAIL]",m),new Error(m)}const n=await a.json(),s=String(n.user.role||"").toLowerCase(),o=n.user?.name,l=typeof o=="string"?o:o&&typeof o=="object"&&[o.firstName,o.middleName,o.lastName].filter(Boolean).join(" ").trim()||n.user.email,d={id:n.user._id||n.user.id||"",userId:n.user.userId,name:l,email:n.user.email,role:s,schoolId:n.user.schoolId,schoolName:n.user.schoolName,lastLogin:n.user.lastLogin};return console.log("[REGULAR LOGIN SUCCESS]",d),{token:n.token,user:d}}async function c2(e){if(!e.schoolCode)throw new Error("School code is required for school login");const t=`${ZP}/auth/school-login`;console.log(`[LOGIN] Trying school login for: ${e.email} at school: ${e.schoolCode}`);const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e.email,password:e.password,schoolCode:e.schoolCode,role:e.role})});if(!a.ok){const m=(await a.json().catch(()=>({}))).message||"Login failed";throw console.error("[SCHOOL LOGIN FAIL]",m),new Error(m)}const n=await a.json(),s=String(n.user.role||"").toLowerCase(),o=n.user?.name,l=typeof o=="string"?o:o&&typeof o=="object"&&[o.firstName,o.middleName,o.lastName].filter(Boolean).join(" ").trim()||n.user.email;console.log("[SCHOOL LOGIN DEBUG] Raw response data.user:",n.user),console.log("[SCHOOL LOGIN DEBUG] data.user.userId specifically:",n.user.userId),console.log("[SCHOOL LOGIN DEBUG] data.user keys:",Object.keys(n.user));const d={id:n.user._id||n.user.id||"",userId:n.user.userId,name:l,email:n.user.email,role:s,schoolId:n.user.schoolCode,schoolCode:n.user.schoolCode,schoolName:n.user.schoolCode,lastLogin:n.user.lastLogin};return console.log("[SCHOOL LOGIN SUCCESS] Mapped user:",d),console.log("[SCHOOL LOGIN SUCCESS] Mapped user.userId:",d.userId),{token:n.token,user:d}}const xd="erp.auth",QP=S.createContext(void 0);function O6(e){if(!e)return null;const t=String(e).toLowerCase().replace(/\s+/g,"").replace(/[-_]/g,"");return t==="superadmin"||t==="superadministrator"||t==="superadm"?"superadmin":t==="admin"||t==="administrator"?"admin":t==="teacher"||t==="instructor"?"teacher":t==="student"||t==="pupil"||t==="learner"?"student":t==="parent"||t==="guardian"?"parent":null}function Lb(e){if(!e)return{user:null,token:null,loading:!1};const t={...e};if(t.user){const a=O6(t.user.role);if(!a)return console.warn("[AUTH] Invalid role in persisted state, clearing auth"),{user:null,token:null,loading:!1};const n=t.user.name,s=typeof n=="string"?n:t.user.email||"User";let o=t.user.userId;if(!o&&t.token)try{const l=JSON.parse(atob(t.token.split(".")[1]));l.userId&&(o=l.userId,console.log("[AUTH] Extracted userId from JWT token:",o))}catch(l){console.warn("[AUTH] Failed to decode JWT token:",l)}t.user={...t.user,role:a,name:s,userId:o},console.log("[AUTH] Normalized user with userId:",t.user.userId)}return t.loading=!1,t}function _6({children:e}){const[t,a]=S.useState({user:null,token:null,loading:!0}),n=S.useCallback(d=>{localStorage.setItem(xd,JSON.stringify(d)),d.user?.schoolCode?localStorage.setItem("erp.schoolCode",d.user.schoolCode):localStorage.removeItem("erp.schoolCode")},[]);S.useEffect(()=>{console.log("[AUTH] Initializing auth context...");const d=localStorage.getItem(xd);if(d)try{const u=JSON.parse(d),m=Lb(u);console.log("[AUTH] Restored from localStorage:",{user:m.user?.email,role:m.user?.role,hasToken:!!m.token}),a(m),n(m)}catch(u){console.error("[AUTH] Failed to parse localStorage data:",u),a(m=>({...m,loading:!1}))}else console.log("[AUTH] No auth data in localStorage, starting fresh"),a(u=>({...u,loading:!1}))},[n]);const s=S.useCallback(async d=>{console.log("[AUTH] Login attempt:",d.email);try{const{token:u,user:m}=await T6(d),p=Lb({user:m,token:u,loading:!1});console.log("[AUTH] Login successful:",{user:p.user?.email,role:p.user?.role}),a(p),n(p)}catch(u){throw console.error("[AUTH] Login failed:",u),u}},[n]),o=S.useCallback(()=>{console.log("[AUTH] Logging out"),a({user:null,token:null,loading:!1}),localStorage.removeItem(xd),localStorage.removeItem("erp.schoolCode")},[]),l=S.useMemo(()=>({...t,login:s,logout:o}),[t,s,o]);return r.jsx(QP.Provider,{value:l,children:e})}function dr(){const e=S.useContext(QP);if(!e){const t=localStorage.getItem(xd);if(t)try{const a=Lb(JSON.parse(t));return console.warn("useAuth used outside AuthProvider, using fallback from localStorage"),{...a,loading:!1,login:async()=>{throw new Error("Cannot login outside AuthProvider")},logout:()=>{localStorage.removeItem(xd)}}}catch(a){console.error("Failed to parse auth data from localStorage",a)}throw new Error("useAuth must be used within AuthProvider")}return e}function M6(){const{user:e,token:t,loading:a}=dr(),n=Gs();return a?r.jsx("div",{className:"p-6",children:"Loading"}):!t||!e?r.jsx(Ls,{to:"/login",replace:!0,state:{from:n.pathname}}):r.jsx(XP,{})}function wg({allow:e}){const{user:t}=dr();return t?e.includes(t.role)?r.jsx(XP,{}):r.jsx(Ls,{to:"/",replace:!0}):r.jsx(Ls,{to:"/login",replace:!0})}const R6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e4=(...e)=>e.filter((t,a,n)=>!!t&&n.indexOf(t)===a).join(" ");var $6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L6=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:l,...d},u)=>S.createElement("svg",{ref:u,...$6,width:t,height:t,stroke:e,strokeWidth:n?Number(a)*24/Number(t):a,className:e4("lucide",s),...d},[...l.map(([m,p])=>S.createElement(m,p)),...Array.isArray(o)?o:[o]]));const kt=(e,t)=>{const a=S.forwardRef(({className:n,...s},o)=>S.createElement(L6,{ref:o,iconNode:t,className:e4(`lucide-${R6(e)}`,n),...s}));return a.displayName=`${e}`,a};const Fb=kt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const F6=kt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Bb=kt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const ss=kt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const B6=kt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const Ub=kt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const la=kt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const U6=kt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Rl=kt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Id=kt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Us=kt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const zb=kt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const z6=kt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Wa=kt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Hn=kt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const q6=kt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const yi=kt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const ls=kt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Ul=kt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Ns=kt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const mi=kt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const oa=kt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const fa=kt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const t4=kt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Ho=kt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const P1=kt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const d2=kt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const u2=kt("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const H6=kt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const Hm=kt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const E1=kt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const W6=kt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const r4=kt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const V6=kt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const G6=kt("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);const a4=kt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const K6=kt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const Qh=kt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const ef=kt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Y6=kt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const X6=kt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const is=kt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const qb=kt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const J6=kt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const n4=kt("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);const s4=kt("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]);const tf=kt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Z6=kt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const cs=kt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Fo=kt("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);const Tn=kt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const i4=kt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const rf=kt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Hb=kt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const zs=kt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const af=kt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const pn=kt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Q6=kt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Wb=kt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Vb=kt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Bo=kt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const as=kt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Wm=kt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const yd=kt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ta=kt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Ar=kt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function o4(e,t){return function(){return e.apply(t,arguments)}}const{toString:e_}=Object.prototype,{getPrototypeOf:T1}=Object,{iterator:nf,toStringTag:l4}=Symbol,sf=(e=>t=>{const a=e_.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Cs=e=>(e=e.toLowerCase(),t=>sf(t)===e),of=e=>t=>typeof t===e,{isArray:pc}=Array,zl=of("undefined");function hu(e){return e!==null&&!zl(e)&&e.constructor!==null&&!zl(e.constructor)&&Pn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const c4=Cs("ArrayBuffer");function t_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&c4(e.buffer),t}const r_=of("string"),Pn=of("function"),d4=of("number"),fu=e=>e!==null&&typeof e=="object",a_=e=>e===!0||e===!1,Vm=e=>{if(sf(e)!=="object")return!1;const t=T1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(l4 in e)&&!(nf in e)},n_=e=>{if(!fu(e)||hu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},s_=Cs("Date"),i_=Cs("File"),o_=Cs("Blob"),l_=Cs("FileList"),c_=e=>fu(e)&&Pn(e.pipe),d_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pn(e.append)&&((t=sf(e))==="formdata"||t==="object"&&Pn(e.toString)&&e.toString()==="[object FormData]"))},u_=Cs("URLSearchParams"),[m_,h_,f_,p_]=["ReadableStream","Request","Response","Headers"].map(Cs),g_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pu(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),pc(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(hu(e))return;const o=a?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let d;for(n=0;n<l;n++)d=o[n],t.call(null,e[d],d,e)}}function u4(e,t){if(hu(e))return null;t=t.toLowerCase();const a=Object.keys(e);let n=a.length,s;for(;n-- >0;)if(s=a[n],t===s.toLowerCase())return s;return null}const _o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,m4=e=>!zl(e)&&e!==_o;function Gb(){const{caseless:e,skipUndefined:t}=m4(this)&&this||{},a={},n=(s,o)=>{const l=e&&u4(a,o)||o;Vm(a[l])&&Vm(s)?a[l]=Gb(a[l],s):Vm(s)?a[l]=Gb({},s):pc(s)?a[l]=s.slice():(!t||!zl(s))&&(a[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&pu(arguments[s],n);return a}const x_=(e,t,a,{allOwnKeys:n}={})=>(pu(t,(s,o)=>{a&&Pn(s)?e[o]=o4(s,a):e[o]=s},{allOwnKeys:n}),e),y_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b_=(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},v_=(e,t,a,n)=>{let s,o,l;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!n||n(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=a!==!1&&T1(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},j_=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return n!==-1&&n===a},w_=e=>{if(!e)return null;if(pc(e))return e;let t=e.length;if(!d4(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},N_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&T1(Uint8Array)),S_=(e,t)=>{const n=(e&&e[nf]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},C_=(e,t)=>{let a;const n=[];for(;(a=e.exec(t))!==null;)n.push(a);return n},k_=Cs("HTMLFormElement"),I_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,s){return n.toUpperCase()+s}),m2=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),A_=Cs("RegExp"),h4=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};pu(a,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(n[o]=l||s)}),Object.defineProperties(e,n)},P_=e=>{h4(e,(t,a)=>{if(Pn(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=e[a];if(Pn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},E_=(e,t)=>{const a={},n=s=>{s.forEach(o=>{a[o]=!0})};return pc(e)?n(e):n(String(e).split(t)),a},T_=()=>{},D_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function O_(e){return!!(e&&Pn(e.append)&&e[l4]==="FormData"&&e[nf])}const __=e=>{const t=new Array(10),a=(n,s)=>{if(fu(n)){if(t.indexOf(n)>=0)return;if(hu(n))return n;if(!("toJSON"in n)){t[s]=n;const o=pc(n)?[]:{};return pu(n,(l,d)=>{const u=a(l,s+1);!zl(u)&&(o[d]=u)}),t[s]=void 0,o}}return n};return a(e,0)},M_=Cs("AsyncFunction"),R_=e=>e&&(fu(e)||Pn(e))&&Pn(e.then)&&Pn(e.catch),f4=((e,t)=>e?setImmediate:t?((a,n)=>(_o.addEventListener("message",({source:s,data:o})=>{s===_o&&o===a&&n.length&&n.shift()()},!1),s=>{n.push(s),_o.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Pn(_o.postMessage)),$_=typeof queueMicrotask<"u"?queueMicrotask.bind(_o):typeof process<"u"&&process.nextTick||f4,L_=e=>e!=null&&Pn(e[nf]),He={isArray:pc,isArrayBuffer:c4,isBuffer:hu,isFormData:d_,isArrayBufferView:t_,isString:r_,isNumber:d4,isBoolean:a_,isObject:fu,isPlainObject:Vm,isEmptyObject:n_,isReadableStream:m_,isRequest:h_,isResponse:f_,isHeaders:p_,isUndefined:zl,isDate:s_,isFile:i_,isBlob:o_,isRegExp:A_,isFunction:Pn,isStream:c_,isURLSearchParams:u_,isTypedArray:N_,isFileList:l_,forEach:pu,merge:Gb,extend:x_,trim:g_,stripBOM:y_,inherits:b_,toFlatObject:v_,kindOf:sf,kindOfTest:Cs,endsWith:j_,toArray:w_,forEachEntry:S_,matchAll:C_,isHTMLForm:k_,hasOwnProperty:m2,hasOwnProp:m2,reduceDescriptors:h4,freezeMethods:P_,toObjectSet:E_,toCamelCase:I_,noop:T_,toFiniteNumber:D_,findKey:u4,global:_o,isContextDefined:m4,isSpecCompliantForm:O_,toJSONObject:__,isAsyncFn:M_,isThenable:R_,setImmediate:f4,asap:$_,isIterable:L_};function er(e,t,a,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}He.inherits(er,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:He.toJSONObject(this.config),code:this.code,status:this.status}}});const p4=er.prototype,g4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{g4[e]={value:e}});Object.defineProperties(er,g4);Object.defineProperty(p4,"isAxiosError",{value:!0});er.from=(e,t,a,n,s,o)=>{const l=Object.create(p4);He.toFlatObject(e,l,function(p){return p!==Error.prototype},m=>m!=="isAxiosError");const d=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return er.call(l,d,u,a,n,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",o&&Object.assign(l,o),l};const F_=null;function Kb(e){return He.isPlainObject(e)||He.isArray(e)}function x4(e){return He.endsWith(e,"[]")?e.slice(0,-2):e}function h2(e,t,a){return e?e.concat(t).map(function(s,o){return s=x4(s),!a&&o?"["+s+"]":s}).join(a?".":""):t}function B_(e){return He.isArray(e)&&!e.some(Kb)}const U_=He.toFlatObject(He,{},null,function(t){return/^is[A-Z]/.test(t)});function lf(e,t,a){if(!He.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=He.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!He.isUndefined(b[v])});const n=a.metaTokens,s=a.visitor||p,o=a.dots,l=a.indexes,u=(a.Blob||typeof Blob<"u"&&Blob)&&He.isSpecCompliantForm(t);if(!He.isFunction(s))throw new TypeError("visitor must be a function");function m(j){if(j===null)return"";if(He.isDate(j))return j.toISOString();if(He.isBoolean(j))return j.toString();if(!u&&He.isBlob(j))throw new er("Blob is not supported. Use a Buffer instead.");return He.isArrayBuffer(j)||He.isTypedArray(j)?u&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,v,b){let I=j;if(j&&!b&&typeof j=="object"){if(He.endsWith(v,"{}"))v=n?v:v.slice(0,-2),j=JSON.stringify(j);else if(He.isArray(j)&&B_(j)||(He.isFileList(j)||He.endsWith(v,"[]"))&&(I=He.toArray(j)))return v=x4(v),I.forEach(function(P,A){!(He.isUndefined(P)||P===null)&&t.append(l===!0?h2([v],A,o):l===null?v:v+"[]",m(P))}),!1}return Kb(j)?!0:(t.append(h2(b,v,o),m(j)),!1)}const f=[],x=Object.assign(U_,{defaultVisitor:p,convertValue:m,isVisitable:Kb});function w(j,v){if(!He.isUndefined(j)){if(f.indexOf(j)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(j),He.forEach(j,function(I,T){(!(He.isUndefined(I)||I===null)&&s.call(t,I,He.isString(T)?T.trim():T,v,x))===!0&&w(I,v?v.concat(T):[T])}),f.pop()}}if(!He.isObject(e))throw new TypeError("data must be an object");return w(e),t}function f2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function D1(e,t){this._pairs=[],e&&lf(e,this,t)}const y4=D1.prototype;y4.append=function(t,a){this._pairs.push([t,a])};y4.toString=function(t){const a=t?function(n){return t.call(this,n,f2)}:f2;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function z_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function b4(e,t,a){if(!t)return e;const n=a&&a.encode||z_;He.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let o;if(s?o=s(t,a):o=He.isURLSearchParams(t)?t.toString():new D1(t,a).toString(n),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class p2{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){He.forEach(this.handlers,function(n){n!==null&&t(n)})}}const v4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q_=typeof URLSearchParams<"u"?URLSearchParams:D1,H_=typeof FormData<"u"?FormData:null,W_=typeof Blob<"u"?Blob:null,V_={isBrowser:!0,classes:{URLSearchParams:q_,FormData:H_,Blob:W_},protocols:["http","https","file","blob","url","data"]},O1=typeof window<"u"&&typeof document<"u",Yb=typeof navigator=="object"&&navigator||void 0,G_=O1&&(!Yb||["ReactNative","NativeScript","NS"].indexOf(Yb.product)<0),K_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y_=O1&&window.location.href||"http://localhost",X_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:O1,hasStandardBrowserEnv:G_,hasStandardBrowserWebWorkerEnv:K_,navigator:Yb,origin:Y_},Symbol.toStringTag,{value:"Module"})),rn={...X_,...V_};function J_(e,t){return lf(e,new rn.classes.URLSearchParams,{visitor:function(a,n,s,o){return rn.isNode&&He.isBuffer(a)?(this.append(n,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Z_(e){return He.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Q_(e){const t={},a=Object.keys(e);let n;const s=a.length;let o;for(n=0;n<s;n++)o=a[n],t[o]=e[o];return t}function j4(e){function t(a,n,s,o){let l=a[o++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=o>=a.length;return l=!l&&He.isArray(s)?s.length:l,u?(He.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!d):((!s[l]||!He.isObject(s[l]))&&(s[l]=[]),t(a,n,s[l],o)&&He.isArray(s[l])&&(s[l]=Q_(s[l])),!d)}if(He.isFormData(e)&&He.isFunction(e.entries)){const a={};return He.forEachEntry(e,(n,s)=>{t(Z_(n),s,a,0)}),a}return null}function eM(e,t,a){if(He.isString(e))try{return(t||JSON.parse)(e),He.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(e)}const gu={transitional:v4,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",s=n.indexOf("application/json")>-1,o=He.isObject(t);if(o&&He.isHTMLForm(t)&&(t=new FormData(t)),He.isFormData(t))return s?JSON.stringify(j4(t)):t;if(He.isArrayBuffer(t)||He.isBuffer(t)||He.isStream(t)||He.isFile(t)||He.isBlob(t)||He.isReadableStream(t))return t;if(He.isArrayBufferView(t))return t.buffer;if(He.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return J_(t,this.formSerializer).toString();if((d=He.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return lf(d?{"files[]":t}:t,u&&new u,this.formSerializer)}}return o||s?(a.setContentType("application/json",!1),eM(t)):t}],transformResponse:[function(t){const a=this.transitional||gu.transitional,n=a&&a.forcedJSONParsing,s=this.responseType==="json";if(He.isResponse(t)||He.isReadableStream(t))return t;if(t&&He.isString(t)&&(n&&!this.responseType||s)){const l=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?er.from(d,er.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rn.classes.FormData,Blob:rn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};He.forEach(["delete","get","head","post","put","patch"],e=>{gu.headers[e]={}});const tM=He.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rM=e=>{const t={};let a,n,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),a=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!a||t[a]&&tM[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},g2=Symbol("internals");function rd(e){return e&&String(e).trim().toLowerCase()}function Gm(e){return e===!1||e==null?e:He.isArray(e)?e.map(Gm):String(e)}function aM(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}const nM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ng(e,t,a,n,s){if(He.isFunction(n))return n.call(this,t,a);if(s&&(t=a),!!He.isString(t)){if(He.isString(n))return t.indexOf(n)!==-1;if(He.isRegExp(n))return n.test(t)}}function sM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function iM(e,t){const a=He.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(s,o,l){return this[n].call(this,t,s,o,l)},configurable:!0})})}let En=class{constructor(t){t&&this.set(t)}set(t,a,n){const s=this;function o(d,u,m){const p=rd(u);if(!p)throw new Error("header name must be a non-empty string");const f=He.findKey(s,p);(!f||s[f]===void 0||m===!0||m===void 0&&s[f]!==!1)&&(s[f||u]=Gm(d))}const l=(d,u)=>He.forEach(d,(m,p)=>o(m,p,u));if(He.isPlainObject(t)||t instanceof this.constructor)l(t,a);else if(He.isString(t)&&(t=t.trim())&&!nM(t))l(rM(t),a);else if(He.isObject(t)&&He.isIterable(t)){let d={},u,m;for(const p of t){if(!He.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[m=p[0]]=(u=d[m])?He.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}l(d,a)}else t!=null&&o(a,t,n);return this}get(t,a){if(t=rd(t),t){const n=He.findKey(this,t);if(n){const s=this[n];if(!a)return s;if(a===!0)return aM(s);if(He.isFunction(a))return a.call(this,s,n);if(He.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=rd(t),t){const n=He.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||Ng(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let s=!1;function o(l){if(l=rd(l),l){const d=He.findKey(n,l);d&&(!a||Ng(n,n[d],d,a))&&(delete n[d],s=!0)}}return He.isArray(t)?t.forEach(o):o(t),s}clear(t){const a=Object.keys(this);let n=a.length,s=!1;for(;n--;){const o=a[n];(!t||Ng(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const a=this,n={};return He.forEach(this,(s,o)=>{const l=He.findKey(n,o);if(l){a[l]=Gm(s),delete a[o];return}const d=t?sM(o):String(o).trim();d!==o&&delete a[o],a[d]=Gm(s),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return He.forEach(this,(n,s)=>{n!=null&&n!==!1&&(a[s]=t&&He.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[g2]=this[g2]={accessors:{}}).accessors,s=this.prototype;function o(l){const d=rd(l);n[d]||(iM(s,l),n[d]=!0)}return He.isArray(t)?t.forEach(o):o(t),this}};En.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);He.reduceDescriptors(En.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[a]=n}}});He.freezeMethods(En);function Sg(e,t){const a=this||gu,n=t||a,s=En.from(n.headers);let o=n.data;return He.forEach(e,function(d){o=d.call(a,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function w4(e){return!!(e&&e.__CANCEL__)}function gc(e,t,a){er.call(this,e??"canceled",er.ERR_CANCELED,t,a),this.name="CanceledError"}He.inherits(gc,er,{__CANCEL__:!0});function N4(e,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):t(new er("Request failed with status code "+a.status,[er.ERR_BAD_REQUEST,er.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function oM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function lM(e,t){e=e||10;const a=new Array(e),n=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(u){const m=Date.now(),p=n[o];l||(l=m),a[s]=u,n[s]=m;let f=o,x=0;for(;f!==s;)x+=a[f++],f=f%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),m-l<t)return;const w=p&&m-p;return w?Math.round(x*1e3/w):void 0}}function cM(e,t){let a=0,n=1e3/t,s,o;const l=(m,p=Date.now())=>{a=p,s=null,o&&(clearTimeout(o),o=null),e(...m)};return[(...m)=>{const p=Date.now(),f=p-a;f>=n?l(m,p):(s=m,o||(o=setTimeout(()=>{o=null,l(s)},n-f)))},()=>s&&l(s)]}const eh=(e,t,a=3)=>{let n=0;const s=lM(50,250);return cM(o=>{const l=o.loaded,d=o.lengthComputable?o.total:void 0,u=l-n,m=s(u),p=l<=d;n=l;const f={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:m||void 0,estimated:m&&d&&p?(d-l)/m:void 0,event:o,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(f)},a)},x2=(e,t)=>{const a=e!=null;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},y2=e=>(...t)=>He.asap(()=>e(...t)),dM=rn.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,rn.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(rn.origin),rn.navigator&&/(msie|trident)/i.test(rn.navigator.userAgent)):()=>!0,uM=rn.hasStandardBrowserEnv?{write(e,t,a,n,s,o,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];He.isNumber(a)&&d.push(`expires=${new Date(a).toUTCString()}`),He.isString(n)&&d.push(`path=${n}`),He.isString(s)&&d.push(`domain=${s}`),o===!0&&d.push("secure"),He.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function mM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hM(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function S4(e,t,a){let n=!mM(t);return e&&(n||a==!1)?hM(e,t):t}const b2=e=>e instanceof En?{...e}:e;function Wo(e,t){t=t||{};const a={};function n(m,p,f,x){return He.isPlainObject(m)&&He.isPlainObject(p)?He.merge.call({caseless:x},m,p):He.isPlainObject(p)?He.merge({},p):He.isArray(p)?p.slice():p}function s(m,p,f,x){if(He.isUndefined(p)){if(!He.isUndefined(m))return n(void 0,m,f,x)}else return n(m,p,f,x)}function o(m,p){if(!He.isUndefined(p))return n(void 0,p)}function l(m,p){if(He.isUndefined(p)){if(!He.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function d(m,p,f){if(f in t)return n(m,p);if(f in e)return n(void 0,m)}const u={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,p,f)=>s(b2(m),b2(p),f,!0)};return He.forEach(Object.keys({...e,...t}),function(p){const f=u[p]||s,x=f(e[p],t[p],p);He.isUndefined(x)&&f!==d||(a[p]=x)}),a}const C4=e=>{const t=Wo({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:d}=t;if(t.headers=l=En.from(l),t.url=b4(S4(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),He.isFormData(a)){if(rn.hasStandardBrowserEnv||rn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(He.isFunction(a.getHeaders)){const u=a.getHeaders(),m=["content-type","content-length"];Object.entries(u).forEach(([p,f])=>{m.includes(p.toLowerCase())&&l.set(p,f)})}}if(rn.hasStandardBrowserEnv&&(n&&He.isFunction(n)&&(n=n(t)),n||n!==!1&&dM(t.url))){const u=s&&o&&uM.read(o);u&&l.set(s,u)}return t},fM=typeof XMLHttpRequest<"u",pM=fM&&function(e){return new Promise(function(a,n){const s=C4(e);let o=s.data;const l=En.from(s.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:m}=s,p,f,x,w,j;function v(){w&&w(),j&&j(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function I(){if(!b)return;const P=En.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:P,config:e,request:b};N4(function(_){a(_),v()},function(_){n(_),v()},k),b=null}"onloadend"in b?b.onloadend=I:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(I)},b.onabort=function(){b&&(n(new er("Request aborted",er.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const k=A&&A.message?A.message:"Network Error",E=new er(k,er.ERR_NETWORK,e,b);E.event=A||null,n(E),b=null},b.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const k=s.transitional||v4;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),n(new er(A,k.clarifyTimeoutError?er.ETIMEDOUT:er.ECONNABORTED,e,b)),b=null},o===void 0&&l.setContentType(null),"setRequestHeader"in b&&He.forEach(l.toJSON(),function(A,k){b.setRequestHeader(k,A)}),He.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),d&&d!=="json"&&(b.responseType=s.responseType),m&&([x,j]=eh(m,!0),b.addEventListener("progress",x)),u&&b.upload&&([f,w]=eh(u),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(p=P=>{b&&(n(!P||P.type?new gc(null,e,b):P),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const T=oM(s.url);if(T&&rn.protocols.indexOf(T)===-1){n(new er("Unsupported protocol "+T+":",er.ERR_BAD_REQUEST,e));return}b.send(o||null)})},gM=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let n=new AbortController,s;const o=function(m){if(!s){s=!0,d();const p=m instanceof Error?m:this.reason;n.abort(p instanceof er?p:new gc(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,o(new er(`timeout ${t} of ms exceeded`,er.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),e=null)};e.forEach(m=>m.addEventListener("abort",o));const{signal:u}=n;return u.unsubscribe=()=>He.asap(d),u}},xM=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let n=0,s;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},yM=async function*(e,t){for await(const a of bM(e))yield*xM(a,t)},bM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},v2=(e,t,a,n)=>{const s=yM(e,t);let o=0,l,d=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:m,value:p}=await s.next();if(m){d(),u.close();return}let f=p.byteLength;if(a){let x=o+=f;a(x)}u.enqueue(new Uint8Array(p))}catch(m){throw d(m),m}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},j2=64*1024,{isFunction:km}=He,vM=(({Request:e,Response:t})=>({Request:e,Response:t}))(He.global),{ReadableStream:w2,TextEncoder:N2}=He.global,S2=(e,...t)=>{try{return!!e(...t)}catch{return!1}},jM=e=>{e=He.merge.call({skipUndefined:!0},vM,e);const{fetch:t,Request:a,Response:n}=e,s=t?km(t):typeof fetch=="function",o=km(a),l=km(n);if(!s)return!1;const d=s&&km(w2),u=s&&(typeof N2=="function"?(j=>v=>j.encode(v))(new N2):async j=>new Uint8Array(await new a(j).arrayBuffer())),m=o&&d&&S2(()=>{let j=!1;const v=new a(rn.origin,{body:new w2,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!v}),p=l&&d&&S2(()=>He.isReadableStream(new n("").body)),f={stream:p&&(j=>j.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!f[j]&&(f[j]=(v,b)=>{let I=v&&v[j];if(I)return I.call(v);throw new er(`Response type '${j}' is not supported`,er.ERR_NOT_SUPPORT,b)})});const x=async j=>{if(j==null)return 0;if(He.isBlob(j))return j.size;if(He.isSpecCompliantForm(j))return(await new a(rn.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(He.isArrayBufferView(j)||He.isArrayBuffer(j))return j.byteLength;if(He.isURLSearchParams(j)&&(j=j+""),He.isString(j))return(await u(j)).byteLength},w=async(j,v)=>{const b=He.toFiniteNumber(j.getContentLength());return b??x(v)};return async j=>{let{url:v,method:b,data:I,signal:T,cancelToken:P,timeout:A,onDownloadProgress:k,onUploadProgress:E,responseType:_,headers:R,withCredentials:$="same-origin",fetchOptions:H}=C4(j),L=t||fetch;_=_?(_+"").toLowerCase():"text";let Y=gM([T,P&&P.toAbortSignal()],A),X=null;const me=Y&&Y.unsubscribe&&(()=>{Y.unsubscribe()});let K;try{if(E&&m&&b!=="get"&&b!=="head"&&(K=await w(R,I))!==0){let U=new a(v,{method:"POST",body:I,duplex:"half"}),ae;if(He.isFormData(I)&&(ae=U.headers.get("content-type"))&&R.setContentType(ae),U.body){const[W,fe]=x2(K,eh(y2(E)));I=v2(U.body,j2,W,fe)}}He.isString($)||($=$?"include":"omit");const oe=o&&"credentials"in a.prototype,G={...H,signal:Y,method:b.toUpperCase(),headers:R.normalize().toJSON(),body:I,duplex:"half",credentials:oe?$:void 0};X=o&&new a(v,G);let B=await(o?L(X,H):L(v,G));const F=p&&(_==="stream"||_==="response");if(p&&(k||F&&me)){const U={};["status","statusText","headers"].forEach(Se=>{U[Se]=B[Se]});const ae=He.toFiniteNumber(B.headers.get("content-length")),[W,fe]=k&&x2(ae,eh(y2(k),!0))||[];B=new n(v2(B.body,j2,W,()=>{fe&&fe(),me&&me()}),U)}_=_||"text";let re=await f[He.findKey(f,_)||"text"](B,j);return!F&&me&&me(),await new Promise((U,ae)=>{N4(U,ae,{data:re,headers:En.from(B.headers),status:B.status,statusText:B.statusText,config:j,request:X})})}catch(oe){throw me&&me(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new er("Network Error",er.ERR_NETWORK,j,X),{cause:oe.cause||oe}):er.from(oe,oe&&oe.code,j,X)}}},wM=new Map,k4=e=>{let t=e&&e.env||{};const{fetch:a,Request:n,Response:s}=t,o=[n,s,a];let l=o.length,d=l,u,m,p=wM;for(;d--;)u=o[d],m=p.get(u),m===void 0&&p.set(u,m=d?new Map:jM(t)),p=m;return m};k4();const _1={http:F_,xhr:pM,fetch:{get:k4}};He.forEach(_1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const C2=e=>`- ${e}`,NM=e=>He.isFunction(e)||e===null||e===!1;function SM(e,t){e=He.isArray(e)?e:[e];const{length:a}=e;let n,s;const o={};for(let l=0;l<a;l++){n=e[l];let d;if(s=n,!NM(n)&&(s=_1[(d=String(n)).toLowerCase()],s===void 0))throw new er(`Unknown adapter '${d}'`);if(s&&(He.isFunction(s)||(s=s.get(t))))break;o[d||"#"+l]=s}if(!s){const l=Object.entries(o).map(([u,m])=>`adapter ${u} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=a?l.length>1?`since :
`+l.map(C2).join(`
`):" "+C2(l[0]):"as no adapter specified";throw new er("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const I4={getAdapter:SM,adapters:_1};function Cg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gc(null,e)}function k2(e){return Cg(e),e.headers=En.from(e.headers),e.data=Sg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),I4.getAdapter(e.adapter||gu.adapter,e)(e).then(function(n){return Cg(e),n.data=Sg.call(e,e.transformResponse,n),n.headers=En.from(n.headers),n},function(n){return w4(n)||(Cg(e),n&&n.response&&(n.response.data=Sg.call(e,e.transformResponse,n.response),n.response.headers=En.from(n.response.headers))),Promise.reject(n)})}const A4="1.13.0",cf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{cf[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const I2={};cf.transitional=function(t,a,n){function s(o,l){return"[Axios v"+A4+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,d)=>{if(t===!1)throw new er(s(l," has been removed"+(a?" in "+a:"")),er.ERR_DEPRECATED);return a&&!I2[l]&&(I2[l]=!0,console.warn(s(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(o,l,d):!0}};cf.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function CM(e,t,a){if(typeof e!="object")throw new er("options must be an object",er.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],l=t[o];if(l){const d=e[o],u=d===void 0||l(d,o,e);if(u!==!0)throw new er("option "+o+" must be "+u,er.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new er("Unknown option "+o,er.ERR_BAD_OPTION)}}const Km={assertOptions:CM,validators:cf},Rs=Km.validators;let Uo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new p2,response:new p2}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Wo(this.defaults,a);const{transitional:n,paramsSerializer:s,headers:o}=a;n!==void 0&&Km.assertOptions(n,{silentJSONParsing:Rs.transitional(Rs.boolean),forcedJSONParsing:Rs.transitional(Rs.boolean),clarifyTimeoutError:Rs.transitional(Rs.boolean)},!1),s!=null&&(He.isFunction(s)?a.paramsSerializer={serialize:s}:Km.assertOptions(s,{encode:Rs.function,serialize:Rs.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Km.assertOptions(a,{baseUrl:Rs.spelling("baseURL"),withXsrfToken:Rs.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=o&&He.merge(o.common,o[a.method]);o&&He.forEach(["delete","get","head","post","put","patch","common"],j=>{delete o[j]}),a.headers=En.concat(l,o);const d=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(a)===!1||(u=u&&v.synchronous,d.unshift(v.fulfilled,v.rejected))});const m=[];this.interceptors.response.forEach(function(v){m.push(v.fulfilled,v.rejected)});let p,f=0,x;if(!u){const j=[k2.bind(this),void 0];for(j.unshift(...d),j.push(...m),x=j.length,p=Promise.resolve(a);f<x;)p=p.then(j[f++],j[f++]);return p}x=d.length;let w=a;for(;f<x;){const j=d[f++],v=d[f++];try{w=j(w)}catch(b){v.call(this,b);break}}try{p=k2.call(this,w)}catch(j){return Promise.reject(j)}for(f=0,x=m.length;f<x;)p=p.then(m[f++],m[f++]);return p}getUri(t){t=Wo(this.defaults,t);const a=S4(t.baseURL,t.url,t.allowAbsoluteUrls);return b4(a,t.params,t.paramsSerializer)}};He.forEach(["delete","get","head","options"],function(t){Uo.prototype[t]=function(a,n){return this.request(Wo(n||{},{method:t,url:a,data:(n||{}).data}))}});He.forEach(["post","put","patch"],function(t){function a(n){return function(o,l,d){return this.request(Wo(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Uo.prototype[t]=a(),Uo.prototype[t+"Form"]=a(!0)});let kM=class P4{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(d=>{n.subscribe(d),o=d}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},t(function(o,l,d){n.reason||(n.reason=new gc(o,l,d),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new P4(function(s){t=s}),cancel:t}}};function IM(e){return function(a){return e.apply(null,a)}}function AM(e){return He.isObject(e)&&e.isAxiosError===!0}const Xb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xb).forEach(([e,t])=>{Xb[t]=e});function E4(e){const t=new Uo(e),a=o4(Uo.prototype.request,t);return He.extend(a,Uo.prototype,t,{allOwnKeys:!0}),He.extend(a,t,null,{allOwnKeys:!0}),a.create=function(s){return E4(Wo(e,s))},a}const lr=E4(gu);lr.Axios=Uo;lr.CanceledError=gc;lr.CancelToken=kM;lr.isCancel=w4;lr.VERSION=A4;lr.toFormData=lf;lr.AxiosError=er;lr.Cancel=lr.CanceledError;lr.all=function(t){return Promise.all(t)};lr.spread=IM;lr.isAxiosError=AM;lr.mergeConfig=Wo;lr.AxiosHeaders=En;lr.formToJSON=e=>j4(He.isHTMLForm(e)?new FormData(e):e);lr.getAdapter=I4.getAdapter;lr.HttpStatusCode=Xb;lr.default=lr;const{Axios:iZ,AxiosError:oZ,CanceledError:lZ,isCancel:cZ,CancelToken:dZ,VERSION:uZ,all:mZ,Cancel:hZ,isAxiosError:fZ,spread:pZ,toFormData:gZ,AxiosHeaders:xZ,HttpStatusCode:yZ,formToJSON:bZ,getAdapter:vZ,mergeConfig:jZ}=lr,PM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://erp-backend-1jtx.onrender.com/api"},EM=import.meta&&PM&&"https://erp-backend-1jtx.onrender.com/api"||"http://localhost:5050/api",yt=lr.create({baseURL:EM,headers:{"Content-Type":"application/json"}});yt.interceptors.request.use(e=>{let t=localStorage.getItem("token");if(console.log("[API] Token from localStorage (token):",t),t||(t=localStorage.getItem("authToken"),console.log("[API] Token from localStorage (authToken):",t)),!t){const s=localStorage.getItem("erp.auth");if(s)try{t=JSON.parse(s).token,console.log("[API] Token from erp.auth:",t)}catch(o){console.error("[API] Error parsing auth data:",o)}}t?(e.headers.Authorization=`Bearer ${t}`,console.log("[API] Authorization header set.")):console.warn("[API] No token found. Authorization header not set.");let a;const n=localStorage.getItem("erp.auth");if(n)try{a=JSON.parse(n).user?.schoolCode}catch(s){console.error("Error parsing auth data:",s)}return a||(a=localStorage.getItem("erp.schoolCode")),a&&(e.headers["x-school-code"]=a),e},e=>(console.error("[API] Request interceptor error:",e),Promise.reject(e)));yt.interceptors.response.use(e=>e,e=>{if(console.error("API Error:",e.config?.url,e.response?.status,e.message),e.response?.status===401){const t=e.config?.url||"";t.includes("/schools/")||t.includes("/users/")?console.warn("Auth error on school/user API. Not redirecting to prevent loop."):(console.log("Unauthorized access. Redirecting to login..."),localStorage.removeItem("token"),localStorage.removeItem("erp.auth"),setTimeout(()=>{window.location.href="/login?session=expired"},1e3))}return Promise.reject(e)});const Ha={createSchool:e=>{const t=e instanceof FormData?{headers:{"Content-Type":"multipart/form-data"}}:{};return yt.post("/schools",e,t)},getAllSchools:()=>yt.get("/schools"),getSchoolById:e=>(console.log(`Fetching school details for ID: ${e}`),yt.get(`/schools/${e}/info`)),updateSchool:(e,t)=>yt.put(`/schools/${e}`,t),deleteSchool:e=>yt.delete(`/schools/${e}`),updateAccessMatrix:(e,t)=>yt.patch(`/schools/${e}/access-matrix`,{accessMatrix:t}),updateBankDetails:(e,t)=>yt.patch(`/schools/${e}/bank-details`,{bankDetails:t}),updateUserRole:(e,t,a)=>yt.put(`/schools/${e}/users/${t}`,{role:a}),updateSchoolSettings:(e,t)=>yt.put(`/schools/${e}`,{settings:t}),getSchoolStats:e=>yt.get(`/schools/${e}/stats`),getAllSchoolsStats:()=>yt.get("/schools/all-stats"),toggleSchoolStatus:e=>yt.patch(`/schools/${e}/toggle-status`)},TM={createUser:e=>yt.post("/users",e),addTeacher:e=>yt.post("/users/teachers",e),addStudent:e=>yt.post("/users/students",e),addParent:e=>yt.post("/users/parents",e),getUsers:(e,t)=>yt.get(`/schools/${e}/users`,{params:t}),getUsersByRole:(e,t)=>yt.get(`/users/role/${e}`,{params:t}),getUserById:e=>yt.get(`/users/${e}`),updateUser:(e,t)=>yt.put(`/users/${e}`,t),resetUserPassword:e=>yt.patch(`/users/${e}/reset-password`),toggleUserStatus:e=>yt.patch(`/users/${e}/toggle-status`)},kg={exportUsers:(e,t)=>yt.get(`/export-import/${e}/export`,{params:t,responseType:"blob"}),importUsers:(e,t)=>{const a=new FormData;return a.append("file",t),yt.post(`/export-import/${e}/import`,a,{headers:{"Content-Type":"multipart/form-data"}})},generateTemplate:(e,t)=>yt.get(`/export-import/${e}/template`,{params:{role:t},responseType:"blob"})},$s={getStudents:(e,t)=>yt.get("/users/role/student",{params:t,headers:{"X-School-Code":e}}),saveResults:e=>yt.post("/results/save",e),getResults:e=>yt.get("/results",{params:e}),updateResult:(e,t)=>yt.put(`/results/${e}`,t),freezeResults:e=>yt.post("/results/freeze",e),deleteResult:e=>yt.delete(`/results/${e}`),getResultsStats:e=>yt.get("/results/stats",{params:e})},ad={getSchoolClasses:async e=>(await yt.get(`/superadmin/classes/schools/${e}/classes`)).data,addClass:async(e,t)=>(await yt.post(`/superadmin/classes/schools/${e}/classes`,t)).data,addSectionToClass:async(e,t,a)=>(await yt.post(`/superadmin/classes/schools/${e}/classes/${t}/sections`,{section:a})).data,removeSectionFromClass:async(e,t,a)=>(await yt.delete(`/superadmin/classes/schools/${e}/classes/${t}/sections`,{data:{section:a}})).data,updateClass:async(e,t,a)=>(await yt.put(`/superadmin/classes/schools/${e}/classes/${t}`,a)).data,deleteClass:async(e,t)=>(await yt.delete(`/superadmin/classes/schools/${e}/classes/${t}`)).data,getAvailableClasses:async e=>(await yt.get(`/superadmin/classes/schools/${e}/classes/available`)).data},Im={getSchoolTests:async e=>(await yt.get(`/superadmin/tests/schools/${e}/tests`)).data,addTest:async(e,t)=>(await yt.post(`/superadmin/tests/schools/${e}/tests`,t)).data,updateTest:async(e,t,a)=>(await yt.put(`/superadmin/tests/schools/${e}/tests/${t}`,a)).data,deleteTest:async(e,t)=>(await yt.delete(`/superadmin/tests/schools/${e}/tests/${t}`)).data,getTestsByClass:async(e,t)=>(await yt.get(`/superadmin/tests/schools/${e}/tests/class/${t}`)).data},DM={getSchoolClasses:e=>{const t=localStorage.getItem("erp.auth");let a=!1;try{if(t){const s=JSON.parse(t);a=s.role==="superadmin"||s.userType==="superadmin"}}catch(s){console.error("Error parsing auth data:",s)}const n=a?`/superadmin/classes/schools/${e}/classes`:`/schools/${e}/classes`;return console.log(` [classesAPI] Using endpoint: ${n}`),yt.get(n)},getSectionsForClass:(e,t)=>{const a=localStorage.getItem("erp.auth");let n=!1;try{if(a){const o=JSON.parse(a);n=o.role==="superadmin"||o.userType==="superadmin"}}catch(o){console.error("Error parsing auth data:",o)}const s=n?`/superadmin/classes/schools/${e}/classes/${t}/sections`:`/schools/${e}/classes/${t}/sections`;return console.log(` [classesAPI] Using endpoint: ${s}`),yt.get(s)}},Xi={getNextChalanNumber:async()=>{try{return(await yt.get("/chalans/next-chalan-number")).data}catch(e){throw console.error("Error getting next chalan number:",e),e}},createFeeStructure:e=>yt.post("/fees/structures",e),getFeeStructures:e=>yt.get("/fees/structures",{params:e}),getStudentFeeRecords:e=>yt.get("/fees/records",{params:e}),getStudentFeeRecord:async e=>{if(!e)throw new Error("No student identifier provided");console.log(`Attempting to fetch fee record for identifier: ${e}`);try{const t=await yt.get(`/fees/records/${e}`);return console.log("Successfully fetched fee record:",t.data),t}catch(t){console.error("Error fetching student fee record:",t);let a=`Failed to fetch student fee record.

`;throw a+=`Tried endpoint: /fees/records/${e}

`,a+="Please check that the student exists and has fee records.",new Error(a)}},getStudentByUserId:e=>yt.get(`/users/${e}`).then(t=>({data:{data:t.data}})).catch(()=>yt.get(`/users/role/student?userId=${e}`).then(t=>{const n=(t.data?.data||[]).find(s=>s._id===e||s.userId===e||s.user_id===e);if(n)return{data:{data:n}};throw new Error("Student not found")})),getSchoolInfo:e=>yt.get(`/admin/classes/${e}/classes-sections`),downloadReceipt:e=>yt.get(`/fees/receipts/${e}`,{responseType:"blob"}),recordOfflinePayment:(e,t)=>yt.post(`/fees/records/${e}/offline-payment`,t),getFeeStats:e=>yt.get("/fees/stats",{params:e}),generateChalan:async e=>{try{const{data:{chalanNumber:t}}=await yt.get("/chalans/next-chalan-number"),a={...e,chalanNumber:t,status:"generated",generatedAt:new Date().toISOString(),schoolId:JSON.parse(localStorage.getItem("user")||"{}").schoolId};return{success:!0,data:(await yt.post("/chalans/generate",a)).data,message:"Chalan generated successfully"}}catch(t){return console.error("Error generating chalan:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to generate chalan",status:t.response?.status||500}}}},T4=S.createContext(void 0);function D4({children:e}){const{user:t,token:a}=dr(),[n,s]=S.useState(null),[o,l]=S.useState(!0),[d,u]=S.useState(!1),[m,p]=S.useState("");S.useEffect(()=>{async function j(){if(!t||!a||!t.schoolId){l(!1);return}if(t.role==="superadmin"){s({manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewAcademicDetails:!0,viewAssignments:!0,viewFees:!0,viewReports:!0}),l(!1);return}try{console.log("[PERMISSIONS] Fetching access matrix for user:",{schoolId:t.schoolId,schoolCode:t.schoolCode});const b=t.schoolCode||localStorage.getItem("erp.schoolCode"),I=t.schoolId;if(console.log("[PERMISSIONS] School identifiers:",{schoolId:I,schoolCode:b}),b)try{console.log("[PERMISSIONS] Fetching permissions from school database via code:",b);const A=await yt.get(`/school-users/${b}/access-matrix`),k=A.data?.data||A.data;if(console.log("[PERMISSIONS] Received access matrix from school DB:",k),k&&k[t.role]){const E=k[t.role];if(console.log("[PERMISSIONS] Loaded permissions for",t.role,":",E),E){s(E),l(!1);return}}}catch(A){console.error("[PERMISSIONS] Failed to fetch from school database:",A)}let T;try{T=await Ha.getSchoolById(I)}catch(A){console.error("[PERMISSIONS] Failed to fetch school:",A);const k=t.role==="admin"?{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewAcademicDetails:!0,viewAssignments:!0,viewFees:!0,viewReports:!0}:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!1,viewResults:!1,viewLeaves:!1,messageStudentsParents:!1,viewAcademicDetails:!1,viewAssignments:!1,viewFees:!1,viewReports:!1};s(k),l(!1);return}const P=T.data?.school||T.data;if(console.log("[PERMISSIONS] Full school object:",P),console.log("[PERMISSIONS] Access matrix:",P?.accessMatrix),P&&P.accessMatrix){const A=P.accessMatrix[t.role];if(console.log("[PERMISSIONS] Loaded permissions for",t.role,":",A),console.log("[PERMISSIONS] Role permissions type:",typeof A),console.log("[PERMISSIONS] Role permissions values:",JSON.stringify(A)),A)s(A);else{const k=t.role==="admin"?{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewAcademicDetails:!0,viewAssignments:!0,viewFees:!0,viewReports:!0}:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!1,viewResults:!1,viewLeaves:!1,messageStudentsParents:!1,viewAcademicDetails:!1,viewAssignments:!1,viewFees:!1,viewReports:!1};s(k)}}else{console.warn("[PERMISSIONS] No access matrix found");const A=t.role==="admin"?{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewAcademicDetails:!0,viewAssignments:!0,viewFees:!0,viewReports:!0}:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!1,viewResults:!1,viewLeaves:!1,messageStudentsParents:!1,viewAcademicDetails:!1,viewAssignments:!1,viewFees:!1,viewReports:!1};s(A)}}catch(b){console.error("[PERMISSIONS] Error fetching permissions:",b);const I=t.role==="admin"?{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewAcademicDetails:!0,viewAssignments:!0,viewFees:!0,viewReports:!0}:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!1,viewResults:!1,viewLeaves:!1,messageStudentsParents:!1,viewAcademicDetails:!1,viewAssignments:!1,viewFees:!1,viewReports:!1};s(I)}finally{l(!1)}}j();const v=async()=>{if(console.log("[PERMISSIONS] Refreshing permissions due to access matrix update"),t&&t.schoolId&&t.role!=="superadmin")try{let b;try{const T=t.schoolCode||localStorage.getItem("erp.schoolCode");if(T){b=await yt.get(`/school-users/${T}/access-matrix`);const P=b.data?.data||b.data;if(P&&P[t.role]){const A=P[t.role];console.log("[PERMISSIONS] Refreshed permissions for",t.role,":",A),s(A||null)}return}b=await Ha.getSchoolById(t.schoolId)}catch(T){console.log("[PERMISSIONS REFRESH] Failed to fetch permissions:",T);return}const I=b.data?.school||b.data;if(I&&I.accessMatrix){const T=I.accessMatrix[t.role];console.log("[PERMISSIONS] Refreshed permissions for",t.role,":",T),s(T||null)}}catch(b){console.error("[PERMISSIONS] Error refreshing permissions:",b)}};return window.addEventListener("permission-refresh",v),()=>{window.removeEventListener("permission-refresh",v)}},[t,a]);const f=S.useCallback(j=>{if(!n)return!1;const v=n[j];return v===!0||typeof v=="string"&&v!=="false"},[n]),x=S.useCallback((j,v,b)=>{if(o){console.log("[PERMISSIONS] Still loading, allowing navigation - will check on page load"),b();return}f(j)?b():(console.log("[PERMISSIONS] Access denied to",v),p(v),u(!0))},[f,o]),w={permissions:n,loading:o,hasPermission:f,showPermissionDenied:d,setShowPermissionDenied:u,deniedPermissionName:m,setDeniedPermissionName:p,checkAndNavigate:x};return r.jsx(T4.Provider,{value:w,children:e})}function M1(){const e=S.useContext(T4);if(!e)throw new Error("usePermissions must be used within a PermissionProvider");return e}function R1({isOpen:e,onClose:t,permissionName:a}){return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6 animate-fade-in",children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ar,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:r.jsx(E1,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Permission Required"}),r.jsxs("div",{className:"flex items-start space-x-2 bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[r.jsx(Wa,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-gray-700 text-left",children:["You don't have permission to access ",r.jsx("strong",{children:a}),"."]})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Access to this feature is currently disabled by the Super Admin. Please contact your Super Admin to request access. They can enable this permission from the Access Control panel."}),r.jsx("button",{onClick:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Understood"})]})]})]}):null}const OM=({children:e})=>{const[t,a]=S.useState(!1),n=Gs();Zo();const{hasPermission:s,showPermissionDenied:o,setShowPermissionDenied:l,deniedPermissionName:d,checkAndNavigate:u}=M1(),m=[{name:"Dashboard",href:"/admin/",icon:P1},{name:"Manage Users",href:"/admin/users",icon:ta},{name:"School Settings",href:"/admin/settings",icon:rf},{name:"Academic Details",href:"/admin/academic-details",icon:Ho},{name:"Attendance",href:"/admin/attendance",icon:as},{name:"Assignments",href:"/admin/assignments",icon:ss},{name:"Results",href:"/admin/results",icon:Rl},{name:"Leave Management",href:"/admin/leave-management",icon:la},{name:"Messages",href:"/admin/messages",icon:Qh},{name:"Fees",href:"/admin/fees/structure",icon:Ul},{name:"Reports",href:"/admin/reports",icon:fa}],p=f=>n.pathname===f;return r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsxs("div",{className:"w-64 bg-white shadow-lg hidden lg:flex flex-col",children:[r.jsx("div",{className:"h-16 px-6 flex items-center bg-blue-600",children:r.jsx("h1",{className:"text-xl font-bold text-white",children:"ERP Admin Portal"})}),r.jsx("nav",{className:"mt-8 px-4 space-y-2",children:m.map(f=>r.jsxs(Qm,{to:f.href,className:`flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors ${p(f.href)||n.pathname.startsWith(f.href+"/")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx(f.icon,{className:"mr-3 h-5 w-5"}),f.name]},f.name))})]}),t&&r.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>a(!1)}),r.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:hidden ${t?"translate-x-0":"-translate-x-full"}`,children:[r.jsxs("div",{className:"h-16 px-6 flex items-center justify-between bg-blue-600",children:[r.jsx("h1",{className:"text-xl font-bold text-white",children:"ERP Admin Portal"}),r.jsx("button",{onClick:()=>a(!1),className:"text-white hover:bg-blue-700 p-1 rounded",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsx("nav",{className:"mt-8 px-4 space-y-2",children:m.map(f=>r.jsxs(Qm,{to:f.href,onClick:()=>a(!1),className:`flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors ${p(f.href)||n.pathname.startsWith(f.href+"/")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx(f.icon,{className:"mr-3 h-5 w-5"}),f.name]},f.name))})]}),r.jsx(R1,{isOpen:o,onClose:()=>l(!1),permissionName:d}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6",children:[r.jsx("button",{onClick:()=>a(!0),className:"lg:hidden text-gray-500 hover:text-gray-700 p-2 rounded-md hover:bg-gray-100",children:r.jsx(a4,{className:"h-6 w-6"})}),r.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(yd,{className:"h-4 w-4 text-white"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:"Admin User"})]})})]})}),r.jsx("main",{className:"p-4 sm:p-6 flex-1",children:e})]})]})};function O4(e){var t,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(a=O4(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function sr(){for(var e,t,a=0,n="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=O4(e))&&(n&&(n+=" "),n+=t);return n}var Ig,A2;function Dn(){if(A2)return Ig;A2=1;var e=Array.isArray;return Ig=e,Ig}var Ag,P2;function _4(){if(P2)return Ag;P2=1;var e=typeof Sm=="object"&&Sm&&Sm.Object===Object&&Sm;return Ag=e,Ag}var Pg,E2;function Ks(){if(E2)return Pg;E2=1;var e=_4(),t=typeof self=="object"&&self&&self.Object===Object&&self,a=e||t||Function("return this")();return Pg=a,Pg}var Eg,T2;function xu(){if(T2)return Eg;T2=1;var e=Ks(),t=e.Symbol;return Eg=t,Eg}var Tg,D2;function _M(){if(D2)return Tg;D2=1;var e=xu(),t=Object.prototype,a=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function o(l){var d=a.call(l,s),u=l[s];try{l[s]=void 0;var m=!0}catch{}var p=n.call(l);return m&&(d?l[s]=u:delete l[s]),p}return Tg=o,Tg}var Dg,O2;function MM(){if(O2)return Dg;O2=1;var e=Object.prototype,t=e.toString;function a(n){return t.call(n)}return Dg=a,Dg}var Og,_2;function Ci(){if(_2)return Og;_2=1;var e=xu(),t=_M(),a=MM(),n="[object Null]",s="[object Undefined]",o=e?e.toStringTag:void 0;function l(d){return d==null?d===void 0?s:n:o&&o in Object(d)?t(d):a(d)}return Og=l,Og}var _g,M2;function ki(){if(M2)return _g;M2=1;function e(t){return t!=null&&typeof t=="object"}return _g=e,_g}var Mg,R2;function xc(){if(R2)return Mg;R2=1;var e=Ci(),t=ki(),a="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==a}return Mg=n,Mg}var Rg,$2;function $1(){if($2)return Rg;$2=1;var e=Dn(),t=xc(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(o,l){if(e(o))return!1;var d=typeof o;return d=="number"||d=="symbol"||d=="boolean"||o==null||t(o)?!0:n.test(o)||!a.test(o)||l!=null&&o in Object(l)}return Rg=s,Rg}var $g,L2;function io(){if(L2)return $g;L2=1;function e(t){var a=typeof t;return t!=null&&(a=="object"||a=="function")}return $g=e,$g}var Lg,F2;function L1(){if(F2)return Lg;F2=1;var e=Ci(),t=io(),a="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",o="[object Proxy]";function l(d){if(!t(d))return!1;var u=e(d);return u==n||u==s||u==a||u==o}return Lg=l,Lg}var Fg,B2;function RM(){if(B2)return Fg;B2=1;var e=Ks(),t=e["__core-js_shared__"];return Fg=t,Fg}var Bg,U2;function $M(){if(U2)return Bg;U2=1;var e=RM(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function a(n){return!!t&&t in n}return Bg=a,Bg}var Ug,z2;function M4(){if(z2)return Ug;z2=1;var e=Function.prototype,t=e.toString;function a(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Ug=a,Ug}var zg,q2;function LM(){if(q2)return zg;q2=1;var e=L1(),t=$M(),a=io(),n=M4(),s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,m=d.hasOwnProperty,p=RegExp("^"+u.call(m).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(x){if(!a(x)||t(x))return!1;var w=e(x)?p:o;return w.test(n(x))}return zg=f,zg}var qg,H2;function FM(){if(H2)return qg;H2=1;function e(t,a){return t?.[a]}return qg=e,qg}var Hg,W2;function Qo(){if(W2)return Hg;W2=1;var e=LM(),t=FM();function a(n,s){var o=t(n,s);return e(o)?o:void 0}return Hg=a,Hg}var Wg,V2;function df(){if(V2)return Wg;V2=1;var e=Qo(),t=e(Object,"create");return Wg=t,Wg}var Vg,G2;function BM(){if(G2)return Vg;G2=1;var e=df();function t(){this.__data__=e?e(null):{},this.size=0}return Vg=t,Vg}var Gg,K2;function UM(){if(K2)return Gg;K2=1;function e(t){var a=this.has(t)&&delete this.__data__[t];return this.size-=a?1:0,a}return Gg=e,Gg}var Kg,Y2;function zM(){if(Y2)return Kg;Y2=1;var e=df(),t="__lodash_hash_undefined__",a=Object.prototype,n=a.hasOwnProperty;function s(o){var l=this.__data__;if(e){var d=l[o];return d===t?void 0:d}return n.call(l,o)?l[o]:void 0}return Kg=s,Kg}var Yg,X2;function qM(){if(X2)return Yg;X2=1;var e=df(),t=Object.prototype,a=t.hasOwnProperty;function n(s){var o=this.__data__;return e?o[s]!==void 0:a.call(o,s)}return Yg=n,Yg}var Xg,J2;function HM(){if(J2)return Xg;J2=1;var e=df(),t="__lodash_hash_undefined__";function a(n,s){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&s===void 0?t:s,this}return Xg=a,Xg}var Jg,Z2;function WM(){if(Z2)return Jg;Z2=1;var e=BM(),t=UM(),a=zM(),n=qM(),s=HM();function o(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,Jg=o,Jg}var Zg,Q2;function VM(){if(Q2)return Zg;Q2=1;function e(){this.__data__=[],this.size=0}return Zg=e,Zg}var Qg,eS;function F1(){if(eS)return Qg;eS=1;function e(t,a){return t===a||t!==t&&a!==a}return Qg=e,Qg}var ex,tS;function uf(){if(tS)return ex;tS=1;var e=F1();function t(a,n){for(var s=a.length;s--;)if(e(a[s][0],n))return s;return-1}return ex=t,ex}var tx,rS;function GM(){if(rS)return tx;rS=1;var e=uf(),t=Array.prototype,a=t.splice;function n(s){var o=this.__data__,l=e(o,s);if(l<0)return!1;var d=o.length-1;return l==d?o.pop():a.call(o,l,1),--this.size,!0}return tx=n,tx}var rx,aS;function KM(){if(aS)return rx;aS=1;var e=uf();function t(a){var n=this.__data__,s=e(n,a);return s<0?void 0:n[s][1]}return rx=t,rx}var ax,nS;function YM(){if(nS)return ax;nS=1;var e=uf();function t(a){return e(this.__data__,a)>-1}return ax=t,ax}var nx,sS;function XM(){if(sS)return nx;sS=1;var e=uf();function t(a,n){var s=this.__data__,o=e(s,a);return o<0?(++this.size,s.push([a,n])):s[o][1]=n,this}return nx=t,nx}var sx,iS;function mf(){if(iS)return sx;iS=1;var e=VM(),t=GM(),a=KM(),n=YM(),s=XM();function o(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,sx=o,sx}var ix,oS;function B1(){if(oS)return ix;oS=1;var e=Qo(),t=Ks(),a=e(t,"Map");return ix=a,ix}var ox,lS;function JM(){if(lS)return ox;lS=1;var e=WM(),t=mf(),a=B1();function n(){this.size=0,this.__data__={hash:new e,map:new(a||t),string:new e}}return ox=n,ox}var lx,cS;function ZM(){if(cS)return lx;cS=1;function e(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}return lx=e,lx}var cx,dS;function hf(){if(dS)return cx;dS=1;var e=ZM();function t(a,n){var s=a.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return cx=t,cx}var dx,uS;function QM(){if(uS)return dx;uS=1;var e=hf();function t(a){var n=e(this,a).delete(a);return this.size-=n?1:0,n}return dx=t,dx}var ux,mS;function eR(){if(mS)return ux;mS=1;var e=hf();function t(a){return e(this,a).get(a)}return ux=t,ux}var mx,hS;function tR(){if(hS)return mx;hS=1;var e=hf();function t(a){return e(this,a).has(a)}return mx=t,mx}var hx,fS;function rR(){if(fS)return hx;fS=1;var e=hf();function t(a,n){var s=e(this,a),o=s.size;return s.set(a,n),this.size+=s.size==o?0:1,this}return hx=t,hx}var fx,pS;function U1(){if(pS)return fx;pS=1;var e=JM(),t=QM(),a=eR(),n=tR(),s=rR();function o(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,fx=o,fx}var px,gS;function R4(){if(gS)return px;gS=1;var e=U1(),t="Expected a function";function a(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var o=function(){var l=arguments,d=s?s.apply(this,l):l[0],u=o.cache;if(u.has(d))return u.get(d);var m=n.apply(this,l);return o.cache=u.set(d,m)||u,m};return o.cache=new(a.Cache||e),o}return a.Cache=e,px=a,px}var gx,xS;function aR(){if(xS)return gx;xS=1;var e=R4(),t=500;function a(n){var s=e(n,function(l){return o.size===t&&o.clear(),l}),o=s.cache;return s}return gx=a,gx}var xx,yS;function nR(){if(yS)return xx;yS=1;var e=aR(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,n=e(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(t,function(l,d,u,m){o.push(u?m.replace(a,"$1"):d||l)}),o});return xx=n,xx}var yx,bS;function z1(){if(bS)return yx;bS=1;function e(t,a){for(var n=-1,s=t==null?0:t.length,o=Array(s);++n<s;)o[n]=a(t[n],n,t);return o}return yx=e,yx}var bx,vS;function sR(){if(vS)return bx;vS=1;var e=xu(),t=z1(),a=Dn(),n=xc(),s=e?e.prototype:void 0,o=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(a(d))return t(d,l)+"";if(n(d))return o?o.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return bx=l,bx}var vx,jS;function $4(){if(jS)return vx;jS=1;var e=sR();function t(a){return a==null?"":e(a)}return vx=t,vx}var jx,wS;function L4(){if(wS)return jx;wS=1;var e=Dn(),t=$1(),a=nR(),n=$4();function s(o,l){return e(o)?o:t(o,l)?[o]:a(n(o))}return jx=s,jx}var wx,NS;function ff(){if(NS)return wx;NS=1;var e=xc();function t(a){if(typeof a=="string"||e(a))return a;var n=a+"";return n=="0"&&1/a==-1/0?"-0":n}return wx=t,wx}var Nx,SS;function q1(){if(SS)return Nx;SS=1;var e=L4(),t=ff();function a(n,s){s=e(s,n);for(var o=0,l=s.length;n!=null&&o<l;)n=n[t(s[o++])];return o&&o==l?n:void 0}return Nx=a,Nx}var Sx,CS;function F4(){if(CS)return Sx;CS=1;var e=q1();function t(a,n,s){var o=a==null?void 0:e(a,n);return o===void 0?s:o}return Sx=t,Sx}var iR=F4();const Wn=Sr(iR);var Cx,kS;function oR(){if(kS)return Cx;kS=1;function e(t){return t==null}return Cx=e,Cx}var lR=oR();const cr=Sr(lR);var kx,IS;function cR(){if(IS)return kx;IS=1;var e=Ci(),t=Dn(),a=ki(),n="[object String]";function s(o){return typeof o=="string"||!t(o)&&a(o)&&e(o)==n}return kx=s,kx}var dR=cR();const Vo=Sr(dR);var uR=L1();const Gt=Sr(uR);var mR=io();const yc=Sr(mR);var Ix={exports:{}},jr={};var AS;function hR(){if(AS)return jr;AS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function v(b){if(typeof b=="object"&&b!==null){var I=b.$$typeof;switch(I){case e:switch(b=b.type,b){case a:case s:case n:case m:case p:return b;default:switch(b=b&&b.$$typeof,b){case d:case l:case u:case x:case f:case o:return b;default:return I}}case t:return I}}}return jr.ContextConsumer=l,jr.ContextProvider=o,jr.Element=e,jr.ForwardRef=u,jr.Fragment=a,jr.Lazy=x,jr.Memo=f,jr.Portal=t,jr.Profiler=s,jr.StrictMode=n,jr.Suspense=m,jr.SuspenseList=p,jr.isAsyncMode=function(){return!1},jr.isConcurrentMode=function(){return!1},jr.isContextConsumer=function(b){return v(b)===l},jr.isContextProvider=function(b){return v(b)===o},jr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},jr.isForwardRef=function(b){return v(b)===u},jr.isFragment=function(b){return v(b)===a},jr.isLazy=function(b){return v(b)===x},jr.isMemo=function(b){return v(b)===f},jr.isPortal=function(b){return v(b)===t},jr.isProfiler=function(b){return v(b)===s},jr.isStrictMode=function(b){return v(b)===n},jr.isSuspense=function(b){return v(b)===m},jr.isSuspenseList=function(b){return v(b)===p},jr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===a||b===s||b===n||b===m||b===p||b===w||typeof b=="object"&&b!==null&&(b.$$typeof===x||b.$$typeof===f||b.$$typeof===o||b.$$typeof===l||b.$$typeof===u||b.$$typeof===j||b.getModuleId!==void 0)},jr.typeOf=v,jr}var PS;function fR(){return PS||(PS=1,Ix.exports=hR()),Ix.exports}var pR=fR(),Ax,ES;function B4(){if(ES)return Ax;ES=1;var e=Ci(),t=ki(),a="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==a}return Ax=n,Ax}var Px,TS;function gR(){if(TS)return Px;TS=1;var e=B4();function t(a){return e(a)&&a!=+a}return Px=t,Px}var xR=gR();const yu=Sr(xR);var yR=B4();const bR=Sr(yR);var mn=function(t){return t===0?0:t>0?1:-1},Mo=function(t){return Vo(t)&&t.indexOf("%")===t.length-1},ht=function(t){return bR(t)&&!yu(t)},vR=function(t){return cr(t)},ka=function(t){return ht(t)||Vo(t)},jR=0,bu=function(t){var a=++jR;return"".concat(t||"").concat(a)},hn=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ht(t)&&!Vo(t))return n;var o;if(Mo(t)){var l=t.indexOf("%");o=a*parseFloat(t.slice(0,l))/100}else o=+t;return yu(o)&&(o=n),s&&o>a&&(o=a),o},Ji=function(t){if(!t)return null;var a=Object.keys(t);return a&&a.length?t[a[0]]:null},wR=function(t){if(!Array.isArray(t))return!1;for(var a=t.length,n={},s=0;s<a;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},Ki=function(t,a){return ht(t)&&ht(a)?function(n){return t+n*(a-t)}:function(){return a}};function Jb(e,t,a){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Wn(n,t))===a})}var NR=function(t,a){return ht(t)&&ht(a)?t-a:Vo(t)&&Vo(a)?t.localeCompare(a):t instanceof Date&&a instanceof Date?t.getTime()-a.getTime():String(t).localeCompare(String(a))};function $l(e,t){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(t,a)||e[a]!==t[a]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Zb(e){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zb(e)}var SR=["viewBox","children"],CR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],DS=["points","pathLength"],Ex={svg:SR,polygon:DS,polyline:DS},H1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],th=function(t,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(S.isValidElement(t)&&(n=t.props),!yc(n))return null;var s={};return Object.keys(n).forEach(function(o){H1.includes(o)&&(s[o]=a||function(l){return n[o](n,l)})}),s},kR=function(t,a,n){return function(s){return t(a,n,s),null}},Go=function(t,a,n){if(!yc(t)||Zb(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(o){var l=t[o];H1.includes(o)&&typeof l=="function"&&(s||(s={}),s[o]=kR(l,a,n))}),s},IR=["children"],AR=["children"];function OS(e,t){if(e==null)return{};var a=PR(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function PR(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var _S={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},MS=null,Tx=null,W1=function e(t){if(t===MS&&Array.isArray(Tx))return Tx;var a=[];return S.Children.forEach(t,function(n){cr(n)||(pR.isFragment(n)?a=a.concat(e(n.props.children)):a.push(n))}),Tx=a,MS=t,a};function os(e,t){var a=[],n=[];return Array.isArray(t)?n=t.map(function(s){return gi(s)}):n=[gi(t)],W1(e).forEach(function(s){var o=Wn(s,"type.displayName")||Wn(s,"type.name");n.indexOf(o)!==-1&&a.push(s)}),a}function Un(e,t){var a=os(e,t);return a&&a[0]}var RS=function(t){if(!t||!t.props)return!1;var a=t.props,n=a.width,s=a.height;return!(!ht(n)||n<=0||!ht(s)||s<=0)},ER=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],TR=function(t){return t&&t.type&&Vo(t.type)&&ER.indexOf(t.type)>=0},DR=function(t,a,n,s){var o,l=(o=Ex?.[s])!==null&&o!==void 0?o:[];return a.startsWith("data-")||!Gt(t)&&(s&&l.includes(a)||CR.includes(a))||n&&H1.includes(a)},qt=function(t,a,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(S.isValidElement(t)&&(s=t.props),!yc(s))return null;var o={};return Object.keys(s).forEach(function(l){var d;DR((d=s)===null||d===void 0?void 0:d[l],l,a,n)&&(o[l]=s[l])}),o},Qb=function e(t,a){if(t===a)return!0;var n=S.Children.count(t);if(n!==S.Children.count(a))return!1;if(n===0)return!0;if(n===1)return $S(Array.isArray(t)?t[0]:t,Array.isArray(a)?a[0]:a);for(var s=0;s<n;s++){var o=t[s],l=a[s];if(Array.isArray(o)||Array.isArray(l)){if(!e(o,l))return!1}else if(!$S(o,l))return!1}return!0},$S=function(t,a){if(cr(t)&&cr(a))return!0;if(!cr(t)&&!cr(a)){var n=t.props||{},s=n.children,o=OS(n,IR),l=a.props||{},d=l.children,u=OS(l,AR);return s&&d?$l(o,u)&&Qb(s,d):!s&&!d?$l(o,u):!1}return!1},LS=function(t,a){var n=[],s={};return W1(t).forEach(function(o,l){if(TR(o))n.push(o);else if(o){var d=gi(o.type),u=a[d]||{},m=u.handler,p=u.once;if(m&&(!p||!s[d])){var f=m(o,d,l);n.push(f),s[d]=!0}}}),n},OR=function(t){var a=t&&t.type;return a&&_S[a]?_S[a]:null},_R=function(t,a){return W1(a).indexOf(t)},MR=["children","width","height","viewBox","className","style","title","desc"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ev.apply(this,arguments)}function RR(e,t){if(e==null)return{};var a=$R(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $R(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function tv(e){var t=e.children,a=e.width,n=e.height,s=e.viewBox,o=e.className,l=e.style,d=e.title,u=e.desc,m=RR(e,MR),p=s||{width:a,height:n,x:0,y:0},f=sr("recharts-surface",o);return ge.createElement("svg",ev({},qt(m,!0,"svg"),{className:f,width:a,height:n,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),ge.createElement("title",null,d),ge.createElement("desc",null,u),t)}var LR=["children","className"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rv.apply(this,arguments)}function FR(e,t){if(e==null)return{};var a=BR(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function BR(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var Ir=ge.forwardRef(function(e,t){var a=e.children,n=e.className,s=FR(e,LR),o=sr("recharts-layer",n);return ge.createElement("g",rv({className:o},qt(s,!0),{ref:t}),a)}),Ss=function(t,a){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o]},Dx,FS;function UR(){if(FS)return Dx;FS=1;function e(t,a,n){var s=-1,o=t.length;a<0&&(a=-a>o?0:o+a),n=n>o?o:n,n<0&&(n+=o),o=a>n?0:n-a>>>0,a>>>=0;for(var l=Array(o);++s<o;)l[s]=t[s+a];return l}return Dx=e,Dx}var Ox,BS;function zR(){if(BS)return Ox;BS=1;var e=UR();function t(a,n,s){var o=a.length;return s=s===void 0?o:s,!n&&s>=o?a:e(a,n,s)}return Ox=t,Ox}var _x,US;function U4(){if(US)return _x;US=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+a+n,o="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+e+s+o+"]");function u(m){return d.test(m)}return _x=u,_x}var Mx,zS;function qR(){if(zS)return Mx;zS=1;function e(t){return t.split("")}return Mx=e,Mx}var Rx,qS;function HR(){if(qS)return Rx;qS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+a+n,o="\\ufe0e\\ufe0f",l="["+e+"]",d="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",m="(?:"+d+"|"+u+")",p="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",w="\\u200d",j=m+"?",v="["+o+"]?",b="(?:"+w+"(?:"+[p,f,x].join("|")+")"+v+j+")*",I=v+j+b,T="(?:"+[p+d+"?",d,f,x,l].join("|")+")",P=RegExp(u+"(?="+u+")|"+T+I,"g");function A(k){return k.match(P)||[]}return Rx=A,Rx}var $x,HS;function WR(){if(HS)return $x;HS=1;var e=qR(),t=U4(),a=HR();function n(s){return t(s)?a(s):e(s)}return $x=n,$x}var Lx,WS;function VR(){if(WS)return Lx;WS=1;var e=zR(),t=U4(),a=WR(),n=$4();function s(o){return function(l){l=n(l);var d=t(l)?a(l):void 0,u=d?d[0]:l.charAt(0),m=d?e(d,1).join(""):l.slice(1);return u[o]()+m}}return Lx=s,Lx}var Fx,VS;function GR(){if(VS)return Fx;VS=1;var e=VR(),t=e("toUpperCase");return Fx=t,Fx}var KR=GR();const pf=Sr(KR);function Lr(e){return function(){return e}}const z4=Math.cos,rh=Math.sin,ks=Math.sqrt,ah=Math.PI,gf=2*ah,av=Math.PI,nv=2*av,To=1e-6,YR=nv-To;function q4(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function XR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return q4;const a=10**t;return function(n){this._+=n[0];for(let s=1,o=n.length;s<o;++s)this._+=Math.round(arguments[s]*a)/a+n[s]}}class JR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?q4:XR(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,n,s){this._append`Q${+t},${+a},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,a,n,s,o,l){this._append`C${+t},${+a},${+n},${+s},${this._x1=+o},${this._y1=+l}`}arcTo(t,a,n,s,o){if(t=+t,a=+a,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,d=this._y1,u=n-t,m=s-a,p=l-t,f=d-a,x=p*p+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(x>To)if(!(Math.abs(f*u-m*p)>To)||!o)this._append`L${this._x1=t},${this._y1=a}`;else{let w=n-l,j=s-d,v=u*u+m*m,b=w*w+j*j,I=Math.sqrt(v),T=Math.sqrt(x),P=o*Math.tan((av-Math.acos((v+x-b)/(2*I*T)))/2),A=P/T,k=P/I;Math.abs(A-1)>To&&this._append`L${t+A*p},${a+A*f}`,this._append`A${o},${o},0,0,${+(f*w>p*j)},${this._x1=t+k*u},${this._y1=a+k*m}`}}arc(t,a,n,s,o,l){if(t=+t,a=+a,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(s),u=n*Math.sin(s),m=t+d,p=a+u,f=1^l,x=l?s-o:o-s;this._x1===null?this._append`M${m},${p}`:(Math.abs(this._x1-m)>To||Math.abs(this._y1-p)>To)&&this._append`L${m},${p}`,n&&(x<0&&(x=x%nv+nv),x>YR?this._append`A${n},${n},0,1,${f},${t-d},${a-u}A${n},${n},0,1,${f},${this._x1=m},${this._y1=p}`:x>To&&this._append`A${n},${n},0,${+(x>=av)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=a+n*Math.sin(o)}`)}rect(t,a,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function V1(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const n=Math.floor(a);if(!(n>=0))throw new RangeError(`invalid digits: ${a}`);t=n}return e},()=>new JR(t)}function G1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function H4(e){this._context=e}H4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xf(e){return new H4(e)}function W4(e){return e[0]}function V4(e){return e[1]}function G4(e,t){var a=Lr(!0),n=null,s=xf,o=null,l=V1(d);e=typeof e=="function"?e:e===void 0?W4:Lr(e),t=typeof t=="function"?t:t===void 0?V4:Lr(t);function d(u){var m,p=(u=G1(u)).length,f,x=!1,w;for(n==null&&(o=s(w=l())),m=0;m<=p;++m)!(m<p&&a(f=u[m],m,u))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+e(f,m,u),+t(f,m,u));if(w)return o=null,w+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Lr(+u),d):e},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:Lr(+u),d):t},d.defined=function(u){return arguments.length?(a=typeof u=="function"?u:Lr(!!u),d):a},d.curve=function(u){return arguments.length?(s=u,n!=null&&(o=s(n)),d):s},d.context=function(u){return arguments.length?(u==null?n=o=null:o=s(n=u),d):n},d}function Am(e,t,a){var n=null,s=Lr(!0),o=null,l=xf,d=null,u=V1(m);e=typeof e=="function"?e:e===void 0?W4:Lr(+e),t=typeof t=="function"?t:Lr(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?V4:Lr(+a);function m(f){var x,w,j,v=(f=G1(f)).length,b,I=!1,T,P=new Array(v),A=new Array(v);for(o==null&&(d=l(T=u())),x=0;x<=v;++x){if(!(x<v&&s(b=f[x],x,f))===I)if(I=!I)w=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=x-1;j>=w;--j)d.point(P[j],A[j]);d.lineEnd(),d.areaEnd()}I&&(P[x]=+e(b,x,f),A[x]=+t(b,x,f),d.point(n?+n(b,x,f):P[x],a?+a(b,x,f):A[x]))}if(T)return d=null,T+""||null}function p(){return G4().defined(s).curve(l).context(o)}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),n=null,m):e},m.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),m):e},m.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Lr(+f),m):n},m.y=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),a=null,m):t},m.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),m):t},m.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Lr(+f),m):a},m.lineX0=m.lineY0=function(){return p().x(e).y(t)},m.lineY1=function(){return p().x(e).y(a)},m.lineX1=function(){return p().x(n).y(t)},m.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Lr(!!f),m):s},m.curve=function(f){return arguments.length?(l=f,o!=null&&(d=l(o)),m):l},m.context=function(f){return arguments.length?(f==null?o=d=null:d=l(o=f),m):o},m}class K4{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function ZR(e){return new K4(e,!0)}function QR(e){return new K4(e,!1)}const K1={draw(e,t){const a=ks(t/ah);e.moveTo(a,0),e.arc(0,0,a,0,gf)}},e$={draw(e,t){const a=ks(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},Y4=ks(1/3),t$=Y4*2,r$={draw(e,t){const a=ks(t/t$),n=a*Y4;e.moveTo(0,-a),e.lineTo(n,0),e.lineTo(0,a),e.lineTo(-n,0),e.closePath()}},a$={draw(e,t){const a=ks(t),n=-a/2;e.rect(n,n,a,a)}},n$=.8908130915292852,X4=rh(ah/10)/rh(7*ah/10),s$=rh(gf/10)*X4,i$=-z4(gf/10)*X4,o$={draw(e,t){const a=ks(t*n$),n=s$*a,s=i$*a;e.moveTo(0,-a),e.lineTo(n,s);for(let o=1;o<5;++o){const l=gf*o/5,d=z4(l),u=rh(l);e.lineTo(u*a,-d*a),e.lineTo(d*n-u*s,u*n+d*s)}e.closePath()}},Bx=ks(3),l$={draw(e,t){const a=-ks(t/(Bx*3));e.moveTo(0,a*2),e.lineTo(-Bx*a,-a),e.lineTo(Bx*a,-a),e.closePath()}},Qn=-.5,es=ks(3)/2,sv=1/ks(12),c$=(sv/2+1)*3,d$={draw(e,t){const a=ks(t/c$),n=a/2,s=a*sv,o=n,l=a*sv+a,d=-o,u=l;e.moveTo(n,s),e.lineTo(o,l),e.lineTo(d,u),e.lineTo(Qn*n-es*s,es*n+Qn*s),e.lineTo(Qn*o-es*l,es*o+Qn*l),e.lineTo(Qn*d-es*u,es*d+Qn*u),e.lineTo(Qn*n+es*s,Qn*s-es*n),e.lineTo(Qn*o+es*l,Qn*l-es*o),e.lineTo(Qn*d+es*u,Qn*u-es*d),e.closePath()}};function u$(e,t){let a=null,n=V1(s);e=typeof e=="function"?e:Lr(e||K1),t=typeof t=="function"?t:Lr(t===void 0?64:+t);function s(){let o;if(a||(a=o=n()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),o)return a=null,o+""||null}return s.type=function(o){return arguments.length?(e=typeof o=="function"?o:Lr(o),s):e},s.size=function(o){return arguments.length?(t=typeof o=="function"?o:Lr(+o),s):t},s.context=function(o){return arguments.length?(a=o??null,s):a},s}function nh(){}function sh(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function J4(e){this._context=e}J4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m$(e){return new J4(e)}function Z4(e){this._context=e}Z4.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:sh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h$(e){return new Z4(e)}function Q4(e){this._context=e}Q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,n):this._context.moveTo(a,n);break;case 3:this._point=4;default:sh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function f$(e){return new Q4(e)}function eE(e){this._context=e}eE.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function p$(e){return new eE(e)}function GS(e){return e<0?-1:1}function KS(e,t,a){var n=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(n||s<0&&-0),l=(a-e._y1)/(s||n<0&&-0),d=(o*s+l*n)/(n+s);return(GS(o)+GS(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(d))||0}function YS(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function Ux(e,t,a){var n=e._x0,s=e._y0,o=e._x1,l=e._y1,d=(o-n)/3;e._context.bezierCurveTo(n+d,s+d*t,o-d,l-d*a,o,l)}function ih(e){this._context=e}ih.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ux(this,this._t0,YS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ux(this,YS(this,a=KS(this,e,t)),a);break;default:Ux(this,this._t0,a=KS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function tE(e){this._context=new rE(e)}(tE.prototype=Object.create(ih.prototype)).point=function(e,t){ih.prototype.point.call(this,t,e)};function rE(e){this._context=e}rE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,n,s,o){this._context.bezierCurveTo(t,e,n,a,o,s)}};function g$(e){return new ih(e)}function x$(e){return new tE(e)}function aE(e){this._context=e}aE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var n=XS(e),s=XS(t),o=0,l=1;l<a;++o,++l)this._context.bezierCurveTo(n[0][o],s[0][o],n[1][o],s[1][o],e[l],t[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XS(e){var t,a=e.length-1,n,s=new Array(a),o=new Array(a),l=new Array(a);for(s[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<a-1;++t)s[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[a-1]=2,o[a-1]=7,l[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=s[t]/o[t-1],o[t]-=n,l[t]-=n*l[t-1];for(s[a-1]=l[a-1]/o[a-1],t=a-2;t>=0;--t)s[t]=(l[t]-s[t+1])/o[t];for(o[a-1]=(e[a]+s[a-1])/2,t=0;t<a-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function y$(e){return new aE(e)}function yf(e,t){this._context=e,this._t=t}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function b$(e){return new yf(e,.5)}function v$(e){return new yf(e,0)}function j$(e){return new yf(e,1)}function ql(e,t){if((l=e.length)>1)for(var a=1,n,s,o=e[t[0]],l,d=o.length;a<l;++a)for(s=o,o=e[t[a]],n=0;n<d;++n)o[n][1]+=o[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function iv(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function w$(e,t){return e[t]}function N$(e){const t=[];return t.key=e,t}function S$(){var e=Lr([]),t=iv,a=ql,n=w$;function s(o){var l=Array.from(e.apply(this,arguments),N$),d,u=l.length,m=-1,p;for(const f of o)for(d=0,++m;d<u;++d)(l[d][m]=[0,+n(f,l[d].key,m,o)]).data=f;for(d=0,p=G1(t(l));d<u;++d)l[p[d]].index=d;return a(l,p),l}return s.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Lr(Array.from(o)),s):e},s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Lr(+o),s):n},s.order=function(o){return arguments.length?(t=o==null?iv:typeof o=="function"?o:Lr(Array.from(o)),s):t},s.offset=function(o){return arguments.length?(a=o??ql,s):a},s}function C$(e,t){if((n=e.length)>0){for(var a,n,s=0,o=e[0].length,l;s<o;++s){for(l=a=0;a<n;++a)l+=e[a][s][1]||0;if(l)for(a=0;a<n;++a)e[a][s][1]/=l}ql(e,t)}}function k$(e,t){if((s=e.length)>0){for(var a=0,n=e[t[0]],s,o=n.length;a<o;++a){for(var l=0,d=0;l<s;++l)d+=e[l][a][1]||0;n[a][1]+=n[a][0]=-d/2}ql(e,t)}}function I$(e,t){if(!(!((l=e.length)>0)||!((o=(s=e[t[0]]).length)>0))){for(var a=0,n=1,s,o,l;n<o;++n){for(var d=0,u=0,m=0;d<l;++d){for(var p=e[t[d]],f=p[n][1]||0,x=p[n-1][1]||0,w=(f-x)/2,j=0;j<d;++j){var v=e[t[j]],b=v[n][1]||0,I=v[n-1][1]||0;w+=b-I}u+=f,m+=w*f}s[n-1][1]+=s[n-1][0]=a,u&&(a-=m/u)}s[n-1][1]+=s[n-1][0]=a,ql(e,t)}}function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}var A$=["type","size","sizeType"];function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ov.apply(this,arguments)}function JS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ZS(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?JS(Object(a),!0).forEach(function(n){P$(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function P$(e,t,a){return t=E$(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E$(e){var t=T$(e,"string");return Ad(t)=="symbol"?t:t+""}function T$(e,t){if(Ad(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D$(e,t){if(e==null)return{};var a=O$(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function O$(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var nE={symbolCircle:K1,symbolCross:e$,symbolDiamond:r$,symbolSquare:a$,symbolStar:o$,symbolTriangle:l$,symbolWye:d$},_$=Math.PI/180,M$=function(t){var a="symbol".concat(pf(t));return nE[a]||K1},R$=function(t,a,n){if(a==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*_$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},$$=function(t,a){nE["symbol".concat(pf(t))]=a},Y1=function(t){var a=t.type,n=a===void 0?"circle":a,s=t.size,o=s===void 0?64:s,l=t.sizeType,d=l===void 0?"area":l,u=D$(t,A$),m=ZS(ZS({},u),{},{type:n,size:o,sizeType:d}),p=function(){var b=M$(n),I=u$().type(b).size(R$(o,d,n));return I()},f=m.className,x=m.cx,w=m.cy,j=qt(m,!0);return x===+x&&w===+w&&o===+o?ge.createElement("path",ov({},j,{className:sr("recharts-symbols",f),transform:"translate(".concat(x,", ").concat(w,")"),d:p()})):null};Y1.registerSymbol=$$;function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},lv.apply(this,arguments)}function QS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function L$(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(a),!0).forEach(function(n){Pd(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function F$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B$(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iE(n.key),n)}}function U$(e,t,a){return t&&B$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z$(e,t,a){return t=oh(t),q$(e,sE()?Reflect.construct(t,a||[],oh(e).constructor):t.apply(e,a))}function q$(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H$(e)}function H$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sE=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},oh(e)}function W$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cv(e,t)}function Pd(e,t,a){return t=iE(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iE(e){var t=V$(e,"string");return Hl(t)=="symbol"?t:t+""}function V$(e,t){if(Hl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ts=32,X1=(function(e){function t(){return F$(this,t),z$(this,t,arguments)}return W$(t,e),U$(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,o=ts/2,l=ts/6,d=ts/3,u=n.inactive?s:n.color;if(n.type==="plainline")return ge.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:ts,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return ge.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(o,`
            H`).concat(ts,"M").concat(2*d,",").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return ge.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(ts/8,"h").concat(ts,"v").concat(ts*3/4,"h").concat(-ts,"z"),className:"recharts-legend-icon"});if(ge.isValidElement(n.legendIcon)){var m=L$({},n);return delete m.legendIcon,ge.cloneElement(n.legendIcon,m)}return ge.createElement(Y1,{fill:u,cx:o,cy:o,size:ts,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,o=s.payload,l=s.iconSize,d=s.layout,u=s.formatter,m=s.inactiveColor,p={x:0,y:0,width:ts,height:ts},f={display:d==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(w,j){var v=w.formatter||u,b=sr(Pd(Pd({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",w.inactive));if(w.type==="none")return null;var I=Gt(w.value)?null:w.value;Ss(!Gt(w.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=w.inactive?m:w.color;return ge.createElement("li",lv({className:b,style:f,key:"legend-item-".concat(j)},Go(n.props,w,j)),ge.createElement(tv,{width:l,height:l,viewBox:p,style:x},n.renderIcon(w)),ge.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},v?v(I,w,j):I))})}},{key:"render",value:function(){var n=this.props,s=n.payload,o=n.layout,l=n.align;if(!s||!s.length)return null;var d={padding:0,margin:0,textAlign:o==="horizontal"?l:"left"};return ge.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])})(S.PureComponent);Pd(X1,"displayName","Legend");Pd(X1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zx,eC;function G$(){if(eC)return zx;eC=1;var e=mf();function t(){this.__data__=new e,this.size=0}return zx=t,zx}var qx,tC;function K$(){if(tC)return qx;tC=1;function e(t){var a=this.__data__,n=a.delete(t);return this.size=a.size,n}return qx=e,qx}var Hx,rC;function Y$(){if(rC)return Hx;rC=1;function e(t){return this.__data__.get(t)}return Hx=e,Hx}var Wx,aC;function X$(){if(aC)return Wx;aC=1;function e(t){return this.__data__.has(t)}return Wx=e,Wx}var Vx,nC;function J$(){if(nC)return Vx;nC=1;var e=mf(),t=B1(),a=U1(),n=200;function s(o,l){var d=this.__data__;if(d instanceof e){var u=d.__data__;if(!t||u.length<n-1)return u.push([o,l]),this.size=++d.size,this;d=this.__data__=new a(u)}return d.set(o,l),this.size=d.size,this}return Vx=s,Vx}var Gx,sC;function oE(){if(sC)return Gx;sC=1;var e=mf(),t=G$(),a=K$(),n=Y$(),s=X$(),o=J$();function l(d){var u=this.__data__=new e(d);this.size=u.size}return l.prototype.clear=t,l.prototype.delete=a,l.prototype.get=n,l.prototype.has=s,l.prototype.set=o,Gx=l,Gx}var Kx,iC;function Z$(){if(iC)return Kx;iC=1;var e="__lodash_hash_undefined__";function t(a){return this.__data__.set(a,e),this}return Kx=t,Kx}var Yx,oC;function Q$(){if(oC)return Yx;oC=1;function e(t){return this.__data__.has(t)}return Yx=e,Yx}var Xx,lC;function lE(){if(lC)return Xx;lC=1;var e=U1(),t=Z$(),a=Q$();function n(s){var o=-1,l=s==null?0:s.length;for(this.__data__=new e;++o<l;)this.add(s[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=a,Xx=n,Xx}var Jx,cC;function cE(){if(cC)return Jx;cC=1;function e(t,a){for(var n=-1,s=t==null?0:t.length;++n<s;)if(a(t[n],n,t))return!0;return!1}return Jx=e,Jx}var Zx,dC;function dE(){if(dC)return Zx;dC=1;function e(t,a){return t.has(a)}return Zx=e,Zx}var Qx,uC;function uE(){if(uC)return Qx;uC=1;var e=lE(),t=cE(),a=dE(),n=1,s=2;function o(l,d,u,m,p,f){var x=u&n,w=l.length,j=d.length;if(w!=j&&!(x&&j>w))return!1;var v=f.get(l),b=f.get(d);if(v&&b)return v==d&&b==l;var I=-1,T=!0,P=u&s?new e:void 0;for(f.set(l,d),f.set(d,l);++I<w;){var A=l[I],k=d[I];if(m)var E=x?m(k,A,I,d,l,f):m(A,k,I,l,d,f);if(E!==void 0){if(E)continue;T=!1;break}if(P){if(!t(d,function(_,R){if(!a(P,R)&&(A===_||p(A,_,u,m,f)))return P.push(R)})){T=!1;break}}else if(!(A===k||p(A,k,u,m,f))){T=!1;break}}return f.delete(l),f.delete(d),T}return Qx=o,Qx}var e0,mC;function eL(){if(mC)return e0;mC=1;var e=Ks(),t=e.Uint8Array;return e0=t,e0}var t0,hC;function tL(){if(hC)return t0;hC=1;function e(t){var a=-1,n=Array(t.size);return t.forEach(function(s,o){n[++a]=[o,s]}),n}return t0=e,t0}var r0,fC;function J1(){if(fC)return r0;fC=1;function e(t){var a=-1,n=Array(t.size);return t.forEach(function(s){n[++a]=s}),n}return r0=e,r0}var a0,pC;function rL(){if(pC)return a0;pC=1;var e=xu(),t=eL(),a=F1(),n=uE(),s=tL(),o=J1(),l=1,d=2,u="[object Boolean]",m="[object Date]",p="[object Error]",f="[object Map]",x="[object Number]",w="[object RegExp]",j="[object Set]",v="[object String]",b="[object Symbol]",I="[object ArrayBuffer]",T="[object DataView]",P=e?e.prototype:void 0,A=P?P.valueOf:void 0;function k(E,_,R,$,H,L,Y){switch(R){case T:if(E.byteLength!=_.byteLength||E.byteOffset!=_.byteOffset)return!1;E=E.buffer,_=_.buffer;case I:return!(E.byteLength!=_.byteLength||!L(new t(E),new t(_)));case u:case m:case x:return a(+E,+_);case p:return E.name==_.name&&E.message==_.message;case w:case v:return E==_+"";case f:var X=s;case j:var me=$&l;if(X||(X=o),E.size!=_.size&&!me)return!1;var K=Y.get(E);if(K)return K==_;$|=d,Y.set(E,_);var oe=n(X(E),X(_),$,H,L,Y);return Y.delete(E),oe;case b:if(A)return A.call(E)==A.call(_)}return!1}return a0=k,a0}var n0,gC;function mE(){if(gC)return n0;gC=1;function e(t,a){for(var n=-1,s=a.length,o=t.length;++n<s;)t[o+n]=a[n];return t}return n0=e,n0}var s0,xC;function aL(){if(xC)return s0;xC=1;var e=mE(),t=Dn();function a(n,s,o){var l=s(n);return t(n)?l:e(l,o(n))}return s0=a,s0}var i0,yC;function nL(){if(yC)return i0;yC=1;function e(t,a){for(var n=-1,s=t==null?0:t.length,o=0,l=[];++n<s;){var d=t[n];a(d,n,t)&&(l[o++]=d)}return l}return i0=e,i0}var o0,bC;function sL(){if(bC)return o0;bC=1;function e(){return[]}return o0=e,o0}var l0,vC;function iL(){if(vC)return l0;vC=1;var e=nL(),t=sL(),a=Object.prototype,n=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(l){return l==null?[]:(l=Object(l),e(s(l),function(d){return n.call(l,d)}))}:t;return l0=o,l0}var c0,jC;function oL(){if(jC)return c0;jC=1;function e(t,a){for(var n=-1,s=Array(t);++n<t;)s[n]=a(n);return s}return c0=e,c0}var d0,wC;function lL(){if(wC)return d0;wC=1;var e=Ci(),t=ki(),a="[object Arguments]";function n(s){return t(s)&&e(s)==a}return d0=n,d0}var u0,NC;function Z1(){if(NC)return u0;NC=1;var e=lL(),t=ki(),a=Object.prototype,n=a.hasOwnProperty,s=a.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(l){return t(l)&&n.call(l,"callee")&&!s.call(l,"callee")};return u0=o,u0}var fd={exports:{}},m0,SC;function cL(){if(SC)return m0;SC=1;function e(){return!1}return m0=e,m0}fd.exports;var CC;function hE(){return CC||(CC=1,(function(e,t){var a=Ks(),n=cL(),s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===s,d=l?a.Buffer:void 0,u=d?d.isBuffer:void 0,m=u||n;e.exports=m})(fd,fd.exports)),fd.exports}var h0,kC;function Q1(){if(kC)return h0;kC=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function a(n,s){var o=typeof n;return s=s??e,!!s&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return h0=a,h0}var f0,IC;function ej(){if(IC)return f0;IC=1;var e=9007199254740991;function t(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return f0=t,f0}var p0,AC;function dL(){if(AC)return p0;AC=1;var e=Ci(),t=ej(),a=ki(),n="[object Arguments]",s="[object Array]",o="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",m="[object Map]",p="[object Number]",f="[object Object]",x="[object RegExp]",w="[object Set]",j="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",I="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",A="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",_="[object Uint8Array]",R="[object Uint8ClampedArray]",$="[object Uint16Array]",H="[object Uint32Array]",L={};L[T]=L[P]=L[A]=L[k]=L[E]=L[_]=L[R]=L[$]=L[H]=!0,L[n]=L[s]=L[b]=L[o]=L[I]=L[l]=L[d]=L[u]=L[m]=L[p]=L[f]=L[x]=L[w]=L[j]=L[v]=!1;function Y(X){return a(X)&&t(X.length)&&!!L[e(X)]}return p0=Y,p0}var g0,PC;function fE(){if(PC)return g0;PC=1;function e(t){return function(a){return t(a)}}return g0=e,g0}var pd={exports:{}};pd.exports;var EC;function uL(){return EC||(EC=1,(function(e,t){var a=_4(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===n,l=o&&a.process,d=(function(){try{var u=s&&s.require&&s.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}})();e.exports=d})(pd,pd.exports)),pd.exports}var x0,TC;function pE(){if(TC)return x0;TC=1;var e=dL(),t=fE(),a=uL(),n=a&&a.isTypedArray,s=n?t(n):e;return x0=s,x0}var y0,DC;function mL(){if(DC)return y0;DC=1;var e=oL(),t=Z1(),a=Dn(),n=hE(),s=Q1(),o=pE(),l=Object.prototype,d=l.hasOwnProperty;function u(m,p){var f=a(m),x=!f&&t(m),w=!f&&!x&&n(m),j=!f&&!x&&!w&&o(m),v=f||x||w||j,b=v?e(m.length,String):[],I=b.length;for(var T in m)(p||d.call(m,T))&&!(v&&(T=="length"||w&&(T=="offset"||T=="parent")||j&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||s(T,I)))&&b.push(T);return b}return y0=u,y0}var b0,OC;function hL(){if(OC)return b0;OC=1;var e=Object.prototype;function t(a){var n=a&&a.constructor,s=typeof n=="function"&&n.prototype||e;return a===s}return b0=t,b0}var v0,_C;function gE(){if(_C)return v0;_C=1;function e(t,a){return function(n){return t(a(n))}}return v0=e,v0}var j0,MC;function fL(){if(MC)return j0;MC=1;var e=gE(),t=e(Object.keys,Object);return j0=t,j0}var w0,RC;function pL(){if(RC)return w0;RC=1;var e=hL(),t=fL(),a=Object.prototype,n=a.hasOwnProperty;function s(o){if(!e(o))return t(o);var l=[];for(var d in Object(o))n.call(o,d)&&d!="constructor"&&l.push(d);return l}return w0=s,w0}var N0,$C;function vu(){if($C)return N0;$C=1;var e=L1(),t=ej();function a(n){return n!=null&&t(n.length)&&!e(n)}return N0=a,N0}var S0,LC;function bf(){if(LC)return S0;LC=1;var e=mL(),t=pL(),a=vu();function n(s){return a(s)?e(s):t(s)}return S0=n,S0}var C0,FC;function gL(){if(FC)return C0;FC=1;var e=aL(),t=iL(),a=bf();function n(s){return e(s,a,t)}return C0=n,C0}var k0,BC;function xL(){if(BC)return k0;BC=1;var e=gL(),t=1,a=Object.prototype,n=a.hasOwnProperty;function s(o,l,d,u,m,p){var f=d&t,x=e(o),w=x.length,j=e(l),v=j.length;if(w!=v&&!f)return!1;for(var b=w;b--;){var I=x[b];if(!(f?I in l:n.call(l,I)))return!1}var T=p.get(o),P=p.get(l);if(T&&P)return T==l&&P==o;var A=!0;p.set(o,l),p.set(l,o);for(var k=f;++b<w;){I=x[b];var E=o[I],_=l[I];if(u)var R=f?u(_,E,I,l,o,p):u(E,_,I,o,l,p);if(!(R===void 0?E===_||m(E,_,d,u,p):R)){A=!1;break}k||(k=I=="constructor")}if(A&&!k){var $=o.constructor,H=l.constructor;$!=H&&"constructor"in o&&"constructor"in l&&!(typeof $=="function"&&$ instanceof $&&typeof H=="function"&&H instanceof H)&&(A=!1)}return p.delete(o),p.delete(l),A}return k0=s,k0}var I0,UC;function yL(){if(UC)return I0;UC=1;var e=Qo(),t=Ks(),a=e(t,"DataView");return I0=a,I0}var A0,zC;function bL(){if(zC)return A0;zC=1;var e=Qo(),t=Ks(),a=e(t,"Promise");return A0=a,A0}var P0,qC;function xE(){if(qC)return P0;qC=1;var e=Qo(),t=Ks(),a=e(t,"Set");return P0=a,P0}var E0,HC;function vL(){if(HC)return E0;HC=1;var e=Qo(),t=Ks(),a=e(t,"WeakMap");return E0=a,E0}var T0,WC;function jL(){if(WC)return T0;WC=1;var e=yL(),t=B1(),a=bL(),n=xE(),s=vL(),o=Ci(),l=M4(),d="[object Map]",u="[object Object]",m="[object Promise]",p="[object Set]",f="[object WeakMap]",x="[object DataView]",w=l(e),j=l(t),v=l(a),b=l(n),I=l(s),T=o;return(e&&T(new e(new ArrayBuffer(1)))!=x||t&&T(new t)!=d||a&&T(a.resolve())!=m||n&&T(new n)!=p||s&&T(new s)!=f)&&(T=function(P){var A=o(P),k=A==u?P.constructor:void 0,E=k?l(k):"";if(E)switch(E){case w:return x;case j:return d;case v:return m;case b:return p;case I:return f}return A}),T0=T,T0}var D0,VC;function wL(){if(VC)return D0;VC=1;var e=oE(),t=uE(),a=rL(),n=xL(),s=jL(),o=Dn(),l=hE(),d=pE(),u=1,m="[object Arguments]",p="[object Array]",f="[object Object]",x=Object.prototype,w=x.hasOwnProperty;function j(v,b,I,T,P,A){var k=o(v),E=o(b),_=k?p:s(v),R=E?p:s(b);_=_==m?f:_,R=R==m?f:R;var $=_==f,H=R==f,L=_==R;if(L&&l(v)){if(!l(b))return!1;k=!0,$=!1}if(L&&!$)return A||(A=new e),k||d(v)?t(v,b,I,T,P,A):a(v,b,_,I,T,P,A);if(!(I&u)){var Y=$&&w.call(v,"__wrapped__"),X=H&&w.call(b,"__wrapped__");if(Y||X){var me=Y?v.value():v,K=X?b.value():b;return A||(A=new e),P(me,K,I,T,A)}}return L?(A||(A=new e),n(v,b,I,T,P,A)):!1}return D0=j,D0}var O0,GC;function tj(){if(GC)return O0;GC=1;var e=wL(),t=ki();function a(n,s,o,l,d){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,o,l,a,d)}return O0=a,O0}var _0,KC;function NL(){if(KC)return _0;KC=1;var e=oE(),t=tj(),a=1,n=2;function s(o,l,d,u){var m=d.length,p=m,f=!u;if(o==null)return!p;for(o=Object(o);m--;){var x=d[m];if(f&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++m<p;){x=d[m];var w=x[0],j=o[w],v=x[1];if(f&&x[2]){if(j===void 0&&!(w in o))return!1}else{var b=new e;if(u)var I=u(j,v,w,o,l,b);if(!(I===void 0?t(v,j,a|n,u,b):I))return!1}}return!0}return _0=s,_0}var M0,YC;function yE(){if(YC)return M0;YC=1;var e=io();function t(a){return a===a&&!e(a)}return M0=t,M0}var R0,XC;function SL(){if(XC)return R0;XC=1;var e=yE(),t=bf();function a(n){for(var s=t(n),o=s.length;o--;){var l=s[o],d=n[l];s[o]=[l,d,e(d)]}return s}return R0=a,R0}var $0,JC;function bE(){if(JC)return $0;JC=1;function e(t,a){return function(n){return n==null?!1:n[t]===a&&(a!==void 0||t in Object(n))}}return $0=e,$0}var L0,ZC;function CL(){if(ZC)return L0;ZC=1;var e=NL(),t=SL(),a=bE();function n(s){var o=t(s);return o.length==1&&o[0][2]?a(o[0][0],o[0][1]):function(l){return l===s||e(l,s,o)}}return L0=n,L0}var F0,QC;function kL(){if(QC)return F0;QC=1;function e(t,a){return t!=null&&a in Object(t)}return F0=e,F0}var B0,ek;function IL(){if(ek)return B0;ek=1;var e=L4(),t=Z1(),a=Dn(),n=Q1(),s=ej(),o=ff();function l(d,u,m){u=e(u,d);for(var p=-1,f=u.length,x=!1;++p<f;){var w=o(u[p]);if(!(x=d!=null&&m(d,w)))break;d=d[w]}return x||++p!=f?x:(f=d==null?0:d.length,!!f&&s(f)&&n(w,f)&&(a(d)||t(d)))}return B0=l,B0}var U0,tk;function AL(){if(tk)return U0;tk=1;var e=kL(),t=IL();function a(n,s){return n!=null&&t(n,s,e)}return U0=a,U0}var z0,rk;function PL(){if(rk)return z0;rk=1;var e=tj(),t=F4(),a=AL(),n=$1(),s=yE(),o=bE(),l=ff(),d=1,u=2;function m(p,f){return n(p)&&s(f)?o(l(p),f):function(x){var w=t(x,p);return w===void 0&&w===f?a(x,p):e(f,w,d|u)}}return z0=m,z0}var q0,ak;function bc(){if(ak)return q0;ak=1;function e(t){return t}return q0=e,q0}var H0,nk;function EL(){if(nk)return H0;nk=1;function e(t){return function(a){return a?.[t]}}return H0=e,H0}var W0,sk;function TL(){if(sk)return W0;sk=1;var e=q1();function t(a){return function(n){return e(n,a)}}return W0=t,W0}var V0,ik;function DL(){if(ik)return V0;ik=1;var e=EL(),t=TL(),a=$1(),n=ff();function s(o){return a(o)?e(n(o)):t(o)}return V0=s,V0}var G0,ok;function Ys(){if(ok)return G0;ok=1;var e=CL(),t=PL(),a=bc(),n=Dn(),s=DL();function o(l){return typeof l=="function"?l:l==null?a:typeof l=="object"?n(l)?t(l[0],l[1]):e(l):s(l)}return G0=o,G0}var K0,lk;function vE(){if(lk)return K0;lk=1;function e(t,a,n,s){for(var o=t.length,l=n+(s?1:-1);s?l--:++l<o;)if(a(t[l],l,t))return l;return-1}return K0=e,K0}var Y0,ck;function OL(){if(ck)return Y0;ck=1;function e(t){return t!==t}return Y0=e,Y0}var X0,dk;function _L(){if(dk)return X0;dk=1;function e(t,a,n){for(var s=n-1,o=t.length;++s<o;)if(t[s]===a)return s;return-1}return X0=e,X0}var J0,uk;function ML(){if(uk)return J0;uk=1;var e=vE(),t=OL(),a=_L();function n(s,o,l){return o===o?a(s,o,l):e(s,t,l)}return J0=n,J0}var Z0,mk;function RL(){if(mk)return Z0;mk=1;var e=ML();function t(a,n){var s=a==null?0:a.length;return!!s&&e(a,n,0)>-1}return Z0=t,Z0}var Q0,hk;function $L(){if(hk)return Q0;hk=1;function e(t,a,n){for(var s=-1,o=t==null?0:t.length;++s<o;)if(n(a,t[s]))return!0;return!1}return Q0=e,Q0}var ey,fk;function LL(){if(fk)return ey;fk=1;function e(){}return ey=e,ey}var ty,pk;function FL(){if(pk)return ty;pk=1;var e=xE(),t=LL(),a=J1(),n=1/0,s=e&&1/a(new e([,-0]))[1]==n?function(o){return new e(o)}:t;return ty=s,ty}var ry,gk;function BL(){if(gk)return ry;gk=1;var e=lE(),t=RL(),a=$L(),n=dE(),s=FL(),o=J1(),l=200;function d(u,m,p){var f=-1,x=t,w=u.length,j=!0,v=[],b=v;if(p)j=!1,x=a;else if(w>=l){var I=m?null:s(u);if(I)return o(I);j=!1,x=n,b=new e}else b=m?[]:v;e:for(;++f<w;){var T=u[f],P=m?m(T):T;if(T=p||T!==0?T:0,j&&P===P){for(var A=b.length;A--;)if(b[A]===P)continue e;m&&b.push(P),v.push(T)}else x(b,P,p)||(b!==v&&b.push(P),v.push(T))}return v}return ry=d,ry}var ay,xk;function UL(){if(xk)return ay;xk=1;var e=Ys(),t=BL();function a(n,s){return n&&n.length?t(n,e(s,2)):[]}return ay=a,ay}var zL=UL();const yk=Sr(zL);function jE(e,t,a){return t===!0?yk(e,a):Gt(t)?yk(e,t):e}function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}var qL=["ref"];function bk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function li(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(a),!0).forEach(function(n){vf(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function HL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vk(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NE(n.key),n)}}function WL(e,t,a){return t&&vk(e.prototype,t),a&&vk(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function VL(e,t,a){return t=lh(t),GL(e,wE()?Reflect.construct(t,a||[],lh(e).constructor):t.apply(e,a))}function GL(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KL(e)}function KL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wE=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},lh(e)}function YL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dv(e,t)}function dv(e,t){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},dv(e,t)}function vf(e,t,a){return t=NE(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NE(e){var t=XL(e,"string");return Wl(t)=="symbol"?t:t+""}function XL(e,t){if(Wl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function JL(e,t){if(e==null)return{};var a=ZL(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ZL(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function QL(e){return e.value}function e7(e,t){if(ge.isValidElement(e))return ge.cloneElement(e,t);if(typeof e=="function")return ge.createElement(e,t);t.ref;var a=JL(t,qL);return ge.createElement(X1,a)}var jk=1,Ll=(function(e){function t(){var a;HL(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=VL(this,t,[].concat(s)),vf(a,"lastBoundingBox",{width:-1,height:-1}),a}return YL(t,e),WL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>jk||Math.abs(s.height-this.lastBoundingBox.height)>jk)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?li({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,o=s.layout,l=s.align,d=s.verticalAlign,u=s.margin,m=s.chartWidth,p=s.chartHeight,f,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(l==="center"&&o==="vertical"){var w=this.getBBoxSnapshot();f={left:((m||0)-w.width)/2}}else f=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(d==="middle"){var j=this.getBBoxSnapshot();x={top:((p||0)-j.height)/2}}else x=d==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return li(li({},f),x)}},{key:"render",value:function(){var n=this,s=this.props,o=s.content,l=s.width,d=s.height,u=s.wrapperStyle,m=s.payloadUniqBy,p=s.payload,f=li(li({position:"absolute",width:l||"auto",height:d||"auto"},this.getDefaultPosition(u)),u);return ge.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(w){n.wrapperNode=w}},e7(o,li(li({},this.props),{},{payload:jE(p,m,QL)})))}}],[{key:"getWithHeight",value:function(n,s){var o=li(li({},this.defaultProps),n.props),l=o.layout;return l==="vertical"&&ht(n.props.height)?{height:n.props.height}:l==="horizontal"?{width:n.props.width||s}:null}}])})(S.PureComponent);vf(Ll,"displayName","Legend");vf(Ll,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ny,wk;function t7(){if(wk)return ny;wk=1;var e=xu(),t=Z1(),a=Dn(),n=e?e.isConcatSpreadable:void 0;function s(o){return a(o)||t(o)||!!(n&&o&&o[n])}return ny=s,ny}var sy,Nk;function SE(){if(Nk)return sy;Nk=1;var e=mE(),t=t7();function a(n,s,o,l,d){var u=-1,m=n.length;for(o||(o=t),d||(d=[]);++u<m;){var p=n[u];s>0&&o(p)?s>1?a(p,s-1,o,l,d):e(d,p):l||(d[d.length]=p)}return d}return sy=a,sy}var iy,Sk;function r7(){if(Sk)return iy;Sk=1;function e(t){return function(a,n,s){for(var o=-1,l=Object(a),d=s(a),u=d.length;u--;){var m=d[t?u:++o];if(n(l[m],m,l)===!1)break}return a}}return iy=e,iy}var oy,Ck;function a7(){if(Ck)return oy;Ck=1;var e=r7(),t=e();return oy=t,oy}var ly,kk;function CE(){if(kk)return ly;kk=1;var e=a7(),t=bf();function a(n,s){return n&&e(n,s,t)}return ly=a,ly}var cy,Ik;function n7(){if(Ik)return cy;Ik=1;var e=vu();function t(a,n){return function(s,o){if(s==null)return s;if(!e(s))return a(s,o);for(var l=s.length,d=n?l:-1,u=Object(s);(n?d--:++d<l)&&o(u[d],d,u)!==!1;);return s}}return cy=t,cy}var dy,Ak;function rj(){if(Ak)return dy;Ak=1;var e=CE(),t=n7(),a=t(e);return dy=a,dy}var uy,Pk;function kE(){if(Pk)return uy;Pk=1;var e=rj(),t=vu();function a(n,s){var o=-1,l=t(n)?Array(n.length):[];return e(n,function(d,u,m){l[++o]=s(d,u,m)}),l}return uy=a,uy}var my,Ek;function s7(){if(Ek)return my;Ek=1;function e(t,a){var n=t.length;for(t.sort(a);n--;)t[n]=t[n].value;return t}return my=e,my}var hy,Tk;function i7(){if(Tk)return hy;Tk=1;var e=xc();function t(a,n){if(a!==n){var s=a!==void 0,o=a===null,l=a===a,d=e(a),u=n!==void 0,m=n===null,p=n===n,f=e(n);if(!m&&!f&&!d&&a>n||d&&u&&p&&!m&&!f||o&&u&&p||!s&&p||!l)return 1;if(!o&&!d&&!f&&a<n||f&&s&&l&&!o&&!d||m&&s&&l||!u&&l||!p)return-1}return 0}return hy=t,hy}var fy,Dk;function o7(){if(Dk)return fy;Dk=1;var e=i7();function t(a,n,s){for(var o=-1,l=a.criteria,d=n.criteria,u=l.length,m=s.length;++o<u;){var p=e(l[o],d[o]);if(p){if(o>=m)return p;var f=s[o];return p*(f=="desc"?-1:1)}}return a.index-n.index}return fy=t,fy}var py,Ok;function l7(){if(Ok)return py;Ok=1;var e=z1(),t=q1(),a=Ys(),n=kE(),s=s7(),o=fE(),l=o7(),d=bc(),u=Dn();function m(p,f,x){f.length?f=e(f,function(v){return u(v)?function(b){return t(b,v.length===1?v[0]:v)}:v}):f=[d];var w=-1;f=e(f,o(a));var j=n(p,function(v,b,I){var T=e(f,function(P){return P(v)});return{criteria:T,index:++w,value:v}});return s(j,function(v,b){return l(v,b,x)})}return py=m,py}var gy,_k;function c7(){if(_k)return gy;_k=1;function e(t,a,n){switch(n.length){case 0:return t.call(a);case 1:return t.call(a,n[0]);case 2:return t.call(a,n[0],n[1]);case 3:return t.call(a,n[0],n[1],n[2])}return t.apply(a,n)}return gy=e,gy}var xy,Mk;function d7(){if(Mk)return xy;Mk=1;var e=c7(),t=Math.max;function a(n,s,o){return s=t(s===void 0?n.length-1:s,0),function(){for(var l=arguments,d=-1,u=t(l.length-s,0),m=Array(u);++d<u;)m[d]=l[s+d];d=-1;for(var p=Array(s+1);++d<s;)p[d]=l[d];return p[s]=o(m),e(n,this,p)}}return xy=a,xy}var yy,Rk;function u7(){if(Rk)return yy;Rk=1;function e(t){return function(){return t}}return yy=e,yy}var by,$k;function IE(){if($k)return by;$k=1;var e=Qo(),t=(function(){try{var a=e(Object,"defineProperty");return a({},"",{}),a}catch{}})();return by=t,by}var vy,Lk;function m7(){if(Lk)return vy;Lk=1;var e=u7(),t=IE(),a=bc(),n=t?function(s,o){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:a;return vy=n,vy}var jy,Fk;function h7(){if(Fk)return jy;Fk=1;var e=800,t=16,a=Date.now;function n(s){var o=0,l=0;return function(){var d=a(),u=t-(d-l);if(l=d,u>0){if(++o>=e)return arguments[0]}else o=0;return s.apply(void 0,arguments)}}return jy=n,jy}var wy,Bk;function f7(){if(Bk)return wy;Bk=1;var e=m7(),t=h7(),a=t(e);return wy=a,wy}var Ny,Uk;function p7(){if(Uk)return Ny;Uk=1;var e=bc(),t=d7(),a=f7();function n(s,o){return a(t(s,o,e),s+"")}return Ny=n,Ny}var Sy,zk;function jf(){if(zk)return Sy;zk=1;var e=F1(),t=vu(),a=Q1(),n=io();function s(o,l,d){if(!n(d))return!1;var u=typeof l;return(u=="number"?t(d)&&a(l,d.length):u=="string"&&l in d)?e(d[l],o):!1}return Sy=s,Sy}var Cy,qk;function g7(){if(qk)return Cy;qk=1;var e=SE(),t=l7(),a=p7(),n=jf(),s=a(function(o,l){if(o==null)return[];var d=l.length;return d>1&&n(o,l[0],l[1])?l=[]:d>2&&n(l[0],l[1],l[2])&&(l=[l[0]]),t(o,e(l,1),[])});return Cy=s,Cy}var x7=g7();const aj=Sr(x7);function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},uv.apply(this,arguments)}function y7(e,t){return w7(e)||j7(e,t)||v7(e,t)||b7()}function b7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v7(e,t){if(e){if(typeof e=="string")return Hk(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Hk(e,t)}}function Hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function j7(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function w7(e){if(Array.isArray(e))return e}function Wk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ky(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(a),!0).forEach(function(n){N7(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function N7(e,t,a){return t=S7(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S7(e){var t=C7(e,"string");return Ed(t)=="symbol"?t:t+""}function C7(e,t){if(Ed(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k7(e){return Array.isArray(e)&&ka(e[0])&&ka(e[1])?e.join(" ~ "):e}var I7=function(t){var a=t.separator,n=a===void 0?" : ":a,s=t.contentStyle,o=s===void 0?{}:s,l=t.itemStyle,d=l===void 0?{}:l,u=t.labelStyle,m=u===void 0?{}:u,p=t.payload,f=t.formatter,x=t.itemSorter,w=t.wrapperClassName,j=t.labelClassName,v=t.label,b=t.labelFormatter,I=t.accessibilityLayer,T=I===void 0?!1:I,P=function(){if(p&&p.length){var Y={padding:0,margin:0},X=(x?aj(p,x):p).map(function(me,K){if(me.type==="none")return null;var oe=ky({display:"block",paddingTop:4,paddingBottom:4,color:me.color||"#000"},d),G=me.formatter||f||k7,B=me.value,F=me.name,re=B,U=F;if(G&&re!=null&&U!=null){var ae=G(B,F,me,K,p);if(Array.isArray(ae)){var W=y7(ae,2);re=W[0],U=W[1]}else re=ae}return ge.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:oe},ka(U)?ge.createElement("span",{className:"recharts-tooltip-item-name"},U):null,ka(U)?ge.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ge.createElement("span",{className:"recharts-tooltip-item-value"},re),ge.createElement("span",{className:"recharts-tooltip-item-unit"},me.unit||""))});return ge.createElement("ul",{className:"recharts-tooltip-item-list",style:Y},X)}return null},A=ky({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),k=ky({margin:0},m),E=!cr(v),_=E?v:"",R=sr("recharts-default-tooltip",w),$=sr("recharts-tooltip-label",j);E&&b&&p!==void 0&&p!==null&&(_=b(v,p));var H=T?{role:"status","aria-live":"assertive"}:{};return ge.createElement("div",uv({className:R,style:A},H),ge.createElement("p",{className:$,style:k},ge.isValidElement(_)?_:"".concat(_)),P())};function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function Pm(e,t,a){return t=A7(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A7(e){var t=P7(e,"string");return Td(t)=="symbol"?t:t+""}function P7(e,t){if(Td(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nd="recharts-tooltip-wrapper",E7={visibility:"hidden"};function T7(e){var t=e.coordinate,a=e.translateX,n=e.translateY;return sr(nd,Pm(Pm(Pm(Pm({},"".concat(nd,"-right"),ht(a)&&t&&ht(t.x)&&a>=t.x),"".concat(nd,"-left"),ht(a)&&t&&ht(t.x)&&a<t.x),"".concat(nd,"-bottom"),ht(n)&&t&&ht(t.y)&&n>=t.y),"".concat(nd,"-top"),ht(n)&&t&&ht(t.y)&&n<t.y))}function Vk(e){var t=e.allowEscapeViewBox,a=e.coordinate,n=e.key,s=e.offsetTopLeft,o=e.position,l=e.reverseDirection,d=e.tooltipDimension,u=e.viewBox,m=e.viewBoxDimension;if(o&&ht(o[n]))return o[n];var p=a[n]-d-s,f=a[n]+s;if(t[n])return l[n]?p:f;if(l[n]){var x=p,w=u[n];return x<w?Math.max(f,u[n]):Math.max(p,u[n])}var j=f+d,v=u[n]+m;return j>v?Math.max(p,u[n]):Math.max(f,u[n])}function D7(e){var t=e.translateX,a=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function O7(e){var t=e.allowEscapeViewBox,a=e.coordinate,n=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipBox,d=e.useTranslate3d,u=e.viewBox,m,p,f;return l.height>0&&l.width>0&&a?(p=Vk({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),f=Vk({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),m=D7({translateX:p,translateY:f,useTranslate3d:d})):m=E7,{cssProperties:m,cssClasses:T7({translateX:p,translateY:f,coordinate:a})}}function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function Gk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Kk(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(a),!0).forEach(function(n){hv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function _7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M7(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PE(n.key),n)}}function R7(e,t,a){return t&&M7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $7(e,t,a){return t=ch(t),L7(e,AE()?Reflect.construct(t,a||[],ch(e).constructor):t.apply(e,a))}function L7(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F7(e)}function F7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AE=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ch(e)}function B7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mv(e,t)}function mv(e,t){return mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},mv(e,t)}function hv(e,t,a){return t=PE(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PE(e){var t=U7(e,"string");return Vl(t)=="symbol"?t:t+""}function U7(e,t){if(Vl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yk=1,z7=(function(e){function t(){var a;_7(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=$7(this,t,[].concat(s)),hv(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),hv(a,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,m,p;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=a.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(m=(p=a.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&m!==void 0?m:0}})}}),a}return B7(t,e),R7(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Yk||Math.abs(n.height-this.state.lastBoundingBox.height)>Yk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,o=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,m=s.children,p=s.coordinate,f=s.hasPayload,x=s.isAnimationActive,w=s.offset,j=s.position,v=s.reverseDirection,b=s.useTranslate3d,I=s.viewBox,T=s.wrapperStyle,P=O7({allowEscapeViewBox:l,coordinate:p,offsetTopLeft:w,position:j,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:I}),A=P.cssClasses,k=P.cssProperties,E=Kk(Kk({transition:x&&o?"transform ".concat(d,"ms ").concat(u):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},T);return ge.createElement("div",{tabIndex:-1,className:A,style:E,ref:function(R){n.wrapperNode=R}},m)}}])})(S.PureComponent),q7=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},vc={isSsr:q7()};function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function Xk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Jk(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(a),!0).forEach(function(n){nj(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function H7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W7(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TE(n.key),n)}}function V7(e,t,a){return t&&W7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G7(e,t,a){return t=dh(t),K7(e,EE()?Reflect.construct(t,a||[],dh(e).constructor):t.apply(e,a))}function K7(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y7(e)}function Y7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EE=function(){return!!e})()}function dh(e){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},dh(e)}function X7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fv(e,t)}function fv(e,t){return fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},fv(e,t)}function nj(e,t,a){return t=TE(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TE(e){var t=J7(e,"string");return Gl(t)=="symbol"?t:t+""}function J7(e,t){if(Gl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Z7(e){return e.dataKey}function Q7(e,t){return ge.isValidElement(e)?ge.cloneElement(e,t):typeof e=="function"?ge.createElement(e,t):ge.createElement(I7,t)}var zn=(function(e){function t(){return H7(this,t),G7(this,t,arguments)}return X7(t,e),V7(t,[{key:"render",value:function(){var n=this,s=this.props,o=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,m=s.content,p=s.coordinate,f=s.filterNull,x=s.isAnimationActive,w=s.offset,j=s.payload,v=s.payloadUniqBy,b=s.position,I=s.reverseDirection,T=s.useTranslate3d,P=s.viewBox,A=s.wrapperStyle,k=j??[];f&&k.length&&(k=jE(j.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),v,Z7));var E=k.length>0;return ge.createElement(z7,{allowEscapeViewBox:l,animationDuration:d,animationEasing:u,isAnimationActive:x,active:o,coordinate:p,hasPayload:E,offset:w,position:b,reverseDirection:I,useTranslate3d:T,viewBox:P,wrapperStyle:A},Q7(m,Jk(Jk({},this.props),{},{payload:k})))}}])})(S.PureComponent);nj(zn,"displayName","Tooltip");nj(zn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Iy,Zk;function e8(){if(Zk)return Iy;Zk=1;var e=Ks(),t=function(){return e.Date.now()};return Iy=t,Iy}var Ay,Qk;function t8(){if(Qk)return Ay;Qk=1;var e=/\s/;function t(a){for(var n=a.length;n--&&e.test(a.charAt(n)););return n}return Ay=t,Ay}var Py,eI;function r8(){if(eI)return Py;eI=1;var e=t8(),t=/^\s+/;function a(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Py=a,Py}var Ey,tI;function DE(){if(tI)return Ey;tI=1;var e=r8(),t=io(),a=xc(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(m){if(typeof m=="number")return m;if(a(m))return n;if(t(m)){var p=typeof m.valueOf=="function"?m.valueOf():m;m=t(p)?p+"":p}if(typeof m!="string")return m===0?m:+m;m=e(m);var f=o.test(m);return f||l.test(m)?d(m.slice(2),f?2:8):s.test(m)?n:+m}return Ey=u,Ey}var Ty,rI;function a8(){if(rI)return Ty;rI=1;var e=io(),t=e8(),a=DE(),n="Expected a function",s=Math.max,o=Math.min;function l(d,u,m){var p,f,x,w,j,v,b=0,I=!1,T=!1,P=!0;if(typeof d!="function")throw new TypeError(n);u=a(u)||0,e(m)&&(I=!!m.leading,T="maxWait"in m,x=T?s(a(m.maxWait)||0,u):x,P="trailing"in m?!!m.trailing:P);function A(X){var me=p,K=f;return p=f=void 0,b=X,w=d.apply(K,me),w}function k(X){return b=X,j=setTimeout(R,u),I?A(X):w}function E(X){var me=X-v,K=X-b,oe=u-me;return T?o(oe,x-K):oe}function _(X){var me=X-v,K=X-b;return v===void 0||me>=u||me<0||T&&K>=x}function R(){var X=t();if(_(X))return $(X);j=setTimeout(R,E(X))}function $(X){return j=void 0,P&&p?A(X):(p=f=void 0,w)}function H(){j!==void 0&&clearTimeout(j),b=0,p=v=f=j=void 0}function L(){return j===void 0?w:$(t())}function Y(){var X=t(),me=_(X);if(p=arguments,f=this,v=X,me){if(j===void 0)return k(v);if(T)return clearTimeout(j),j=setTimeout(R,u),A(v)}return j===void 0&&(j=setTimeout(R,u)),w}return Y.cancel=H,Y.flush=L,Y}return Ty=l,Ty}var Dy,aI;function n8(){if(aI)return Dy;aI=1;var e=a8(),t=io(),a="Expected a function";function n(s,o,l){var d=!0,u=!0;if(typeof s!="function")throw new TypeError(a);return t(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),e(s,o,{leading:d,maxWait:o,trailing:u})}return Dy=n,Dy}var s8=n8();const OE=Sr(s8);function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function nI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Em(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(a),!0).forEach(function(n){i8(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nI(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function i8(e,t,a){return t=o8(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o8(e){var t=l8(e,"string");return Dd(t)=="symbol"?t:t+""}function l8(e,t){if(Dd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c8(e,t){return h8(e)||m8(e,t)||u8(e,t)||d8()}function d8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u8(e,t){if(e){if(typeof e=="string")return sI(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sI(e,t)}}function sI(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m8(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function h8(e){if(Array.isArray(e))return e}var Tm=S.forwardRef(function(e,t){var a=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,o=e.width,l=o===void 0?"100%":o,d=e.height,u=d===void 0?"100%":d,m=e.minWidth,p=m===void 0?0:m,f=e.minHeight,x=e.maxHeight,w=e.children,j=e.debounce,v=j===void 0?0:j,b=e.id,I=e.className,T=e.onResize,P=e.style,A=P===void 0?{}:P,k=S.useRef(null),E=S.useRef();E.current=T,S.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var _=S.useState({containerWidth:s.width,containerHeight:s.height}),R=c8(_,2),$=R[0],H=R[1],L=S.useCallback(function(X,me){H(function(K){var oe=Math.round(X),G=Math.round(me);return K.containerWidth===oe&&K.containerHeight===G?K:{containerWidth:oe,containerHeight:G}})},[]);S.useEffect(function(){var X=function(F){var re,U=F[0].contentRect,ae=U.width,W=U.height;L(ae,W),(re=E.current)===null||re===void 0||re.call(E,ae,W)};v>0&&(X=OE(X,v,{trailing:!0,leading:!1}));var me=new ResizeObserver(X),K=k.current.getBoundingClientRect(),oe=K.width,G=K.height;return L(oe,G),me.observe(k.current),function(){me.disconnect()}},[L,v]);var Y=S.useMemo(function(){var X=$.containerWidth,me=$.containerHeight;if(X<0||me<0)return null;Ss(Mo(l)||Mo(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Ss(!a||a>0,"The aspect(%s) must be greater than zero.",a);var K=Mo(l)?X:l,oe=Mo(u)?me:u;a&&a>0&&(K?oe=K/a:oe&&(K=oe*a),x&&oe>x&&(oe=x)),Ss(K>0||oe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,oe,l,u,p,f,a);var G=!Array.isArray(w)&&gi(w.type).endsWith("Chart");return ge.Children.map(w,function(B){return ge.isValidElement(B)?S.cloneElement(B,Em({width:K,height:oe},G?{style:Em({height:"100%",width:"100%",maxHeight:oe,maxWidth:K},B.props.style)}:{})):B})},[a,w,u,x,f,p,$,l]);return ge.createElement("div",{id:b?"".concat(b):void 0,className:sr("recharts-responsive-container",I),style:Em(Em({},A),{},{width:l,height:u,minWidth:p,minHeight:f,maxHeight:x}),ref:k},Y)}),Od=function(t){return null};Od.displayName="Cell";function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function iI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function pv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(a),!0).forEach(function(n){f8(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iI(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function f8(e,t,a){return t=p8(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p8(e){var t=g8(e,"string");return _d(t)=="symbol"?t:t+""}function g8(e,t){if(_d(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Il={widthCache:{},cacheCount:0},x8=2e3,y8={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oI="recharts_measurement_span";function b8(e){var t=pv({},e);return Object.keys(t).forEach(function(a){t[a]||delete t[a]}),t}var bd=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||vc.isSsr)return{width:0,height:0};var n=b8(a),s=JSON.stringify({text:t,copyStyle:n});if(Il.widthCache[s])return Il.widthCache[s];try{var o=document.getElementById(oI);o||(o=document.createElement("span"),o.setAttribute("id",oI),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var l=pv(pv({},y8),n);Object.assign(o.style,l),o.textContent="".concat(t);var d=o.getBoundingClientRect(),u={width:d.width,height:d.height};return Il.widthCache[s]=u,++Il.cacheCount>x8&&(Il.cacheCount=0,Il.widthCache={}),u}catch{return{width:0,height:0}}},v8=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function uh(e,t){return S8(e)||N8(e,t)||w8(e,t)||j8()}function j8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w8(e,t){if(e){if(typeof e=="string")return lI(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return lI(e,t)}}function lI(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function N8(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function S8(e){if(Array.isArray(e))return e}function C8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cI(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I8(n.key),n)}}function k8(e,t,a){return t&&cI(e.prototype,t),a&&cI(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function I8(e){var t=A8(e,"string");return Md(t)=="symbol"?t:t+""}function A8(e,t){if(Md(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,P8=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,E8=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_E={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},T8=Object.keys(_E),Tl="NaN";function D8(e,t){return e*_E[t]}var Dm=(function(){function e(t,a){C8(this,e),this.num=t,this.unit=a,this.num=t,this.unit=a,Number.isNaN(t)&&(this.unit=""),a!==""&&!P8.test(a)&&(this.num=NaN,this.unit=""),T8.includes(a)&&(this.num=D8(t,a),this.unit="px")}return k8(e,[{key:"add",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var n,s=(n=E8.exec(a))!==null&&n!==void 0?n:[],o=uh(s,3),l=o[1],d=o[2];return new e(parseFloat(l),d??"")}}])})();function ME(e){if(e.includes(Tl))return Tl;for(var t=e;t.includes("*")||t.includes("/");){var a,n=(a=dI.exec(t))!==null&&a!==void 0?a:[],s=uh(n,4),o=s[1],l=s[2],d=s[3],u=Dm.parse(o??""),m=Dm.parse(d??""),p=l==="*"?u.multiply(m):u.divide(m);if(p.isNaN())return Tl;t=t.replace(dI,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,x=(f=uI.exec(t))!==null&&f!==void 0?f:[],w=uh(x,4),j=w[1],v=w[2],b=w[3],I=Dm.parse(j??""),T=Dm.parse(b??""),P=v==="+"?I.add(T):I.subtract(T);if(P.isNaN())return Tl;t=t.replace(uI,P.toString())}return t}var mI=/\(([^()]*)\)/;function O8(e){for(var t=e;t.includes("(");){var a=mI.exec(t),n=uh(a,2),s=n[1];t=t.replace(mI,ME(s))}return t}function _8(e){var t=e.replace(/\s+/g,"");return t=O8(t),t=ME(t),t}function M8(e){try{return _8(e)}catch{return Tl}}function Oy(e){var t=M8(e.slice(5,-1));return t===Tl?"":t}var R8=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$8=["dx","dy","angle","className","breakAll"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},gv.apply(this,arguments)}function hI(e,t){if(e==null)return{};var a=L8(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function L8(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function fI(e,t){return z8(e)||U8(e,t)||B8(e,t)||F8()}function F8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B8(e,t){if(e){if(typeof e=="string")return pI(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pI(e,t)}}function pI(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function U8(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function z8(e){if(Array.isArray(e))return e}var RE=/[ \f\n\r\t\v\u2028\u2029]+/,$E=function(t){var a=t.children,n=t.breakAll,s=t.style;try{var o=[];cr(a)||(n?o=a.toString().split(""):o=a.toString().split(RE));var l=o.map(function(u){return{word:u,width:bd(u,s).width}}),d=n?0:bd("",s).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}},q8=function(t,a,n,s,o){var l=t.maxLines,d=t.children,u=t.style,m=t.breakAll,p=ht(l),f=d,x=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(oe,G){var B=G.word,F=G.width,re=oe[oe.length-1];if(re&&(s==null||o||re.width+F+n<Number(s)))re.words.push(B),re.width+=F+n;else{var U={words:[B],width:F};oe.push(U)}return oe},[])},w=x(a),j=function(K){return K.reduce(function(oe,G){return oe.width>G.width?oe:G})};if(!p)return w;for(var v="",b=function(K){var oe=f.slice(0,K),G=$E({breakAll:m,style:u,children:oe+v}).wordsWithComputedWidth,B=x(G),F=B.length>l||j(B).width>Number(s);return[F,B]},I=0,T=f.length-1,P=0,A;I<=T&&P<=f.length-1;){var k=Math.floor((I+T)/2),E=k-1,_=b(E),R=fI(_,2),$=R[0],H=R[1],L=b(k),Y=fI(L,1),X=Y[0];if(!$&&!X&&(I=k+1),$&&X&&(T=k-1),!$&&X){A=H;break}P++}return A||w},gI=function(t){var a=cr(t)?[]:t.toString().split(RE);return[{words:a}]},H8=function(t){var a=t.width,n=t.scaleToFit,s=t.children,o=t.style,l=t.breakAll,d=t.maxLines;if((a||n)&&!vc.isSsr){var u,m,p=$E({breakAll:l,children:s,style:o});if(p){var f=p.wordsWithComputedWidth,x=p.spaceWidth;u=f,m=x}else return gI(s);return q8({breakAll:l,children:s,maxLines:d,style:o},u,m,a,n)}return gI(s)},xI="#808080",Ko=function(t){var a=t.x,n=a===void 0?0:a,s=t.y,o=s===void 0?0:s,l=t.lineHeight,d=l===void 0?"1em":l,u=t.capHeight,m=u===void 0?"0.71em":u,p=t.scaleToFit,f=p===void 0?!1:p,x=t.textAnchor,w=x===void 0?"start":x,j=t.verticalAnchor,v=j===void 0?"end":j,b=t.fill,I=b===void 0?xI:b,T=hI(t,R8),P=S.useMemo(function(){return H8({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:f,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,f,T.style,T.width]),A=T.dx,k=T.dy,E=T.angle,_=T.className,R=T.breakAll,$=hI(T,$8);if(!ka(n)||!ka(o))return null;var H=n+(ht(A)?A:0),L=o+(ht(k)?k:0),Y;switch(v){case"start":Y=Oy("calc(".concat(m,")"));break;case"middle":Y=Oy("calc(".concat((P.length-1)/2," * -").concat(d," + (").concat(m," / 2))"));break;default:Y=Oy("calc(".concat(P.length-1," * -").concat(d,")"));break}var X=[];if(f){var me=P[0].width,K=T.width;X.push("scale(".concat((ht(K)?K/me:1)/me,")"))}return E&&X.push("rotate(".concat(E,", ").concat(H,", ").concat(L,")")),X.length&&($.transform=X.join(" ")),ge.createElement("text",gv({},qt($,!0),{x:H,y:L,className:sr("recharts-text",_),textAnchor:w,fill:I.includes("url")?xI:I}),P.map(function(oe,G){var B=oe.words.join(R?"":" ");return ge.createElement("tspan",{x:H,dy:G===0?Y:d,key:"".concat(B,"-").concat(G)},B)}))};function ro(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function W8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sj(e){let t,a,n;e.length!==2?(t=ro,a=(d,u)=>ro(e(d),u),n=(d,u)=>e(d)-u):(t=e===ro||e===W8?e:V8,a=e,n=e);function s(d,u,m=0,p=d.length){if(m<p){if(t(u,u)!==0)return p;do{const f=m+p>>>1;a(d[f],u)<0?m=f+1:p=f}while(m<p)}return m}function o(d,u,m=0,p=d.length){if(m<p){if(t(u,u)!==0)return p;do{const f=m+p>>>1;a(d[f],u)<=0?m=f+1:p=f}while(m<p)}return m}function l(d,u,m=0,p=d.length){const f=s(d,u,m,p-1);return f>m&&n(d[f-1],u)>-n(d[f],u)?f-1:f}return{left:s,center:l,right:o}}function V8(){return 0}function LE(e){return e===null?NaN:+e}function*G8(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const K8=sj(ro),ju=K8.right;sj(LE).center;class yI extends Map{constructor(t,a=J8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(bI(this,t))}has(t){return super.has(bI(this,t))}set(t,a){return super.set(Y8(this,t),a)}delete(t){return super.delete(X8(this,t))}}function bI({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):a}function Y8({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):(e.set(n,a),a)}function X8({_intern:e,_key:t},a){const n=t(a);return e.has(n)&&(a=e.get(n),e.delete(n)),a}function J8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z8(e=ro){if(e===ro)return FE;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,a)=>{const n=e(t,a);return n||n===0?n:(e(a,a)===0)-(e(t,t)===0)}}function FE(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Q8=Math.sqrt(50),eF=Math.sqrt(10),tF=Math.sqrt(2);function mh(e,t,a){const n=(t-e)/Math.max(0,a),s=Math.floor(Math.log10(n)),o=n/Math.pow(10,s),l=o>=Q8?10:o>=eF?5:o>=tF?2:1;let d,u,m;return s<0?(m=Math.pow(10,-s)/l,d=Math.round(e*m),u=Math.round(t*m),d/m<e&&++d,u/m>t&&--u,m=-m):(m=Math.pow(10,s)*l,d=Math.round(e/m),u=Math.round(t/m),d*m<e&&++d,u*m>t&&--u),u<d&&.5<=a&&a<2?mh(e,t,a*2):[d,u,m]}function xv(e,t,a){if(t=+t,e=+e,a=+a,!(a>0))return[];if(e===t)return[e];const n=t<e,[s,o,l]=n?mh(t,e,a):mh(e,t,a);if(!(o>=s))return[];const d=o-s+1,u=new Array(d);if(n)if(l<0)for(let m=0;m<d;++m)u[m]=(o-m)/-l;else for(let m=0;m<d;++m)u[m]=(o-m)*l;else if(l<0)for(let m=0;m<d;++m)u[m]=(s+m)/-l;else for(let m=0;m<d;++m)u[m]=(s+m)*l;return u}function yv(e,t,a){return t=+t,e=+e,a=+a,mh(e,t,a)[2]}function bv(e,t,a){t=+t,e=+e,a=+a;const n=t<e,s=n?yv(t,e,a):yv(e,t,a);return(n?-1:1)*(s<0?1/-s:s)}function vI(e,t){let a;for(const n of e)n!=null&&(a<n||a===void 0&&n>=n)&&(a=n);return a}function jI(e,t){let a;for(const n of e)n!=null&&(a>n||a===void 0&&n>=n)&&(a=n);return a}function BE(e,t,a=0,n=1/0,s){if(t=Math.floor(t),a=Math.floor(Math.max(0,a)),n=Math.floor(Math.min(e.length-1,n)),!(a<=t&&t<=n))return e;for(s=s===void 0?FE:Z8(s);n>a;){if(n-a>600){const u=n-a+1,m=t-a+1,p=Math.log(u),f=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*f*(u-f)/u)*(m-u/2<0?-1:1),w=Math.max(a,Math.floor(t-m*f/u+x)),j=Math.min(n,Math.floor(t+(u-m)*f/u+x));BE(e,t,w,j,s)}const o=e[t];let l=a,d=n;for(sd(e,a,t),s(e[n],o)>0&&sd(e,a,n);l<d;){for(sd(e,l,d),++l,--d;s(e[l],o)<0;)++l;for(;s(e[d],o)>0;)--d}s(e[a],o)===0?sd(e,a,d):(++d,sd(e,d,n)),d<=t&&(a=d+1),t<=d&&(n=d-1)}return e}function sd(e,t,a){const n=e[t];e[t]=e[a],e[a]=n}function rF(e,t,a){if(e=Float64Array.from(G8(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return jI(e);if(t>=1)return vI(e);var n,s=(n-1)*t,o=Math.floor(s),l=vI(BE(e,o).subarray(0,o+1)),d=jI(e.subarray(o+1));return l+(d-l)*(s-o)}}function aF(e,t,a=LE){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+a(e[0],0,e);if(t>=1)return+a(e[n-1],n-1,e);var n,s=(n-1)*t,o=Math.floor(s),l=+a(e[o],o,e),d=+a(e[o+1],o+1,e);return l+(d-l)*(s-o)}}function nF(e,t,a){e=+e,t=+t,a=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+a;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/a))|0,o=new Array(s);++n<s;)o[n]=e+n*a;return o}function us(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ii(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vv=Symbol("implicit");function ij(){var e=new yI,t=[],a=[],n=vv;function s(o){let l=e.get(o);if(l===void 0){if(n!==vv)return n;e.set(o,l=t.push(o)-1)}return a[l%a.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new yI;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(o){return arguments.length?(a=Array.from(o),s):a.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return ij(t,a).unknown(n)},us.apply(s,arguments),s}function Rd(){var e=ij().unknown(void 0),t=e.domain,a=e.range,n=0,s=1,o,l,d=!1,u=0,m=0,p=.5;delete e.unknown;function f(){var x=t().length,w=s<n,j=w?s:n,v=w?n:s;o=(v-j)/Math.max(1,x-u+m*2),d&&(o=Math.floor(o)),j+=(v-j-o*(x-u))*p,l=o*(1-u),d&&(j=Math.round(j),l=Math.round(l));var b=nF(x).map(function(I){return j+o*I});return a(w?b.reverse():b)}return e.domain=function(x){return arguments.length?(t(x),f()):t()},e.range=function(x){return arguments.length?([n,s]=x,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(x){return[n,s]=x,n=+n,s=+s,d=!0,f()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(x){return arguments.length?(d=!!x,f()):d},e.padding=function(x){return arguments.length?(u=Math.min(1,m=+x),f()):u},e.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),f()):u},e.paddingOuter=function(x){return arguments.length?(m=+x,f()):m},e.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),f()):p},e.copy=function(){return Rd(t(),[n,s]).round(d).paddingInner(u).paddingOuter(m).align(p)},us.apply(f(),arguments)}function UE(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return UE(t())},e}function vd(){return UE(Rd.apply(null,arguments).paddingInner(1))}function oj(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function zE(e,t){var a=Object.create(e.prototype);for(var n in t)a[n]=t[n];return a}function wu(){}var $d=.7,hh=1/$d,Fl="\\s*([+-]?\\d+)\\s*",Ld="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sF=/^#([0-9a-f]{3,8})$/,iF=new RegExp(`^rgb\\(${Fl},${Fl},${Fl}\\)$`),oF=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),lF=new RegExp(`^rgba\\(${Fl},${Fl},${Fl},${Ld}\\)$`),cF=new RegExp(`^rgba\\(${qs},${qs},${qs},${Ld}\\)$`),dF=new RegExp(`^hsl\\(${Ld},${qs},${qs}\\)$`),uF=new RegExp(`^hsla\\(${Ld},${qs},${qs},${Ld}\\)$`),wI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oj(wu,Fd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NI,formatHex:NI,formatHex8:mF,formatHsl:hF,formatRgb:SI,toString:SI});function NI(){return this.rgb().formatHex()}function mF(){return this.rgb().formatHex8()}function hF(){return qE(this).formatHsl()}function SI(){return this.rgb().formatRgb()}function Fd(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=sF.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?CI(t):a===3?new An(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Om(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Om(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iF.exec(e))?new An(t[1],t[2],t[3],1):(t=oF.exec(e))?new An(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lF.exec(e))?Om(t[1],t[2],t[3],t[4]):(t=cF.exec(e))?Om(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dF.exec(e))?AI(t[1],t[2]/100,t[3]/100,1):(t=uF.exec(e))?AI(t[1],t[2]/100,t[3]/100,t[4]):wI.hasOwnProperty(e)?CI(wI[e]):e==="transparent"?new An(NaN,NaN,NaN,0):null}function CI(e){return new An(e>>16&255,e>>8&255,e&255,1)}function Om(e,t,a,n){return n<=0&&(e=t=a=NaN),new An(e,t,a,n)}function fF(e){return e instanceof wu||(e=Fd(e)),e?(e=e.rgb(),new An(e.r,e.g,e.b,e.opacity)):new An}function jv(e,t,a,n){return arguments.length===1?fF(e):new An(e,t,a,n??1)}function An(e,t,a,n){this.r=+e,this.g=+t,this.b=+a,this.opacity=+n}oj(An,jv,zE(wu,{brighter(e){return e=e==null?hh:Math.pow(hh,e),new An(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new An(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new An(zo(this.r),zo(this.g),zo(this.b),fh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kI,formatHex:kI,formatHex8:pF,formatRgb:II,toString:II}));function kI(){return`#${Ro(this.r)}${Ro(this.g)}${Ro(this.b)}`}function pF(){return`#${Ro(this.r)}${Ro(this.g)}${Ro(this.b)}${Ro((isNaN(this.opacity)?1:this.opacity)*255)}`}function II(){const e=fh(this.opacity);return`${e===1?"rgb(":"rgba("}${zo(this.r)}, ${zo(this.g)}, ${zo(this.b)}${e===1?")":`, ${e})`}`}function fh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ro(e){return e=zo(e),(e<16?"0":"")+e.toString(16)}function AI(e,t,a,n){return n<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new ws(e,t,a,n)}function qE(e){if(e instanceof ws)return new ws(e.h,e.s,e.l,e.opacity);if(e instanceof wu||(e=Fd(e)),!e)return new ws;if(e instanceof ws)return e;e=e.rgb();var t=e.r/255,a=e.g/255,n=e.b/255,s=Math.min(t,a,n),o=Math.max(t,a,n),l=NaN,d=o-s,u=(o+s)/2;return d?(t===o?l=(a-n)/d+(a<n)*6:a===o?l=(n-t)/d+2:l=(t-a)/d+4,d/=u<.5?o+s:2-o-s,l*=60):d=u>0&&u<1?0:l,new ws(l,d,u,e.opacity)}function gF(e,t,a,n){return arguments.length===1?qE(e):new ws(e,t,a,n??1)}function ws(e,t,a,n){this.h=+e,this.s=+t,this.l=+a,this.opacity=+n}oj(ws,gF,zE(wu,{brighter(e){return e=e==null?hh:Math.pow(hh,e),new ws(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new ws(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*t,s=2*a-n;return new An(_y(e>=240?e-240:e+120,s,n),_y(e,s,n),_y(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ws(PI(this.h),_m(this.s),_m(this.l),fh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fh(this.opacity);return`${e===1?"hsl(":"hsla("}${PI(this.h)}, ${_m(this.s)*100}%, ${_m(this.l)*100}%${e===1?")":`, ${e})`}`}}));function PI(e){return e=(e||0)%360,e<0?e+360:e}function _m(e){return Math.max(0,Math.min(1,e||0))}function _y(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const lj=e=>()=>e;function xF(e,t){return function(a){return e+a*t}}function yF(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(n){return Math.pow(e+n*t,a)}}function bF(e){return(e=+e)==1?HE:function(t,a){return a-t?yF(t,a,e):lj(isNaN(t)?a:t)}}function HE(e,t){var a=t-e;return a?xF(e,a):lj(isNaN(e)?t:e)}const EI=(function e(t){var a=bF(t);function n(s,o){var l=a((s=jv(s)).r,(o=jv(o)).r),d=a(s.g,o.g),u=a(s.b,o.b),m=HE(s.opacity,o.opacity);return function(p){return s.r=l(p),s.g=d(p),s.b=u(p),s.opacity=m(p),s+""}}return n.gamma=e,n})(1);function vF(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(o){for(s=0;s<a;++s)n[s]=e[s]*(1-o)+t[s]*o;return n}}function jF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wF(e,t){var a=t?t.length:0,n=e?Math.min(a,e.length):0,s=new Array(n),o=new Array(a),l;for(l=0;l<n;++l)s[l]=jc(e[l],t[l]);for(;l<a;++l)o[l]=t[l];return function(d){for(l=0;l<n;++l)o[l]=s[l](d);return o}}function NF(e,t){var a=new Date;return e=+e,t=+t,function(n){return a.setTime(e*(1-n)+t*n),a}}function ph(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function SF(e,t){var a={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?a[s]=jc(e[s],t[s]):n[s]=t[s];return function(o){for(s in a)n[s]=a[s](o);return n}}var wv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,My=new RegExp(wv.source,"g");function CF(e){return function(){return e}}function kF(e){return function(t){return e(t)+""}}function IF(e,t){var a=wv.lastIndex=My.lastIndex=0,n,s,o,l=-1,d=[],u=[];for(e=e+"",t=t+"";(n=wv.exec(e))&&(s=My.exec(t));)(o=s.index)>a&&(o=t.slice(a,o),d[l]?d[l]+=o:d[++l]=o),(n=n[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,u.push({i:l,x:ph(n,s)})),a=My.lastIndex;return a<t.length&&(o=t.slice(a),d[l]?d[l]+=o:d[++l]=o),d.length<2?u[0]?kF(u[0].x):CF(t):(t=u.length,function(m){for(var p=0,f;p<t;++p)d[(f=u[p]).i]=f.x(m);return d.join("")})}function jc(e,t){var a=typeof t,n;return t==null||a==="boolean"?lj(t):(a==="number"?ph:a==="string"?(n=Fd(t))?(t=n,EI):IF:t instanceof Fd?EI:t instanceof Date?NF:jF(t)?vF:Array.isArray(t)?wF:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SF:ph)(e,t)}function cj(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function AF(e,t){t===void 0&&(t=e,e=jc);for(var a=0,n=t.length-1,s=t[0],o=new Array(n<0?0:n);a<n;)o[a]=e(s,s=t[++a]);return function(l){var d=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return o[d](l-d)}}function PF(e){return function(){return e}}function gh(e){return+e}var TI=[0,1];function fn(e){return e}function Nv(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:PF(isNaN(t)?NaN:.5)}function EF(e,t){var a;return e>t&&(a=e,e=t,t=a),function(n){return Math.max(e,Math.min(t,n))}}function TF(e,t,a){var n=e[0],s=e[1],o=t[0],l=t[1];return s<n?(n=Nv(s,n),o=a(l,o)):(n=Nv(n,s),o=a(o,l)),function(d){return o(n(d))}}function DF(e,t,a){var n=Math.min(e.length,t.length)-1,s=new Array(n),o=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=Nv(e[l],e[l+1]),o[l]=a(t[l],t[l+1]);return function(d){var u=ju(e,d,1,n)-1;return o[u](s[u](d))}}function Nu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wf(){var e=TI,t=TI,a=jc,n,s,o,l=fn,d,u,m;function p(){var x=Math.min(e.length,t.length);return l!==fn&&(l=EF(e[0],e[x-1])),d=x>2?DF:TF,u=m=null,f}function f(x){return x==null||isNaN(x=+x)?o:(u||(u=d(e.map(n),t,a)))(n(l(x)))}return f.invert=function(x){return l(s((m||(m=d(t,e.map(n),ph)))(x)))},f.domain=function(x){return arguments.length?(e=Array.from(x,gh),p()):e.slice()},f.range=function(x){return arguments.length?(t=Array.from(x),p()):t.slice()},f.rangeRound=function(x){return t=Array.from(x),a=cj,p()},f.clamp=function(x){return arguments.length?(l=x?!0:fn,p()):l!==fn},f.interpolate=function(x){return arguments.length?(a=x,p()):a},f.unknown=function(x){return arguments.length?(o=x,f):o},function(x,w){return n=x,s=w,p()}}function dj(){return wf()(fn,fn)}function OF(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xh(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,n=e.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+e.slice(a+1)]}function Kl(e){return e=xh(Math.abs(e)),e?e[1]:NaN}function _F(e,t){return function(a,n){for(var s=a.length,o=[],l=0,d=e[0],u=0;s>0&&d>0&&(u+d+1>n&&(d=Math.max(1,n-u)),o.push(a.substring(s-=d,s+d)),!((u+=d+1)>n));)d=e[l=(l+1)%e.length];return o.reverse().join(t)}}function MF(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var RF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bd(e){if(!(t=RF.exec(e)))throw new Error("invalid format: "+e);var t;return new uj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bd.prototype=uj.prototype;function uj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}uj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $F(e){e:for(var t=e.length,a=1,n=-1,s;a<t;++a)switch(e[a]){case".":n=s=a;break;case"0":n===0&&(n=a),s=a;break;default:if(!+e[a])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var WE;function LF(e,t){var a=xh(e,t);if(!a)return e+"";var n=a[0],s=a[1],o=s-(WE=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return o===l?n:o>l?n+new Array(o-l+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+xh(e,Math.max(0,t+o-1))[0]}function DI(e,t){var a=xh(e,t);if(!a)return e+"";var n=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const OI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OF,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>DI(e*100,t),r:DI,s:LF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _I(e){return e}var MI=Array.prototype.map,RI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FF(e){var t=e.grouping===void 0||e.thousands===void 0?_I:_F(MI.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?_I:MF(MI.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function m(f){f=Bd(f);var x=f.fill,w=f.align,j=f.sign,v=f.symbol,b=f.zero,I=f.width,T=f.comma,P=f.precision,A=f.trim,k=f.type;k==="n"?(T=!0,k="g"):OI[k]||(P===void 0&&(P=12),A=!0,k="g"),(b||x==="0"&&w==="=")&&(b=!0,x="0",w="=");var E=v==="$"?a:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",_=v==="$"?n:/[%p]/.test(k)?l:"",R=OI[k],$=/[defgprs%]/.test(k);P=P===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function H(L){var Y=E,X=_,me,K,oe;if(k==="c")X=R(L)+X,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?u:R(Math.abs(L),P),A&&(L=$F(L)),G&&+L==0&&j!=="+"&&(G=!1),Y=(G?j==="("?j:d:j==="-"||j==="("?"":j)+Y,X=(k==="s"?RI[8+WE/3]:"")+X+(G&&j==="("?")":""),$){for(me=-1,K=L.length;++me<K;)if(oe=L.charCodeAt(me),48>oe||oe>57){X=(oe===46?s+L.slice(me+1):L.slice(me))+X,L=L.slice(0,me);break}}}T&&!b&&(L=t(L,1/0));var B=Y.length+L.length+X.length,F=B<I?new Array(I-B+1).join(x):"";switch(T&&b&&(L=t(F+L,F.length?I-X.length:1/0),F=""),w){case"<":L=Y+L+X+F;break;case"=":L=Y+F+L+X;break;case"^":L=F.slice(0,B=F.length>>1)+Y+L+X+F.slice(B);break;default:L=F+Y+L+X;break}return o(L)}return H.toString=function(){return f+""},H}function p(f,x){var w=m((f=Bd(f),f.type="f",f)),j=Math.max(-8,Math.min(8,Math.floor(Kl(x)/3)))*3,v=Math.pow(10,-j),b=RI[8+j/3];return function(I){return w(v*I)+b}}return{format:m,formatPrefix:p}}var Mm,mj,VE;BF({thousands:",",grouping:[3],currency:["$",""]});function BF(e){return Mm=FF(e),mj=Mm.format,VE=Mm.formatPrefix,Mm}function UF(e){return Math.max(0,-Kl(Math.abs(e)))}function zF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kl(t)/3)))*3-Kl(Math.abs(e)))}function qF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kl(t)-Kl(e))+1}function GE(e,t,a,n){var s=bv(e,t,a),o;switch(n=Bd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=zF(s,l))&&(n.precision=o),VE(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=qF(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=UF(s))&&(n.precision=o-(n.type==="%")*2);break}}return mj(n)}function oo(e){var t=e.domain;return e.ticks=function(a){var n=t();return xv(n[0],n[n.length-1],a??10)},e.tickFormat=function(a,n){var s=t();return GE(s[0],s[s.length-1],a??10,n)},e.nice=function(a){a==null&&(a=10);var n=t(),s=0,o=n.length-1,l=n[s],d=n[o],u,m,p=10;for(d<l&&(m=l,l=d,d=m,m=s,s=o,o=m);p-- >0;){if(m=yv(l,d,a),m===u)return n[s]=l,n[o]=d,t(n);if(m>0)l=Math.floor(l/m)*m,d=Math.ceil(d/m)*m;else if(m<0)l=Math.ceil(l*m)/m,d=Math.floor(d*m)/m;else break;u=m}return e},e}function yh(){var e=dj();return e.copy=function(){return Nu(e,yh())},us.apply(e,arguments),oo(e)}function KE(e){var t;function a(n){return n==null||isNaN(n=+n)?t:n}return a.invert=a,a.domain=a.range=function(n){return arguments.length?(e=Array.from(n,gh),a):e.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.copy=function(){return KE(e).unknown(t)},e=arguments.length?Array.from(e,gh):[0,1],oo(a)}function YE(e,t){e=e.slice();var a=0,n=e.length-1,s=e[a],o=e[n],l;return o<s&&(l=a,a=n,n=l,l=s,s=o,o=l),e[a]=t.floor(s),e[n]=t.ceil(o),e}function $I(e){return Math.log(e)}function LI(e){return Math.exp(e)}function HF(e){return-Math.log(-e)}function WF(e){return-Math.exp(-e)}function VF(e){return isFinite(e)?+("1e"+e):e<0?0:e}function GF(e){return e===10?VF:e===Math.E?Math.exp:t=>Math.pow(e,t)}function KF(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FI(e){return(t,a)=>-e(-t,a)}function hj(e){const t=e($I,LI),a=t.domain;let n=10,s,o;function l(){return s=KF(n),o=GF(n),a()[0]<0?(s=FI(s),o=FI(o),e(HF,WF)):e($I,LI),t}return t.base=function(d){return arguments.length?(n=+d,l()):n},t.domain=function(d){return arguments.length?(a(d),l()):a()},t.ticks=d=>{const u=a();let m=u[0],p=u[u.length-1];const f=p<m;f&&([m,p]=[p,m]);let x=s(m),w=s(p),j,v;const b=d==null?10:+d;let I=[];if(!(n%1)&&w-x<b){if(x=Math.floor(x),w=Math.ceil(w),m>0){for(;x<=w;++x)for(j=1;j<n;++j)if(v=x<0?j/o(-x):j*o(x),!(v<m)){if(v>p)break;I.push(v)}}else for(;x<=w;++x)for(j=n-1;j>=1;--j)if(v=x>0?j/o(-x):j*o(x),!(v<m)){if(v>p)break;I.push(v)}I.length*2<b&&(I=xv(m,p,b))}else I=xv(x,w,Math.min(w-x,b)).map(o);return f?I.reverse():I},t.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=Bd(u)).precision==null&&(u.trim=!0),u=mj(u)),d===1/0)return u;const m=Math.max(1,n*d/t.ticks().length);return p=>{let f=p/o(Math.round(s(p)));return f*n<n-.5&&(f*=n),f<=m?u(p):""}},t.nice=()=>a(YE(a(),{floor:d=>o(Math.floor(s(d))),ceil:d=>o(Math.ceil(s(d)))})),t}function XE(){const e=hj(wf()).domain([1,10]);return e.copy=()=>Nu(e,XE()).base(e.base()),us.apply(e,arguments),e}function BI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function UI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fj(e){var t=1,a=e(BI(t),UI(t));return a.constant=function(n){return arguments.length?e(BI(t=+n),UI(t)):t},oo(a)}function JE(){var e=fj(wf());return e.copy=function(){return Nu(e,JE()).constant(e.constant())},us.apply(e,arguments)}function zI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YF(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function XF(e){return e<0?-e*e:e*e}function pj(e){var t=e(fn,fn),a=1;function n(){return a===1?e(fn,fn):a===.5?e(YF,XF):e(zI(a),zI(1/a))}return t.exponent=function(s){return arguments.length?(a=+s,n()):a},oo(t)}function gj(){var e=pj(wf());return e.copy=function(){return Nu(e,gj()).exponent(e.exponent())},us.apply(e,arguments),e}function JF(){return gj.apply(null,arguments).exponent(.5)}function qI(e){return Math.sign(e)*e*e}function ZF(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ZE(){var e=dj(),t=[0,1],a=!1,n;function s(o){var l=ZF(e(o));return isNaN(l)?n:a?Math.round(l):l}return s.invert=function(o){return e.invert(qI(o))},s.domain=function(o){return arguments.length?(e.domain(o),s):e.domain()},s.range=function(o){return arguments.length?(e.range((t=Array.from(o,gh)).map(qI)),s):t.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(a=!!o,s):a},s.clamp=function(o){return arguments.length?(e.clamp(o),s):e.clamp()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return ZE(e.domain(),t).round(a).clamp(e.clamp()).unknown(n)},us.apply(s,arguments),oo(s)}function QE(){var e=[],t=[],a=[],n;function s(){var l=0,d=Math.max(1,t.length);for(a=new Array(d-1);++l<d;)a[l-1]=aF(e,l/d);return o}function o(l){return l==null||isNaN(l=+l)?n:t[ju(a,l)]}return o.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?a[d-1]:e[0],d<a.length?a[d]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ro),s()},o.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},o.unknown=function(l){return arguments.length?(n=l,o):n},o.quantiles=function(){return a.slice()},o.copy=function(){return QE().domain(e).range(t).unknown(n)},us.apply(o,arguments)}function eT(){var e=0,t=1,a=1,n=[.5],s=[0,1],o;function l(u){return u!=null&&u<=u?s[ju(n,u,0,a)]:o}function d(){var u=-1;for(n=new Array(a);++u<a;)n[u]=((u+1)*t-(u-a)*e)/(a+1);return l}return l.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,d()):[e,t]},l.range=function(u){return arguments.length?(a=(s=Array.from(u)).length-1,d()):s.slice()},l.invertExtent=function(u){var m=s.indexOf(u);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=a?[n[a-1],t]:[n[m-1],n[m]]},l.unknown=function(u){return arguments.length&&(o=u),l},l.thresholds=function(){return n.slice()},l.copy=function(){return eT().domain([e,t]).range(s).unknown(o)},us.apply(oo(l),arguments)}function tT(){var e=[.5],t=[0,1],a,n=1;function s(o){return o!=null&&o<=o?t[ju(e,o,0,n)]:a}return s.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return tT().domain(e).range(t).unknown(a)},us.apply(s,arguments)}const Ry=new Date,$y=new Date;function Ia(e,t,a,n){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(e(o=new Date(+o)),o),s.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),s.round=o=>{const l=s(o),d=s.ceil(o);return o-l<d-o?l:d},s.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),s.range=(o,l,d)=>{const u=[];if(o=s.ceil(o),d=d==null?1:Math.floor(d),!(o<l)||!(d>0))return u;let m;do u.push(m=new Date(+o)),t(o,d),e(o);while(m<o&&o<l);return u},s.filter=o=>Ia(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!o(l););else for(;--d>=0;)for(;t(l,1),!o(l););}),a&&(s.count=(o,l)=>(Ry.setTime(+o),$y.setTime(+l),e(Ry),e($y),Math.floor(a(Ry,$y))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(n?l=>n(l)%o===0:l=>s.count(0,l)%o===0):s)),s}const bh=Ia(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ia(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):bh);bh.range;const hi=1e3,ns=hi*60,fi=ns*60,bi=fi*24,xj=bi*7,HI=bi*30,Ly=bi*365,$o=Ia(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCSeconds());$o.range;const yj=Ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getMinutes());yj.range;const bj=Ia(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getUTCMinutes());bj.range;const vj=Ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi-e.getMinutes()*ns)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getHours());vj.range;const jj=Ia(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getUTCHours());jj.range;const Su=Ia(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ns)/bi,e=>e.getDate()-1);Su.range;const Nf=Ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bi,e=>e.getUTCDate()-1);Nf.range;const rT=Ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bi,e=>Math.floor(e/bi));rT.range;function el(e){return Ia(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*ns)/xj)}const Sf=el(0),vh=el(1),QF=el(2),eB=el(3),Yl=el(4),tB=el(5),rB=el(6);Sf.range;vh.range;QF.range;eB.range;Yl.range;tB.range;rB.range;function tl(e){return Ia(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/xj)}const Cf=tl(0),jh=tl(1),aB=tl(2),nB=tl(3),Xl=tl(4),sB=tl(5),iB=tl(6);Cf.range;jh.range;aB.range;nB.range;Xl.range;sB.range;iB.range;const wj=Ia(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wj.range;const Nj=Ia(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Nj.range;const vi=Ia(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ia(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});vi.range;const ji=Ia(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ji.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ia(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});ji.range;function aT(e,t,a,n,s,o){const l=[[$o,1,hi],[$o,5,5*hi],[$o,15,15*hi],[$o,30,30*hi],[o,1,ns],[o,5,5*ns],[o,15,15*ns],[o,30,30*ns],[s,1,fi],[s,3,3*fi],[s,6,6*fi],[s,12,12*fi],[n,1,bi],[n,2,2*bi],[a,1,xj],[t,1,HI],[t,3,3*HI],[e,1,Ly]];function d(m,p,f){const x=p<m;x&&([m,p]=[p,m]);const w=f&&typeof f.range=="function"?f:u(m,p,f),j=w?w.range(m,+p+1):[];return x?j.reverse():j}function u(m,p,f){const x=Math.abs(p-m)/f,w=sj(([,,b])=>b).right(l,x);if(w===l.length)return e.every(bv(m/Ly,p/Ly,f));if(w===0)return bh.every(Math.max(bv(m,p,f),1));const[j,v]=l[x/l[w-1][2]<l[w][2]/x?w-1:w];return j.every(v)}return[d,u]}const[oB,lB]=aT(ji,Nj,Cf,rT,jj,bj),[cB,dB]=aT(vi,wj,Sf,Su,vj,yj);function Fy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function By(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function id(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function uB(e){var t=e.dateTime,a=e.date,n=e.time,s=e.periods,o=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,m=od(s),p=ld(s),f=od(o),x=ld(o),w=od(l),j=ld(l),v=od(d),b=ld(d),I=od(u),T=ld(u),P={a:G,A:B,b:F,B:re,c:null,d:XI,e:XI,f:_B,g:HB,G:VB,H:TB,I:DB,j:OB,L:nT,m:MB,M:RB,p:U,q:ae,Q:QI,s:eA,S:$B,u:LB,U:FB,V:BB,w:UB,W:zB,x:null,X:null,y:qB,Y:WB,Z:GB,"%":ZI},A={a:W,A:fe,b:Se,B:Ie,c:null,d:JI,e:JI,f:JB,g:o9,G:c9,H:KB,I:YB,j:XB,L:iT,m:ZB,M:QB,p:te,q:se,Q:QI,s:eA,S:e9,u:t9,U:r9,V:a9,w:n9,W:s9,x:null,X:null,y:i9,Y:l9,Z:d9,"%":ZI},k={a:H,A:L,b:Y,B:X,c:me,d:KI,e:KI,f:IB,g:GI,G:VI,H:YI,I:YI,j:NB,L:kB,m:wB,M:SB,p:$,q:jB,Q:PB,s:EB,S:CB,u:gB,U:xB,V:yB,w:pB,W:bB,x:K,X:oe,y:GI,Y:VI,Z:vB,"%":AB};P.x=E(a,P),P.X=E(n,P),P.c=E(t,P),A.x=E(a,A),A.X=E(n,A),A.c=E(t,A);function E(Q,de){return function(we){var ce=[],Ve=-1,Be=0,at=Q.length,pe,tt,ut;for(we instanceof Date||(we=new Date(+we));++Ve<at;)Q.charCodeAt(Ve)===37&&(ce.push(Q.slice(Be,Ve)),(tt=WI[pe=Q.charAt(++Ve)])!=null?pe=Q.charAt(++Ve):tt=pe==="e"?" ":"0",(ut=de[pe])&&(pe=ut(we,tt)),ce.push(pe),Be=Ve+1);return ce.push(Q.slice(Be,Ve)),ce.join("")}}function _(Q,de){return function(we){var ce=id(1900,void 0,1),Ve=R(ce,Q,we+="",0),Be,at;if(Ve!=we.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(de&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Be=By(id(ce.y,0,1)),at=Be.getUTCDay(),Be=at>4||at===0?jh.ceil(Be):jh(Be),Be=Nf.offset(Be,(ce.V-1)*7),ce.y=Be.getUTCFullYear(),ce.m=Be.getUTCMonth(),ce.d=Be.getUTCDate()+(ce.w+6)%7):(Be=Fy(id(ce.y,0,1)),at=Be.getDay(),Be=at>4||at===0?vh.ceil(Be):vh(Be),Be=Su.offset(Be,(ce.V-1)*7),ce.y=Be.getFullYear(),ce.m=Be.getMonth(),ce.d=Be.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),at="Z"in ce?By(id(ce.y,0,1)).getUTCDay():Fy(id(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(at+5)%7:ce.w+ce.U*7-(at+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,By(ce)):Fy(ce)}}function R(Q,de,we,ce){for(var Ve=0,Be=de.length,at=we.length,pe,tt;Ve<Be;){if(ce>=at)return-1;if(pe=de.charCodeAt(Ve++),pe===37){if(pe=de.charAt(Ve++),tt=k[pe in WI?de.charAt(Ve++):pe],!tt||(ce=tt(Q,we,ce))<0)return-1}else if(pe!=we.charCodeAt(ce++))return-1}return ce}function $(Q,de,we){var ce=m.exec(de.slice(we));return ce?(Q.p=p.get(ce[0].toLowerCase()),we+ce[0].length):-1}function H(Q,de,we){var ce=w.exec(de.slice(we));return ce?(Q.w=j.get(ce[0].toLowerCase()),we+ce[0].length):-1}function L(Q,de,we){var ce=f.exec(de.slice(we));return ce?(Q.w=x.get(ce[0].toLowerCase()),we+ce[0].length):-1}function Y(Q,de,we){var ce=I.exec(de.slice(we));return ce?(Q.m=T.get(ce[0].toLowerCase()),we+ce[0].length):-1}function X(Q,de,we){var ce=v.exec(de.slice(we));return ce?(Q.m=b.get(ce[0].toLowerCase()),we+ce[0].length):-1}function me(Q,de,we){return R(Q,t,de,we)}function K(Q,de,we){return R(Q,a,de,we)}function oe(Q,de,we){return R(Q,n,de,we)}function G(Q){return l[Q.getDay()]}function B(Q){return o[Q.getDay()]}function F(Q){return u[Q.getMonth()]}function re(Q){return d[Q.getMonth()]}function U(Q){return s[+(Q.getHours()>=12)]}function ae(Q){return 1+~~(Q.getMonth()/3)}function W(Q){return l[Q.getUTCDay()]}function fe(Q){return o[Q.getUTCDay()]}function Se(Q){return u[Q.getUTCMonth()]}function Ie(Q){return d[Q.getUTCMonth()]}function te(Q){return s[+(Q.getUTCHours()>=12)]}function se(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var de=E(Q+="",P);return de.toString=function(){return Q},de},parse:function(Q){var de=_(Q+="",!1);return de.toString=function(){return Q},de},utcFormat:function(Q){var de=E(Q+="",A);return de.toString=function(){return Q},de},utcParse:function(Q){var de=_(Q+="",!0);return de.toString=function(){return Q},de}}}var WI={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,mB=/^%/,hB=/[\\^$*+?|[\]().{}]/g;function yr(e,t,a){var n=e<0?"-":"",s=(n?-e:e)+"",o=s.length;return n+(o<a?new Array(a-o+1).join(t)+s:s)}function fB(e){return e.replace(hB,"\\$&")}function od(e){return new RegExp("^(?:"+e.map(fB).join("|")+")","i")}function ld(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function pB(e,t,a){var n=$a.exec(t.slice(a,a+1));return n?(e.w=+n[0],a+n[0].length):-1}function gB(e,t,a){var n=$a.exec(t.slice(a,a+1));return n?(e.u=+n[0],a+n[0].length):-1}function xB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.U=+n[0],a+n[0].length):-1}function yB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.V=+n[0],a+n[0].length):-1}function bB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.W=+n[0],a+n[0].length):-1}function VI(e,t,a){var n=$a.exec(t.slice(a,a+4));return n?(e.y=+n[0],a+n[0].length):-1}function GI(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),a+n[0].length):-1}function vB(e,t,a){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),a+n[0].length):-1}function jB(e,t,a){var n=$a.exec(t.slice(a,a+1));return n?(e.q=n[0]*3-3,a+n[0].length):-1}function wB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.m=n[0]-1,a+n[0].length):-1}function KI(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.d=+n[0],a+n[0].length):-1}function NB(e,t,a){var n=$a.exec(t.slice(a,a+3));return n?(e.m=0,e.d=+n[0],a+n[0].length):-1}function YI(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.H=+n[0],a+n[0].length):-1}function SB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.M=+n[0],a+n[0].length):-1}function CB(e,t,a){var n=$a.exec(t.slice(a,a+2));return n?(e.S=+n[0],a+n[0].length):-1}function kB(e,t,a){var n=$a.exec(t.slice(a,a+3));return n?(e.L=+n[0],a+n[0].length):-1}function IB(e,t,a){var n=$a.exec(t.slice(a,a+6));return n?(e.L=Math.floor(n[0]/1e3),a+n[0].length):-1}function AB(e,t,a){var n=mB.exec(t.slice(a,a+1));return n?a+n[0].length:-1}function PB(e,t,a){var n=$a.exec(t.slice(a));return n?(e.Q=+n[0],a+n[0].length):-1}function EB(e,t,a){var n=$a.exec(t.slice(a));return n?(e.s=+n[0],a+n[0].length):-1}function XI(e,t){return yr(e.getDate(),t,2)}function TB(e,t){return yr(e.getHours(),t,2)}function DB(e,t){return yr(e.getHours()%12||12,t,2)}function OB(e,t){return yr(1+Su.count(vi(e),e),t,3)}function nT(e,t){return yr(e.getMilliseconds(),t,3)}function _B(e,t){return nT(e,t)+"000"}function MB(e,t){return yr(e.getMonth()+1,t,2)}function RB(e,t){return yr(e.getMinutes(),t,2)}function $B(e,t){return yr(e.getSeconds(),t,2)}function LB(e){var t=e.getDay();return t===0?7:t}function FB(e,t){return yr(Sf.count(vi(e)-1,e),t,2)}function sT(e){var t=e.getDay();return t>=4||t===0?Yl(e):Yl.ceil(e)}function BB(e,t){return e=sT(e),yr(Yl.count(vi(e),e)+(vi(e).getDay()===4),t,2)}function UB(e){return e.getDay()}function zB(e,t){return yr(vh.count(vi(e)-1,e),t,2)}function qB(e,t){return yr(e.getFullYear()%100,t,2)}function HB(e,t){return e=sT(e),yr(e.getFullYear()%100,t,2)}function WB(e,t){return yr(e.getFullYear()%1e4,t,4)}function VB(e,t){var a=e.getDay();return e=a>=4||a===0?Yl(e):Yl.ceil(e),yr(e.getFullYear()%1e4,t,4)}function GB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yr(t/60|0,"0",2)+yr(t%60,"0",2)}function JI(e,t){return yr(e.getUTCDate(),t,2)}function KB(e,t){return yr(e.getUTCHours(),t,2)}function YB(e,t){return yr(e.getUTCHours()%12||12,t,2)}function XB(e,t){return yr(1+Nf.count(ji(e),e),t,3)}function iT(e,t){return yr(e.getUTCMilliseconds(),t,3)}function JB(e,t){return iT(e,t)+"000"}function ZB(e,t){return yr(e.getUTCMonth()+1,t,2)}function QB(e,t){return yr(e.getUTCMinutes(),t,2)}function e9(e,t){return yr(e.getUTCSeconds(),t,2)}function t9(e){var t=e.getUTCDay();return t===0?7:t}function r9(e,t){return yr(Cf.count(ji(e)-1,e),t,2)}function oT(e){var t=e.getUTCDay();return t>=4||t===0?Xl(e):Xl.ceil(e)}function a9(e,t){return e=oT(e),yr(Xl.count(ji(e),e)+(ji(e).getUTCDay()===4),t,2)}function n9(e){return e.getUTCDay()}function s9(e,t){return yr(jh.count(ji(e)-1,e),t,2)}function i9(e,t){return yr(e.getUTCFullYear()%100,t,2)}function o9(e,t){return e=oT(e),yr(e.getUTCFullYear()%100,t,2)}function l9(e,t){return yr(e.getUTCFullYear()%1e4,t,4)}function c9(e,t){var a=e.getUTCDay();return e=a>=4||a===0?Xl(e):Xl.ceil(e),yr(e.getUTCFullYear()%1e4,t,4)}function d9(){return"+0000"}function ZI(){return"%"}function QI(e){return+e}function eA(e){return Math.floor(+e/1e3)}var Al,lT,cT;u9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function u9(e){return Al=uB(e),lT=Al.format,Al.parse,cT=Al.utcFormat,Al.utcParse,Al}function m9(e){return new Date(e)}function h9(e){return e instanceof Date?+e:+new Date(+e)}function Sj(e,t,a,n,s,o,l,d,u,m){var p=dj(),f=p.invert,x=p.domain,w=m(".%L"),j=m(":%S"),v=m("%I:%M"),b=m("%I %p"),I=m("%a %d"),T=m("%b %d"),P=m("%B"),A=m("%Y");function k(E){return(u(E)<E?w:d(E)<E?j:l(E)<E?v:o(E)<E?b:n(E)<E?s(E)<E?I:T:a(E)<E?P:A)(E)}return p.invert=function(E){return new Date(f(E))},p.domain=function(E){return arguments.length?x(Array.from(E,h9)):x().map(m9)},p.ticks=function(E){var _=x();return e(_[0],_[_.length-1],E??10)},p.tickFormat=function(E,_){return _==null?k:m(_)},p.nice=function(E){var _=x();return(!E||typeof E.range!="function")&&(E=t(_[0],_[_.length-1],E??10)),E?x(YE(_,E)):p},p.copy=function(){return Nu(p,Sj(e,t,a,n,s,o,l,d,u,m))},p}function f9(){return us.apply(Sj(cB,dB,vi,wj,Sf,Su,vj,yj,$o,lT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p9(){return us.apply(Sj(oB,lB,ji,Nj,Cf,Nf,jj,bj,$o,cT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kf(){var e=0,t=1,a,n,s,o,l=fn,d=!1,u;function m(f){return f==null||isNaN(f=+f)?u:l(s===0?.5:(f=(o(f)-a)*s,d?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([e,t]=f,a=o(e=+e),n=o(t=+t),s=a===n?0:1/(n-a),m):[e,t]},m.clamp=function(f){return arguments.length?(d=!!f,m):d},m.interpolator=function(f){return arguments.length?(l=f,m):l};function p(f){return function(x){var w,j;return arguments.length?([w,j]=x,l=f(w,j),m):[l(0),l(1)]}}return m.range=p(jc),m.rangeRound=p(cj),m.unknown=function(f){return arguments.length?(u=f,m):u},function(f){return o=f,a=f(e),n=f(t),s=a===n?0:1/(n-a),m}}function lo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dT(){var e=oo(kf()(fn));return e.copy=function(){return lo(e,dT())},Ii.apply(e,arguments)}function uT(){var e=hj(kf()).domain([1,10]);return e.copy=function(){return lo(e,uT()).base(e.base())},Ii.apply(e,arguments)}function mT(){var e=fj(kf());return e.copy=function(){return lo(e,mT()).constant(e.constant())},Ii.apply(e,arguments)}function Cj(){var e=pj(kf());return e.copy=function(){return lo(e,Cj()).exponent(e.exponent())},Ii.apply(e,arguments)}function g9(){return Cj.apply(null,arguments).exponent(.5)}function hT(){var e=[],t=fn;function a(n){if(n!=null&&!isNaN(n=+n))return t((ju(e,n,1)-1)/(e.length-1))}return a.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ro),a},a.interpolator=function(n){return arguments.length?(t=n,a):t},a.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},a.quantiles=function(n){return Array.from({length:n+1},(s,o)=>rF(e,o/n))},a.copy=function(){return hT(t).domain(e)},Ii.apply(a,arguments)}function If(){var e=0,t=.5,a=1,n=1,s,o,l,d,u,m=fn,p,f=!1,x;function w(v){return isNaN(v=+v)?x:(v=.5+((v=+p(v))-o)*(n*v<n*o?d:u),m(f?Math.max(0,Math.min(1,v)):v))}w.domain=function(v){return arguments.length?([e,t,a]=v,s=p(e=+e),o=p(t=+t),l=p(a=+a),d=s===o?0:.5/(o-s),u=o===l?0:.5/(l-o),n=o<s?-1:1,w):[e,t,a]},w.clamp=function(v){return arguments.length?(f=!!v,w):f},w.interpolator=function(v){return arguments.length?(m=v,w):m};function j(v){return function(b){var I,T,P;return arguments.length?([I,T,P]=b,m=AF(v,[I,T,P]),w):[m(0),m(.5),m(1)]}}return w.range=j(jc),w.rangeRound=j(cj),w.unknown=function(v){return arguments.length?(x=v,w):x},function(v){return p=v,s=v(e),o=v(t),l=v(a),d=s===o?0:.5/(o-s),u=o===l?0:.5/(l-o),n=o<s?-1:1,w}}function fT(){var e=oo(If()(fn));return e.copy=function(){return lo(e,fT())},Ii.apply(e,arguments)}function pT(){var e=hj(If()).domain([.1,1,10]);return e.copy=function(){return lo(e,pT()).base(e.base())},Ii.apply(e,arguments)}function gT(){var e=fj(If());return e.copy=function(){return lo(e,gT()).constant(e.constant())},Ii.apply(e,arguments)}function kj(){var e=pj(If());return e.copy=function(){return lo(e,kj()).exponent(e.exponent())},Ii.apply(e,arguments)}function x9(){return kj.apply(null,arguments).exponent(.5)}const tA=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Rd,scaleDiverging:fT,scaleDivergingLog:pT,scaleDivergingPow:kj,scaleDivergingSqrt:x9,scaleDivergingSymlog:gT,scaleIdentity:KE,scaleImplicit:vv,scaleLinear:yh,scaleLog:XE,scaleOrdinal:ij,scalePoint:vd,scalePow:gj,scaleQuantile:QE,scaleQuantize:eT,scaleRadial:ZE,scaleSequential:dT,scaleSequentialLog:uT,scaleSequentialPow:Cj,scaleSequentialQuantile:hT,scaleSequentialSqrt:g9,scaleSequentialSymlog:mT,scaleSqrt:JF,scaleSymlog:JE,scaleThreshold:tT,scaleTime:f9,scaleUtc:p9,tickFormat:GE},Symbol.toStringTag,{value:"Module"}));var Uy,rA;function Af(){if(rA)return Uy;rA=1;var e=xc();function t(a,n,s){for(var o=-1,l=a.length;++o<l;){var d=a[o],u=n(d);if(u!=null&&(m===void 0?u===u&&!e(u):s(u,m)))var m=u,p=d}return p}return Uy=t,Uy}var zy,aA;function xT(){if(aA)return zy;aA=1;function e(t,a){return t>a}return zy=e,zy}var qy,nA;function y9(){if(nA)return qy;nA=1;var e=Af(),t=xT(),a=bc();function n(s){return s&&s.length?e(s,a,t):void 0}return qy=n,qy}var b9=y9();const Pf=Sr(b9);var Hy,sA;function yT(){if(sA)return Hy;sA=1;function e(t,a){return t<a}return Hy=e,Hy}var Wy,iA;function v9(){if(iA)return Wy;iA=1;var e=Af(),t=yT(),a=bc();function n(s){return s&&s.length?e(s,a,t):void 0}return Wy=n,Wy}var j9=v9();const Ef=Sr(j9);var Vy,oA;function w9(){if(oA)return Vy;oA=1;var e=z1(),t=Ys(),a=kE(),n=Dn();function s(o,l){var d=n(o)?e:a;return d(o,t(l,3))}return Vy=s,Vy}var Gy,lA;function N9(){if(lA)return Gy;lA=1;var e=SE(),t=w9();function a(n,s){return e(t(n,s),1)}return Gy=a,Gy}var S9=N9();const C9=Sr(S9);var Ky,cA;function k9(){if(cA)return Ky;cA=1;var e=tj();function t(a,n){return e(a,n)}return Ky=t,Ky}var I9=k9();const Tf=Sr(I9);var wc=1e9,A9={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Aj,Xr=!0,ds="[DecimalError] ",qo=ds+"Invalid argument: ",Ij=ds+"Exponent out of range: ",Nc=Math.floor,Do=Math.pow,P9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qn,Ma=1e7,Wr=7,bT=9007199254740991,wh=Nc(bT/Wr),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,a,n,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,s=e.d.length,t=0,a=n<s?n:s;t<a;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===s?0:n>s^o.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*Wr;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Ct.dividedBy=Ct.div=function(e){return xi(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,a=t.constructor;return Dr(xi(t,new a(e),0,1),a.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return va(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,a=this,n=a.constructor,s=n.precision,o=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(qn))throw Error(ds+"NaN");if(a.s<1)throw Error(ds+(a.s?"NaN":"-Infinity"));return a.eq(qn)?new n(0):(Xr=!1,t=xi(Ud(a,o),Ud(e,o),o),Xr=!0,Dr(t,s))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wT(t,e):vT(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,a=this,n=a.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(ds+"NaN");return a.s?(Xr=!1,t=xi(a,e,0,1).times(e),Xr=!0,a.minus(t)):Dr(new n(a),s)};Ct.naturalExponential=Ct.exp=function(){return jT(this)};Ct.naturalLogarithm=Ct.ln=function(){return Ud(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vT(t,e):wT(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,a,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qo+e);if(t=va(s)+1,n=s.d.length-1,a=n*Wr+1,n=s.d[n],n){for(;n%10==0;n/=10)a--;for(n=s.d[0];n>=10;n/=10)a++}return e&&t>a?t:a};Ct.squareRoot=Ct.sqrt=function(){var e,t,a,n,s,o,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(ds+"NaN")}for(e=va(d),Xr=!1,s=Math.sqrt(+d),s==0||s==1/0?(t=Fs(d.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Nc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new u(t)):n=new u(s.toString()),a=u.precision,s=l=a+3;;)if(o=n,n=o.plus(xi(d,o,l+2)).times(.5),Fs(o.d).slice(0,l)===(t=Fs(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Dr(o,a+1,0),o.times(o).eq(d)){n=o;break}}else if(t!="9999")break;l+=4}return Xr=!0,Dr(n,a)};Ct.times=Ct.mul=function(e){var t,a,n,s,o,l,d,u,m,p=this,f=p.constructor,x=p.d,w=(e=new f(e)).d;if(!p.s||!e.s)return new f(0);for(e.s*=p.s,a=p.e+e.e,u=x.length,m=w.length,u<m&&(o=x,x=w,w=o,l=u,u=m,m=l),o=[],l=u+m,n=l;n--;)o.push(0);for(n=m;--n>=0;){for(t=0,s=u+n;s>n;)d=o[s]+w[n]*x[s-n-1]+t,o[s--]=d%Ma|0,t=d/Ma|0;o[s]=(o[s]+t)%Ma|0}for(;!o[--l];)o.pop();return t?++a:o.shift(),e.d=o,e.e=a,Xr?Dr(e,f.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var a=this,n=a.constructor;return a=new n(a),e===void 0?a:(Ws(e,0,wc),t===void 0?t=n.rounding:Ws(t,0,8),Dr(a,e+va(a)+1,t))};Ct.toExponential=function(e,t){var a,n=this,s=n.constructor;return e===void 0?a=Yo(n,!0):(Ws(e,0,wc),t===void 0?t=s.rounding:Ws(t,0,8),n=Dr(new s(n),e+1,t),a=Yo(n,!0,e+1)),a};Ct.toFixed=function(e,t){var a,n,s=this,o=s.constructor;return e===void 0?Yo(s):(Ws(e,0,wc),t===void 0?t=o.rounding:Ws(t,0,8),n=Dr(new o(s),e+va(s)+1,t),a=Yo(n.abs(),!1,e+va(n)+1),s.isneg()&&!s.isZero()?"-"+a:a)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return Dr(new t(e),va(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,a,n,s,o,l,d=this,u=d.constructor,m=12,p=+(e=new u(e));if(!e.s)return new u(qn);if(d=new u(d),!d.s){if(e.s<1)throw Error(ds+"Infinity");return d}if(d.eq(qn))return d;if(n=u.precision,e.eq(qn))return Dr(d,n);if(t=e.e,a=e.d.length-1,l=t>=a,o=d.s,l){if((a=p<0?-p:p)<=bT){for(s=new u(qn),t=Math.ceil(n/Wr+4),Xr=!1;a%2&&(s=s.times(d),uA(s.d,t)),a=Nc(a/2),a!==0;)d=d.times(d),uA(d.d,t);return Xr=!0,e.s<0?new u(qn).div(s):Dr(s,n)}}else if(o<0)throw Error(ds+"NaN");return o=o<0&&e.d[Math.max(t,a)]&1?-1:1,d.s=1,Xr=!1,s=e.times(Ud(d,n+m)),Xr=!0,s=jT(s),s.s=o,s};Ct.toPrecision=function(e,t){var a,n,s=this,o=s.constructor;return e===void 0?(a=va(s),n=Yo(s,a<=o.toExpNeg||a>=o.toExpPos)):(Ws(e,1,wc),t===void 0?t=o.rounding:Ws(t,0,8),s=Dr(new o(s),e,t),a=va(s),n=Yo(s,e<=a||a<=o.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var a=this,n=a.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ws(e,1,wc),t===void 0?t=n.rounding:Ws(t,0,8)),Dr(new n(a),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=va(e),a=e.constructor;return Yo(e,t<=a.toExpNeg||t>=a.toExpPos)};function vT(e,t){var a,n,s,o,l,d,u,m,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Xr?Dr(t,f):t;if(u=e.d,m=t.d,l=e.e,s=t.e,u=u.slice(),o=l-s,o){for(o<0?(n=u,o=-o,d=m.length):(n=m,s=l,d=u.length),l=Math.ceil(f/Wr),d=l>d?l+1:d+1,o>d&&(o=d,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(d=u.length,o=m.length,d-o<0&&(o=d,n=m,m=u,u=n),a=0;o;)a=(u[--o]=u[o]+m[o]+a)/Ma|0,u[o]%=Ma;for(a&&(u.unshift(a),++s),d=u.length;u[--d]==0;)u.pop();return t.d=u,t.e=s,Xr?Dr(t,f):t}function Ws(e,t,a){if(e!==~~e||e<t||e>a)throw Error(qo+e)}function Fs(e){var t,a,n,s=e.length-1,o="",l=e[0];if(s>0){for(o+=l,t=1;t<s;t++)n=e[t]+"",a=Wr-n.length,a&&(o+=Yi(a)),o+=n;l=e[t],n=l+"",a=Wr-n.length,a&&(o+=Yi(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var xi=(function(){function e(n,s){var o,l=0,d=n.length;for(n=n.slice();d--;)o=n[d]*s+l,n[d]=o%Ma|0,l=o/Ma|0;return l&&n.unshift(l),n}function t(n,s,o,l){var d,u;if(o!=l)u=o>l?1:-1;else for(d=u=0;d<o;d++)if(n[d]!=s[d]){u=n[d]>s[d]?1:-1;break}return u}function a(n,s,o){for(var l=0;o--;)n[o]-=l,l=n[o]<s[o]?1:0,n[o]=l*Ma+n[o]-s[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,o,l){var d,u,m,p,f,x,w,j,v,b,I,T,P,A,k,E,_,R,$=n.constructor,H=n.s==s.s?1:-1,L=n.d,Y=s.d;if(!n.s)return new $(n);if(!s.s)throw Error(ds+"Division by zero");for(u=n.e-s.e,_=Y.length,k=L.length,w=new $(H),j=w.d=[],m=0;Y[m]==(L[m]||0);)++m;if(Y[m]>(L[m]||0)&&--u,o==null?T=o=$.precision:l?T=o+(va(n)-va(s))+1:T=o,T<0)return new $(0);if(T=T/Wr+2|0,m=0,_==1)for(p=0,Y=Y[0],T++;(m<k||p)&&T--;m++)P=p*Ma+(L[m]||0),j[m]=P/Y|0,p=P%Y|0;else{for(p=Ma/(Y[0]+1)|0,p>1&&(Y=e(Y,p),L=e(L,p),_=Y.length,k=L.length),A=_,v=L.slice(0,_),b=v.length;b<_;)v[b++]=0;R=Y.slice(),R.unshift(0),E=Y[0],Y[1]>=Ma/2&&++E;do p=0,d=t(Y,v,_,b),d<0?(I=v[0],_!=b&&(I=I*Ma+(v[1]||0)),p=I/E|0,p>1?(p>=Ma&&(p=Ma-1),f=e(Y,p),x=f.length,b=v.length,d=t(f,v,x,b),d==1&&(p--,a(f,_<x?R:Y,x))):(p==0&&(d=p=1),f=Y.slice()),x=f.length,x<b&&f.unshift(0),a(v,f,b),d==-1&&(b=v.length,d=t(Y,v,_,b),d<1&&(p++,a(v,_<b?R:Y,b))),b=v.length):d===0&&(p++,v=[0]),j[m++]=p,d&&v[0]?v[b++]=L[A]||0:(v=[L[A]],b=1);while((A++<k||v[0]!==void 0)&&T--)}return j[0]||j.shift(),w.e=u,Dr(w,l?o+va(w)+1:o)}})();function jT(e,t){var a,n,s,o,l,d,u=0,m=0,p=e.constructor,f=p.precision;if(va(e)>16)throw Error(Ij+va(e));if(!e.s)return new p(qn);for(Xr=!1,d=f,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(Do(2,m))/Math.LN10*2+5|0,d+=n,a=s=o=new p(qn),p.precision=d;;){if(s=Dr(s.times(e),d),a=a.times(++u),l=o.plus(xi(s,a,d)),Fs(l.d).slice(0,d)===Fs(o.d).slice(0,d)){for(;m--;)o=Dr(o.times(o),d);return p.precision=f,t==null?(Xr=!0,Dr(o,f)):o}o=l}}function va(e){for(var t=e.e*Wr,a=e.d[0];a>=10;a/=10)t++;return t}function Yy(e,t,a){if(t>e.LN10.sd())throw Xr=!0,a&&(e.precision=a),Error(ds+"LN10 precision limit exceeded");return Dr(new e(e.LN10),t)}function Yi(e){for(var t="";e--;)t+="0";return t}function Ud(e,t){var a,n,s,o,l,d,u,m,p,f=1,x=10,w=e,j=w.d,v=w.constructor,b=v.precision;if(w.s<1)throw Error(ds+(w.s?"NaN":"-Infinity"));if(w.eq(qn))return new v(0);if(t==null?(Xr=!1,m=b):m=t,w.eq(10))return t==null&&(Xr=!0),Yy(v,m);if(m+=x,v.precision=m,a=Fs(j),n=a.charAt(0),o=va(w),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&a.charAt(1)>3;)w=w.times(e),a=Fs(w.d),n=a.charAt(0),f++;o=va(w),n>1?(w=new v("0."+a),o++):w=new v(n+"."+a.slice(1))}else return u=Yy(v,m+2,b).times(o+""),w=Ud(new v(n+"."+a.slice(1)),m-x).plus(u),v.precision=b,t==null?(Xr=!0,Dr(w,b)):w;for(d=l=w=xi(w.minus(qn),w.plus(qn),m),p=Dr(w.times(w),m),s=3;;){if(l=Dr(l.times(p),m),u=d.plus(xi(l,new v(s),m)),Fs(u.d).slice(0,m)===Fs(d.d).slice(0,m))return d=d.times(2),o!==0&&(d=d.plus(Yy(v,m+2,b).times(o+""))),d=xi(d,new v(f),m),v.precision=b,t==null?(Xr=!0,Dr(d,b)):d;d=u,s+=2}}function dA(e,t){var a,n,s;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(a<0&&(a=n),a+=+t.slice(n+1),t=t.substring(0,n)):a<0&&(a=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,a=a-n-1,e.e=Nc(a/Wr),e.d=[],n=(a+1)%Wr,a<0&&(n+=Wr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Wr;n<s;)e.d.push(+t.slice(n,n+=Wr));t=t.slice(n),n=Wr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Xr&&(e.e>wh||e.e<-wh))throw Error(Ij+a)}else e.s=0,e.e=0,e.d=[0];return e}function Dr(e,t,a){var n,s,o,l,d,u,m,p,f=e.d;for(l=1,o=f[0];o>=10;o/=10)l++;if(n=t-l,n<0)n+=Wr,s=t,m=f[p=0];else{if(p=Math.ceil((n+1)/Wr),o=f.length,p>=o)return e;for(m=o=f[p],l=1;o>=10;o/=10)l++;n%=Wr,s=n-Wr+l}if(a!==void 0&&(o=Do(10,l-s-1),d=m/o%10|0,u=t<0||f[p+1]!==void 0||m%o,u=a<4?(d||u)&&(a==0||a==(e.s<0?3:2)):d>5||d==5&&(a==4||u||a==6&&(n>0?s>0?m/Do(10,l-s):0:f[p-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return u?(o=va(e),f.length=1,t=t-o-1,f[0]=Do(10,(Wr-t%Wr)%Wr),e.e=Nc(-t/Wr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=p,o=1,p--):(f.length=p+1,o=Do(10,Wr-n),f[p]=s>0?(m/Do(10,l-s)%Do(10,s)|0)*o:0),u)for(;;)if(p==0){(f[0]+=o)==Ma&&(f[0]=1,++e.e);break}else{if(f[p]+=o,f[p]!=Ma)break;f[p--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(Xr&&(e.e>wh||e.e<-wh))throw Error(Ij+va(e));return e}function wT(e,t){var a,n,s,o,l,d,u,m,p,f,x=e.constructor,w=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Xr?Dr(t,w):t;if(u=e.d,f=t.d,n=t.e,m=e.e,u=u.slice(),l=m-n,l){for(p=l<0,p?(a=u,l=-l,d=f.length):(a=f,n=m,d=u.length),s=Math.max(Math.ceil(w/Wr),d)+2,l>s&&(l=s,a.length=1),a.reverse(),s=l;s--;)a.push(0);a.reverse()}else{for(s=u.length,d=f.length,p=s<d,p&&(d=s),s=0;s<d;s++)if(u[s]!=f[s]){p=u[s]<f[s];break}l=0}for(p&&(a=u,u=f,f=a,t.s=-t.s),d=u.length,s=f.length-d;s>0;--s)u[d++]=0;for(s=f.length;s>l;){if(u[--s]<f[s]){for(o=s;o&&u[--o]===0;)u[o]=Ma-1;--u[o],u[s]+=Ma}u[s]-=f[s]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=n,Xr?Dr(t,w):t):new x(0)}function Yo(e,t,a){var n,s=va(e),o=Fs(e.d),l=o.length;return t?(a&&(n=a-l)>0?o=o.charAt(0)+"."+o.slice(1)+Yi(n):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+Yi(-s-1)+o,a&&(n=a-l)>0&&(o+=Yi(n))):s>=l?(o+=Yi(s+1-l),a&&(n=a-s-1)>0&&(o=o+"."+Yi(n))):((n=s+1)<l&&(o=o.slice(0,n)+"."+o.slice(n)),a&&(n=a-l)>0&&(s+1===l&&(o+="."),o+=Yi(n))),e.s<0?"-"+o:o}function uA(e,t){if(e.length>t)return e.length=t,!0}function NT(e){var t,a,n;function s(o){var l=this;if(!(l instanceof s))return new s(o);if(l.constructor=s,o instanceof s){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(qo+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return dA(l,o.toString())}else if(typeof o!="string")throw Error(qo+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,P9.test(o))dA(l,o);else throw Error(qo+o)}if(s.prototype=Ct,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=NT,s.config=s.set=E9,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(a=n[t++])||(e[a]=this[a]);return s.config(e),s}function E9(e){if(!e||typeof e!="object")throw Error(ds+"Object expected");var t,a,n,s=["precision",1,wc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[a=s[t]])!==void 0)if(Nc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[a]=n;else throw Error(qo+a+": "+n);if((n=e[a="LN10"])!==void 0)if(n==Math.LN10)this[a]=new this(n);else throw Error(qo+a+": "+n);return this}var Aj=NT(A9);qn=new Aj(1);const Er=Aj;function T9(e){return M9(e)||_9(e)||O9(e)||D9()}function D9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O9(e,t){if(e){if(typeof e=="string")return Sv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Sv(e,t)}}function _9(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function M9(e){if(Array.isArray(e))return Sv(e)}function Sv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var R9=function(t){return t},ST={},CT=function(t){return t===ST},mA=function(t){return function a(){return arguments.length===0||arguments.length===1&&CT(arguments.length<=0?void 0:arguments[0])?a:t.apply(void 0,arguments)}},$9=function e(t,a){return t===1?a:mA(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.filter(function(d){return d!==ST}).length;return l>=t?a.apply(void 0,s):e(t-l,mA(function(){for(var d=arguments.length,u=new Array(d),m=0;m<d;m++)u[m]=arguments[m];var p=s.map(function(f){return CT(f)?u.shift():f});return a.apply(void 0,T9(p).concat(u))}))})},Df=function(t){return $9(t.length,t)},Cv=function(t,a){for(var n=[],s=t;s<a;++s)n[s-t]=s;return n},L9=Df(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(a){return t[a]}).map(e)}),F9=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];if(!a.length)return R9;var s=a.reverse(),o=s[0],l=s.slice(1);return function(){return l.reduce(function(d,u){return u(d)},o.apply(void 0,arguments))}},kv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},kT=function(t){var a=null,n=null;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return a&&o.every(function(d,u){return d===a[u]})||(a=o,n=t.apply(void 0,o)),n}};function B9(e){var t;return e===0?t=1:t=Math.floor(new Er(e).abs().log(10).toNumber())+1,t}function U9(e,t,a){for(var n=new Er(e),s=0,o=[];n.lt(t)&&s<1e5;)o.push(n.toNumber()),n=n.add(a),s++;return o}var z9=Df(function(e,t,a){var n=+e,s=+t;return n+a*(s-n)}),q9=Df(function(e,t,a){var n=t-+e;return n=n||1/0,(a-e)/n}),H9=Df(function(e,t,a){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(a-e)/n))});const Of={rangeStep:U9,getDigitCount:B9,interpolateNumber:z9,uninterpolateNumber:q9,uninterpolateTruncation:H9};function Iv(e){return G9(e)||V9(e)||IT(e)||W9()}function W9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V9(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function G9(e){if(Array.isArray(e))return Av(e)}function zd(e,t){return X9(e)||Y9(e,t)||IT(e,t)||K9()}function K9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IT(e,t){if(e){if(typeof e=="string")return Av(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Av(e,t)}}function Av(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Y9(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],n=!0,s=!1,o=void 0;try{for(var l=e[Symbol.iterator](),d;!(n=(d=l.next()).done)&&(a.push(d.value),!(t&&a.length===t));n=!0);}catch(u){s=!0,o=u}finally{try{!n&&l.return!=null&&l.return()}finally{if(s)throw o}}return a}}function X9(e){if(Array.isArray(e))return e}function AT(e){var t=zd(e,2),a=t[0],n=t[1],s=a,o=n;return a>n&&(s=n,o=a),[s,o]}function PT(e,t,a){if(e.lte(0))return new Er(0);var n=Of.getDigitCount(e.toNumber()),s=new Er(10).pow(n),o=e.div(s),l=n!==1?.05:.1,d=new Er(Math.ceil(o.div(l).toNumber())).add(a).mul(l),u=d.mul(s);return t?u:new Er(Math.ceil(u))}function J9(e,t,a){var n=1,s=new Er(e);if(!s.isint()&&a){var o=Math.abs(e);o<1?(n=new Er(10).pow(Of.getDigitCount(e)-1),s=new Er(Math.floor(s.div(n).toNumber())).mul(n)):o>1&&(s=new Er(Math.floor(e)))}else e===0?s=new Er(Math.floor((t-1)/2)):a||(s=new Er(Math.floor(e)));var l=Math.floor((t-1)/2),d=F9(L9(function(u){return s.add(new Er(u-l).mul(n)).toNumber()}),Cv);return d(0,t)}function ET(e,t,a,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(a-1)))return{step:new Er(0),tickMin:new Er(0),tickMax:new Er(0)};var o=PT(new Er(t).sub(e).div(a-1),n,s),l;e<=0&&t>=0?l=new Er(0):(l=new Er(e).add(t).div(2),l=l.sub(new Er(l).mod(o)));var d=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Er(t).sub(l).div(o).toNumber()),m=d+u+1;return m>a?ET(e,t,a,n,s+1):(m<a&&(u=t>0?u+(a-m):u,d=t>0?d:d+(a-m)),{step:o,tickMin:l.sub(new Er(d).mul(o)),tickMax:l.add(new Er(u).mul(o))})}function Z9(e){var t=zd(e,2),a=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),d=AT([a,n]),u=zd(d,2),m=u[0],p=u[1];if(m===-1/0||p===1/0){var f=p===1/0?[m].concat(Iv(Cv(0,s-1).map(function(){return 1/0}))):[].concat(Iv(Cv(0,s-1).map(function(){return-1/0})),[p]);return a>n?kv(f):f}if(m===p)return J9(m,s,o);var x=ET(m,p,l,o),w=x.step,j=x.tickMin,v=x.tickMax,b=Of.rangeStep(j,v.add(new Er(.1).mul(w)),w);return a>n?kv(b):b}function Q9(e,t){var a=zd(e,2),n=a[0],s=a[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=AT([n,s]),d=zd(l,2),u=d[0],m=d[1];if(u===-1/0||m===1/0)return[n,s];if(u===m)return[u];var p=Math.max(t,2),f=PT(new Er(m).sub(u).div(p-1),o,0),x=[].concat(Iv(Of.rangeStep(new Er(u),new Er(m).sub(new Er(.99).mul(f)),f)),[m]);return n>s?kv(x):x}var eU=kT(Z9),tU=kT(Q9),rU="Invariant failed";function Xo(e,t){throw new Error(rU)}var aU=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Nh.apply(this,arguments)}function nU(e,t){return lU(e)||oU(e,t)||iU(e,t)||sU()}function sU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iU(e,t){if(e){if(typeof e=="string")return hA(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hA(e,t)}}function hA(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function oU(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function lU(e){if(Array.isArray(e))return e}function cU(e,t){if(e==null)return{};var a=dU(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dU(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function uU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mU(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OT(n.key),n)}}function hU(e,t,a){return t&&mU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fU(e,t,a){return t=Sh(t),pU(e,TT()?Reflect.construct(t,a||[],Sh(e).constructor):t.apply(e,a))}function pU(e,t){if(t&&(Jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gU(e)}function gU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TT=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Sh(e)}function xU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pv(e,t)}function Pv(e,t){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Pv(e,t)}function DT(e,t,a){return t=OT(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OT(e){var t=yU(e,"string");return Jl(t)=="symbol"?t:t+""}function yU(e,t){if(Jl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _f=(function(e){function t(){return uU(this,t),fU(this,t,arguments)}return xU(t,e),hU(t,[{key:"render",value:function(){var n=this.props,s=n.offset,o=n.layout,l=n.width,d=n.dataKey,u=n.data,m=n.dataPointFormatter,p=n.xAxis,f=n.yAxis,x=cU(n,aU),w=qt(x,!1);this.props.direction==="x"&&p.type!=="number"&&Xo();var j=u.map(function(v){var b=m(v,d),I=b.x,T=b.y,P=b.value,A=b.errorVal;if(!A)return null;var k=[],E,_;if(Array.isArray(A)){var R=nU(A,2);E=R[0],_=R[1]}else E=_=A;if(o==="vertical"){var $=p.scale,H=T+s,L=H+l,Y=H-l,X=$(P-E),me=$(P+_);k.push({x1:me,y1:L,x2:me,y2:Y}),k.push({x1:X,y1:H,x2:me,y2:H}),k.push({x1:X,y1:L,x2:X,y2:Y})}else if(o==="horizontal"){var K=f.scale,oe=I+s,G=oe-l,B=oe+l,F=K(P-E),re=K(P+_);k.push({x1:G,y1:re,x2:B,y2:re}),k.push({x1:oe,y1:F,x2:oe,y2:re}),k.push({x1:G,y1:F,x2:B,y2:F})}return ge.createElement(Ir,Nh({className:"recharts-errorBar",key:"bar-".concat(k.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},w),k.map(function(U){return ge.createElement("line",Nh({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return ge.createElement(Ir,{className:"recharts-errorBars"},j)}}])})(ge.Component);DT(_f,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});DT(_f,"displayName","ErrorBar");function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function fA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Io(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(a),!0).forEach(function(n){bU(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function bU(e,t,a){return t=vU(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vU(e){var t=jU(e,"string");return qd(t)=="symbol"?t:t+""}function jU(e,t){if(qd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _T=function(t){var a=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,o=t.legendContent,l=Un(a,Ll);if(!l)return null;var d=Ll.defaultProps,u=d!==void 0?Io(Io({},d),l.props):{},m;return l.props&&l.props.payload?m=l.props&&l.props.payload:o==="children"?m=(n||[]).reduce(function(p,f){var x=f.item,w=f.props,j=w.sectors||w.data||[];return p.concat(j.map(function(v){return{type:l.props.iconType||x.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):m=(n||[]).map(function(p){var f=p.item,x=f.type.defaultProps,w=x!==void 0?Io(Io({},x),f.props):{},j=w.dataKey,v=w.name,b=w.legendType,I=w.hide;return{inactive:I,dataKey:j,type:u.iconType||b||"square",color:Pj(f),value:v||j,payload:w}}),Io(Io(Io({},u),Ll.getWithHeight(l,s)),{},{payload:m,item:l})};function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function pA(e){return CU(e)||SU(e)||NU(e)||wU()}function wU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NU(e,t){if(e){if(typeof e=="string")return Ev(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ev(e,t)}}function SU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CU(e){if(Array.isArray(e))return Ev(e)}function Ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function gA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ia(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(a),!0).forEach(function(n){Bl(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Bl(e,t,a){return t=kU(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kU(e){var t=IU(e,"string");return Hd(t)=="symbol"?t:t+""}function IU(e,t){if(Hd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function an(e,t,a){return cr(e)||cr(t)?a:ka(t)?Wn(e,t,a):Gt(t)?t(e):a}function jd(e,t,a,n){var s=C9(e,function(d){return an(d,t)});if(a==="number"){var o=s.filter(function(d){return ht(d)||parseFloat(d)});return o.length?[Ef(o),Pf(o)]:[1/0,-1/0]}var l=n?s.filter(function(d){return!cr(d)}):s;return l.map(function(d){return ka(d)||d instanceof Date?d:""})}var AU=function(t){var a,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=-1,d=(a=n?.length)!==null&&a!==void 0?a:0;if(d<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,m=0;m<d;m++){var p=m>0?s[m-1].coordinate:s[d-1].coordinate,f=s[m].coordinate,x=m>=d-1?s[0].coordinate:s[m+1].coordinate,w=void 0;if(mn(f-p)!==mn(x-f)){var j=[];if(mn(x-f)===mn(u[1]-u[0])){w=x;var v=f+u[1]-u[0];j[0]=Math.min(v,(v+p)/2),j[1]=Math.max(v,(v+p)/2)}else{w=p;var b=x+u[1]-u[0];j[0]=Math.min(f,(b+f)/2),j[1]=Math.max(f,(b+f)/2)}var I=[Math.min(f,(w+f)/2),Math.max(f,(w+f)/2)];if(t>I[0]&&t<=I[1]||t>=j[0]&&t<=j[1]){l=s[m].index;break}}else{var T=Math.min(p,x),P=Math.max(p,x);if(t>(T+f)/2&&t<=(P+f)/2){l=s[m].index;break}}}else for(var A=0;A<d;A++)if(A===0&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<d-1&&t>(n[A].coordinate+n[A-1].coordinate)/2&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A===d-1&&t>(n[A].coordinate+n[A-1].coordinate)/2){l=n[A].index;break}return l},Pj=function(t){var a,n=t,s=n.type.displayName,o=(a=t.type)!==null&&a!==void 0&&a.defaultProps?ia(ia({},t.type.defaultProps),t.props):t.props,l=o.stroke,d=o.fill,u;switch(s){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:d;break;default:u=d;break}return u},PU=function(t){var a=t.barSize,n=t.totalSize,s=t.stackGroups,o=s===void 0?{}:s;if(!o)return{};for(var l={},d=Object.keys(o),u=0,m=d.length;u<m;u++)for(var p=o[d[u]].stackGroups,f=Object.keys(p),x=0,w=f.length;x<w;x++){var j=p[f[x]],v=j.items,b=j.cateAxisId,I=v.filter(function(_){return gi(_.type).indexOf("Bar")>=0});if(I&&I.length){var T=I[0].type.defaultProps,P=T!==void 0?ia(ia({},T),I[0].props):I[0].props,A=P.barSize,k=P[b];l[k]||(l[k]=[]);var E=cr(A)?a:A;l[k].push({item:I[0],stackList:I.slice(1),barSize:cr(E)?void 0:hn(E,n,0)})}}return l},EU=function(t){var a=t.barGap,n=t.barCategoryGap,s=t.bandSize,o=t.sizeList,l=o===void 0?[]:o,d=t.maxBarSize,u=l.length;if(u<1)return null;var m=hn(a,s,0,!0),p,f=[];if(l[0].barSize===+l[0].barSize){var x=!1,w=s/u,j=l.reduce(function(A,k){return A+k.barSize||0},0);j+=(u-1)*m,j>=s&&(j-=(u-1)*m,m=0),j>=s&&w>0&&(x=!0,w*=.9,j=u*w);var v=(s-j)/2>>0,b={offset:v-m,size:0};p=l.reduce(function(A,k){var E={item:k.item,position:{offset:b.offset+b.size+m,size:x?w:k.barSize}},_=[].concat(pA(A),[E]);return b=_[_.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){_.push({item:R,position:b})}),_},f)}else{var I=hn(n,s,0,!0);s-2*I-(u-1)*m<=0&&(m=0);var T=(s-2*I-(u-1)*m)/u;T>1&&(T>>=0);var P=d===+d?Math.min(T,d):T;p=l.reduce(function(A,k,E){var _=[].concat(pA(A),[{item:k.item,position:{offset:I+(T+m)*E+(T-P)/2,size:P}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(R){_.push({item:R,position:_[_.length-1].position})}),_},f)}return p},TU=function(t,a,n,s){var o=n.children,l=n.width,d=n.margin,u=l-(d.left||0)-(d.right||0),m=_T({children:o,legendWidth:u});if(m){var p=s||{},f=p.width,x=p.height,w=m.align,j=m.verticalAlign,v=m.layout;if((v==="vertical"||v==="horizontal"&&j==="middle")&&w!=="center"&&ht(t[w]))return ia(ia({},t),{},Bl({},w,t[w]+(f||0)));if((v==="horizontal"||v==="vertical"&&w==="center")&&j!=="middle"&&ht(t[j]))return ia(ia({},t),{},Bl({},j,t[j]+(x||0)))}return t},DU=function(t,a,n){return cr(a)?!0:t==="horizontal"?a==="yAxis":t==="vertical"||n==="x"?a==="xAxis":n==="y"?a==="yAxis":!0},MT=function(t,a,n,s,o){var l=a.props.children,d=os(l,_f).filter(function(m){return DU(s,o,m.props.direction)});if(d&&d.length){var u=d.map(function(m){return m.props.dataKey});return t.reduce(function(m,p){var f=an(p,n);if(cr(f))return m;var x=Array.isArray(f)?[Ef(f),Pf(f)]:[f,f],w=u.reduce(function(j,v){var b=an(p,v,0),I=x[0]-Math.abs(Array.isArray(b)?b[0]:b),T=x[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(I,j[0]),Math.max(T,j[1])]},[1/0,-1/0]);return[Math.min(w[0],m[0]),Math.max(w[1],m[1])]},[1/0,-1/0])}return null},OU=function(t,a,n,s,o){var l=a.map(function(d){return MT(t,d,n,o,s)}).filter(function(d){return!cr(d)});return l&&l.length?l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]):null},RT=function(t,a,n,s,o){var l=a.map(function(u){var m=u.props.dataKey;return n==="number"&&m&&MT(t,u,m,s)||jd(t,m,n,o)});if(n==="number")return l.reduce(function(u,m){return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);var d={};return l.reduce(function(u,m){for(var p=0,f=m.length;p<f;p++)d[m[p]]||(d[m[p]]=!0,u.push(m[p]));return u},[])},$T=function(t,a){return t==="horizontal"&&a==="xAxis"||t==="vertical"&&a==="yAxis"||t==="centric"&&a==="angleAxis"||t==="radial"&&a==="radiusAxis"},LT=function(t,a,n,s){if(s)return t.map(function(u){return u.coordinate});var o,l,d=t.map(function(u){return u.coordinate===a&&(o=!0),u.coordinate===n&&(l=!0),u.coordinate});return o||d.push(a),l||d.push(n),d},pi=function(t,a,n){if(!t)return null;var s=t.scale,o=t.duplicateDomain,l=t.type,d=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,m=(a||n)&&l==="category"&&s.bandwidth?s.bandwidth()/u:0;if(m=t.axisType==="angleAxis"&&d?.length>=2?mn(d[0]-d[1])*2*m:m,a&&(t.ticks||t.niceTicks)){var p=(t.ticks||t.niceTicks).map(function(f){var x=o?o.indexOf(f):f;return{coordinate:s(x)+m,value:f,offset:m}});return p.filter(function(f){return!yu(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,x){return{coordinate:s(f)+m,value:f,index:x,offset:m}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+m,value:f,offset:m}}):s.domain().map(function(f,x){return{coordinate:s(f)+m,value:o?o[f]:f,index:x,offset:m}})},Xy=new WeakMap,Rm=function(t,a){if(typeof a!="function")return t;Xy.has(t)||Xy.set(t,new WeakMap);var n=Xy.get(t);if(n.has(a))return n.get(a);var s=function(){t.apply(void 0,arguments),a.apply(void 0,arguments)};return n.set(a,s),s},FT=function(t,a,n){var s=t.scale,o=t.type,l=t.layout,d=t.axisType;if(s==="auto")return l==="radial"&&d==="radiusAxis"?{scale:Rd(),realScaleType:"band"}:l==="radial"&&d==="angleAxis"?{scale:yh(),realScaleType:"linear"}:o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?{scale:vd(),realScaleType:"point"}:o==="category"?{scale:Rd(),realScaleType:"band"}:{scale:yh(),realScaleType:"linear"};if(Vo(s)){var u="scale".concat(pf(s));return{scale:(tA[u]||vd)(),realScaleType:tA[u]?u:"point"}}return Gt(s)?{scale:s}:{scale:vd(),realScaleType:"point"}},xA=1e-4,BT=function(t){var a=t.domain();if(!(!a||a.length<=2)){var n=a.length,s=t.range(),o=Math.min(s[0],s[1])-xA,l=Math.max(s[0],s[1])+xA,d=t(a[0]),u=t(a[n-1]);(d<o||d>l||u<o||u>l)&&t.domain([a[0],a[n-1]])}},_U=function(t,a){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===a)return t[n].position;return null},MU=function(t,a){if(!a||a.length!==2||!ht(a[0])||!ht(a[1]))return t;var n=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),o=[t[0],t[1]];return(!ht(t[0])||t[0]<n)&&(o[0]=n),(!ht(t[1])||t[1]>s)&&(o[1]=s),o[0]>s&&(o[0]=s),o[1]<n&&(o[1]=n),o},RU=function(t){var a=t.length;if(!(a<=0))for(var n=0,s=t[0].length;n<s;++n)for(var o=0,l=0,d=0;d<a;++d){var u=yu(t[d][n][1])?t[d][n][0]:t[d][n][1];u>=0?(t[d][n][0]=o,t[d][n][1]=o+u,o=t[d][n][1]):(t[d][n][0]=l,t[d][n][1]=l+u,l=t[d][n][1])}},$U=function(t){var a=t.length;if(!(a<=0))for(var n=0,s=t[0].length;n<s;++n)for(var o=0,l=0;l<a;++l){var d=yu(t[l][n][1])?t[l][n][0]:t[l][n][1];d>=0?(t[l][n][0]=o,t[l][n][1]=o+d,o=t[l][n][1]):(t[l][n][0]=0,t[l][n][1]=0)}},LU={sign:RU,expand:C$,none:ql,silhouette:k$,wiggle:I$,positive:$U},FU=function(t,a,n){var s=a.map(function(d){return d.props.dataKey}),o=LU[n],l=S$().keys(s).value(function(d,u){return+an(d,u,0)}).order(iv).offset(o);return l(t)},BU=function(t,a,n,s,o,l){if(!t)return null;var d=l?a.reverse():a,u={},m=d.reduce(function(f,x){var w,j=(w=x.type)!==null&&w!==void 0&&w.defaultProps?ia(ia({},x.type.defaultProps),x.props):x.props,v=j.stackId,b=j.hide;if(b)return f;var I=j[n],T=f[I]||{hasStack:!1,stackGroups:{}};if(ka(v)){var P=T.stackGroups[v]||{numericAxisId:n,cateAxisId:s,items:[]};P.items.push(x),T.hasStack=!0,T.stackGroups[v]=P}else T.stackGroups[bu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[x]};return ia(ia({},f),{},Bl({},I,T))},u),p={};return Object.keys(m).reduce(function(f,x){var w=m[x];if(w.hasStack){var j={};w.stackGroups=Object.keys(w.stackGroups).reduce(function(v,b){var I=w.stackGroups[b];return ia(ia({},v),{},Bl({},b,{numericAxisId:n,cateAxisId:s,items:I.items,stackedData:FU(t,I.items,o)}))},j)}return ia(ia({},f),{},Bl({},x,w))},p)},UT=function(t,a){var n=a.realScaleType,s=a.type,o=a.tickCount,l=a.originalDomain,d=a.allowDecimals,u=n||a.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var m=t.domain();if(!m.length)return null;var p=eU(m,o,d);return t.domain([Ef(p),Pf(p)]),{niceTicks:p}}if(o&&s==="number"){var f=t.domain(),x=tU(f,o,d);return{niceTicks:x}}return null},yA=function(t){var a=t.axis,n=t.ticks,s=t.offset,o=t.bandSize,l=t.entry,d=t.index;if(a.type==="category")return n[d]?n[d].coordinate+s:null;var u=an(l,a.dataKey,a.domain[d]);return cr(u)?null:a.scale(u)-o/2+s},UU=function(t){var a=t.numericAxis,n=a.scale.domain();if(a.type==="number"){var s=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return s<=0&&o>=0?0:o<0?o:s}return n[0]},zU=function(t,a){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ia(ia({},t.type.defaultProps),t.props):t.props,o=s.stackId;if(ka(o)){var l=a[o];if(l){var d=l.items.indexOf(t);return d>=0?l.stackedData[d]:null}}return null},qU=function(t){return t.reduce(function(a,n){return[Ef(n.concat([a[0]]).filter(ht)),Pf(n.concat([a[1]]).filter(ht))]},[1/0,-1/0])},zT=function(t,a,n){return Object.keys(t).reduce(function(s,o){var l=t[o],d=l.stackedData,u=d.reduce(function(m,p){var f=qU(p.slice(a,n+1));return[Math.min(m[0],f[0]),Math.max(m[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},bA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tv=function(t,a,n){if(Gt(t))return t(a,n);if(!Array.isArray(t))return a;var s=[];if(ht(t[0]))s[0]=n?t[0]:Math.min(t[0],a[0]);else if(bA.test(t[0])){var o=+bA.exec(t[0])[1];s[0]=a[0]-o}else Gt(t[0])?s[0]=t[0](a[0]):s[0]=a[0];if(ht(t[1]))s[1]=n?t[1]:Math.max(t[1],a[1]);else if(vA.test(t[1])){var l=+vA.exec(t[1])[1];s[1]=a[1]+l}else Gt(t[1])?s[1]=t[1](a[1]):s[1]=a[1];return s},Ch=function(t,a,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&a&&a.length>=2){for(var o=aj(a,function(f){return f.coordinate}),l=1/0,d=1,u=o.length;d<u;d++){var m=o[d],p=o[d-1];l=Math.min((m.coordinate||0)-(p.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0},jA=function(t,a,n){return!t||!t.length||Tf(t,Wn(n,"type.defaultProps.domain"))?a:t},qT=function(t,a){var n=t.type.defaultProps?ia(ia({},t.type.defaultProps),t.props):t.props,s=n.dataKey,o=n.name,l=n.unit,d=n.formatter,u=n.tooltipType,m=n.chartType,p=n.hide;return ia(ia({},qt(t,!1)),{},{dataKey:s,unit:l,formatter:d,name:o||s,color:Pj(t),value:an(a,s),type:u,payload:a,chartType:m,hide:p})};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function wA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ui(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(a),!0).forEach(function(n){HT(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function HT(e,t,a){return t=HU(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HU(e){var t=WU(e,"string");return Wd(t)=="symbol"?t:t+""}function WU(e,t){if(Wd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VU(e,t){return XU(e)||YU(e,t)||KU(e,t)||GU()}function GU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KU(e,t){if(e){if(typeof e=="string")return NA(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return NA(e,t)}}function NA(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function YU(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function XU(e){if(Array.isArray(e))return e}var kh=Math.PI/180,JU=function(t){return t*180/Math.PI},Fr=function(t,a,n,s){return{x:t+Math.cos(-kh*s)*n,y:a+Math.sin(-kh*s)*n}},WT=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(a-(n.top||0)-(n.bottom||0)))/2},ZU=function(t,a,n,s,o){var l=t.width,d=t.height,u=t.startAngle,m=t.endAngle,p=hn(t.cx,l,l/2),f=hn(t.cy,d,d/2),x=WT(l,d,n),w=hn(t.innerRadius,x,0),j=hn(t.outerRadius,x,x*.8),v=Object.keys(a);return v.reduce(function(b,I){var T=a[I],P=T.domain,A=T.reversed,k;if(cr(T.range))s==="angleAxis"?k=[u,m]:s==="radiusAxis"&&(k=[w,j]),A&&(k=[k[1],k[0]]);else{k=T.range;var E=k,_=VU(E,2);u=_[0],m=_[1]}var R=FT(T,o),$=R.realScaleType,H=R.scale;H.domain(P).range(k),BT(H);var L=UT(H,ui(ui({},T),{},{realScaleType:$})),Y=ui(ui(ui({},T),L),{},{range:k,radius:j,realScaleType:$,scale:H,cx:p,cy:f,innerRadius:w,outerRadius:j,startAngle:u,endAngle:m});return ui(ui({},b),{},HT({},I,Y))},{})},QU=function(t,a){var n=t.x,s=t.y,o=a.x,l=a.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(s-l,2))},ez=function(t,a){var n=t.x,s=t.y,o=a.cx,l=a.cy,d=QU({x:n,y:s},{x:o,y:l});if(d<=0)return{radius:d};var u=(n-o)/d,m=Math.acos(u);return s>l&&(m=2*Math.PI-m),{radius:d,angle:JU(m),angleInRadian:m}},tz=function(t){var a=t.startAngle,n=t.endAngle,s=Math.floor(a/360),o=Math.floor(n/360),l=Math.min(s,o);return{startAngle:a-l*360,endAngle:n-l*360}},rz=function(t,a){var n=a.startAngle,s=a.endAngle,o=Math.floor(n/360),l=Math.floor(s/360),d=Math.min(o,l);return t+d*360},SA=function(t,a){var n=t.x,s=t.y,o=ez({x:n,y:s},a),l=o.radius,d=o.angle,u=a.innerRadius,m=a.outerRadius;if(l<u||l>m)return!1;if(l===0)return!0;var p=tz(a),f=p.startAngle,x=p.endAngle,w=d,j;if(f<=x){for(;w>x;)w-=360;for(;w<f;)w+=360;j=w>=f&&w<=x}else{for(;w>f;)w-=360;for(;w<x;)w+=360;j=w>=x&&w<=f}return j?ui(ui({},a),{},{radius:l,angle:rz(w,a)}):null},VT=function(t){return!S.isValidElement(t)&&!Gt(t)&&typeof t!="boolean"?t.className:""};function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}var az=["offset"];function nz(e){return lz(e)||oz(e)||iz(e)||sz()}function sz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iz(e,t){if(e){if(typeof e=="string")return Dv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dv(e,t)}}function oz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lz(e){if(Array.isArray(e))return Dv(e)}function Dv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function cz(e,t){if(e==null)return{};var a=dz(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dz(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function CA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(a),!0).forEach(function(n){uz(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function uz(e,t,a){return t=mz(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mz(e){var t=hz(e,"string");return Vd(t)=="symbol"?t:t+""}function hz(e,t){if(Vd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gd.apply(this,arguments)}var fz=function(t){var a=t.value,n=t.formatter,s=cr(t.children)?a:t.children;return Gt(n)?n(s):s},pz=function(t,a){var n=mn(a-t),s=Math.min(Math.abs(a-t),360);return n*s},gz=function(t,a,n){var s=t.position,o=t.viewBox,l=t.offset,d=t.className,u=o,m=u.cx,p=u.cy,f=u.innerRadius,x=u.outerRadius,w=u.startAngle,j=u.endAngle,v=u.clockWise,b=(f+x)/2,I=pz(w,j),T=I>=0?1:-1,P,A;s==="insideStart"?(P=w+T*l,A=v):s==="insideEnd"?(P=j-T*l,A=!v):s==="end"&&(P=j+T*l,A=v),A=I<=0?A:!A;var k=Fr(m,p,b,P),E=Fr(m,p,b,P+(A?1:-1)*359),_="M".concat(k.x,",").concat(k.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),R=cr(t.id)?bu("recharts-radial-line-"):t.id;return ge.createElement("text",Gd({},n,{dominantBaseline:"central",className:sr("recharts-radial-bar-label",d)}),ge.createElement("defs",null,ge.createElement("path",{id:R,d:_})),ge.createElement("textPath",{xlinkHref:"#".concat(R)},a))},xz=function(t){var a=t.viewBox,n=t.offset,s=t.position,o=a,l=o.cx,d=o.cy,u=o.innerRadius,m=o.outerRadius,p=o.startAngle,f=o.endAngle,x=(p+f)/2;if(s==="outside"){var w=Fr(l,d,m+n,x),j=w.x,v=w.y;return{x:j,y:v,textAnchor:j>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"end"};var b=(u+m)/2,I=Fr(l,d,b,x),T=I.x,P=I.y;return{x:T,y:P,textAnchor:"middle",verticalAnchor:"middle"}},yz=function(t){var a=t.viewBox,n=t.parentViewBox,s=t.offset,o=t.position,l=a,d=l.x,u=l.y,m=l.width,p=l.height,f=p>=0?1:-1,x=f*s,w=f>0?"end":"start",j=f>0?"start":"end",v=m>=0?1:-1,b=v*s,I=v>0?"end":"start",T=v>0?"start":"end";if(o==="top"){var P={x:d+m/2,y:u-f*s,textAnchor:"middle",verticalAnchor:w};return Ca(Ca({},P),n?{height:Math.max(u-n.y,0),width:m}:{})}if(o==="bottom"){var A={x:d+m/2,y:u+p+x,textAnchor:"middle",verticalAnchor:j};return Ca(Ca({},A),n?{height:Math.max(n.y+n.height-(u+p),0),width:m}:{})}if(o==="left"){var k={x:d-b,y:u+p/2,textAnchor:I,verticalAnchor:"middle"};return Ca(Ca({},k),n?{width:Math.max(k.x-n.x,0),height:p}:{})}if(o==="right"){var E={x:d+m+b,y:u+p/2,textAnchor:T,verticalAnchor:"middle"};return Ca(Ca({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:p}:{})}var _=n?{width:m,height:p}:{};return o==="insideLeft"?Ca({x:d+b,y:u+p/2,textAnchor:T,verticalAnchor:"middle"},_):o==="insideRight"?Ca({x:d+m-b,y:u+p/2,textAnchor:I,verticalAnchor:"middle"},_):o==="insideTop"?Ca({x:d+m/2,y:u+x,textAnchor:"middle",verticalAnchor:j},_):o==="insideBottom"?Ca({x:d+m/2,y:u+p-x,textAnchor:"middle",verticalAnchor:w},_):o==="insideTopLeft"?Ca({x:d+b,y:u+x,textAnchor:T,verticalAnchor:j},_):o==="insideTopRight"?Ca({x:d+m-b,y:u+x,textAnchor:I,verticalAnchor:j},_):o==="insideBottomLeft"?Ca({x:d+b,y:u+p-x,textAnchor:T,verticalAnchor:w},_):o==="insideBottomRight"?Ca({x:d+m-b,y:u+p-x,textAnchor:I,verticalAnchor:w},_):yc(o)&&(ht(o.x)||Mo(o.x))&&(ht(o.y)||Mo(o.y))?Ca({x:d+hn(o.x,m),y:u+hn(o.y,p),textAnchor:"end",verticalAnchor:"end"},_):Ca({x:d+m/2,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},_)},bz=function(t){return"cx"in t&&ht(t.cx)};function Ra(e){var t=e.offset,a=t===void 0?5:t,n=cz(e,az),s=Ca({offset:a},n),o=s.viewBox,l=s.position,d=s.value,u=s.children,m=s.content,p=s.className,f=p===void 0?"":p,x=s.textBreakAll;if(!o||cr(d)&&cr(u)&&!S.isValidElement(m)&&!Gt(m))return null;if(S.isValidElement(m))return S.cloneElement(m,s);var w;if(Gt(m)){if(w=S.createElement(m,s),S.isValidElement(w))return w}else w=fz(s);var j=bz(o),v=qt(s,!0);if(j&&(l==="insideStart"||l==="insideEnd"||l==="end"))return gz(s,w,v);var b=j?xz(s):yz(s);return ge.createElement(Ko,Gd({className:sr("recharts-label",f)},v,b,{breakAll:x}),w)}Ra.displayName="Label";var GT=function(t){var a=t.cx,n=t.cy,s=t.angle,o=t.startAngle,l=t.endAngle,d=t.r,u=t.radius,m=t.innerRadius,p=t.outerRadius,f=t.x,x=t.y,w=t.top,j=t.left,v=t.width,b=t.height,I=t.clockWise,T=t.labelViewBox;if(T)return T;if(ht(v)&&ht(b)){if(ht(f)&&ht(x))return{x:f,y:x,width:v,height:b};if(ht(w)&&ht(j))return{x:w,y:j,width:v,height:b}}return ht(f)&&ht(x)?{x:f,y:x,width:0,height:0}:ht(a)&&ht(n)?{cx:a,cy:n,startAngle:o||s||0,endAngle:l||s||0,innerRadius:m||0,outerRadius:p||u||d||0,clockWise:I}:t.viewBox?t.viewBox:{}},vz=function(t,a){return t?t===!0?ge.createElement(Ra,{key:"label-implicit",viewBox:a}):ka(t)?ge.createElement(Ra,{key:"label-implicit",viewBox:a,value:t}):S.isValidElement(t)?t.type===Ra?S.cloneElement(t,{key:"label-implicit",viewBox:a}):ge.createElement(Ra,{key:"label-implicit",content:t,viewBox:a}):Gt(t)?ge.createElement(Ra,{key:"label-implicit",content:t,viewBox:a}):yc(t)?ge.createElement(Ra,Gd({viewBox:a},t,{key:"label-implicit"})):null:null},jz=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,o=GT(t),l=os(s,Ra).map(function(u,m){return S.cloneElement(u,{viewBox:a||o,key:"label-".concat(m)})});if(!n)return l;var d=vz(t.label,a||o);return[d].concat(nz(l))};Ra.parseViewBox=GT;Ra.renderCallByParent=jz;var Jy,kA;function wz(){if(kA)return Jy;kA=1;function e(t){var a=t==null?0:t.length;return a?t[a-1]:void 0}return Jy=e,Jy}var Nz=wz();const Sz=Sr(Nz);function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}var Cz=["valueAccessor"],kz=["data","dataKey","clockWise","id","textBreakAll"];function Iz(e){return Tz(e)||Ez(e)||Pz(e)||Az()}function Az(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pz(e,t){if(e){if(typeof e=="string")return Ov(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ov(e,t)}}function Ez(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tz(e){if(Array.isArray(e))return Ov(e)}function Ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ih.apply(this,arguments)}function IA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function AA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(a),!0).forEach(function(n){Dz(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Dz(e,t,a){return t=Oz(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Oz(e){var t=_z(e,"string");return Kd(t)=="symbol"?t:t+""}function _z(e,t){if(Kd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PA(e,t){if(e==null)return{};var a=Mz(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mz(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var Rz=function(t){return Array.isArray(t.value)?Sz(t.value):t.value};function ao(e){var t=e.valueAccessor,a=t===void 0?Rz:t,n=PA(e,Cz),s=n.data,o=n.dataKey,l=n.clockWise,d=n.id,u=n.textBreakAll,m=PA(n,kz);return!s||!s.length?null:ge.createElement(Ir,{className:"recharts-label-list"},s.map(function(p,f){var x=cr(o)?a(p,f):an(p&&p.payload,o),w=cr(d)?{}:{id:"".concat(d,"-").concat(f)};return ge.createElement(Ra,Ih({},qt(p,!0),m,w,{parentViewBox:p.parentViewBox,value:x,textBreakAll:u,viewBox:Ra.parseViewBox(cr(l)?p:AA(AA({},p),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}ao.displayName="LabelList";function $z(e,t){return e?e===!0?ge.createElement(ao,{key:"labelList-implicit",data:t}):ge.isValidElement(e)||Gt(e)?ge.createElement(ao,{key:"labelList-implicit",data:t,content:e}):yc(e)?ge.createElement(ao,Ih({data:t},e,{key:"labelList-implicit"})):null:null}function Lz(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var n=e.children,s=os(n,ao).map(function(l,d){return S.cloneElement(l,{data:t,key:"labelList-".concat(d)})});if(!a)return s;var o=$z(e.label,t);return[o].concat(Iz(s))}ao.renderCallByParent=Lz;function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_v.apply(this,arguments)}function EA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function TA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(a),!0).forEach(function(n){Fz(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Fz(e,t,a){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Bz(e){var t=Uz(e,"string");return Yd(t)=="symbol"?t:t+""}function Uz(e,t){if(Yd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zz=function(t,a){var n=mn(a-t),s=Math.min(Math.abs(a-t),359.999);return n*s},$m=function(t){var a=t.cx,n=t.cy,s=t.radius,o=t.angle,l=t.sign,d=t.isExternal,u=t.cornerRadius,m=t.cornerIsExternal,p=u*(d?1:-1)+s,f=Math.asin(u/p)/kh,x=m?o:o+l*f,w=Fr(a,n,p,x),j=Fr(a,n,s,x),v=m?o-l*f:o,b=Fr(a,n,p*Math.cos(f*kh),v);return{center:w,circleTangency:j,lineTangency:b,theta:f}},KT=function(t){var a=t.cx,n=t.cy,s=t.innerRadius,o=t.outerRadius,l=t.startAngle,d=t.endAngle,u=zz(l,d),m=l+u,p=Fr(a,n,o,l),f=Fr(a,n,o,m),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>m),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var w=Fr(a,n,s,l),j=Fr(a,n,s,m);x+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=m),`,
            `).concat(w.x,",").concat(w.y," Z")}else x+="L ".concat(a,",").concat(n," Z");return x},qz=function(t){var a=t.cx,n=t.cy,s=t.innerRadius,o=t.outerRadius,l=t.cornerRadius,d=t.forceCornerRadius,u=t.cornerIsExternal,m=t.startAngle,p=t.endAngle,f=mn(p-m),x=$m({cx:a,cy:n,radius:o,angle:m,sign:f,cornerRadius:l,cornerIsExternal:u}),w=x.circleTangency,j=x.lineTangency,v=x.theta,b=$m({cx:a,cy:n,radius:o,angle:p,sign:-f,cornerRadius:l,cornerIsExternal:u}),I=b.circleTangency,T=b.lineTangency,P=b.theta,A=u?Math.abs(m-p):Math.abs(m-p)-v-P;if(A<0)return d?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):KT({cx:a,cy:n,innerRadius:s,outerRadius:o,startAngle:m,endAngle:p});var k="M ".concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(A>180),",").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
  `);if(s>0){var E=$m({cx:a,cy:n,radius:s,angle:m,sign:f,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),_=E.circleTangency,R=E.lineTangency,$=E.theta,H=$m({cx:a,cy:n,radius:s,angle:p,sign:-f,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),L=H.circleTangency,Y=H.lineTangency,X=H.theta,me=u?Math.abs(m-p):Math.abs(m-p)-$-X;if(me<0&&l===0)return"".concat(k,"L").concat(a,",").concat(n,"Z");k+="L".concat(Y.x,",").concat(Y.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(me>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,"Z")}else k+="L".concat(a,",").concat(n,"Z");return k},Hz={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},YT=function(t){var a=TA(TA({},Hz),t),n=a.cx,s=a.cy,o=a.innerRadius,l=a.outerRadius,d=a.cornerRadius,u=a.forceCornerRadius,m=a.cornerIsExternal,p=a.startAngle,f=a.endAngle,x=a.className;if(l<o||p===f)return null;var w=sr("recharts-sector",x),j=l-o,v=hn(d,j,0,!0),b;return v>0&&Math.abs(p-f)<360?b=qz({cx:n,cy:s,innerRadius:o,outerRadius:l,cornerRadius:Math.min(v,j/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:p,endAngle:f}):b=KT({cx:n,cy:s,innerRadius:o,outerRadius:l,startAngle:p,endAngle:f}),ge.createElement("path",_v({},qt(a,!0),{className:w,d:b,role:"img"}))};function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Mv.apply(this,arguments)}function DA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function OA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(a),!0).forEach(function(n){Wz(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Wz(e,t,a){return t=Vz(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Vz(e){var t=Gz(e,"string");return Xd(t)=="symbol"?t:t+""}function Gz(e,t){if(Xd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _A={curveBasisClosed:h$,curveBasisOpen:f$,curveBasis:m$,curveBumpX:ZR,curveBumpY:QR,curveLinearClosed:p$,curveLinear:xf,curveMonotoneX:g$,curveMonotoneY:x$,curveNatural:y$,curveStep:b$,curveStepAfter:j$,curveStepBefore:v$},Lm=function(t){return t.x===+t.x&&t.y===+t.y},cd=function(t){return t.x},dd=function(t){return t.y},Kz=function(t,a){if(Gt(t))return t;var n="curve".concat(pf(t));return(n==="curveMonotone"||n==="curveBump")&&a?_A["".concat(n).concat(a==="vertical"?"Y":"X")]:_A[n]||xf},Yz=function(t){var a=t.type,n=a===void 0?"linear":a,s=t.points,o=s===void 0?[]:s,l=t.baseLine,d=t.layout,u=t.connectNulls,m=u===void 0?!1:u,p=Kz(n,d),f=m?o.filter(function(v){return Lm(v)}):o,x;if(Array.isArray(l)){var w=m?l.filter(function(v){return Lm(v)}):l,j=f.map(function(v,b){return OA(OA({},v),{},{base:w[b]})});return d==="vertical"?x=Am().y(dd).x1(cd).x0(function(v){return v.base.x}):x=Am().x(cd).y1(dd).y0(function(v){return v.base.y}),x.defined(Lm).curve(p),x(j)}return d==="vertical"&&ht(l)?x=Am().y(dd).x1(cd).x0(l):ht(l)?x=Am().x(cd).y1(dd).y0(l):x=G4().x(cd).y(dd),x.defined(Lm).curve(p),x(f)},Rv=function(t){var a=t.className,n=t.points,s=t.path,o=t.pathRef;if((!n||!n.length)&&!s)return null;var l=n&&n.length?Yz(t):s;return S.createElement("path",Mv({},qt(t,!1),th(t),{className:sr("recharts-curve",a),d:l,ref:o}))},Zy={exports:{}},Qy,MA;function Xz(){if(MA)return Qy;MA=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Qy=e,Qy}var eb,RA;function Jz(){if(RA)return eb;RA=1;var e=Xz();function t(){}function a(){}return a.resetWarningCache=t,eb=function(){function n(l,d,u,m,p,f){if(f!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:t};return o.PropTypes=o,o},eb}var $A;function Zz(){return $A||($A=1,Zy.exports=Jz()()),Zy.exports}var Qz=Zz();const wr=Sr(Qz);var eq=Object.getOwnPropertyNames,tq=Object.getOwnPropertySymbols,rq=Object.prototype.hasOwnProperty;function LA(e,t){return function(n,s,o){return e(n,s,o)&&t(n,s,o)}}function Fm(e){return function(a,n,s){if(!a||!n||typeof a!="object"||typeof n!="object")return e(a,n,s);var o=s.cache,l=o.get(a),d=o.get(n);if(l&&d)return l===n&&d===a;o.set(a,n),o.set(n,a);var u=e(a,n,s);return o.delete(a),o.delete(n),u}}function aq(e){return e?.[Symbol.toStringTag]}function FA(e){return eq(e).concat(tq(e))}var nq=Object.hasOwn||(function(e,t){return rq.call(e,t)});function rl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var sq="__v",iq="__o",oq="_owner",BA=Object.getOwnPropertyDescriptor,UA=Object.keys;function lq(e,t,a){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!a.equals(e[n],t[n],n,n,e,t,a))return!1;return!0}function cq(e,t){return rl(e.getTime(),t.getTime())}function dq(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function uq(e,t){return e===t}function zA(e,t,a){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),o=e.entries(),l,d,u=0;(l=o.next())&&!l.done;){for(var m=t.entries(),p=!1,f=0;(d=m.next())&&!d.done;){if(s[f]){f++;continue}var x=l.value,w=d.value;if(a.equals(x[0],w[0],u,f,e,t,a)&&a.equals(x[1],w[1],x[0],w[0],e,t,a)){p=s[f]=!0;break}f++}if(!p)return!1;u++}return!0}var mq=rl;function hq(e,t,a){var n=UA(e),s=n.length;if(UA(t).length!==s)return!1;for(;s-- >0;)if(!XT(e,t,a,n[s]))return!1;return!0}function ud(e,t,a){var n=FA(e),s=n.length;if(FA(t).length!==s)return!1;for(var o,l,d;s-- >0;)if(o=n[s],!XT(e,t,a,o)||(l=BA(e,o),d=BA(t,o),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function fq(e,t){return rl(e.valueOf(),t.valueOf())}function pq(e,t){return e.source===t.source&&e.flags===t.flags}function qA(e,t,a){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),o=e.values(),l,d;(l=o.next())&&!l.done;){for(var u=t.values(),m=!1,p=0;(d=u.next())&&!d.done;){if(!s[p]&&a.equals(l.value,d.value,l.value,d.value,e,t,a)){m=s[p]=!0;break}p++}if(!m)return!1}return!0}function gq(e,t){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(e[a]!==t[a])return!1;return!0}function xq(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function XT(e,t,a,n){return(n===oq||n===iq||n===sq)&&(e.$$typeof||t.$$typeof)?!0:nq(t,n)&&a.equals(e[n],t[n],n,n,e,t,a)}var yq="[object Arguments]",bq="[object Boolean]",vq="[object Date]",jq="[object Error]",wq="[object Map]",Nq="[object Number]",Sq="[object Object]",Cq="[object RegExp]",kq="[object Set]",Iq="[object String]",Aq="[object URL]",Pq=Array.isArray,HA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,WA=Object.assign,Eq=Object.prototype.toString.call.bind(Object.prototype.toString);function Tq(e){var t=e.areArraysEqual,a=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,o=e.areMapsEqual,l=e.areNumbersEqual,d=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,m=e.areRegExpsEqual,p=e.areSetsEqual,f=e.areTypedArraysEqual,x=e.areUrlsEqual,w=e.unknownTagComparators;return function(v,b,I){if(v===b)return!0;if(v==null||b==null)return!1;var T=typeof v;if(T!==typeof b)return!1;if(T!=="object")return T==="number"?l(v,b,I):T==="function"?s(v,b,I):!1;var P=v.constructor;if(P!==b.constructor)return!1;if(P===Object)return d(v,b,I);if(Pq(v))return t(v,b,I);if(HA!=null&&HA(v))return f(v,b,I);if(P===Date)return a(v,b,I);if(P===RegExp)return m(v,b,I);if(P===Map)return o(v,b,I);if(P===Set)return p(v,b,I);var A=Eq(v);if(A===vq)return a(v,b,I);if(A===Cq)return m(v,b,I);if(A===wq)return o(v,b,I);if(A===kq)return p(v,b,I);if(A===Sq)return typeof v.then!="function"&&typeof b.then!="function"&&d(v,b,I);if(A===Aq)return x(v,b,I);if(A===jq)return n(v,b,I);if(A===yq)return d(v,b,I);if(A===bq||A===Nq||A===Iq)return u(v,b,I);if(w){var k=w[A];if(!k){var E=aq(v);E&&(k=w[E])}if(k)return k(v,b,I)}return!1}}function Dq(e){var t=e.circular,a=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?ud:lq,areDatesEqual:cq,areErrorsEqual:dq,areFunctionsEqual:uq,areMapsEqual:n?LA(zA,ud):zA,areNumbersEqual:mq,areObjectsEqual:n?ud:hq,arePrimitiveWrappersEqual:fq,areRegExpsEqual:pq,areSetsEqual:n?LA(qA,ud):qA,areTypedArraysEqual:n?ud:gq,areUrlsEqual:xq,unknownTagComparators:void 0};if(a&&(s=WA({},s,a(s))),t){var o=Fm(s.areArraysEqual),l=Fm(s.areMapsEqual),d=Fm(s.areObjectsEqual),u=Fm(s.areSetsEqual);s=WA({},s,{areArraysEqual:o,areMapsEqual:l,areObjectsEqual:d,areSetsEqual:u})}return s}function Oq(e){return function(t,a,n,s,o,l,d){return e(t,a,d)}}function _q(e){var t=e.circular,a=e.comparator,n=e.createState,s=e.equals,o=e.strict;if(n)return function(u,m){var p=n(),f=p.cache,x=f===void 0?t?new WeakMap:void 0:f,w=p.meta;return a(u,m,{cache:x,equals:s,meta:w,strict:o})};if(t)return function(u,m){return a(u,m,{cache:new WeakMap,equals:s,meta:void 0,strict:o})};var l={cache:void 0,equals:s,meta:void 0,strict:o};return function(u,m){return a(u,m,l)}}var Mq=co();co({strict:!0});co({circular:!0});co({circular:!0,strict:!0});co({createInternalComparator:function(){return rl}});co({strict:!0,createInternalComparator:function(){return rl}});co({circular:!0,createInternalComparator:function(){return rl}});co({circular:!0,createInternalComparator:function(){return rl},strict:!0});function co(e){e===void 0&&(e={});var t=e.circular,a=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,o=e.strict,l=o===void 0?!1:o,d=Dq(e),u=Tq(d),m=n?n(u):Oq(u);return _q({circular:a,comparator:u,createState:s,equals:m,strict:l})}function Rq(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function VA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,n=function s(o){a<0&&(a=o),o-a>t?(e(o),a=-1):Rq(s)};requestAnimationFrame(n)}function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}function $q(e){return Uq(e)||Bq(e)||Fq(e)||Lq()}function Lq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fq(e,t){if(e){if(typeof e=="string")return GA(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return GA(e,t)}}function GA(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Bq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uq(e){if(Array.isArray(e))return e}function zq(){var e={},t=function(){return null},a=!1,n=function s(o){if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,d=$q(l),u=d[0],m=d.slice(1);if(typeof u=="number"){VA(s.bind(null,m),u);return}s(u),VA(s.bind(null,m));return}$v(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){a=!0},start:function(o){a=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function KA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function YA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(a),!0).forEach(function(n){JT(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function JT(e,t,a){return t=qq(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qq(e){var t=Hq(e,"string");return Jd(t)==="symbol"?t:String(t)}function Hq(e,t){if(Jd(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Jd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wq=function(t,a){return[Object.keys(t),Object.keys(a)].reduce(function(n,s){return n.filter(function(o){return s.includes(o)})})},Vq=function(t){return t},Gq=function(t){return t.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},wd=function(t,a){return Object.keys(a).reduce(function(n,s){return YA(YA({},n),{},JT({},s,t(s,a[s])))},{})},XA=function(t,a,n){return t.map(function(s){return"".concat(Gq(s)," ").concat(a,"ms ").concat(n)}).join(",")};function Kq(e,t){return Jq(e)||Xq(e,t)||ZT(e,t)||Yq()}function Yq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xq(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function Jq(e){if(Array.isArray(e))return e}function Zq(e){return tH(e)||eH(e)||ZT(e)||Qq()}function Qq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZT(e,t){if(e){if(typeof e=="string")return Lv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lv(e,t)}}function eH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tH(e){if(Array.isArray(e))return Lv(e)}function Lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ah=1e-4,QT=function(t,a){return[0,3*t,3*a-6*t,3*t-3*a+1]},eD=function(t,a){return t.map(function(n,s){return n*Math.pow(a,s)}).reduce(function(n,s){return n+s})},JA=function(t,a){return function(n){var s=QT(t,a);return eD(s,n)}},rH=function(t,a){return function(n){var s=QT(t,a),o=[].concat(Zq(s.map(function(l,d){return l*d}).slice(1)),[0]);return eD(o,n)}},ZA=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var s=a[0],o=a[1],l=a[2],d=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,o=0,l=1,d=1;break;case"ease":s=.25,o=.1,l=.25,d=1;break;case"ease-in":s=.42,o=0,l=1,d=1;break;case"ease-out":s=.42,o=0,l=.58,d=1;break;case"ease-in-out":s=0,o=0,l=.58,d=1;break;default:{var u=a[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var m=u[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),p=Kq(m,4);s=p[0],o=p[1],l=p[2],d=p[3]}}}var f=JA(s,l),x=JA(o,d),w=rH(s,l),j=function(I){return I>1?1:I<0?0:I},v=function(I){for(var T=I>1?1:I,P=T,A=0;A<8;++A){var k=f(P)-T,E=w(P);if(Math.abs(k-T)<Ah||E<Ah)return x(P);P=j(P-k/E)}return x(P)};return v.isStepper=!1,v},aH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.stiff,n=a===void 0?100:a,s=t.damping,o=s===void 0?8:s,l=t.dt,d=l===void 0?17:l,u=function(p,f,x){var w=-(p-f)*n,j=x*o,v=x+(w-j)*d/1e3,b=x*d/1e3+p;return Math.abs(b-f)<Ah&&Math.abs(v)<Ah?[f,0]:[b,v]};return u.isStepper=!0,u.dt=d,u},nH=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ZA(s);case"spring":return aH();default:if(s.split("(")[0]==="cubic-bezier")return ZA(s)}return typeof s=="function"?s:null};function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function QA(e){return oH(e)||iH(e)||tD(e)||sH()}function sH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oH(e){if(Array.isArray(e))return Bv(e)}function e3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function qa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(a),!0).forEach(function(n){Fv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):e3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Fv(e,t,a){return t=lH(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lH(e){var t=cH(e,"string");return Zd(t)==="symbol"?t:String(t)}function cH(e,t){if(Zd(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Zd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dH(e,t){return hH(e)||mH(e,t)||tD(e,t)||uH()}function uH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tD(e,t){if(e){if(typeof e=="string")return Bv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bv(e,t)}}function Bv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function mH(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function hH(e){if(Array.isArray(e))return e}var Ph=function(t,a,n){return t+(a-t)*n},Uv=function(t){var a=t.from,n=t.to;return a!==n},fH=function e(t,a,n){var s=wd(function(o,l){if(Uv(l)){var d=t(l.from,l.to,l.velocity),u=dH(d,2),m=u[0],p=u[1];return qa(qa({},l),{},{from:m,velocity:p})}return l},a);return n<1?wd(function(o,l){return Uv(l)?qa(qa({},l),{},{velocity:Ph(l.velocity,s[o].velocity,n),from:Ph(l.from,s[o].from,n)}):l},a):e(t,s,n-1)};const pH=(function(e,t,a,n,s){var o=Wq(e,t),l=o.reduce(function(b,I){return qa(qa({},b),{},Fv({},I,[e[I],t[I]]))},{}),d=o.reduce(function(b,I){return qa(qa({},b),{},Fv({},I,{from:e[I],velocity:0,to:t[I]}))},{}),u=-1,m,p,f=function(){return null},x=function(){return wd(function(I,T){return T.from},d)},w=function(){return!Object.values(d).filter(Uv).length},j=function(I){m||(m=I);var T=I-m,P=T/a.dt;d=fH(a,d,P),s(qa(qa(qa({},e),t),x())),m=I,w()||(u=requestAnimationFrame(f))},v=function(I){p||(p=I);var T=(I-p)/n,P=wd(function(k,E){return Ph.apply(void 0,QA(E).concat([a(T)]))},l);if(s(qa(qa(qa({},e),t),P)),T<1)u=requestAnimationFrame(f);else{var A=wd(function(k,E){return Ph.apply(void 0,QA(E).concat([a(1)]))},l);s(qa(qa(qa({},e),t),A))}};return f=a.isStepper?j:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}});function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}var gH=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xH(e,t){if(e==null)return{};var a=yH(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yH(e,t){if(e==null)return{};var a={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(a[s]=e[s]);return a}function tb(e){return wH(e)||jH(e)||vH(e)||bH()}function bH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vH(e,t){if(e){if(typeof e=="string")return zv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zv(e,t)}}function jH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wH(e){if(Array.isArray(e))return zv(e)}function zv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function t3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function vs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(a),!0).forEach(function(n){gd(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function gd(e,t,a){return t=rD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SH(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rD(n.key),n)}}function CH(e,t,a){return t&&SH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rD(e){var t=kH(e,"string");return Zl(t)==="symbol"?t:String(t)}function kH(e,t){if(Zl(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Zl(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qv(e,t)}function qv(e,t){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qv(e,t)}function AH(e){var t=PH();return function(){var n=Eh(e),s;if(t){var o=Eh(this).constructor;s=Reflect.construct(n,arguments,o)}else s=n.apply(this,arguments);return Hv(this,s)}}function Hv(e,t){if(t&&(Zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wv(e)}function Wv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Eh(e)}var wi=(function(e){IH(a,e);var t=AH(a);function a(n,s){var o;NH(this,a),o=t.call(this,n,s);var l=o.props,d=l.isActive,u=l.attributeName,m=l.from,p=l.to,f=l.steps,x=l.children,w=l.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Wv(o)),o.changeStyle=o.changeStyle.bind(Wv(o)),!d||w<=0)return o.state={style:{}},typeof x=="function"&&(o.state={style:p}),Hv(o);if(f&&f.length)o.state={style:f[0].style};else if(m){if(typeof x=="function")return o.state={style:m},Hv(o);o.state={style:u?gd({},u,m):m}}else o.state={style:{}};return o}return CH(a,[{key:"componentDidMount",value:function(){var s=this.props,o=s.isActive,l=s.canBegin;this.mounted=!0,!(!o||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var o=this.props,l=o.isActive,d=o.canBegin,u=o.attributeName,m=o.shouldReAnimate,p=o.to,f=o.from,x=this.state.style;if(d){if(!l){var w={style:u?gd({},u,p):p};this.state&&x&&(u&&x[u]!==p||!u&&x!==p)&&this.setState(w);return}if(!(Mq(s.to,p)&&s.canBegin&&s.isActive)){var j=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=j||m?f:s.to;if(this.state&&x){var b={style:u?gd({},u,v):v};(u&&x[u]!==v||!u&&x!==v)&&this.setState(b)}this.runAnimation(vs(vs({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var o=this,l=s.from,d=s.to,u=s.duration,m=s.easing,p=s.begin,f=s.onAnimationEnd,x=s.onAnimationStart,w=pH(l,d,nH(m),u,this.changeStyle),j=function(){o.stopJSAnimation=w()};this.manager.start([x,p,j,u,f])}},{key:"runStepAnimation",value:function(s){var o=this,l=s.steps,d=s.begin,u=s.onAnimationStart,m=l[0],p=m.style,f=m.duration,x=f===void 0?0:f,w=function(v,b,I){if(I===0)return v;var T=b.duration,P=b.easing,A=P===void 0?"ease":P,k=b.style,E=b.properties,_=b.onAnimationEnd,R=I>0?l[I-1]:b,$=E||Object.keys(k);if(typeof A=="function"||A==="spring")return[].concat(tb(v),[o.runJSAnimation.bind(o,{from:R.style,to:k,duration:T,easing:A}),T]);var H=XA($,T,A),L=vs(vs(vs({},R.style),k),{},{transition:H});return[].concat(tb(v),[L,T,_]).filter(Vq)};return this.manager.start([u].concat(tb(l.reduce(w,[p,Math.max(x,d)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=zq());var o=s.begin,l=s.duration,d=s.attributeName,u=s.to,m=s.easing,p=s.onAnimationStart,f=s.onAnimationEnd,x=s.steps,w=s.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof m=="function"||typeof w=="function"||m==="spring"){this.runJSAnimation(s);return}if(x.length>1){this.runStepAnimation(s);return}var v=d?gd({},d,u):u,b=XA(Object.keys(v),l,m);j.start([p,o,vs(vs({},v),{},{transition:b}),l,f])}},{key:"render",value:function(){var s=this.props,o=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var d=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=xH(s,gH),m=S.Children.count(o),p=this.state.style;if(typeof o=="function")return o(p);if(!d||m===0||l<=0)return o;var f=function(w){var j=w.props,v=j.style,b=v===void 0?{}:v,I=j.className,T=S.cloneElement(w,vs(vs({},u),{},{style:vs(vs({},b),p),className:I}));return T};return m===1?f(S.Children.only(o)):ge.createElement("div",null,S.Children.map(o,function(x){return f(x)}))}}]),a})(S.PureComponent);wi.displayName="Animate";wi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};wi.propTypes={from:wr.oneOfType([wr.object,wr.string]),to:wr.oneOfType([wr.object,wr.string]),attributeName:wr.string,duration:wr.number,begin:wr.number,easing:wr.oneOfType([wr.string,wr.func]),steps:wr.arrayOf(wr.shape({duration:wr.number.isRequired,style:wr.object.isRequired,easing:wr.oneOfType([wr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wr.func]),properties:wr.arrayOf("string"),onAnimationEnd:wr.func})),children:wr.oneOfType([wr.node,wr.func]),isActive:wr.bool,canBegin:wr.bool,onAnimationEnd:wr.func,shouldReAnimate:wr.bool,onAnimationStart:wr.func,onAnimationReStart:wr.func};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Th.apply(this,arguments)}function EH(e,t){return _H(e)||OH(e,t)||DH(e,t)||TH()}function TH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DH(e,t){if(e){if(typeof e=="string")return r3(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r3(e,t)}}function r3(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function OH(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function _H(e){if(Array.isArray(e))return e}function a3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function n3(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(a),!0).forEach(function(n){MH(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):a3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function MH(e,t,a){return t=RH(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RH(e){var t=$H(e,"string");return Qd(t)=="symbol"?t:t+""}function $H(e,t){if(Qd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s3=function(t,a,n,s,o){var l=Math.min(Math.abs(n)/2,Math.abs(s)/2),d=s>=0?1:-1,u=n>=0?1:-1,m=s>=0&&n>=0||s<0&&n<0?1:0,p;if(l>0&&o instanceof Array){for(var f=[0,0,0,0],x=0,w=4;x<w;x++)f[x]=o[x]>l?l:o[x];p="M".concat(t,",").concat(a+d*f[0]),f[0]>0&&(p+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(m,",").concat(t+u*f[0],",").concat(a)),p+="L ".concat(t+n-u*f[1],",").concat(a),f[1]>0&&(p+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(m,`,
        `).concat(t+n,",").concat(a+d*f[1])),p+="L ".concat(t+n,",").concat(a+s-d*f[2]),f[2]>0&&(p+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(m,`,
        `).concat(t+n-u*f[2],",").concat(a+s)),p+="L ".concat(t+u*f[3],",").concat(a+s),f[3]>0&&(p+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(m,`,
        `).concat(t,",").concat(a+s-d*f[3])),p+="Z"}else if(l>0&&o===+o&&o>0){var j=Math.min(l,o);p="M ".concat(t,",").concat(a+d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(m,",").concat(t+u*j,",").concat(a,`
            L `).concat(t+n-u*j,",").concat(a,`
            A `).concat(j,",").concat(j,",0,0,").concat(m,",").concat(t+n,",").concat(a+d*j,`
            L `).concat(t+n,",").concat(a+s-d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(m,",").concat(t+n-u*j,",").concat(a+s,`
            L `).concat(t+u*j,",").concat(a+s,`
            A `).concat(j,",").concat(j,",0,0,").concat(m,",").concat(t,",").concat(a+s-d*j," Z")}else p="M ".concat(t,",").concat(a," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return p},LH=function(t,a){if(!t||!a)return!1;var n=t.x,s=t.y,o=a.x,l=a.y,d=a.width,u=a.height;if(Math.abs(d)>0&&Math.abs(u)>0){var m=Math.min(o,o+d),p=Math.max(o,o+d),f=Math.min(l,l+u),x=Math.max(l,l+u);return n>=m&&n<=p&&s>=f&&s<=x}return!1},FH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ej=function(t){var a=n3(n3({},FH),t),n=S.useRef(),s=S.useState(-1),o=EH(s,2),l=o[0],d=o[1];S.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&d(A)}catch{}},[]);var u=a.x,m=a.y,p=a.width,f=a.height,x=a.radius,w=a.className,j=a.animationEasing,v=a.animationDuration,b=a.animationBegin,I=a.isAnimationActive,T=a.isUpdateAnimationActive;if(u!==+u||m!==+m||p!==+p||f!==+f||p===0||f===0)return null;var P=sr("recharts-rectangle",w);return T?ge.createElement(wi,{canBegin:l>0,from:{width:p,height:f,x:u,y:m},to:{width:p,height:f,x:u,y:m},duration:v,animationEasing:j,isActive:T},function(A){var k=A.width,E=A.height,_=A.x,R=A.y;return ge.createElement(wi,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,isActive:I,easing:j},ge.createElement("path",Th({},qt(a,!0),{className:P,d:s3(_,R,k,E,x),ref:n})))}):ge.createElement("path",Th({},qt(a,!0),{className:P,d:s3(u,m,p,f,x)}))},BH=["points","className","baseLinePoints","connectNulls"];function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dl.apply(this,arguments)}function UH(e,t){if(e==null)return{};var a=zH(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function zH(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function i3(e){return VH(e)||WH(e)||HH(e)||qH()}function qH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HH(e,t){if(e){if(typeof e=="string")return Vv(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vv(e,t)}}function WH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VH(e){if(Array.isArray(e))return Vv(e)}function Vv(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var o3=function(t){return t&&t.x===+t.x&&t.y===+t.y},GH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(function(n){o3(n)?a[a.length-1].push(n):a[a.length-1].length>0&&a.push([])}),o3(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},Nd=function(t,a){var n=GH(t);a&&(n=[n.reduce(function(o,l){return[].concat(i3(o),i3(l))},[])]);var s=n.map(function(o){return o.reduce(function(l,d,u){return"".concat(l).concat(u===0?"M":"L").concat(d.x,",").concat(d.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},KH=function(t,a,n){var s=Nd(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Nd(a.reverse(),n).slice(1))},YH=function(t){var a=t.points,n=t.className,s=t.baseLinePoints,o=t.connectNulls,l=UH(t,BH);if(!a||!a.length)return null;var d=sr("recharts-polygon",n);if(s&&s.length){var u=l.stroke&&l.stroke!=="none",m=KH(a,s,o);return ge.createElement("g",{className:d},ge.createElement("path",Dl({},qt(l,!0),{fill:m.slice(-1)==="Z"?l.fill:"none",stroke:"none",d:m})),u?ge.createElement("path",Dl({},qt(l,!0),{fill:"none",d:Nd(a,o)})):null,u?ge.createElement("path",Dl({},qt(l,!0),{fill:"none",d:Nd(s,o)})):null)}var p=Nd(a,o);return ge.createElement("path",Dl({},qt(l,!0),{fill:p.slice(-1)==="Z"?l.fill:"none",className:d,d:p}))};function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gv.apply(this,arguments)}var Tj=function(t){var a=t.cx,n=t.cy,s=t.r,o=t.className,l=sr("recharts-dot",o);return a===+a&&n===+n&&s===+s?S.createElement("circle",Gv({},qt(t,!1),th(t),{className:l,cx:a,cy:n,r:s})):null};function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}var XH=["x","y","top","left","width","height","className"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Kv.apply(this,arguments)}function l3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function JH(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(a),!0).forEach(function(n){ZH(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ZH(e,t,a){return t=QH(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QH(e){var t=eW(e,"string");return eu(t)=="symbol"?t:t+""}function eW(e,t){if(eu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tW(e,t){if(e==null)return{};var a=rW(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function rW(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var aW=function(t,a,n,s,o,l){return"M".concat(t,",").concat(o,"v").concat(s,"M").concat(l,",").concat(a,"h").concat(n)},nW=function(t){var a=t.x,n=a===void 0?0:a,s=t.y,o=s===void 0?0:s,l=t.top,d=l===void 0?0:l,u=t.left,m=u===void 0?0:u,p=t.width,f=p===void 0?0:p,x=t.height,w=x===void 0?0:x,j=t.className,v=tW(t,XH),b=JH({x:n,y:o,top:d,left:m,width:f,height:w},v);return!ht(n)||!ht(o)||!ht(f)||!ht(w)||!ht(d)||!ht(m)?null:ge.createElement("path",Kv({},qt(b,!0),{className:sr("recharts-cross",j),d:aW(n,o,f,w,d,m)}))},rb,c3;function sW(){if(c3)return rb;c3=1;var e=Af(),t=xT(),a=Ys();function n(s,o){return s&&s.length?e(s,a(o,2),t):void 0}return rb=n,rb}var iW=sW();const oW=Sr(iW);var ab,d3;function lW(){if(d3)return ab;d3=1;var e=Af(),t=Ys(),a=yT();function n(s,o){return s&&s.length?e(s,t(o,2),a):void 0}return ab=n,ab}var cW=lW();const dW=Sr(cW);var uW=["cx","cy","angle","ticks","axisLine"],mW=["ticks","tick","angle","tickFormatter","stroke"];function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sd.apply(this,arguments)}function u3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ao(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(a),!0).forEach(function(n){Mf(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function m3(e,t){if(e==null)return{};var a=hW(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function hW(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function fW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nD(n.key),n)}}function pW(e,t,a){return t&&h3(e.prototype,t),a&&h3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function gW(e,t,a){return t=Dh(t),xW(e,aD()?Reflect.construct(t,a||[],Dh(e).constructor):t.apply(e,a))}function xW(e,t){if(t&&(Ql(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yW(e)}function yW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aD=function(){return!!e})()}function Dh(e){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Dh(e)}function bW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yv(e,t)}function Yv(e,t){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Yv(e,t)}function Mf(e,t,a){return t=nD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nD(e){var t=vW(e,"string");return Ql(t)=="symbol"?t:t+""}function vW(e,t){if(Ql(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rf=(function(e){function t(){return fW(this,t),gW(this,t,arguments)}return bW(t,e),pW(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,o=this.props,l=o.angle,d=o.cx,u=o.cy;return Fr(d,u,s,l)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,o=n.cy,l=n.angle,d=n.ticks,u=oW(d,function(p){return p.coordinate||0}),m=dW(d,function(p){return p.coordinate||0});return{cx:s,cy:o,startAngle:l,endAngle:l,innerRadius:m.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,l=n.angle,d=n.ticks,u=n.axisLine,m=m3(n,uW),p=d.reduce(function(j,v){return[Math.min(j[0],v.coordinate),Math.max(j[1],v.coordinate)]},[1/0,-1/0]),f=Fr(s,o,p[0],l),x=Fr(s,o,p[1],l),w=Ao(Ao(Ao({},qt(m,!1)),{},{fill:"none"},qt(u,!1)),{},{x1:f.x,y1:f.y,x2:x.x,y2:x.y});return ge.createElement("line",Sd({className:"recharts-polar-radius-axis-line"},w))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,l=s.tick,d=s.angle,u=s.tickFormatter,m=s.stroke,p=m3(s,mW),f=this.getTickTextAnchor(),x=qt(p,!1),w=qt(l,!1),j=o.map(function(v,b){var I=n.getTickValueCoord(v),T=Ao(Ao(Ao(Ao({textAnchor:f,transform:"rotate(".concat(90-d,", ").concat(I.x,", ").concat(I.y,")")},x),{},{stroke:"none",fill:m},w),{},{index:b},I),{},{payload:v});return ge.createElement(Ir,Sd({className:sr("recharts-polar-radius-axis-tick",VT(l)),key:"tick-".concat(v.coordinate)},Go(n.props,v,b)),t.renderTickItem(l,T,u?u(v.value,b):v.value))});return ge.createElement(Ir,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.axisLine,l=n.tick;return!s||!s.length?null:ge.createElement(Ir,{className:sr("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),l&&this.renderTicks(),Ra.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,o){var l;return ge.isValidElement(n)?l=ge.cloneElement(n,s):Gt(n)?l=n(s):l=ge.createElement(Ko,Sd({},s,{className:"recharts-polar-radius-axis-tick-value"}),o),l}}])})(S.PureComponent);Mf(Rf,"displayName","PolarRadiusAxis");Mf(Rf,"axisType","radiusAxis");Mf(Rf,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Oo.apply(this,arguments)}function f3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Po(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(a),!0).forEach(function(n){$f(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function jW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iD(n.key),n)}}function wW(e,t,a){return t&&p3(e.prototype,t),a&&p3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function NW(e,t,a){return t=Oh(t),SW(e,sD()?Reflect.construct(t,a||[],Oh(e).constructor):t.apply(e,a))}function SW(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CW(e)}function CW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sD=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Oh(e)}function kW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xv(e,t)}function Xv(e,t){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xv(e,t)}function $f(e,t,a){return t=iD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iD(e){var t=IW(e,"string");return ec(t)=="symbol"?t:t+""}function IW(e,t){if(ec(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var AW=Math.PI/180,g3=1e-5,Lf=(function(e){function t(){return jW(this,t),NW(this,t,arguments)}return kW(t,e),wW(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.cx,l=s.cy,d=s.radius,u=s.orientation,m=s.tickSize,p=m||8,f=Fr(o,l,d,n.coordinate),x=Fr(o,l,d+(u==="inner"?-1:1)*p,n.coordinate);return{x1:f.x,y1:f.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,o=Math.cos(-n.coordinate*AW),l;return o>g3?l=s==="outer"?"start":"end":o<-g3?l=s==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,o=n.cy,l=n.radius,d=n.axisLine,u=n.axisLineType,m=Po(Po({},qt(this.props,!1)),{},{fill:"none"},qt(d,!1));if(u==="circle")return ge.createElement(Tj,Oo({className:"recharts-polar-angle-axis-line"},m,{cx:s,cy:o,r:l}));var p=this.props.ticks,f=p.map(function(x){return Fr(s,o,l,x.coordinate)});return ge.createElement(YH,Oo({className:"recharts-polar-angle-axis-line"},m,{points:f}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,o=s.ticks,l=s.tick,d=s.tickLine,u=s.tickFormatter,m=s.stroke,p=qt(this.props,!1),f=qt(l,!1),x=Po(Po({},p),{},{fill:"none"},qt(d,!1)),w=o.map(function(j,v){var b=n.getTickLineCoord(j),I=n.getTickTextAnchor(j),T=Po(Po(Po({textAnchor:I},p),{},{stroke:"none",fill:m},f),{},{index:v,payload:j,x:b.x2,y:b.y2});return ge.createElement(Ir,Oo({className:sr("recharts-polar-angle-axis-tick",VT(l)),key:"tick-".concat(j.coordinate)},Go(n.props,j,v)),d&&ge.createElement("line",Oo({className:"recharts-polar-angle-axis-tick-line"},x,b)),l&&t.renderTickItem(l,T,u?u(j.value,v):j.value))});return ge.createElement(Ir,{className:"recharts-polar-angle-axis-ticks"},w)}},{key:"render",value:function(){var n=this.props,s=n.ticks,o=n.radius,l=n.axisLine;return o<=0||!s||!s.length?null:ge.createElement(Ir,{className:sr("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,o){var l;return ge.isValidElement(n)?l=ge.cloneElement(n,s):Gt(n)?l=n(s):l=ge.createElement(Ko,Oo({},s,{className:"recharts-polar-angle-axis-tick-value"}),o),l}}])})(S.PureComponent);$f(Lf,"displayName","PolarAngleAxis");$f(Lf,"axisType","angleAxis");$f(Lf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nb,x3;function PW(){if(x3)return nb;x3=1;var e=gE(),t=e(Object.getPrototypeOf,Object);return nb=t,nb}var sb,y3;function EW(){if(y3)return sb;y3=1;var e=Ci(),t=PW(),a=ki(),n="[object Object]",s=Function.prototype,o=Object.prototype,l=s.toString,d=o.hasOwnProperty,u=l.call(Object);function m(p){if(!a(p)||e(p)!=n)return!1;var f=t(p);if(f===null)return!0;var x=d.call(f,"constructor")&&f.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==u}return sb=m,sb}var TW=EW();const DW=Sr(TW);var ib,b3;function OW(){if(b3)return ib;b3=1;var e=Ci(),t=ki(),a="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==a}return ib=n,ib}var _W=OW();const MW=Sr(_W);function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_h.apply(this,arguments)}function RW(e,t){return BW(e)||FW(e,t)||LW(e,t)||$W()}function $W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LW(e,t){if(e){if(typeof e=="string")return v3(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v3(e,t)}}function v3(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function FW(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function BW(e){if(Array.isArray(e))return e}function j3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function w3(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(a),!0).forEach(function(n){UW(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function UW(e,t,a){return t=zW(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zW(e){var t=qW(e,"string");return tu(t)=="symbol"?t:t+""}function qW(e,t){if(tu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N3=function(t,a,n,s,o){var l=n-s,d;return d="M ".concat(t,",").concat(a),d+="L ".concat(t+n,",").concat(a),d+="L ".concat(t+n-l/2,",").concat(a+o),d+="L ".concat(t+n-l/2-s,",").concat(a+o),d+="L ".concat(t,",").concat(a," Z"),d},HW={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WW=function(t){var a=w3(w3({},HW),t),n=S.useRef(),s=S.useState(-1),o=RW(s,2),l=o[0],d=o[1];S.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&d(P)}catch{}},[]);var u=a.x,m=a.y,p=a.upperWidth,f=a.lowerWidth,x=a.height,w=a.className,j=a.animationEasing,v=a.animationDuration,b=a.animationBegin,I=a.isUpdateAnimationActive;if(u!==+u||m!==+m||p!==+p||f!==+f||x!==+x||p===0&&f===0||x===0)return null;var T=sr("recharts-trapezoid",w);return I?ge.createElement(wi,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:x,x:u,y:m},to:{upperWidth:p,lowerWidth:f,height:x,x:u,y:m},duration:v,animationEasing:j,isActive:I},function(P){var A=P.upperWidth,k=P.lowerWidth,E=P.height,_=P.x,R=P.y;return ge.createElement(wi,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,easing:j},ge.createElement("path",_h({},qt(a,!0),{className:T,d:N3(_,R,A,k,E),ref:n})))}):ge.createElement("g",null,ge.createElement("path",_h({},qt(a,!0),{className:T,d:N3(u,m,p,f,x)})))},VW=["option","shapeType","propTransformer","activeClassName","isActive"];function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function GW(e,t){if(e==null)return{};var a=KW(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function KW(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function S3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Mh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?S3(Object(a),!0).forEach(function(n){YW(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function YW(e,t,a){return t=XW(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function XW(e){var t=JW(e,"string");return ru(t)=="symbol"?t:t+""}function JW(e,t){if(ru(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZW(e,t){return Mh(Mh({},t),e)}function QW(e,t){return e==="symbols"}function C3(e){var t=e.shapeType,a=e.elementProps;switch(t){case"rectangle":return ge.createElement(Ej,a);case"trapezoid":return ge.createElement(WW,a);case"sector":return ge.createElement(YT,a);case"symbols":if(QW(t))return ge.createElement(Y1,a);break;default:return null}}function eV(e){return S.isValidElement(e)?e.props:e}function oD(e){var t=e.option,a=e.shapeType,n=e.propTransformer,s=n===void 0?ZW:n,o=e.activeClassName,l=o===void 0?"recharts-active-shape":o,d=e.isActive,u=GW(e,VW),m;if(S.isValidElement(t))m=S.cloneElement(t,Mh(Mh({},u),eV(t)));else if(Gt(t))m=t(u);else if(DW(t)&&!MW(t)){var p=s(t,u);m=ge.createElement(C3,{shapeType:a,elementProps:p})}else{var f=u;m=ge.createElement(C3,{shapeType:a,elementProps:f})}return d?ge.createElement(Ir,{className:l},m):m}function Ff(e,t){return t!=null&&"trapezoids"in e.props}function Bf(e,t){return t!=null&&"sectors"in e.props}function au(e,t){return t!=null&&"points"in e.props}function tV(e,t){var a,n,s=e.x===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&o}function rV(e,t){var a=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return a&&n}function aV(e,t){var a=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return a&&n&&s}function nV(e,t){var a;return Ff(e,t)?a=tV:Bf(e,t)?a=rV:au(e,t)&&(a=aV),a}function sV(e,t){var a;return Ff(e,t)?a="trapezoids":Bf(e,t)?a="sectors":au(e,t)&&(a="points"),a}function iV(e,t){if(Ff(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(Bf(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return au(e,t)?t.payload:{}}function oV(e){var t=e.activeTooltipItem,a=e.graphicalItem,n=e.itemData,s=sV(a,t),o=iV(a,t),l=n.filter(function(u,m){var p=Tf(o,u),f=a.props[s].filter(function(j){var v=nV(a,t);return v(j,t)}),x=a.props[s].indexOf(f[f.length-1]),w=m===x;return p&&w}),d=n.indexOf(l[l.length-1]);return d}var Ym;function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ol.apply(this,arguments)}function k3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function $r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(a),!0).forEach(function(n){rs(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function lV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cD(n.key),n)}}function cV(e,t,a){return t&&I3(e.prototype,t),a&&I3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function dV(e,t,a){return t=Rh(t),uV(e,lD()?Reflect.construct(t,a||[],Rh(e).constructor):t.apply(e,a))}function uV(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mV(e)}function mV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lD=function(){return!!e})()}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rh(e)}function hV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jv(e,t)}function Jv(e,t){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jv(e,t)}function rs(e,t,a){return t=cD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cD(e){var t=fV(e,"string");return tc(t)=="symbol"?t:t+""}function fV(e,t){if(tc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vs=(function(e){function t(a){var n;return lV(this,t),n=dV(this,t,[a]),rs(n,"pieRef",null),rs(n,"sectorRefs",[]),rs(n,"id",bu("recharts-pie-")),rs(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Gt(s)&&s()}),rs(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Gt(s)&&s()}),n.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},n}return hV(t,e),cV(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.label,d=o.labelLine,u=o.dataKey,m=o.valueKey,p=qt(this.props,!1),f=qt(l,!1),x=qt(d,!1),w=l&&l.offsetRadius||20,j=n.map(function(v,b){var I=(v.startAngle+v.endAngle)/2,T=Fr(v.cx,v.cy,v.outerRadius+w,I),P=$r($r($r($r({},p),v),{},{stroke:"none"},f),{},{index:b,textAnchor:t.getTextAnchor(T.x,v.cx)},T),A=$r($r($r($r({},p),v),{},{fill:"none",stroke:v.fill},x),{},{index:b,points:[Fr(v.cx,v.cy,v.outerRadius,I),T]}),k=u;return cr(u)&&cr(m)?k="value":cr(u)&&(k=m),ge.createElement(Ir,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(b)},d&&t.renderLabelLineItem(d,A,"line"),t.renderLabelItem(l,P,an(v,k)))});return ge.createElement(Ir,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(n){var s=this,o=this.props,l=o.activeShape,d=o.blendStroke,u=o.inactiveShape;return n.map(function(m,p){if(m?.startAngle===0&&m?.endAngle===0&&n.length!==1)return null;var f=s.isActiveIndex(p),x=u&&s.hasActiveIndex()?u:null,w=f?l:x,j=$r($r({},m),{},{stroke:d?m.fill:m.stroke,tabIndex:-1});return ge.createElement(Ir,Ol({ref:function(b){b&&!s.sectorRefs.includes(b)&&s.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Go(s.props,m,p),{key:"sector-".concat(m?.startAngle,"-").concat(m?.endAngle,"-").concat(m.midAngle,"-").concat(p)}),ge.createElement(oD,Ol({option:w,isActive:f,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,o=s.sectors,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,m=s.animationEasing,p=s.animationId,f=this.state,x=f.prevSectors,w=f.prevIsAnimationActive;return ge.createElement(wi,{begin:d,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(w),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var v=j.t,b=[],I=o&&o[0],T=I.startAngle;return o.forEach(function(P,A){var k=x&&x[A],E=A>0?Wn(P,"paddingAngle",0):0;if(k){var _=Ki(k.endAngle-k.startAngle,P.endAngle-P.startAngle),R=$r($r({},P),{},{startAngle:T+E,endAngle:T+_(v)+E});b.push(R),T=R.endAngle}else{var $=P.endAngle,H=P.startAngle,L=Ki(0,$-H),Y=L(v),X=$r($r({},P),{},{startAngle:T+E,endAngle:T+Y+E});b.push(X),T=X.endAngle}}),ge.createElement(Ir,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var l=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"ArrowRight":{var d=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[d].focus(),s.setState({sectorToFocus:d});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,o=n.isAnimationActive,l=this.state.prevSectors;return o&&s&&s.length&&(!l||!Tf(l,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,o=s.hide,l=s.sectors,d=s.className,u=s.label,m=s.cx,p=s.cy,f=s.innerRadius,x=s.outerRadius,w=s.isAnimationActive,j=this.state.isAnimationFinished;if(o||!l||!l.length||!ht(m)||!ht(p)||!ht(f)||!ht(x))return null;var v=sr("recharts-pie",d);return ge.createElement(Ir,{tabIndex:this.props.rootTabIndex,className:v,ref:function(I){n.pieRef=I}},this.renderSectors(),u&&this.renderLabels(l),Ra.renderCallByParent(this.props,null,!1),(!w||j)&&ao.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,o){if(ge.isValidElement(n))return ge.cloneElement(n,s);if(Gt(n))return n(s);var l=sr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ge.createElement(Rv,Ol({},s,{key:o,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(n,s,o){if(ge.isValidElement(n))return ge.cloneElement(n,s);var l=o;if(Gt(n)&&(l=n(s),ge.isValidElement(l)))return l;var d=sr("recharts-pie-label-text",typeof n!="boolean"&&!Gt(n)?n.className:"");return ge.createElement(Ko,Ol({},s,{alignmentBaseline:"middle",className:d}),l)}}])})(S.PureComponent);Ym=Vs;rs(Vs,"displayName","Pie");rs(Vs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!vc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});rs(Vs,"parseDeltaAngle",function(e,t){var a=mn(t-e),n=Math.min(Math.abs(t-e),360);return a*n});rs(Vs,"getRealPieData",function(e){var t=e.data,a=e.children,n=qt(e,!1),s=os(a,Od);return t&&t.length?t.map(function(o,l){return $r($r($r({payload:o},n),o),s&&s[l]&&s[l].props)}):s&&s.length?s.map(function(o){return $r($r({},n),o.props)}):[]});rs(Vs,"parseCoordinateOfPie",function(e,t){var a=t.top,n=t.left,s=t.width,o=t.height,l=WT(s,o),d=n+hn(e.cx,s,s/2),u=a+hn(e.cy,o,o/2),m=hn(e.innerRadius,l,0),p=hn(e.outerRadius,l,l*.8),f=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:d,cy:u,innerRadius:m,outerRadius:p,maxRadius:f}});rs(Vs,"getComposedData",function(e){var t=e.item,a=e.offset,n=t.type.defaultProps!==void 0?$r($r({},t.type.defaultProps),t.props):t.props,s=Ym.getRealPieData(n);if(!s||!s.length)return null;var o=n.cornerRadius,l=n.startAngle,d=n.endAngle,u=n.paddingAngle,m=n.dataKey,p=n.nameKey,f=n.valueKey,x=n.tooltipType,w=Math.abs(n.minAngle),j=Ym.parseCoordinateOfPie(n,a),v=Ym.parseDeltaAngle(l,d),b=Math.abs(v),I=m;cr(m)&&cr(f)?(Ss(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),I="value"):cr(m)&&(Ss(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),I=f);var T=s.filter(function(R){return an(R,I,0)!==0}).length,P=(b>=360?T:T-1)*u,A=b-T*w-P,k=s.reduce(function(R,$){var H=an($,I,0);return R+(ht(H)?H:0)},0),E;if(k>0){var _;E=s.map(function(R,$){var H=an(R,I,0),L=an(R,p,$),Y=(ht(H)?H:0)/k,X;$?X=_.endAngle+mn(v)*u*(H!==0?1:0):X=l;var me=X+mn(v)*((H!==0?w:0)+Y*A),K=(X+me)/2,oe=(j.innerRadius+j.outerRadius)/2,G=[{name:L,value:H,payload:R,dataKey:I,type:x}],B=Fr(j.cx,j.cy,oe,K);return _=$r($r($r({percent:Y,cornerRadius:o,name:L,tooltipPayload:G,midAngle:K,middleRadius:oe,tooltipPosition:B},R),j),{},{value:an(R,I),startAngle:X,endAngle:me,payload:R,paddingAngle:mn(v)*u}),_})}return $r($r({},j),{},{sectors:E,data:s})});var ob,A3;function pV(){if(A3)return ob;A3=1;var e=Math.ceil,t=Math.max;function a(n,s,o,l){for(var d=-1,u=t(e((s-n)/(o||1)),0),m=Array(u);u--;)m[l?u:++d]=n,n+=o;return m}return ob=a,ob}var lb,P3;function dD(){if(P3)return lb;P3=1;var e=DE(),t=1/0,a=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var o=s<0?-1:1;return o*a}return s===s?s:0}return lb=n,lb}var cb,E3;function gV(){if(E3)return cb;E3=1;var e=pV(),t=jf(),a=dD();function n(s){return function(o,l,d){return d&&typeof d!="number"&&t(o,l,d)&&(l=d=void 0),o=a(o),l===void 0?(l=o,o=0):l=a(l),d=d===void 0?o<l?1:-1:a(d),e(o,l,d,s)}}return cb=n,cb}var db,T3;function xV(){if(T3)return db;T3=1;var e=gV(),t=e();return db=t,db}var yV=xV();const $h=Sr(yV);function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function D3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function O3(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(a),!0).forEach(function(n){uD(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function uD(e,t,a){return t=bV(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bV(e){var t=vV(e,"string");return nu(t)=="symbol"?t:t+""}function vV(e,t){if(nu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jV=["Webkit","Moz","O","ms"],wV=function(t,a){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),s=jV.reduce(function(o,l){return O3(O3({},o),{},uD({},l+n,a))},{});return s[t]=a,s};function rc(e){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Lh.apply(this,arguments)}function _3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ub(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(a),!0).forEach(function(n){Bn(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function NV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hD(n.key),n)}}function SV(e,t,a){return t&&M3(e.prototype,t),a&&M3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function CV(e,t,a){return t=Fh(t),kV(e,mD()?Reflect.construct(t,a||[],Fh(e).constructor):t.apply(e,a))}function kV(e,t){if(t&&(rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IV(e)}function IV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mD=function(){return!!e})()}function Fh(e){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fh(e)}function AV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Zv(e,t)}function Bn(e,t,a){return t=hD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hD(e){var t=PV(e,"string");return rc(t)=="symbol"?t:t+""}function PV(e,t){if(rc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EV=function(t){var a=t.data,n=t.startIndex,s=t.endIndex,o=t.x,l=t.width,d=t.travellerWidth;if(!a||!a.length)return{};var u=a.length,m=vd().domain($h(0,u)).range([o,o+l-d]),p=m.domain().map(function(f){return m(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:m(n),endX:m(s),scale:m,scaleValues:p}},R3=function(t){return t.changedTouches&&!!t.changedTouches.length},ac=(function(e){function t(a){var n;return NV(this,t),n=CV(this,t,[a]),Bn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Bn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Bn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,o=s.endIndex,l=s.onDragEnd,d=s.startIndex;l?.({endIndex:o,startIndex:d})}),n.detachDragEndListener()}),Bn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Bn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Bn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Bn(n,"handleSlideDragStart",function(s){var o=R3(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return AV(t,e),SV(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,o=n.endX,l=this.state.scaleValues,d=this.props,u=d.gap,m=d.data,p=m.length-1,f=Math.min(s,o),x=Math.max(s,o),w=t.getIndexInRange(l,f),j=t.getIndexInRange(l,x);return{startIndex:w-w%u,endIndex:j===p?p:j-j%u}}},{key:"getTextOfTick",value:function(n){var s=this.props,o=s.data,l=s.tickFormatter,d=s.dataKey,u=an(o[n],d,n);return Gt(l)?l(u,n):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,o=s.slideMoveStartX,l=s.startX,d=s.endX,u=this.props,m=u.x,p=u.width,f=u.travellerWidth,x=u.startIndex,w=u.endIndex,j=u.onChange,v=n.pageX-o;v>0?v=Math.min(v,m+p-f-d,m+p-f-l):v<0&&(v=Math.max(v,m-l,m-d));var b=this.getIndex({startX:l+v,endX:d+v});(b.startIndex!==x||b.endIndex!==w)&&j&&j(b),this.setState({startX:l+v,endX:d+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var o=R3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,o=s.brushMoveStartX,l=s.movingTravellerId,d=s.endX,u=s.startX,m=this.state[l],p=this.props,f=p.x,x=p.width,w=p.travellerWidth,j=p.onChange,v=p.gap,b=p.data,I={startX:this.state.startX,endX:this.state.endX},T=n.pageX-o;T>0?T=Math.min(T,f+x-w-m):T<0&&(T=Math.max(T,f-m)),I[l]=m+T;var P=this.getIndex(I),A=P.startIndex,k=P.endIndex,E=function(){var R=b.length-1;return l==="startX"&&(d>u?A%v===0:k%v===0)||d<u&&k===R||l==="endX"&&(d>u?k%v===0:A%v===0)||d>u&&k===R};this.setState(Bn(Bn({},l,m+T),"brushMoveStartX",n.pageX),function(){j&&E()&&j(P)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var o=this,l=this.state,d=l.scaleValues,u=l.startX,m=l.endX,p=this.state[s],f=d.indexOf(p);if(f!==-1){var x=f+n;if(!(x===-1||x>=d.length)){var w=d[x];s==="startX"&&w>=m||s==="endX"&&w<=u||this.setState(Bn({},s,w),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,d=n.height,u=n.fill,m=n.stroke;return ge.createElement("rect",{stroke:m,fill:u,x:s,y:o,width:l,height:d})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,d=n.height,u=n.data,m=n.children,p=n.padding,f=S.Children.only(m);return f?ge.cloneElement(f,{x:s,y:o,width:l,height:d,margin:p,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(n,s){var o,l,d=this,u=this.props,m=u.y,p=u.travellerWidth,f=u.height,x=u.traveller,w=u.ariaLabel,j=u.data,v=u.startIndex,b=u.endIndex,I=Math.max(n,this.props.x),T=ub(ub({},qt(this.props,!1)),{},{x:I,y:m,width:p,height:f}),P=w||"Min value: ".concat((o=j[v])===null||o===void 0?void 0:o.name,", Max value: ").concat((l=j[b])===null||l===void 0?void 0:l.name);return ge.createElement(Ir,{tabIndex:0,role:"slider","aria-label":P,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),d.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,s))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(x,T))}},{key:"renderSlide",value:function(n,s){var o=this.props,l=o.y,d=o.height,u=o.stroke,m=o.travellerWidth,p=Math.min(n,s)+m,f=Math.max(Math.abs(s-n)-m,0);return ge.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:p,y:l,width:f,height:d})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,o=n.endIndex,l=n.y,d=n.height,u=n.travellerWidth,m=n.stroke,p=this.state,f=p.startX,x=p.endX,w=5,j={pointerEvents:"none",fill:m};return ge.createElement(Ir,{className:"recharts-brush-texts"},ge.createElement(Ko,Lh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,x)-w,y:l+d/2},j),this.getTextOfTick(s)),ge.createElement(Ko,Lh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,x)+u+w,y:l+d/2},j),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,s=n.data,o=n.className,l=n.children,d=n.x,u=n.y,m=n.width,p=n.height,f=n.alwaysShowText,x=this.state,w=x.startX,j=x.endX,v=x.isTextActive,b=x.isSlideMoving,I=x.isTravellerMoving,T=x.isTravellerFocused;if(!s||!s.length||!ht(d)||!ht(u)||!ht(m)||!ht(p)||m<=0||p<=0)return null;var P=sr("recharts-brush",o),A=ge.Children.count(l)===1,k=wV("userSelect","none");return ge.createElement(Ir,{className:P,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(w,j),this.renderTravellerLayer(w,"startX"),this.renderTravellerLayer(j,"endX"),(v||b||I||T||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,o=n.y,l=n.width,d=n.height,u=n.stroke,m=Math.floor(o+d/2)-1;return ge.createElement(ge.Fragment,null,ge.createElement("rect",{x:s,y:o,width:l,height:d,fill:u,stroke:"none"}),ge.createElement("line",{x1:s+1,y1:m,x2:s+l-1,y2:m,fill:"none",stroke:"#fff"}),ge.createElement("line",{x1:s+1,y1:m+2,x2:s+l-1,y2:m+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var o;return ge.isValidElement(n)?o=ge.cloneElement(n,s):Gt(n)?o=n(s):o=t.renderDefaultTraveller(s),o}},{key:"getDerivedStateFromProps",value:function(n,s){var o=n.data,l=n.width,d=n.x,u=n.travellerWidth,m=n.updateId,p=n.startIndex,f=n.endIndex;if(o!==s.prevData||m!==s.prevUpdateId)return ub({prevData:o,prevTravellerWidth:u,prevUpdateId:m,prevX:d,prevWidth:l},o&&o.length?EV({data:o,width:l,x:d,travellerWidth:u,startIndex:p,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||d!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([d,d+l-u]);var x=s.scale.domain().map(function(w){return s.scale(w)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:m,prevX:d,prevWidth:l,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,s){for(var o=n.length,l=0,d=o-1;d-l>1;){var u=Math.floor((l+d)/2);n[u]>s?d=u:l=u}return s>=n[d]?d:l}}])})(S.PureComponent);Bn(ac,"displayName","Brush");Bn(ac,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mb,$3;function TV(){if($3)return mb;$3=1;var e=rj();function t(a,n){var s;return e(a,function(o,l,d){return s=n(o,l,d),!s}),!!s}return mb=t,mb}var hb,L3;function DV(){if(L3)return hb;L3=1;var e=cE(),t=Ys(),a=TV(),n=Dn(),s=jf();function o(l,d,u){var m=n(l)?e:a;return u&&s(l,d,u)&&(d=void 0),m(l,t(d,3))}return hb=o,hb}var OV=DV();const _V=Sr(OV);var Hs=function(t,a){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===a},fb,F3;function MV(){if(F3)return fb;F3=1;var e=IE();function t(a,n,s){n=="__proto__"&&e?e(a,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):a[n]=s}return fb=t,fb}var pb,B3;function RV(){if(B3)return pb;B3=1;var e=MV(),t=CE(),a=Ys();function n(s,o){var l={};return o=a(o,3),t(s,function(d,u,m){e(l,u,o(d,u,m))}),l}return pb=n,pb}var $V=RV();const LV=Sr($V);var gb,U3;function FV(){if(U3)return gb;U3=1;function e(t,a){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!a(t[n],n,t))return!1;return!0}return gb=e,gb}var xb,z3;function BV(){if(z3)return xb;z3=1;var e=rj();function t(a,n){var s=!0;return e(a,function(o,l,d){return s=!!n(o,l,d),s}),s}return xb=t,xb}var yb,q3;function UV(){if(q3)return yb;q3=1;var e=FV(),t=BV(),a=Ys(),n=Dn(),s=jf();function o(l,d,u){var m=n(l)?e:t;return u&&s(l,d,u)&&(d=void 0),m(l,a(d,3))}return yb=o,yb}var zV=UV();const fD=Sr(zV);var qV=["x","y"];function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Qv.apply(this,arguments)}function H3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function md(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(a),!0).forEach(function(n){HV(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function HV(e,t,a){return t=WV(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function WV(e){var t=VV(e,"string");return su(t)=="symbol"?t:t+""}function VV(e,t){if(su(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GV(e,t){if(e==null)return{};var a=KV(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function KV(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function YV(e,t){var a=e.x,n=e.y,s=GV(e,qV),o="".concat(a),l=parseInt(o,10),d="".concat(n),u=parseInt(d,10),m="".concat(t.height||s.height),p=parseInt(m,10),f="".concat(t.width||s.width),x=parseInt(f,10);return md(md(md(md(md({},t),s),l?{x:l}:{}),u?{y:u}:{}),{},{height:p,width:x,name:t.name,radius:t.radius})}function W3(e){return ge.createElement(oD,Qv({shapeType:"rectangle",propTransformer:YV,activeClassName:"recharts-active-bar"},e))}var XV=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var o=ht(n)||vR(n);return o?t(n,s):(o||Xo(),a)}},JV=["value","background"],pD;function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function ZV(e,t){if(e==null)return{};var a=QV(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function QV(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bh.apply(this,arguments)}function V3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ba(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(a),!0).forEach(function(n){eo(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function eG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xD(n.key),n)}}function tG(e,t,a){return t&&G3(e.prototype,t),a&&G3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function rG(e,t,a){return t=Uh(t),aG(e,gD()?Reflect.construct(t,a||[],Uh(e).constructor):t.apply(e,a))}function aG(e,t){if(t&&(nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nG(e)}function nG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gD=function(){return!!e})()}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Uh(e)}function sG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},e1(e,t)}function eo(e,t,a){return t=xD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xD(e){var t=iG(e,"string");return nc(t)=="symbol"?t:t+""}function iG(e,t){if(nc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var no=(function(e){function t(){var a;eG(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=rG(this,t,[].concat(s)),eo(a,"state",{isAnimationFinished:!1}),eo(a,"id",bu("recharts-bar-")),eo(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),l&&l()}),eo(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),l&&l()}),a}return sG(t,e),tG(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,o=this.props,l=o.shape,d=o.dataKey,u=o.activeIndex,m=o.activeBar,p=qt(this.props,!1);return n&&n.map(function(f,x){var w=x===u,j=w?m:l,v=ba(ba(ba({},p),f),{},{isActive:w,option:j,index:x,dataKey:d,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ge.createElement(Ir,Bh({className:"recharts-bar-rectangle"},Go(s.props,f,x),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(x)}),ge.createElement(W3,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,o=s.data,l=s.layout,d=s.isAnimationActive,u=s.animationBegin,m=s.animationDuration,p=s.animationEasing,f=s.animationId,x=this.state.prevData;return ge.createElement(wi,{begin:u,duration:m,isActive:d,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var j=w.t,v=o.map(function(b,I){var T=x&&x[I];if(T){var P=Ki(T.x,b.x),A=Ki(T.y,b.y),k=Ki(T.width,b.width),E=Ki(T.height,b.height);return ba(ba({},b),{},{x:P(j),y:A(j),width:k(j),height:E(j)})}if(l==="horizontal"){var _=Ki(0,b.height),R=_(j);return ba(ba({},b),{},{y:b.y+b.height-R,height:R})}var $=Ki(0,b.width),H=$(j);return ba(ba({},b),{},{width:H})});return ge.createElement(Ir,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,o=n.isAnimationActive,l=this.state.prevData;return o&&s&&s.length&&(!l||!Tf(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,o=s.data,l=s.dataKey,d=s.activeIndex,u=qt(this.props.background,!1);return o.map(function(m,p){m.value;var f=m.background,x=ZV(m,JV);if(!f)return null;var w=ba(ba(ba(ba(ba({},x),{},{fill:"#eee"},f),u),Go(n.props,m,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:l,index:p,className:"recharts-bar-background-rectangle"});return ge.createElement(W3,Bh({key:"background-bar-".concat(p),option:n.props.background,isActive:p===d},w))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.data,d=o.xAxis,u=o.yAxis,m=o.layout,p=o.children,f=os(p,_f);if(!f)return null;var x=m==="vertical"?l[0].height/2:l[0].width/2,w=function(b,I){var T=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:T,errorVal:an(b,I)}},j={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ge.createElement(Ir,j,f.map(function(v){return ge.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:l,xAxis:d,yAxis:u,layout:m,offset:x,dataPointFormatter:w})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,o=n.data,l=n.className,d=n.xAxis,u=n.yAxis,m=n.left,p=n.top,f=n.width,x=n.height,w=n.isAnimationActive,j=n.background,v=n.id;if(s||!o||!o.length)return null;var b=this.state.isAnimationFinished,I=sr("recharts-bar",l),T=d&&d.allowDataOverflow,P=u&&u.allowDataOverflow,A=T||P,k=cr(v)?this.id:v;return ge.createElement(Ir,{className:I},T||P?ge.createElement("defs",null,ge.createElement("clipPath",{id:"clipPath-".concat(k)},ge.createElement("rect",{x:T?m:m-f/2,y:P?p:p-x/2,width:T?f:f*2,height:P?x:x*2}))):null,ge.createElement(Ir,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(k,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,k),(!w||b)&&ao.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(S.PureComponent);pD=no;eo(no,"displayName","Bar");eo(no,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!vc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});eo(no,"getComposedData",function(e){var t=e.props,a=e.item,n=e.barPosition,s=e.bandSize,o=e.xAxis,l=e.yAxis,d=e.xAxisTicks,u=e.yAxisTicks,m=e.stackedData,p=e.dataStartIndex,f=e.displayedData,x=e.offset,w=_U(n,a);if(!w)return null;var j=t.layout,v=a.type.defaultProps,b=v!==void 0?ba(ba({},v),a.props):a.props,I=b.dataKey,T=b.children,P=b.minPointSize,A=j==="horizontal"?l:o,k=m?A.scale.domain():null,E=UU({numericAxis:A}),_=os(T,Od),R=f.map(function($,H){var L,Y,X,me,K,oe;m?L=MU(m[p+H],k):(L=an($,I),Array.isArray(L)||(L=[E,L]));var G=XV(P,pD.defaultProps.minPointSize)(L[1],H);if(j==="horizontal"){var B,F=[l.scale(L[0]),l.scale(L[1])],re=F[0],U=F[1];Y=yA({axis:o,ticks:d,bandSize:s,offset:w.offset,entry:$,index:H}),X=(B=U??re)!==null&&B!==void 0?B:void 0,me=w.size;var ae=re-U;if(K=Number.isNaN(ae)?0:ae,oe={x:Y,y:l.y,width:me,height:l.height},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var W=mn(K||G)*(Math.abs(G)-Math.abs(K));X-=W,K+=W}}else{var fe=[o.scale(L[0]),o.scale(L[1])],Se=fe[0],Ie=fe[1];if(Y=Se,X=yA({axis:l,ticks:u,bandSize:s,offset:w.offset,entry:$,index:H}),me=Ie-Se,K=w.size,oe={x:o.x,y:X,width:o.width,height:K},Math.abs(G)>0&&Math.abs(me)<Math.abs(G)){var te=mn(me||G)*(Math.abs(G)-Math.abs(me));me+=te}}return ba(ba(ba({},$),{},{x:Y,y:X,width:me,height:K,value:m?L:L[1],payload:$,background:oe},_&&_[H]&&_[H].props),{},{tooltipPayload:[qT(a,$)],tooltipPosition:{x:Y+me/2,y:X+K/2}})});return ba({data:R,layout:j},x)});function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function oG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K3(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yD(n.key),n)}}function lG(e,t,a){return t&&K3(e.prototype,t),a&&K3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y3(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function js(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(a),!0).forEach(function(n){Uf(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y3(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Uf(e,t,a){return t=yD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yD(e){var t=cG(e,"string");return iu(t)=="symbol"?t:t+""}function cG(e,t){if(iu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dG=function(t,a,n,s,o){var l=t.width,d=t.height,u=t.layout,m=t.children,p=Object.keys(a),f={left:n.left,leftMirror:n.left,right:l-n.right,rightMirror:l-n.right,top:n.top,topMirror:n.top,bottom:d-n.bottom,bottomMirror:d-n.bottom},x=!!Un(m,no);return p.reduce(function(w,j){var v=a[j],b=v.orientation,I=v.domain,T=v.padding,P=T===void 0?{}:T,A=v.mirror,k=v.reversed,E="".concat(b).concat(A?"Mirror":""),_,R,$,H,L;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var Y=I[1]-I[0],X=1/0,me=v.categoricalDomain.sort(NR);if(me.forEach(function(fe,Se){Se>0&&(X=Math.min((fe||0)-(me[Se-1]||0),X))}),Number.isFinite(X)){var K=X/Y,oe=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(_=K*oe/2),v.padding==="no-gap"){var G=hn(t.barCategoryGap,K*oe),B=K*oe/2;_=B-G-(B-G)/oe*G}}}s==="xAxis"?R=[n.left+(P.left||0)+(_||0),n.left+n.width-(P.right||0)-(_||0)]:s==="yAxis"?R=u==="horizontal"?[n.top+n.height-(P.bottom||0),n.top+(P.top||0)]:[n.top+(P.top||0)+(_||0),n.top+n.height-(P.bottom||0)-(_||0)]:R=v.range,k&&(R=[R[1],R[0]]);var F=FT(v,o,x),re=F.scale,U=F.realScaleType;re.domain(I).range(R),BT(re);var ae=UT(re,js(js({},v),{},{realScaleType:U}));s==="xAxis"?(L=b==="top"&&!A||b==="bottom"&&A,$=n.left,H=f[E]-L*v.height):s==="yAxis"&&(L=b==="left"&&!A||b==="right"&&A,$=f[E]-L*v.width,H=n.top);var W=js(js(js({},v),ae),{},{realScaleType:U,x:$,y:H,scale:re,width:s==="xAxis"?n.width:v.width,height:s==="yAxis"?n.height:v.height});return W.bandSize=Ch(W,ae),!v.hide&&s==="xAxis"?f[E]+=(L?-1:1)*W.height:v.hide||(f[E]+=(L?-1:1)*W.width),js(js({},w),{},Uf({},j,W))},{})},bD=function(t,a){var n=t.x,s=t.y,o=a.x,l=a.y;return{x:Math.min(n,o),y:Math.min(s,l),width:Math.abs(o-n),height:Math.abs(l-s)}},uG=function(t){var a=t.x1,n=t.y1,s=t.x2,o=t.y2;return bD({x:a,y:n},{x:s,y:o})},vD=(function(){function e(t){oG(this,e),this.scale=t}return lG(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,o=n.position;if(a!==void 0){if(o)switch(o){case"start":return this.scale(a);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+l}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(a)+d}default:return this.scale(a)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+u}return this.scale(a)}}},{key:"isInRange",value:function(a){var n=this.range(),s=n[0],o=n[n.length-1];return s<=o?a>=s&&a<=o:a>=o&&a<=s}}],[{key:"create",value:function(a){return new e(a)}}])})();Uf(vD,"EPS",1e-4);var Dj=function(t){var a=Object.keys(t).reduce(function(n,s){return js(js({},n),{},Uf({},s,vD.create(t[s])))},{});return js(js({},a),{},{apply:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.bandAware,d=o.position;return LV(s,function(u,m){return a[m].apply(u,{bandAware:l,position:d})})},isInRange:function(s){return fD(s,function(o,l){return a[l].isInRange(o)})}})};function mG(e){return(e%180+180)%180}var hG=function(t){var a=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=mG(s),l=o*Math.PI/180,d=Math.atan(n/a),u=l>d&&l<Math.PI-d?n/Math.sin(l):a/Math.cos(l);return Math.abs(u)},bb,X3;function fG(){if(X3)return bb;X3=1;var e=Ys(),t=vu(),a=bf();function n(s){return function(o,l,d){var u=Object(o);if(!t(o)){var m=e(l,3);o=a(o),l=function(f){return m(u[f],f,u)}}var p=s(o,l,d);return p>-1?u[m?o[p]:p]:void 0}}return bb=n,bb}var vb,J3;function pG(){if(J3)return vb;J3=1;var e=dD();function t(a){var n=e(a),s=n%1;return n===n?s?n-s:n:0}return vb=t,vb}var jb,Z3;function gG(){if(Z3)return jb;Z3=1;var e=vE(),t=Ys(),a=pG(),n=Math.max;function s(o,l,d){var u=o==null?0:o.length;if(!u)return-1;var m=d==null?0:a(d);return m<0&&(m=n(u+m,0)),e(o,t(l,3),m)}return jb=s,jb}var wb,Q3;function xG(){if(Q3)return wb;Q3=1;var e=fG(),t=gG(),a=e(t);return wb=a,wb}var yG=xG();const bG=Sr(yG);var vG=R4();const jG=Sr(vG);var wG=jG(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Oj=S.createContext(void 0),_j=S.createContext(void 0),jD=S.createContext(void 0),wD=S.createContext({}),ND=S.createContext(void 0),SD=S.createContext(0),CD=S.createContext(0),eP=function(t){var a=t.state,n=a.xAxisMap,s=a.yAxisMap,o=a.offset,l=t.clipPathId,d=t.children,u=t.width,m=t.height,p=wG(o);return ge.createElement(Oj.Provider,{value:n},ge.createElement(_j.Provider,{value:s},ge.createElement(wD.Provider,{value:o},ge.createElement(jD.Provider,{value:p},ge.createElement(ND.Provider,{value:l},ge.createElement(SD.Provider,{value:m},ge.createElement(CD.Provider,{value:u},d)))))))},NG=function(){return S.useContext(ND)},kD=function(t){var a=S.useContext(Oj);a==null&&Xo();var n=a[t];return n==null&&Xo(),n},SG=function(){var t=S.useContext(Oj);return Ji(t)},CG=function(){var t=S.useContext(_j),a=bG(t,function(n){return fD(n.domain,Number.isFinite)});return a||Ji(t)},ID=function(t){var a=S.useContext(_j);a==null&&Xo();var n=a[t];return n==null&&Xo(),n},kG=function(){var t=S.useContext(jD);return t},IG=function(){return S.useContext(wD)},Mj=function(){return S.useContext(CD)},Rj=function(){return S.useContext(SD)};function sc(e){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(e)}function AG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PG(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PD(n.key),n)}}function EG(e,t,a){return t&&PG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TG(e,t,a){return t=zh(t),DG(e,AD()?Reflect.construct(t,a||[],zh(e).constructor):t.apply(e,a))}function DG(e,t){if(t&&(sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OG(e)}function OG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AD=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zh(e)}function _G(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},t1(e,t)}function tP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function rP(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(a),!0).forEach(function(n){$j(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function $j(e,t,a){return t=PD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PD(e){var t=MG(e,"string");return sc(t)=="symbol"?t:t+""}function MG(e,t){if(sc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RG(e,t){return BG(e)||FG(e,t)||LG(e,t)||$G()}function $G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LG(e,t){if(e){if(typeof e=="string")return aP(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return aP(e,t)}}function aP(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function FG(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function BG(e){if(Array.isArray(e))return e}function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r1.apply(this,arguments)}var UG=function(t,a){var n;return ge.isValidElement(t)?n=ge.cloneElement(t,a):Gt(t)?n=t(a):n=ge.createElement("line",r1({},a,{className:"recharts-reference-line-line"})),n},zG=function(t,a,n,s,o,l,d,u,m){var p=o.x,f=o.y,x=o.width,w=o.height;if(n){var j=m.y,v=t.y.apply(j,{position:l});if(Hs(m,"discard")&&!t.y.isInRange(v))return null;var b=[{x:p+x,y:v},{x:p,y:v}];return u==="left"?b.reverse():b}if(a){var I=m.x,T=t.x.apply(I,{position:l});if(Hs(m,"discard")&&!t.x.isInRange(T))return null;var P=[{x:T,y:f+w},{x:T,y:f}];return d==="top"?P.reverse():P}if(s){var A=m.segment,k=A.map(function(E){return t.apply(E,{position:l})});return Hs(m,"discard")&&_V(k,function(E){return!t.isInRange(E)})?null:k}return null};function qG(e){var t=e.x,a=e.y,n=e.segment,s=e.xAxisId,o=e.yAxisId,l=e.shape,d=e.className,u=e.alwaysShow,m=NG(),p=kD(s),f=ID(o),x=kG();if(!m||!x)return null;Ss(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var w=Dj({x:p.scale,y:f.scale}),j=ka(t),v=ka(a),b=n&&n.length===2,I=zG(w,j,v,b,x,e.position,p.orientation,f.orientation,e);if(!I)return null;var T=RG(I,2),P=T[0],A=P.x,k=P.y,E=T[1],_=E.x,R=E.y,$=Hs(e,"hidden")?"url(#".concat(m,")"):void 0,H=rP(rP({clipPath:$},qt(e,!0)),{},{x1:A,y1:k,x2:_,y2:R});return ge.createElement(Ir,{className:sr("recharts-reference-line",d)},UG(l,H),Ra.renderCallByParent(e,uG({x1:A,y1:k,x2:_,y2:R})))}var Lj=(function(e){function t(){return AG(this,t),TG(this,t,arguments)}return _G(t,e),EG(t,[{key:"render",value:function(){return ge.createElement(qG,this.props)}}])})(ge.Component);$j(Lj,"displayName","ReferenceLine");$j(Lj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a1.apply(this,arguments)}function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}function nP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function sP(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(a),!0).forEach(function(n){zf(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function HG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WG(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TD(n.key),n)}}function VG(e,t,a){return t&&WG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GG(e,t,a){return t=qh(t),KG(e,ED()?Reflect.construct(t,a||[],qh(e).constructor):t.apply(e,a))}function KG(e,t){if(t&&(ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YG(e)}function YG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ED=function(){return!!e})()}function qh(e){return qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qh(e)}function XG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n1(e,t)}function n1(e,t){return n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},n1(e,t)}function zf(e,t,a){return t=TD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TD(e){var t=JG(e,"string");return ic(t)=="symbol"?t:t+""}function JG(e,t){if(ic(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZG=function(t){var a=t.x,n=t.y,s=t.xAxis,o=t.yAxis,l=Dj({x:s.scale,y:o.scale}),d=l.apply({x:a,y:n},{bandAware:!0});return Hs(t,"discard")&&!l.isInRange(d)?null:d},qf=(function(e){function t(){return HG(this,t),GG(this,t,arguments)}return XG(t,e),VG(t,[{key:"render",value:function(){var n=this.props,s=n.x,o=n.y,l=n.r,d=n.alwaysShow,u=n.clipPathId,m=ka(s),p=ka(o);if(Ss(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!m||!p)return null;var f=ZG(this.props);if(!f)return null;var x=f.x,w=f.y,j=this.props,v=j.shape,b=j.className,I=Hs(this.props,"hidden")?"url(#".concat(u,")"):void 0,T=sP(sP({clipPath:I},qt(this.props,!0)),{},{cx:x,cy:w});return ge.createElement(Ir,{className:sr("recharts-reference-dot",b)},t.renderDot(v,T),Ra.renderCallByParent(this.props,{x:x-l,y:w-l,width:2*l,height:2*l}))}}])})(ge.Component);zf(qf,"displayName","ReferenceDot");zf(qf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zf(qf,"renderDot",function(e,t){var a;return ge.isValidElement(e)?a=ge.cloneElement(e,t):Gt(e)?a=e(t):a=ge.createElement(Tj,a1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),a});function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s1.apply(this,arguments)}function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function iP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function oP(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(a),!0).forEach(function(n){Hf(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function QG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eK(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OD(n.key),n)}}function tK(e,t,a){return t&&eK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rK(e,t,a){return t=Hh(t),aK(e,DD()?Reflect.construct(t,a||[],Hh(e).constructor):t.apply(e,a))}function aK(e,t){if(t&&(oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nK(e)}function nK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DD=function(){return!!e})()}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hh(e)}function sK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i1(e,t)}function i1(e,t){return i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},i1(e,t)}function Hf(e,t,a){return t=OD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OD(e){var t=iK(e,"string");return oc(t)=="symbol"?t:t+""}function iK(e,t){if(oc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oK=function(t,a,n,s,o){var l=o.x1,d=o.x2,u=o.y1,m=o.y2,p=o.xAxis,f=o.yAxis;if(!p||!f)return null;var x=Dj({x:p.scale,y:f.scale}),w={x:t?x.x.apply(l,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(u,{position:"start"}):x.y.rangeMin},j={x:a?x.x.apply(d,{position:"end"}):x.x.rangeMax,y:s?x.y.apply(m,{position:"end"}):x.y.rangeMax};return Hs(o,"discard")&&(!x.isInRange(w)||!x.isInRange(j))?null:bD(w,j)},Wf=(function(e){function t(){return QG(this,t),rK(this,t,arguments)}return sK(t,e),tK(t,[{key:"render",value:function(){var n=this.props,s=n.x1,o=n.x2,l=n.y1,d=n.y2,u=n.className,m=n.alwaysShow,p=n.clipPathId;Ss(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ka(s),x=ka(o),w=ka(l),j=ka(d),v=this.props.shape;if(!f&&!x&&!w&&!j&&!v)return null;var b=oK(f,x,w,j,this.props);if(!b&&!v)return null;var I=Hs(this.props,"hidden")?"url(#".concat(p,")"):void 0;return ge.createElement(Ir,{className:sr("recharts-reference-area",u)},t.renderRect(v,oP(oP({clipPath:I},qt(this.props,!0)),b)),Ra.renderCallByParent(this.props,b))}}])})(ge.Component);Hf(Wf,"displayName","ReferenceArea");Hf(Wf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hf(Wf,"renderRect",function(e,t){var a;return ge.isValidElement(e)?a=ge.cloneElement(e,t):Gt(e)?a=e(t):a=ge.createElement(Ej,s1({},t,{className:"recharts-reference-area-rect"})),a});function _D(e,t,a){if(t<1)return[];if(t===1&&a===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function lK(e,t,a){var n={width:e.width+t.width,height:e.height+t.height};return hG(n,a)}function cK(e,t,a){var n=a==="width",s=e.x,o=e.y,l=e.width,d=e.height;return t===1?{start:n?s:o,end:n?s+l:o+d}:{start:n?s+l:o+d,end:n?s:o}}function Wh(e,t,a,n,s){if(e*t<e*n||e*t>e*s)return!1;var o=a();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-s)<=0}function dK(e,t){return _D(e,t+1)}function uK(e,t,a,n,s){for(var o=(n||[]).slice(),l=t.start,d=t.end,u=0,m=1,p=l,f=function(){var j=n?.[u];if(j===void 0)return{v:_D(n,m)};var v=u,b,I=function(){return b===void 0&&(b=a(j,v)),b},T=j.coordinate,P=u===0||Wh(e,T,I,p,d);P||(u=0,p=l,m+=1),P&&(p=T+e*(I()/2+s),u+=m)},x;m<=o.length;)if(x=f(),x)return x.v;return[]}function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function lP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function en(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(a),!0).forEach(function(n){mK(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function mK(e,t,a){return t=hK(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hK(e){var t=fK(e,"string");return ou(t)=="symbol"?t:t+""}function fK(e,t){if(ou(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pK(e,t,a,n,s){for(var o=(n||[]).slice(),l=o.length,d=t.start,u=t.end,m=function(x){var w=o[x],j,v=function(){return j===void 0&&(j=a(w,x)),j};if(x===l-1){var b=e*(w.coordinate+e*v()/2-u);o[x]=w=en(en({},w),{},{tickCoord:b>0?w.coordinate-b*e:w.coordinate})}else o[x]=w=en(en({},w),{},{tickCoord:w.coordinate});var I=Wh(e,w.tickCoord,v,d,u);I&&(u=w.tickCoord-e*(v()/2+s),o[x]=en(en({},w),{},{isShow:!0}))},p=l-1;p>=0;p--)m(p);return o}function gK(e,t,a,n,s,o){var l=(n||[]).slice(),d=l.length,u=t.start,m=t.end;if(o){var p=n[d-1],f=a(p,d-1),x=e*(p.coordinate+e*f/2-m);l[d-1]=p=en(en({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate});var w=Wh(e,p.tickCoord,function(){return f},u,m);w&&(m=p.tickCoord-e*(f/2+s),l[d-1]=en(en({},p),{},{isShow:!0}))}for(var j=o?d-1:d,v=function(T){var P=l[T],A,k=function(){return A===void 0&&(A=a(P,T)),A};if(T===0){var E=e*(P.coordinate-e*k()/2-u);l[T]=P=en(en({},P),{},{tickCoord:E<0?P.coordinate-E*e:P.coordinate})}else l[T]=P=en(en({},P),{},{tickCoord:P.coordinate});var _=Wh(e,P.tickCoord,k,u,m);_&&(u=P.tickCoord+e*(k()/2+s),l[T]=en(en({},P),{},{isShow:!0}))},b=0;b<j;b++)v(b);return l}function Fj(e,t,a){var n=e.tick,s=e.ticks,o=e.viewBox,l=e.minTickGap,d=e.orientation,u=e.interval,m=e.tickFormatter,p=e.unit,f=e.angle;if(!s||!s.length||!n)return[];if(ht(u)||vc.isSsr)return dK(s,typeof u=="number"&&ht(u)?u:0);var x=[],w=d==="top"||d==="bottom"?"width":"height",j=p&&w==="width"?bd(p,{fontSize:t,letterSpacing:a}):{width:0,height:0},v=function(P,A){var k=Gt(m)?m(P.value,A):P.value;return w==="width"?lK(bd(k,{fontSize:t,letterSpacing:a}),j,f):bd(k,{fontSize:t,letterSpacing:a})[w]},b=s.length>=2?mn(s[1].coordinate-s[0].coordinate):1,I=cK(o,b,w);return u==="equidistantPreserveStart"?uK(b,I,v,s,l):(u==="preserveStart"||u==="preserveStartEnd"?x=gK(b,I,v,s,l,u==="preserveStartEnd"):x=pK(b,I,v,s,l),x.filter(function(T){return T.isShow}))}var xK=["viewBox"],yK=["viewBox"],bK=["ticks"];function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_l.apply(this,arguments)}function cP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Sa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(a),!0).forEach(function(n){Bj(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Nb(e,t){if(e==null)return{};var a=vK(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vK(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function jK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dP(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RD(n.key),n)}}function wK(e,t,a){return t&&dP(e.prototype,t),a&&dP(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function NK(e,t,a){return t=Vh(t),SK(e,MD()?Reflect.construct(t,a||[],Vh(e).constructor):t.apply(e,a))}function SK(e,t){if(t&&(lc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CK(e)}function CK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!e})()}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Vh(e)}function kK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o1(e,t)}function o1(e,t){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},o1(e,t)}function Bj(e,t,a){return t=RD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RD(e){var t=IK(e,"string");return lc(t)=="symbol"?t:t+""}function IK(e,t){if(lc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sc=(function(e){function t(a){var n;return jK(this,t),n=NK(this,t,[a]),n.state={fontSize:"",letterSpacing:""},n}return kK(t,e),wK(t,[{key:"shouldComponentUpdate",value:function(n,s){var o=n.viewBox,l=Nb(n,xK),d=this.props,u=d.viewBox,m=Nb(d,yK);return!$l(o,u)||!$l(l,m)||!$l(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.x,l=s.y,d=s.width,u=s.height,m=s.orientation,p=s.tickSize,f=s.mirror,x=s.tickMargin,w,j,v,b,I,T,P=f?-1:1,A=n.tickSize||p,k=ht(n.tickCoord)?n.tickCoord:n.coordinate;switch(m){case"top":w=j=n.coordinate,b=l+ +!f*u,v=b-P*A,T=v-P*x,I=k;break;case"left":v=b=n.coordinate,j=o+ +!f*d,w=j-P*A,I=w-P*x,T=k;break;case"right":v=b=n.coordinate,j=o+ +f*d,w=j+P*A,I=w+P*x,T=k;break;default:w=j=n.coordinate,b=l+ +f*u,v=b+P*A,T=v+P*x,I=k;break}return{line:{x1:w,y1:v,x2:j,y2:b},tick:{x:I,y:T}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,l;switch(s){case"left":l=o?"start":"end";break;case"right":l=o?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=o?"start":"end";break;default:l=o?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,d=n.height,u=n.orientation,m=n.mirror,p=n.axisLine,f=Sa(Sa(Sa({},qt(this.props,!1)),qt(p,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var x=+(u==="top"&&!m||u==="bottom"&&m);f=Sa(Sa({},f),{},{x1:s,y1:o+x*d,x2:s+l,y2:o+x*d})}else{var w=+(u==="left"&&!m||u==="right"&&m);f=Sa(Sa({},f),{},{x1:s+w*l,y1:o,x2:s+w*l,y2:o+d})}return ge.createElement("line",_l({},f,{className:sr("recharts-cartesian-axis-line",Wn(p,"className"))}))}},{key:"renderTicks",value:function(n,s,o){var l=this,d=this.props,u=d.tickLine,m=d.stroke,p=d.tick,f=d.tickFormatter,x=d.unit,w=Fj(Sa(Sa({},this.props),{},{ticks:n}),s,o),j=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),b=qt(this.props,!1),I=qt(p,!1),T=Sa(Sa({},b),{},{fill:"none"},qt(u,!1)),P=w.map(function(A,k){var E=l.getTickLineCoord(A),_=E.line,R=E.tick,$=Sa(Sa(Sa(Sa({textAnchor:j,verticalAnchor:v},b),{},{stroke:"none",fill:m},I),R),{},{index:k,payload:A,visibleTicksCount:w.length,tickFormatter:f});return ge.createElement(Ir,_l({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Go(l.props,A,k)),u&&ge.createElement("line",_l({},T,_,{className:sr("recharts-cartesian-axis-tick-line",Wn(u,"className"))})),p&&t.renderTickItem(p,$,"".concat(Gt(f)?f(A.value,k):A.value).concat(x||"")))});return ge.createElement("g",{className:"recharts-cartesian-axis-ticks"},P)}},{key:"render",value:function(){var n=this,s=this.props,o=s.axisLine,l=s.width,d=s.height,u=s.ticksGenerator,m=s.className,p=s.hide;if(p)return null;var f=this.props,x=f.ticks,w=Nb(f,bK),j=x;return Gt(u)&&(j=x&&x.length>0?u(this.props):u(w)),l<=0||d<=0||!j||!j.length?null:ge.createElement(Ir,{className:sr("recharts-cartesian-axis",m),ref:function(b){n.layerReference=b}},o&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),Ra.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,o){var l,d=sr(s.className,"recharts-cartesian-axis-tick-value");return ge.isValidElement(n)?l=ge.cloneElement(n,Sa(Sa({},s),{},{className:d})):Gt(n)?l=n(Sa(Sa({},s),{},{className:d})):l=ge.createElement(Ko,_l({},s,{className:"recharts-cartesian-axis-tick-value"}),o),l}}])})(S.Component);Bj(Sc,"displayName","CartesianAxis");Bj(Sc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var AK=["x1","y1","x2","y2","key"],PK=["offset"];function Jo(e){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jo(e)}function uP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function tn(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(a),!0).forEach(function(n){EK(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function EK(e,t,a){return t=TK(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TK(e){var t=DK(e,"string");return Jo(t)=="symbol"?t:t+""}function DK(e,t){if(Jo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Lo.apply(this,arguments)}function mP(e,t){if(e==null)return{};var a=OK(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function OK(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var _K=function(t){var a=t.fill;if(!a||a==="none")return null;var n=t.fillOpacity,s=t.x,o=t.y,l=t.width,d=t.height,u=t.ry;return ge.createElement("rect",{x:s,y:o,ry:u,width:l,height:d,stroke:"none",fill:a,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function $D(e,t){var a;if(ge.isValidElement(e))a=ge.cloneElement(e,t);else if(Gt(e))a=e(t);else{var n=t.x1,s=t.y1,o=t.x2,l=t.y2,d=t.key,u=mP(t,AK),m=qt(u,!1);m.offset;var p=mP(m,PK);a=ge.createElement("line",Lo({},p,{x1:n,y1:s,x2:o,y2:l,fill:"none",key:d}))}return a}function MK(e){var t=e.x,a=e.width,n=e.horizontal,s=n===void 0?!0:n,o=e.horizontalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(d,u){var m=tn(tn({},e),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return $D(s,m)});return ge.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function RK(e){var t=e.y,a=e.height,n=e.vertical,s=n===void 0?!0:n,o=e.verticalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(d,u){var m=tn(tn({},e),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return $D(s,m)});return ge.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function $K(e){var t=e.horizontalFill,a=e.fillOpacity,n=e.x,s=e.y,o=e.width,l=e.height,d=e.horizontalPoints,u=e.horizontal,m=u===void 0?!0:u;if(!m||!t||!t.length)return null;var p=d.map(function(x){return Math.round(x+s-s)}).sort(function(x,w){return x-w});s!==p[0]&&p.unshift(0);var f=p.map(function(x,w){var j=!p[w+1],v=j?s+l-x:p[w+1]-x;if(v<=0)return null;var b=w%t.length;return ge.createElement("rect",{key:"react-".concat(w),y:x,x:n,height:v,width:o,stroke:"none",fill:t[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ge.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function LK(e){var t=e.vertical,a=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,o=e.x,l=e.y,d=e.width,u=e.height,m=e.verticalPoints;if(!a||!n||!n.length)return null;var p=m.map(function(x){return Math.round(x+o-o)}).sort(function(x,w){return x-w});o!==p[0]&&p.unshift(0);var f=p.map(function(x,w){var j=!p[w+1],v=j?o+d-x:p[w+1]-x;if(v<=0)return null;var b=w%n.length;return ge.createElement("rect",{key:"react-".concat(w),x,y:l,width:v,height:u,stroke:"none",fill:n[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ge.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var FK=function(t,a){var n=t.xAxis,s=t.width,o=t.height,l=t.offset;return LT(Fj(tn(tn(tn({},Sc.defaultProps),n),{},{ticks:pi(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.left,l.left+l.width,a)},BK=function(t,a){var n=t.yAxis,s=t.width,o=t.height,l=t.offset;return LT(Fj(tn(tn(tn({},Sc.defaultProps),n),{},{ticks:pi(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.top,l.top+l.height,a)},Pl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function l1(e){var t,a,n,s,o,l,d=Mj(),u=Rj(),m=IG(),p=tn(tn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Pl.stroke,fill:(a=e.fill)!==null&&a!==void 0?a:Pl.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Pl.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Pl.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:Pl.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:Pl.verticalFill,x:ht(e.x)?e.x:m.left,y:ht(e.y)?e.y:m.top,width:ht(e.width)?e.width:m.width,height:ht(e.height)?e.height:m.height}),f=p.x,x=p.y,w=p.width,j=p.height,v=p.syncWithTicks,b=p.horizontalValues,I=p.verticalValues,T=SG(),P=CG();if(!ht(w)||w<=0||!ht(j)||j<=0||!ht(f)||f!==+f||!ht(x)||x!==+x)return null;var A=p.verticalCoordinatesGenerator||FK,k=p.horizontalCoordinatesGenerator||BK,E=p.horizontalPoints,_=p.verticalPoints;if((!E||!E.length)&&Gt(k)){var R=b&&b.length,$=k({yAxis:P?tn(tn({},P),{},{ticks:R?b:P.ticks}):void 0,width:d,height:u,offset:m},R?!0:v);Ss(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jo($),"]")),Array.isArray($)&&(E=$)}if((!_||!_.length)&&Gt(A)){var H=I&&I.length,L=A({xAxis:T?tn(tn({},T),{},{ticks:H?I:T.ticks}):void 0,width:d,height:u,offset:m},H?!0:v);Ss(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jo(L),"]")),Array.isArray(L)&&(_=L)}return ge.createElement("g",{className:"recharts-cartesian-grid"},ge.createElement(_K,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),ge.createElement(MK,Lo({},p,{offset:m,horizontalPoints:E,xAxis:T,yAxis:P})),ge.createElement(RK,Lo({},p,{offset:m,verticalPoints:_,xAxis:T,yAxis:P})),ge.createElement($K,Lo({},p,{horizontalPoints:E})),ge.createElement(LK,Lo({},p,{verticalPoints:_})))}l1.displayName="CartesianGrid";function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function UK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zK(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BD(n.key),n)}}function qK(e,t,a){return t&&zK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HK(e,t,a){return t=Gh(t),WK(e,LD()?Reflect.construct(t,a||[],Gh(e).constructor):t.apply(e,a))}function WK(e,t){if(t&&(cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VK(e)}function VK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LD=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Gh(e)}function GK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},c1(e,t)}function FD(e,t,a){return t=BD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function BD(e){var t=KK(e,"string");return cc(t)=="symbol"?t:t+""}function KK(e,t){if(cc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d1.apply(this,arguments)}function YK(e){var t=e.xAxisId,a=Mj(),n=Rj(),s=kD(t);return s==null?null:S.createElement(Sc,d1({},s,{className:sr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:n},ticksGenerator:function(l){return pi(l,!0)}}))}var lu=(function(e){function t(){return UK(this,t),HK(this,t,arguments)}return GK(t,e),qK(t,[{key:"render",value:function(){return S.createElement(YK,this.props)}}])})(S.Component);FD(lu,"displayName","XAxis");FD(lu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function XK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JK(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qD(n.key),n)}}function ZK(e,t,a){return t&&JK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QK(e,t,a){return t=Kh(t),eY(e,UD()?Reflect.construct(t,a||[],Kh(e).constructor):t.apply(e,a))}function eY(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tY(e)}function tY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UD=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Kh(e)}function rY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},u1(e,t)}function zD(e,t,a){return t=qD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qD(e){var t=aY(e,"string");return dc(t)=="symbol"?t:t+""}function aY(e,t){if(dc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m1.apply(this,arguments)}var nY=function(t){var a=t.yAxisId,n=Mj(),s=Rj(),o=ID(a);return o==null?null:S.createElement(Sc,m1({},o,{className:sr("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(d){return pi(d,!0)}}))},cu=(function(e){function t(){return XK(this,t),QK(this,t,arguments)}return rY(t,e),ZK(t,[{key:"render",value:function(){return S.createElement(nY,this.props)}}])})(S.Component);zD(cu,"displayName","YAxis");zD(cu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function hP(e){return lY(e)||oY(e)||iY(e)||sY()}function sY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){if(e){if(typeof e=="string")return h1(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h1(e,t)}}function oY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lY(e){if(Array.isArray(e))return h1(e)}function h1(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f1=function(t,a,n,s,o){var l=os(t,Lj),d=os(t,qf),u=[].concat(hP(l),hP(d)),m=os(t,Wf),p="".concat(s,"Id"),f=s[0],x=a;if(u.length&&(x=u.reduce(function(v,b){if(b.props[p]===n&&Hs(b.props,"extendDomain")&&ht(b.props[f])){var I=b.props[f];return[Math.min(v[0],I),Math.max(v[1],I)]}return v},x)),m.length){var w="".concat(f,"1"),j="".concat(f,"2");x=m.reduce(function(v,b){if(b.props[p]===n&&Hs(b.props,"extendDomain")&&ht(b.props[w])&&ht(b.props[j])){var I=b.props[w],T=b.props[j];return[Math.min(v[0],I,T),Math.max(v[1],I,T)]}return v},x)}return o&&o.length&&(x=o.reduce(function(v,b){return ht(b)?[Math.min(v[0],b),Math.max(v[1],b)]:v},x)),x},Sb={exports:{}},fP;function cY(){return fP||(fP=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(a=!1));function s(u,m,p){this.fn=u,this.context=m,this.once=p||!1}function o(u,m,p,f,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var w=new s(p,f||u,x),j=a?a+m:m;return u._events[j]?u._events[j].fn?u._events[j]=[u._events[j],w]:u._events[j].push(w):(u._events[j]=w,u._eventsCount++),u}function l(u,m){--u._eventsCount===0?u._events=new n:delete u._events[m]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],p,f;if(this._eventsCount===0)return m;for(f in p=this._events)t.call(p,f)&&m.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(p)):m},d.prototype.listeners=function(m){var p=a?a+m:m,f=this._events[p];if(!f)return[];if(f.fn)return[f.fn];for(var x=0,w=f.length,j=new Array(w);x<w;x++)j[x]=f[x].fn;return j},d.prototype.listenerCount=function(m){var p=a?a+m:m,f=this._events[p];return f?f.fn?1:f.length:0},d.prototype.emit=function(m,p,f,x,w,j){var v=a?a+m:m;if(!this._events[v])return!1;var b=this._events[v],I=arguments.length,T,P;if(b.fn){switch(b.once&&this.removeListener(m,b.fn,void 0,!0),I){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,p),!0;case 3:return b.fn.call(b.context,p,f),!0;case 4:return b.fn.call(b.context,p,f,x),!0;case 5:return b.fn.call(b.context,p,f,x,w),!0;case 6:return b.fn.call(b.context,p,f,x,w,j),!0}for(P=1,T=new Array(I-1);P<I;P++)T[P-1]=arguments[P];b.fn.apply(b.context,T)}else{var A=b.length,k;for(P=0;P<A;P++)switch(b[P].once&&this.removeListener(m,b[P].fn,void 0,!0),I){case 1:b[P].fn.call(b[P].context);break;case 2:b[P].fn.call(b[P].context,p);break;case 3:b[P].fn.call(b[P].context,p,f);break;case 4:b[P].fn.call(b[P].context,p,f,x);break;default:if(!T)for(k=1,T=new Array(I-1);k<I;k++)T[k-1]=arguments[k];b[P].fn.apply(b[P].context,T)}}return!0},d.prototype.on=function(m,p,f){return o(this,m,p,f,!1)},d.prototype.once=function(m,p,f){return o(this,m,p,f,!0)},d.prototype.removeListener=function(m,p,f,x){var w=a?a+m:m;if(!this._events[w])return this;if(!p)return l(this,w),this;var j=this._events[w];if(j.fn)j.fn===p&&(!x||j.once)&&(!f||j.context===f)&&l(this,w);else{for(var v=0,b=[],I=j.length;v<I;v++)(j[v].fn!==p||x&&!j[v].once||f&&j[v].context!==f)&&b.push(j[v]);b.length?this._events[w]=b.length===1?b[0]:b:l(this,w)}return this},d.prototype.removeAllListeners=function(m){var p;return m?(p=a?a+m:m,this._events[p]&&l(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=a,d.EventEmitter=d,e.exports=d})(Sb)),Sb.exports}var dY=cY();const uY=Sr(dY);var Cb=new uY,kb="recharts.syncMouseEvents";function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function mY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hY(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HD(n.key),n)}}function fY(e,t,a){return t&&hY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ib(e,t,a){return t=HD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HD(e){var t=pY(e,"string");return du(t)=="symbol"?t:t+""}function pY(e,t){if(du(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gY=(function(){function e(){mY(this,e),Ib(this,"activeIndex",0),Ib(this,"coordinateList",[]),Ib(this,"layout","horizontal")}return fY(e,[{key:"setDetails",value:function(a){var n,s=a.coordinateList,o=s===void 0?null:s,l=a.container,d=l===void 0?null:l,u=a.layout,m=u===void 0?null:u,p=a.offset,f=p===void 0?null:p,x=a.mouseHandlerCallback,w=x===void 0?null:x;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=d??this.container,this.layout=m??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=w??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),o=s.x,l=s.y,d=s.height,u=this.coordinateList[this.activeIndex].coordinate,m=((a=window)===null||a===void 0?void 0:a.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+u+m,x=l+this.offset.top+d/2+p;this.mouseHandlerCallback({pageX:f,pageY:x})}}}])})();function xY(e,t,a){if(a==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&ht(n)&&ht(s))return!0}return!1}function yY(e,t,a,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-s,width:e==="horizontal"?n:a.width-1,height:e==="horizontal"?a.height-1:n}}function WD(e){var t=e.cx,a=e.cy,n=e.radius,s=e.startAngle,o=e.endAngle,l=Fr(t,a,n,s),d=Fr(t,a,n,o);return{points:[l,d],cx:t,cy:a,radius:n,startAngle:s,endAngle:o}}function bY(e,t,a){var n,s,o,l;if(e==="horizontal")n=t.x,o=n,s=a.top,l=a.top+a.height;else if(e==="vertical")s=t.y,l=s,n=a.left,o=a.left+a.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var d=t.cx,u=t.cy,m=t.innerRadius,p=t.outerRadius,f=t.angle,x=Fr(d,u,m,f),w=Fr(d,u,p,f);n=x.x,s=x.y,o=w.x,l=w.y}else return WD(t);return[{x:n,y:s},{x:o,y:l}]}function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function pP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Bm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(a),!0).forEach(function(n){vY(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function vY(e,t,a){return t=jY(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jY(e){var t=wY(e,"string");return uu(t)=="symbol"?t:t+""}function wY(e,t){if(uu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NY(e){var t,a,n=e.element,s=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,d=e.activePayload,u=e.offset,m=e.activeTooltipIndex,p=e.tooltipAxisBandSize,f=e.layout,x=e.chartName,w=(t=n.props.cursor)!==null&&t!==void 0?t:(a=n.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!n||!w||!o||!l||x!=="ScatterChart"&&s!=="axis")return null;var j,v=Rv;if(x==="ScatterChart")j=l,v=nW;else if(x==="BarChart")j=yY(f,l,u,p),v=Ej;else if(f==="radial"){var b=WD(l),I=b.cx,T=b.cy,P=b.radius,A=b.startAngle,k=b.endAngle;j={cx:I,cy:T,startAngle:A,endAngle:k,innerRadius:P,outerRadius:P},v=YT}else j={points:bY(f,l,u)},v=Rv;var E=Bm(Bm(Bm(Bm({stroke:"#ccc",pointerEvents:"none"},u),j),qt(w,!1)),{},{payload:d,payloadIndex:m,className:sr("recharts-tooltip-cursor",w.className)});return S.isValidElement(w)?S.cloneElement(w,E):S.createElement(v,E)}var SY=["item"],CY=["children","className","width","height","style","compact","title","desc"];function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ml.apply(this,arguments)}function gP(e,t){return AY(e)||IY(e,t)||GD(e,t)||kY()}function kY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IY(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,o,l,d=[],u=!0,m=!1;try{if(o=(a=a.call(e)).next,t!==0)for(;!(u=(n=o.call(a)).done)&&(d.push(n.value),d.length!==t);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function AY(e){if(Array.isArray(e))return e}function xP(e,t){if(e==null)return{};var a=PY(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function PY(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function EY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TY(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KD(n.key),n)}}function DY(e,t,a){return t&&TY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OY(e,t,a){return t=Yh(t),_Y(e,VD()?Reflect.construct(t,a||[],Yh(e).constructor):t.apply(e,a))}function _Y(e,t){if(t&&(uc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MY(e)}function MY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VD=function(){return!!e})()}function Yh(e){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Yh(e)}function RY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p1(e,t)}function p1(e,t){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},p1(e,t)}function mc(e){return FY(e)||LY(e)||GD(e)||$Y()}function $Y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GD(e,t){if(e){if(typeof e=="string")return g1(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g1(e,t)}}function LY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FY(e){if(Array.isArray(e))return g1(e)}function g1(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function yP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(a),!0).forEach(function(n){zt(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function zt(e,t,a){return t=KD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KD(e){var t=BY(e,"string");return uc(t)=="symbol"?t:t+""}function BY(e,t){if(uc(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UY={xAxis:["bottom","top"],yAxis:["left","right"]},zY={width:"100%",height:"100%"},YD={x:0,y:0};function Um(e){return e}var qY=function(t,a){return a==="horizontal"?t.x:a==="vertical"?t.y:a==="centric"?t.angle:t.radius},HY=function(t,a,n,s){var o=a.find(function(p){return p&&p.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:o.coordinate};if(t==="centric"){var l=o.coordinate,d=s.radius;return Je(Je(Je({},s),Fr(s.cx,s.cy,d,l)),{},{angle:l,radius:d})}var u=o.coordinate,m=s.angle;return Je(Je(Je({},s),Fr(s.cx,s.cy,u,m)),{},{angle:m,radius:u})}return YD},Vf=function(t,a){var n=a.graphicalItems,s=a.dataStartIndex,o=a.dataEndIndex,l=(n??[]).reduce(function(d,u){var m=u.props.data;return m&&m.length?[].concat(mc(d),mc(m)):d},[]);return l.length>0?l:t&&t.length&&ht(s)&&ht(o)?t.slice(s,o+1):[]};function XD(e){return e==="number"?[0,"auto"]:void 0}var x1=function(t,a,n,s){var o=t.graphicalItems,l=t.tooltipAxis,d=Vf(a,t);return n<0||!o||!o.length||n>=d.length?null:o.reduce(function(u,m){var p,f=(p=m.props.data)!==null&&p!==void 0?p:a;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var x;if(l.dataKey&&!l.allowDuplicatedCategory){var w=f===void 0?d:f;x=Jb(w,l.dataKey,s)}else x=f&&f[n]||d[n];return x?[].concat(mc(u),[qT(m,x)]):u},[])},bP=function(t,a,n,s){var o=s||{x:t.chartX,y:t.chartY},l=qY(o,n),d=t.orderedTooltipTicks,u=t.tooltipAxis,m=t.tooltipTicks,p=AU(l,d,m,u);if(p>=0&&m){var f=m[p]&&m[p].value,x=x1(t,a,p,f),w=HY(n,d,p,o);return{activeTooltipIndex:p,activeLabel:f,activePayload:x,activeCoordinate:w}}return null},WY=function(t,a){var n=a.axes,s=a.graphicalItems,o=a.axisType,l=a.axisIdKey,d=a.stackGroups,u=a.dataStartIndex,m=a.dataEndIndex,p=t.layout,f=t.children,x=t.stackOffset,w=$T(p,o);return n.reduce(function(j,v){var b,I=v.type.defaultProps!==void 0?Je(Je({},v.type.defaultProps),v.props):v.props,T=I.type,P=I.dataKey,A=I.allowDataOverflow,k=I.allowDuplicatedCategory,E=I.scale,_=I.ticks,R=I.includeHidden,$=I[l];if(j[$])return j;var H=Vf(t.data,{graphicalItems:s.filter(function(ae){var W,fe=l in ae.props?ae.props[l]:(W=ae.type.defaultProps)===null||W===void 0?void 0:W[l];return fe===$}),dataStartIndex:u,dataEndIndex:m}),L=H.length,Y,X,me;xY(I.domain,A,T)&&(Y=Tv(I.domain,null,A),w&&(T==="number"||E!=="auto")&&(me=jd(H,P,"category")));var K=XD(T);if(!Y||Y.length===0){var oe,G=(oe=I.domain)!==null&&oe!==void 0?oe:K;if(P){if(Y=jd(H,P,T),T==="category"&&w){var B=wR(Y);k&&B?(X=Y,Y=$h(0,L)):k||(Y=jA(G,Y,v).reduce(function(ae,W){return ae.indexOf(W)>=0?ae:[].concat(mc(ae),[W])},[]))}else if(T==="category")k?Y=Y.filter(function(ae){return ae!==""&&!cr(ae)}):Y=jA(G,Y,v).reduce(function(ae,W){return ae.indexOf(W)>=0||W===""||cr(W)?ae:[].concat(mc(ae),[W])},[]);else if(T==="number"){var F=OU(H,s.filter(function(ae){var W,fe,Se=l in ae.props?ae.props[l]:(W=ae.type.defaultProps)===null||W===void 0?void 0:W[l],Ie="hide"in ae.props?ae.props.hide:(fe=ae.type.defaultProps)===null||fe===void 0?void 0:fe.hide;return Se===$&&(R||!Ie)}),P,o,p);F&&(Y=F)}w&&(T==="number"||E!=="auto")&&(me=jd(H,P,"category"))}else w?Y=$h(0,L):d&&d[$]&&d[$].hasStack&&T==="number"?Y=x==="expand"?[0,1]:zT(d[$].stackGroups,u,m):Y=RT(H,s.filter(function(ae){var W=l in ae.props?ae.props[l]:ae.type.defaultProps[l],fe="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return W===$&&(R||!fe)}),T,p,!0);if(T==="number")Y=f1(f,Y,$,o,_),G&&(Y=Tv(G,Y,A));else if(T==="category"&&G){var re=G,U=Y.every(function(ae){return re.indexOf(ae)>=0});U&&(Y=re)}}return Je(Je({},j),{},zt({},$,Je(Je({},I),{},{axisType:o,domain:Y,categoricalDomain:me,duplicateDomain:X,originalDomain:(b=I.domain)!==null&&b!==void 0?b:K,isCategorical:w,layout:p})))},{})},VY=function(t,a){var n=a.graphicalItems,s=a.Axis,o=a.axisType,l=a.axisIdKey,d=a.stackGroups,u=a.dataStartIndex,m=a.dataEndIndex,p=t.layout,f=t.children,x=Vf(t.data,{graphicalItems:n,dataStartIndex:u,dataEndIndex:m}),w=x.length,j=$T(p,o),v=-1;return n.reduce(function(b,I){var T=I.type.defaultProps!==void 0?Je(Je({},I.type.defaultProps),I.props):I.props,P=T[l],A=XD("number");if(!b[P]){v++;var k;return j?k=$h(0,w):d&&d[P]&&d[P].hasStack?(k=zT(d[P].stackGroups,u,m),k=f1(f,k,P,o)):(k=Tv(A,RT(x,n.filter(function(E){var _,R,$=l in E.props?E.props[l]:(_=E.type.defaultProps)===null||_===void 0?void 0:_[l],H="hide"in E.props?E.props.hide:(R=E.type.defaultProps)===null||R===void 0?void 0:R.hide;return $===P&&!H}),"number",p),s.defaultProps.allowDataOverflow),k=f1(f,k,P,o)),Je(Je({},b),{},zt({},P,Je(Je({axisType:o},s.defaultProps),{},{hide:!0,orientation:Wn(UY,"".concat(o,".").concat(v%2),null),domain:k,originalDomain:A,isCategorical:j,layout:p})))}return b},{})},GY=function(t,a){var n=a.axisType,s=n===void 0?"xAxis":n,o=a.AxisComp,l=a.graphicalItems,d=a.stackGroups,u=a.dataStartIndex,m=a.dataEndIndex,p=t.children,f="".concat(s,"Id"),x=os(p,o),w={};return x&&x.length?w=WY(t,{axes:x,graphicalItems:l,axisType:s,axisIdKey:f,stackGroups:d,dataStartIndex:u,dataEndIndex:m}):l&&l.length&&(w=VY(t,{Axis:o,graphicalItems:l,axisType:s,axisIdKey:f,stackGroups:d,dataStartIndex:u,dataEndIndex:m})),w},KY=function(t){var a=Ji(t),n=pi(a,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:aj(n,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Ch(a,n)}},vP=function(t){var a=t.children,n=t.defaultShowTooltip,s=Un(a,ac),o=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(o=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!n}},YY=function(t){return!t||!t.length?!1:t.some(function(a){var n=gi(a&&a.type);return n&&n.indexOf("Bar")>=0})},jP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XY=function(t,a){var n=t.props,s=t.graphicalItems,o=t.xAxisMap,l=o===void 0?{}:o,d=t.yAxisMap,u=d===void 0?{}:d,m=n.width,p=n.height,f=n.children,x=n.margin||{},w=Un(f,ac),j=Un(f,Ll),v=Object.keys(u).reduce(function(k,E){var _=u[E],R=_.orientation;return!_.mirror&&!_.hide?Je(Je({},k),{},zt({},R,k[R]+_.width)):k},{left:x.left||0,right:x.right||0}),b=Object.keys(l).reduce(function(k,E){var _=l[E],R=_.orientation;return!_.mirror&&!_.hide?Je(Je({},k),{},zt({},R,Wn(k,"".concat(R))+_.height)):k},{top:x.top||0,bottom:x.bottom||0}),I=Je(Je({},b),v),T=I.bottom;w&&(I.bottom+=w.props.height||ac.defaultProps.height),j&&a&&(I=TU(I,s,n,a));var P=m-I.left-I.right,A=p-I.top-I.bottom;return Je(Je({brushBottom:T},I),{},{width:Math.max(P,0),height:Math.max(A,0)})},JY=function(t,a){if(a==="xAxis")return t[a].width;if(a==="yAxis")return t[a].height},JD=function(t){var a=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,o=s===void 0?"axis":s,l=t.validateTooltipEventTypes,d=l===void 0?["axis"]:l,u=t.axisComponents,m=t.legendContent,p=t.formatAxisMap,f=t.defaultProps,x=function(I,T){var P=T.graphicalItems,A=T.stackGroups,k=T.offset,E=T.updateId,_=T.dataStartIndex,R=T.dataEndIndex,$=I.barSize,H=I.layout,L=I.barGap,Y=I.barCategoryGap,X=I.maxBarSize,me=jP(H),K=me.numericAxisName,oe=me.cateAxisName,G=YY(P),B=[];return P.forEach(function(F,re){var U=Vf(I.data,{graphicalItems:[F],dataStartIndex:_,dataEndIndex:R}),ae=F.type.defaultProps!==void 0?Je(Je({},F.type.defaultProps),F.props):F.props,W=ae.dataKey,fe=ae.maxBarSize,Se=ae["".concat(K,"Id")],Ie=ae["".concat(oe,"Id")],te={},se=u.reduce(function(tr,ar){var jt=T["".concat(ar.axisType,"Map")],Kt=ae["".concat(ar.axisType,"Id")];jt&&jt[Kt]||ar.axisType==="zAxis"||Xo();var De=jt[Kt];return Je(Je({},tr),{},zt(zt({},ar.axisType,De),"".concat(ar.axisType,"Ticks"),pi(De)))},te),Q=se[oe],de=se["".concat(oe,"Ticks")],we=A&&A[Se]&&A[Se].hasStack&&zU(F,A[Se].stackGroups),ce=gi(F.type).indexOf("Bar")>=0,Ve=Ch(Q,de),Be=[],at=G&&PU({barSize:$,stackGroups:A,totalSize:JY(se,oe)});if(ce){var pe,tt,ut=cr(fe)?X:fe,vt=(pe=(tt=Ch(Q,de,!0))!==null&&tt!==void 0?tt:ut)!==null&&pe!==void 0?pe:0;Be=EU({barGap:L,barCategoryGap:Y,bandSize:vt!==Ve?vt:Ve,sizeList:at[Ie],maxBarSize:ut}),vt!==Ve&&(Be=Be.map(function(tr){return Je(Je({},tr),{},{position:Je(Je({},tr.position),{},{offset:tr.position.offset-vt/2})})}))}var Nt=F&&F.type&&F.type.getComposedData;Nt&&B.push({props:Je(Je({},Nt(Je(Je({},se),{},{displayedData:U,props:I,dataKey:W,item:F,bandSize:Ve,barPosition:Be,offset:k,stackedData:we,layout:H,dataStartIndex:_,dataEndIndex:R}))),{},zt(zt(zt({key:F.key||"item-".concat(re)},K,se[K]),oe,se[oe]),"animationId",E)),childIndex:_R(F,I.children),item:F})}),B},w=function(I,T){var P=I.props,A=I.dataStartIndex,k=I.dataEndIndex,E=I.updateId;if(!RS({props:P}))return null;var _=P.children,R=P.layout,$=P.stackOffset,H=P.data,L=P.reverseStackOrder,Y=jP(R),X=Y.numericAxisName,me=Y.cateAxisName,K=os(_,n),oe=BU(H,K,"".concat(X,"Id"),"".concat(me,"Id"),$,L),G=u.reduce(function(ae,W){var fe="".concat(W.axisType,"Map");return Je(Je({},ae),{},zt({},fe,GY(P,Je(Je({},W),{},{graphicalItems:K,stackGroups:W.axisType===X&&oe,dataStartIndex:A,dataEndIndex:k}))))},{}),B=XY(Je(Je({},G),{},{props:P,graphicalItems:K}),T?.legendBBox);Object.keys(G).forEach(function(ae){G[ae]=p(P,G[ae],B,ae.replace("Map",""),a)});var F=G["".concat(me,"Map")],re=KY(F),U=x(P,Je(Je({},G),{},{dataStartIndex:A,dataEndIndex:k,updateId:E,graphicalItems:K,stackGroups:oe,offset:B}));return Je(Je({formattedGraphicalItems:U,graphicalItems:K,offset:B,stackGroups:oe},re),G)},j=(function(b){function I(T){var P,A,k;return EY(this,I),k=OY(this,I,[T]),zt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),zt(k,"accessibilityManager",new gY),zt(k,"handleLegendBBoxUpdate",function(E){if(E){var _=k.state,R=_.dataStartIndex,$=_.dataEndIndex,H=_.updateId;k.setState(Je({legendBBox:E},w({props:k.props,dataStartIndex:R,dataEndIndex:$,updateId:H},Je(Je({},k.state),{},{legendBBox:E}))))}}),zt(k,"handleReceiveSyncEvent",function(E,_,R){if(k.props.syncId===E){if(R===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(_)}}),zt(k,"handleBrushChange",function(E){var _=E.startIndex,R=E.endIndex;if(_!==k.state.dataStartIndex||R!==k.state.dataEndIndex){var $=k.state.updateId;k.setState(function(){return Je({dataStartIndex:_,dataEndIndex:R},w({props:k.props,dataStartIndex:_,dataEndIndex:R,updateId:$},k.state))}),k.triggerSyncEvent({dataStartIndex:_,dataEndIndex:R})}}),zt(k,"handleMouseEnter",function(E){var _=k.getMouseInfo(E);if(_){var R=Je(Je({},_),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var $=k.props.onMouseEnter;Gt($)&&$(R,E)}}),zt(k,"triggeredAfterMouseMove",function(E){var _=k.getMouseInfo(E),R=_?Je(Je({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(R),k.triggerSyncEvent(R);var $=k.props.onMouseMove;Gt($)&&$(R,E)}),zt(k,"handleItemMouseEnter",function(E){k.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),zt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),zt(k,"handleMouseMove",function(E){E.persist(),k.throttleTriggeredAfterMouseMove(E)}),zt(k,"handleMouseLeave",function(E){k.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};k.setState(_),k.triggerSyncEvent(_);var R=k.props.onMouseLeave;Gt(R)&&R(_,E)}),zt(k,"handleOuterEvent",function(E){var _=OR(E),R=Wn(k.props,"".concat(_));if(_&&Gt(R)){var $,H;/.*touch.*/i.test(_)?H=k.getMouseInfo(E.changedTouches[0]):H=k.getMouseInfo(E),R(($=H)!==null&&$!==void 0?$:{},E)}}),zt(k,"handleClick",function(E){var _=k.getMouseInfo(E);if(_){var R=Je(Je({},_),{},{isTooltipActive:!0});k.setState(R),k.triggerSyncEvent(R);var $=k.props.onClick;Gt($)&&$(R,E)}}),zt(k,"handleMouseDown",function(E){var _=k.props.onMouseDown;if(Gt(_)){var R=k.getMouseInfo(E);_(R,E)}}),zt(k,"handleMouseUp",function(E){var _=k.props.onMouseUp;if(Gt(_)){var R=k.getMouseInfo(E);_(R,E)}}),zt(k,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),zt(k,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseDown(E.changedTouches[0])}),zt(k,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseUp(E.changedTouches[0])}),zt(k,"handleDoubleClick",function(E){var _=k.props.onDoubleClick;if(Gt(_)){var R=k.getMouseInfo(E);_(R,E)}}),zt(k,"handleContextMenu",function(E){var _=k.props.onContextMenu;if(Gt(_)){var R=k.getMouseInfo(E);_(R,E)}}),zt(k,"triggerSyncEvent",function(E){k.props.syncId!==void 0&&Cb.emit(kb,k.props.syncId,E,k.eventEmitterSymbol)}),zt(k,"applySyncEvent",function(E){var _=k.props,R=_.layout,$=_.syncMethod,H=k.state.updateId,L=E.dataStartIndex,Y=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)k.setState(Je({dataStartIndex:L,dataEndIndex:Y},w({props:k.props,dataStartIndex:L,dataEndIndex:Y,updateId:H},k.state)));else if(E.activeTooltipIndex!==void 0){var X=E.chartX,me=E.chartY,K=E.activeTooltipIndex,oe=k.state,G=oe.offset,B=oe.tooltipTicks;if(!G)return;if(typeof $=="function")K=$(B,E);else if($==="value"){K=-1;for(var F=0;F<B.length;F++)if(B[F].value===E.activeLabel){K=F;break}}var re=Je(Je({},G),{},{x:G.left,y:G.top}),U=Math.min(X,re.x+re.width),ae=Math.min(me,re.y+re.height),W=B[K]&&B[K].value,fe=x1(k.state,k.props.data,K),Se=B[K]?{x:R==="horizontal"?B[K].coordinate:U,y:R==="horizontal"?ae:B[K].coordinate}:YD;k.setState(Je(Je({},E),{},{activeLabel:W,activeCoordinate:Se,activePayload:fe,activeTooltipIndex:K}))}else k.setState(E)}),zt(k,"renderCursor",function(E){var _,R=k.state,$=R.isTooltipActive,H=R.activeCoordinate,L=R.activePayload,Y=R.offset,X=R.activeTooltipIndex,me=R.tooltipAxisBandSize,K=k.getTooltipEventType(),oe=(_=E.props.active)!==null&&_!==void 0?_:$,G=k.props.layout,B=E.key||"_recharts-cursor";return ge.createElement(NY,{key:B,activeCoordinate:H,activePayload:L,activeTooltipIndex:X,chartName:a,element:E,isActive:oe,layout:G,offset:Y,tooltipAxisBandSize:me,tooltipEventType:K})}),zt(k,"renderPolarAxis",function(E,_,R){var $=Wn(E,"type.axisType"),H=Wn(k.state,"".concat($,"Map")),L=E.type.defaultProps,Y=L!==void 0?Je(Je({},L),E.props):E.props,X=H&&H[Y["".concat($,"Id")]];return S.cloneElement(E,Je(Je({},X),{},{className:sr($,X.className),key:E.key||"".concat(_,"-").concat(R),ticks:pi(X,!0)}))}),zt(k,"renderPolarGrid",function(E){var _=E.props,R=_.radialLines,$=_.polarAngles,H=_.polarRadius,L=k.state,Y=L.radiusAxisMap,X=L.angleAxisMap,me=Ji(Y),K=Ji(X),oe=K.cx,G=K.cy,B=K.innerRadius,F=K.outerRadius;return S.cloneElement(E,{polarAngles:Array.isArray($)?$:pi(K,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(H)?H:pi(me,!0).map(function(re){return re.coordinate}),cx:oe,cy:G,innerRadius:B,outerRadius:F,key:E.key||"polar-grid",radialLines:R})}),zt(k,"renderLegend",function(){var E=k.state.formattedGraphicalItems,_=k.props,R=_.children,$=_.width,H=_.height,L=k.props.margin||{},Y=$-(L.left||0)-(L.right||0),X=_T({children:R,formattedGraphicalItems:E,legendWidth:Y,legendContent:m});if(!X)return null;var me=X.item,K=xP(X,SY);return S.cloneElement(me,Je(Je({},K),{},{chartWidth:$,chartHeight:H,margin:L,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),zt(k,"renderTooltip",function(){var E,_=k.props,R=_.children,$=_.accessibilityLayer,H=Un(R,zn);if(!H)return null;var L=k.state,Y=L.isTooltipActive,X=L.activeCoordinate,me=L.activePayload,K=L.activeLabel,oe=L.offset,G=(E=H.props.active)!==null&&E!==void 0?E:Y;return S.cloneElement(H,{viewBox:Je(Je({},oe),{},{x:oe.left,y:oe.top}),active:G,label:K,payload:G?me:[],coordinate:X,accessibilityLayer:$})}),zt(k,"renderBrush",function(E){var _=k.props,R=_.margin,$=_.data,H=k.state,L=H.offset,Y=H.dataStartIndex,X=H.dataEndIndex,me=H.updateId;return S.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Rm(k.handleBrushChange,E.props.onChange),data:$,x:ht(E.props.x)?E.props.x:L.left,y:ht(E.props.y)?E.props.y:L.top+L.height+L.brushBottom-(R.bottom||0),width:ht(E.props.width)?E.props.width:L.width,startIndex:Y,endIndex:X,updateId:"brush-".concat(me)})}),zt(k,"renderReferenceElement",function(E,_,R){if(!E)return null;var $=k,H=$.clipPathId,L=k.state,Y=L.xAxisMap,X=L.yAxisMap,me=L.offset,K=E.type.defaultProps||{},oe=E.props,G=oe.xAxisId,B=G===void 0?K.xAxisId:G,F=oe.yAxisId,re=F===void 0?K.yAxisId:F;return S.cloneElement(E,{key:E.key||"".concat(_,"-").concat(R),xAxis:Y[B],yAxis:X[re],viewBox:{x:me.left,y:me.top,width:me.width,height:me.height},clipPathId:H})}),zt(k,"renderActivePoints",function(E){var _=E.item,R=E.activePoint,$=E.basePoint,H=E.childIndex,L=E.isRange,Y=[],X=_.props.key,me=_.item.type.defaultProps!==void 0?Je(Je({},_.item.type.defaultProps),_.item.props):_.item.props,K=me.activeDot,oe=me.dataKey,G=Je(Je({index:H,dataKey:oe,cx:R.x,cy:R.y,r:4,fill:Pj(_.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},qt(K,!1)),th(K));return Y.push(I.renderActiveDot(K,G,"".concat(X,"-activePoint-").concat(H))),$?Y.push(I.renderActiveDot(K,Je(Je({},G),{},{cx:$.x,cy:$.y}),"".concat(X,"-basePoint-").concat(H))):L&&Y.push(null),Y}),zt(k,"renderGraphicChild",function(E,_,R){var $=k.filterFormatItem(E,_,R);if(!$)return null;var H=k.getTooltipEventType(),L=k.state,Y=L.isTooltipActive,X=L.tooltipAxis,me=L.activeTooltipIndex,K=L.activeLabel,oe=k.props.children,G=Un(oe,zn),B=$.props,F=B.points,re=B.isRange,U=B.baseLine,ae=$.item.type.defaultProps!==void 0?Je(Je({},$.item.type.defaultProps),$.item.props):$.item.props,W=ae.activeDot,fe=ae.hide,Se=ae.activeBar,Ie=ae.activeShape,te=!!(!fe&&Y&&G&&(W||Se||Ie)),se={};H!=="axis"&&G&&G.props.trigger==="click"?se={onClick:Rm(k.handleItemMouseEnter,E.props.onClick)}:H!=="axis"&&(se={onMouseLeave:Rm(k.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Rm(k.handleItemMouseEnter,E.props.onMouseEnter)});var Q=S.cloneElement(E,Je(Je({},$.props),se));function de(ar){return typeof X.dataKey=="function"?X.dataKey(ar.payload):null}if(te)if(me>=0){var we,ce;if(X.dataKey&&!X.allowDuplicatedCategory){var Ve=typeof X.dataKey=="function"?de:"payload.".concat(X.dataKey.toString());we=Jb(F,Ve,K),ce=re&&U&&Jb(U,Ve,K)}else we=F?.[me],ce=re&&U&&U[me];if(Ie||Se){var Be=E.props.activeIndex!==void 0?E.props.activeIndex:me;return[S.cloneElement(E,Je(Je(Je({},$.props),se),{},{activeIndex:Be})),null,null]}if(!cr(we))return[Q].concat(mc(k.renderActivePoints({item:$,activePoint:we,basePoint:ce,childIndex:me,isRange:re})))}else{var at,pe=(at=k.getItemByXY(k.state.activeCoordinate))!==null&&at!==void 0?at:{graphicalItem:Q},tt=pe.graphicalItem,ut=tt.item,vt=ut===void 0?E:ut,Nt=tt.childIndex,tr=Je(Je(Je({},$.props),se),{},{activeIndex:Nt});return[S.cloneElement(vt,tr),null,null]}return re?[Q,null,null]:[Q,null]}),zt(k,"renderCustomized",function(E,_,R){return S.cloneElement(E,Je(Je({key:"recharts-customized-".concat(R)},k.props),k.state))}),zt(k,"renderMap",{CartesianGrid:{handler:Um,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Um},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Um},YAxis:{handler:Um},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((P=T.id)!==null&&P!==void 0?P:bu("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=OE(k.triggeredAfterMouseMove,(A=T.throttleDelay)!==null&&A!==void 0?A:1e3/60),k.state={},k}return RY(I,b),DY(I,[{key:"componentDidMount",value:function(){var P,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var P=this.props,A=P.children,k=P.data,E=P.height,_=P.layout,R=Un(A,zn);if(R){var $=R.props.defaultIndex;if(!(typeof $!="number"||$<0||$>this.state.tooltipTicks.length-1)){var H=this.state.tooltipTicks[$]&&this.state.tooltipTicks[$].value,L=x1(this.state,k,$,H),Y=this.state.tooltipTicks[$].coordinate,X=(this.state.offset.top+E)/2,me=_==="horizontal",K=me?{x:Y,y:X}:{y:Y,x:X},oe=this.state.formattedGraphicalItems.find(function(B){var F=B.item;return F.type.name==="Scatter"});oe&&(K=Je(Je({},K),oe.props.points[$].tooltipPosition),L=oe.props.points[$].tooltipPayload);var G={activeTooltipIndex:$,isTooltipActive:!0,activeLabel:H,activePayload:L,activeCoordinate:K};this.setState(G),this.renderCursor(R),this.accessibilityManager.setIndex($)}}}},{key:"getSnapshotBeforeUpdate",value:function(P,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==P.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==P.margin){var k,E;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(P){Qb([Un(P.children,zn)],[Un(this.props.children,zn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var P=Un(this.props.children,zn);if(P&&typeof P.props.shared=="boolean"){var A=P.props.shared?"axis":"item";return d.indexOf(A)>=0?A:o}return o}},{key:"getMouseInfo",value:function(P){if(!this.container)return null;var A=this.container,k=A.getBoundingClientRect(),E=v8(k),_={chartX:Math.round(P.pageX-E.left),chartY:Math.round(P.pageY-E.top)},R=k.width/A.offsetWidth||1,$=this.inRange(_.chartX,_.chartY,R);if(!$)return null;var H=this.state,L=H.xAxisMap,Y=H.yAxisMap,X=this.getTooltipEventType(),me=bP(this.state,this.props.data,this.props.layout,$);if(X!=="axis"&&L&&Y){var K=Ji(L).scale,oe=Ji(Y).scale,G=K&&K.invert?K.invert(_.chartX):null,B=oe&&oe.invert?oe.invert(_.chartY):null;return Je(Je({},_),{},{xValue:G,yValue:B},me)}return me?Je(Je({},_),me):null}},{key:"inRange",value:function(P,A){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,_=P/k,R=A/k;if(E==="horizontal"||E==="vertical"){var $=this.state.offset,H=_>=$.left&&_<=$.left+$.width&&R>=$.top&&R<=$.top+$.height;return H?{x:_,y:R}:null}var L=this.state,Y=L.angleAxisMap,X=L.radiusAxisMap;if(Y&&X){var me=Ji(Y);return SA({x:_,y:R},me)}return null}},{key:"parseEventsOfWrapper",value:function(){var P=this.props.children,A=this.getTooltipEventType(),k=Un(P,zn),E={};k&&A==="axis"&&(k.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=th(this.props,this.handleOuterEvent);return Je(Je({},_),E)}},{key:"addListener",value:function(){Cb.on(kb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Cb.removeListener(kb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(P,A,k){for(var E=this.state.formattedGraphicalItems,_=0,R=E.length;_<R;_++){var $=E[_];if($.item===P||$.props.key===P.key||A===gi($.item.type)&&k===$.childIndex)return $}return null}},{key:"renderClipPath",value:function(){var P=this.clipPathId,A=this.state.offset,k=A.left,E=A.top,_=A.height,R=A.width;return ge.createElement("defs",null,ge.createElement("clipPath",{id:P},ge.createElement("rect",{x:k,y:E,height:_,width:R})))}},{key:"getXScales",value:function(){var P=this.state.xAxisMap;return P?Object.entries(P).reduce(function(A,k){var E=gP(k,2),_=E[0],R=E[1];return Je(Je({},A),{},zt({},_,R.scale))},{}):null}},{key:"getYScales",value:function(){var P=this.state.yAxisMap;return P?Object.entries(P).reduce(function(A,k){var E=gP(k,2),_=E[0],R=E[1];return Je(Je({},A),{},zt({},_,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(P){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[P])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(P){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[P])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(P){var A=this.state,k=A.formattedGraphicalItems,E=A.activeItem;if(k&&k.length)for(var _=0,R=k.length;_<R;_++){var $=k[_],H=$.props,L=$.item,Y=L.type.defaultProps!==void 0?Je(Je({},L.type.defaultProps),L.props):L.props,X=gi(L.type);if(X==="Bar"){var me=(H.data||[]).find(function(B){return LH(P,B)});if(me)return{graphicalItem:$,payload:me}}else if(X==="RadialBar"){var K=(H.data||[]).find(function(B){return SA(P,B)});if(K)return{graphicalItem:$,payload:K}}else if(Ff($,E)||Bf($,E)||au($,E)){var oe=oV({graphicalItem:$,activeTooltipItem:E,itemData:Y.data}),G=Y.activeIndex===void 0?oe:Y.activeIndex;return{graphicalItem:Je(Je({},$),{},{childIndex:G}),payload:au($,E)?Y.data[oe]:$.props.data[oe]}}}return null}},{key:"render",value:function(){var P=this;if(!RS(this))return null;var A=this.props,k=A.children,E=A.className,_=A.width,R=A.height,$=A.style,H=A.compact,L=A.title,Y=A.desc,X=xP(A,CY),me=qt(X,!1);if(H)return ge.createElement(eP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ge.createElement(tv,Ml({},me,{width:_,height:R,title:L,desc:Y}),this.renderClipPath(),LS(k,this.renderMap)));if(this.props.accessibilityLayer){var K,oe;me.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,me.role=(oe=this.props.role)!==null&&oe!==void 0?oe:"application",me.onKeyDown=function(B){P.accessibilityManager.keyboardEvent(B)},me.onFocus=function(){P.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return ge.createElement(eP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ge.createElement("div",Ml({className:sr("recharts-wrapper",E),style:Je({position:"relative",cursor:"default",width:_,height:R},$)},G,{ref:function(F){P.container=F}}),ge.createElement(tv,Ml({},me,{width:_,height:R,title:L,desc:Y,style:zY}),this.renderClipPath(),LS(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(S.Component);zt(j,"displayName",a),zt(j,"defaultProps",Je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),zt(j,"getDerivedStateFromProps",function(b,I){var T=b.dataKey,P=b.data,A=b.children,k=b.width,E=b.height,_=b.layout,R=b.stackOffset,$=b.margin,H=I.dataStartIndex,L=I.dataEndIndex;if(I.updateId===void 0){var Y=vP(b);return Je(Je(Je({},Y),{},{updateId:0},w(Je(Je({props:b},Y),{},{updateId:0}),I)),{},{prevDataKey:T,prevData:P,prevWidth:k,prevHeight:E,prevLayout:_,prevStackOffset:R,prevMargin:$,prevChildren:A})}if(T!==I.prevDataKey||P!==I.prevData||k!==I.prevWidth||E!==I.prevHeight||_!==I.prevLayout||R!==I.prevStackOffset||!$l($,I.prevMargin)){var X=vP(b),me={chartX:I.chartX,chartY:I.chartY,isTooltipActive:I.isTooltipActive},K=Je(Je({},bP(I,P,_)),{},{updateId:I.updateId+1}),oe=Je(Je(Je({},X),me),K);return Je(Je(Je({},oe),w(Je({props:b},oe),I)),{},{prevDataKey:T,prevData:P,prevWidth:k,prevHeight:E,prevLayout:_,prevStackOffset:R,prevMargin:$,prevChildren:A})}if(!Qb(A,I.prevChildren)){var G,B,F,re,U=Un(A,ac),ae=U&&(G=(B=U.props)===null||B===void 0?void 0:B.startIndex)!==null&&G!==void 0?G:H,W=U&&(F=(re=U.props)===null||re===void 0?void 0:re.endIndex)!==null&&F!==void 0?F:L,fe=ae!==H||W!==L,Se=!cr(P),Ie=Se&&!fe?I.updateId:I.updateId+1;return Je(Je({updateId:Ie},w(Je(Je({props:b},I),{},{updateId:Ie,dataStartIndex:ae,dataEndIndex:W}),I)),{},{prevChildren:A,dataStartIndex:ae,dataEndIndex:W})}return null}),zt(j,"renderActiveDot",function(b,I,T){var P;return S.isValidElement(b)?P=S.cloneElement(b,I):Gt(b)?P=b(I):P=ge.createElement(Tj,I),ge.createElement(Ir,{className:"recharts-active-dot",key:T},P)});var v=S.forwardRef(function(I,T){return ge.createElement(j,Ml({},I,{ref:T}))});return v.displayName=j.displayName,v},wP=JD({chartName:"BarChart",GraphicalChild:no,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:lu},{axisType:"yAxis",AxisComp:cu}],formatAxisMap:dG}),NP=JD({chartName:"PieChart",GraphicalChild:Vs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Lf},{axisType:"radiusAxis",AxisComp:Rf}],formatAxisMap:ZU,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ZY="https://erp-backend-1jtx.onrender.com/api",bt=lr.create({baseURL:ZY,headers:{"Content-Type":"application/json"}});bt.interceptors.request.use(e=>{let t,a;const n=localStorage.getItem("erp.auth");if(n)try{const s=JSON.parse(n);t=s.token,a=s.user?.schoolCode}catch(s){console.error("Error parsing auth data:",s)}return a||(a=localStorage.getItem("erp.schoolCode")),t||(t=localStorage.getItem("token")),t&&(e.headers.Authorization=`Bearer ${t}`),a&&(e.headers["x-school-code"]=a),e});const In="https://erp-backend-1jtx.onrender.com/api",un={addUser:async(e,t,a)=>{try{return(await lr.post(`${In}/school-users/${e}/users`,t,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to add user")}},getAllUsers:async(e,t)=>{try{console.log(` Calling API: GET ${In}/school-users/${e}/users`),console.log(` Using token: ${t?t.substring(0,20)+"...":"MISSING"}`);const a=await lr.get(`${In}/school-users/${e}/users`,{headers:{Authorization:`Bearer ${t}`}});return console.log(" API Response:",a),a.data||{}}catch(a){console.error(" API Error Details:",{message:a.message,status:a.response?.status,statusText:a.response?.statusText,data:a.response?.data,url:a.config?.url,headers:a.config?.headers});const n=a.response?.data?.message||a.message||"Failed to fetch users";throw new Error(n)}},getUsersByRole:async(e,t,a)=>{try{return(await lr.get(`${In}/school-users/${e}/users/role/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to fetch users")}},getUser:async(e,t,a)=>{try{return(await lr.get(`${In}/school-users/${e}/users/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to fetch user")}},updateUser:async(e,t,a,n)=>{try{return(await lr.put(`${In}/school-users/${e}/users/${t}`,a,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to update user")}},resetPassword:async(e,t,a)=>{try{return(await lr.post(`${In}/school-users/${e}/users/${t}/reset-password`,{},{headers:{Authorization:`Bearer ${a}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to reset password")}},changePassword:async(e,t,a,n)=>{try{return(await lr.post(`${In}/school-users/${e}/users/${t}/change-password`,{newPassword:a},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to change password")}},toggleStatus:async(e,t,a,n)=>{try{return(await lr.patch(`${In}/school-users/${e}/users/${t}/status`,{isActive:a},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to update user status")}},getSchoolUsers:async()=>{try{const e=await bt.get("/users/role/student");return e.data.data||e.data||[]}catch(e){throw console.error("Error fetching school users:",e),new Error(e.response?.data?.message||"Failed to fetch school users")}},deleteUser:async(e,t,a)=>{try{return(await lr.delete(`${In}/school-users/${e}/users/${t}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to delete user")}},getAccessMatrix:async(e,t)=>{try{return(await lr.get(`${In}/school-users/${e}/access-matrix`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(a){throw new Error(a.response?.data?.message||"Failed to fetch access matrix")}},updateAccessMatrix:async(e,t,a)=>{try{return(await lr.put(`${In}/school-users/${e}/access-matrix`,{matrix:t},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to update access matrix")}},importUsers:async(e,t,a,n)=>{try{const s=new FormData;return s.append("file",t),s.append("role",a),await lr.post(`${In}/school-users/${e}/import/users`,s,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}})}catch(s){throw s.response?s.response.data:new Error("Import failed: An unknown error occurred")}},verifyAdminAndGetPasswords:async(e,t,a,n)=>{try{return(await lr.post(`${In}/school-users/${e}/verify-admin-password`,{adminPassword:t,teacherUserId:a},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to verify password")}}},QY=()=>{const{user:e,token:t,logout:a}=dr(),[n,s]=S.useState(null),[o,l]=S.useState([]),[d,u]=S.useState(!0),[m,p]=S.useState(null),[f,x]=S.useState(null),[w,j]=S.useState(!1),[v,b]=S.useState("0.0%"),[I,T]=S.useState([]),[P,A]=S.useState({present:0,absent:0}),[k,E]=S.useState({present:0,absent:0}),[_,R]=S.useState({present:0,absent:0}),[$,H]=S.useState([]),L=()=>{if(t)return t;try{const F=localStorage.getItem("erp.auth");if(F)return JSON.parse(F).token}catch(F){console.warn("Failed to parse auth data from localStorage:",F)}return localStorage.getItem("token")||sessionStorage.getItem("token")};S.useEffect(()=>{(async()=>{try{u(!0),p(null);const re={user:e,schoolIdentifier:e?.schoolId||e?.schoolCode,token:!!L(),timestamp:new Date().toISOString()};console.log(" Starting fetchSchoolAndUsers with debug info:",re),x(re);const U=e?.schoolId||e?.schoolCode;if(!U)throw new Error("No school identifier found. Please log out and log back in to refresh your school association.");if(U){const ae=L();if(!ae)throw new Error("No authentication token found. Please log in again.");try{console.log(" Fetching school details from school_info collection");try{const W=await yt.get("/schools/database/school-info");console.log(" School response from school_info:",W);const fe=W.data?.data||W.data;console.log(" Extracted school data:",fe),s(fe),re.schoolFetch={success:!0,source:"school_info",schoolName:fe?.name}}catch(W){console.warn(" Failed to fetch from school_info, trying main database:",W.message);const fe=await yt.get(`/schools/${U}/info`);console.log(" School response from main database:",fe);const Se=fe.data?.data||fe.data;console.log(" Extracted school data (fallback):",Se),s(Se),re.schoolFetch={success:!0,source:"main_database",schoolName:Se?.name}}}catch(W){console.error(" Error fetching school:",W),console.error(" Error details:",W.response?.data),re.schoolFetch={success:!1,error:W.message,status:W.response?.status,data:W.response?.data}}try{const W=e?.schoolCode||"P";console.log(" Fetching users for school code:",W);const fe=await un.getAllUsers(W,ae);console.log(" Users response:",fe);let Se=[];if(fe&&fe.data&&Array.isArray(fe.data))Se=fe.data;else if(fe&&typeof fe=="object"){const te=["admin","teacher","student","parent"];for(const se of te)fe[se]&&Array.isArray(fe[se])&&Se.push(...fe[se].map(Q=>({...Q,role:se})))}const Ie=Se.map(te=>{const se={...te};return se.name&&typeof se.name=="object"&&(se.name=se.name.displayName||((se.name.firstName||"")+" "+(se.name.lastName||"")).trim()||se.email),se});l(Ie),re.usersFetch={success:!0,totalUsers:Se.length,breakdown:Se.reduce((te,se)=>(te[se.role]=(te[se.role]||0)+1,te),{})}}catch(W){throw console.error(" Error fetching users:",W),re.usersFetch={success:!1,error:W.message,status:W.response?.status,data:W.response?.data},W}x({...re})}else console.log("  User object:",e),re.noSchoolInfo=!0,e?.role==="superadmin"?(p(null),s(null),l([]),re.superadminMode=!0):(p("No school associated with this account. Please contact support."),console.error(" No schoolId or schoolCode found in user object:",e),re.missingSchoolAssociation=!0),x({...re})}catch(re){console.error(" Error in fetchSchoolAndUsers:",re),p(`Failed to load school information: ${re.message}`),x({...f,generalError:{message:re.message,stack:re.stack,response:re.response?.data}})}finally{u(!1)}})()},[e]),console.log(e),S.useEffect(()=>{(async()=>{try{const re=L();if(!re||!e?.schoolCode)return;const U=new Date().toISOString().split("T")[0];console.log(" Fetching today's attendance rate for:",U);const ae=await fetch(`https://erp-backend-1jtx.onrender.com/api/attendance/stats?date=${U}`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(ae.ok){const W=await ae.json();if(console.log(" Today's attendance data:",W),W.success){const fe=(W.presentCount||0)+(W.absentCount||0);if(fe>0){const Se=((W.presentCount||0)/fe*100).toFixed(1);b(`${Se}%`)}else b("0.0%")}}}catch(re){console.error("Error fetching today's attendance rate:",re)}})()},[e]),S.useEffect(()=>{(async()=>{try{const re=L();if(!re||!e?.schoolCode)return;const U=new Date().toISOString().split("T")[0];console.log(" Fetching today's attendance for:",U);const ae=await fetch(`https://erp-backend-1jtx.onrender.com/api/attendance/stats?date=${U}`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(ae.ok){const Se=await ae.json();console.log(" Today's attendance data:",Se),Se.success&&A({present:Se.presentCount||0,absent:Se.absentCount||0})}const W=await fetch(`https://erp-backend-1jtx.onrender.com/api/attendance/session-data?date=${U}&session=morning`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(W.ok){const Se=await W.json();console.log(" Morning attendance data:",Se),Se.success&&E({present:Se.presentCount||0,absent:Se.absentCount||0})}const fe=await fetch(`https://erp-backend-1jtx.onrender.com/api/attendance/session-data?date=${U}&session=afternoon`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(fe.ok){const Se=await fe.json();console.log(" Afternoon attendance data:",Se),Se.success&&R({present:Se.presentCount||0,absent:Se.absentCount||0})}}catch(re){console.error("Error fetching today's attendance:",re)}})()},[e]),S.useEffect(()=>{(async()=>{try{const re=L();if(!re||!e?.schoolCode)return;const U=new Date,ae=[];for(let fe=6;fe>=0;fe--){const Se=new Date(U);Se.setDate(Se.getDate()-fe),ae.push(Se)}console.log(" Fetching attendance for last 7 days");const W=await fetch(`https://erp-backend-1jtx.onrender.com/api/attendance/daily-stats?schoolCode=${e.schoolCode}`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(W.ok){const fe=await W.json();if(console.log(" Daily attendance data:",fe),fe.success&&fe.dailyStats){const Se=fe.dailyStats.map(Ie=>({name:new Date(Ie.date).toLocaleDateString("en-US",{weekday:"short"}),attendance:Ie.attendanceRate||0,date:Ie.date}));T(Se)}else{const Se=ae.map(Ie=>({name:Ie.toLocaleDateString("en-US",{weekday:"short"}),attendance:0,date:Ie.toISOString().split("T")[0]}));T(Se)}}else{const fe=ae.map(Se=>({name:Se.toLocaleDateString("en-US",{weekday:"short"}),attendance:0,date:Se.toISOString().split("T")[0]}));T(fe)}}catch(re){console.error("Error fetching daily attendance:",re);const U=new Date,ae=[];for(let W=6;W>=0;W--){const fe=new Date(U);fe.setDate(fe.getDate()-W),ae.push({name:fe.toLocaleDateString("en-US",{weekday:"short"}),attendance:0,date:fe.toISOString().split("T")[0]})}T(ae)}})()},[e]),S.useEffect(()=>{(async()=>{try{const re=L();if(!re||!e?.schoolCode)return;console.log(" Fetching class performance data");const U=await fetch("https://erp-backend-1jtx.onrender.com/api/results/class-performance-stats",{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(U.ok){const ae=await U.json();console.log(" Class performance data:",ae),ae.success&&ae.data&&H(ae.data)}}catch(re){console.error("Error fetching class performance:",re)}})()},[e]);const Y=F=>F?F.startsWith("http")?F:F.startsWith("/uploads")?`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${F}`:F:"",X=o.filter(F=>F.role==="student").length,me=o.filter(F=>F.role==="teacher").length,K=[{name:"Total Students",value:X.toString(),icon:ta,color:"bg-blue-500"},{name:"Attendance Rate",value:v,icon:as,color:"bg-green-500"},{name:"Total Teachers",value:me.toString(),icon:ss,color:"bg-purple-500"}],oe=I.length>0?I:[{name:"Mon",attendance:0},{name:"Tue",attendance:0},{name:"Wed",attendance:0},{name:"Thu",attendance:0},{name:"Fri",attendance:0},{name:"Sat",attendance:0},{name:"Sun",attendance:0}],G=[{name:"Present",value:k.present,color:"#10B981"},{name:"Absent",value:k.absent,color:"#EF4444"}],B=[{name:"Present",value:_.present,color:"#10B981"},{name:"Absent",value:_.absent,color:"#EF4444"}];return r.jsx("div",{className:"space-y-6",children:d?r.jsxs("div",{className:"flex justify-center items-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-4 text-gray-600",children:"Loading school data..."})]}):m?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-red-700 font-medium",children:"Error Loading Data"})]}),r.jsx("p",{className:"text-red-600 mt-2",children:m}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx(tf,{className:"h-4 w-4 mr-2"}),"Retry"]}),!L()&&r.jsx("button",{onClick:()=>{a(),window.location.href="/login"},className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Login Again"})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(B6,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Debug Information"})]}),r.jsxs("button",{onClick:()=>j(!w),className:"text-sm text-gray-500 hover:text-gray-700",children:[w?"Hide":"Show"," Details"]})]}),w&&f&&r.jsx("div",{className:"bg-white p-3 rounded border text-xs",children:r.jsx("pre",{className:"whitespace-pre-wrap overflow-x-auto text-gray-600",children:JSON.stringify(f,null,2)})}),r.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[r.jsxs("p",{children:["User Role: ",e?.role]}),r.jsxs("p",{children:["School ID: ",e?.schoolId||"Not found"]}),r.jsxs("p",{children:["School Code: ",e?.schoolCode||"Not found"]}),r.jsxs("p",{children:["Token Available: ",L()?"Yes":"No"]})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r.jsx("div",{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-4 sm:gap-6",children:[n?.logoUrl&&r.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 border border-gray-200 rounded-lg p-2 flex-shrink-0",children:r.jsx("img",{src:Y(n.logoUrl),alt:`${n.name} logo`,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"flex-grow text-center md:text-left",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:n?.name||e?.schoolName||"Your School"}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 sm:gap-3 mb-3",children:[r.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:[r.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),n?.code||"N/A"]}),n?.affiliationBoard&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300",children:n.affiliationBoard})]}),n?.address&&r.jsxs("div",{className:"flex items-start justify-center md:justify-start text-gray-600 mb-2",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 mt-0.5 flex-shrink-0",children:[r.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),r.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),r.jsxs("span",{className:"text-sm",children:[n.address.street&&n.address.city?`${n.address.street}, ${n.address.city}`:n.address.street||n.address.city||"Address not available",n.address.state&&`, ${n.address.state}`,n.address.pinCode&&` - ${n.address.pinCode}`]})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 sm:gap-4 text-gray-600 text-xs sm:text-sm",children:[(n?.contact?.phone||n?.mobile)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:r.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),n.contact?.phone||n.mobile]}),(n?.contact?.email||n?.principalEmail)&&r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:[r.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),r.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),n.contact?.email||n.principalEmail]}),(n?.contact?.website||n?.website)&&r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1.5",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),r.jsx("a",{href:(n.contact?.website||n.website)?.startsWith("http")?n.contact?.website||n.website:`https://${n.contact?.website||n.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:n.contact?.website||n.website})]})]})]})]})})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:K.map(F=>r.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`${F.color} p-3 rounded-lg`,children:r.jsx(F.icon,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:F.name}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F.value})]})]})},F.name))}),r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:["Associated Users",r.jsxs("span",{className:"text-xs sm:text-sm font-normal text-gray-500 ml-2",children:["(",o.length," total)"]})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Email"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.slice(0,5).map(F=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:typeof F.name=="string"?F.name:F.name?.displayName||((F.name?.firstName||"")+" "+(F.name?.lastName||"")).trim()||F.email||"Unknown User"}),r.jsx("div",{className:"text-xs text-gray-500 sm:hidden",children:F.email})]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:r.jsx("div",{className:"text-sm text-gray-500",children:F.email})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.role==="admin"?"bg-purple-100 text-purple-800":F.role==="teacher"?"bg-blue-100 text-blue-800":F.role==="student"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:F.role.charAt(0).toUpperCase()+F.role.slice(1)})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:F.isActive?"Active":"Inactive"})})]},F._id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-3 sm:px-6 py-4 text-center text-xs sm:text-sm text-gray-500",children:"No users found for this school"})})})]}),o.length>5&&r.jsx("div",{className:"px-3 sm:px-6 py-4 text-center",children:r.jsxs(Qm,{to:"/admin/users",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-800",children:["View all ",o.length," users"]})})]})]}),r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Class Performance"}),$.length>0?r.jsx(Tm,{width:"100%",height:300,children:r.jsxs(wP,{data:$,children:[r.jsx(l1,{strokeDasharray:"3 3"}),r.jsx(lu,{dataKey:"name"}),r.jsx(cu,{domain:[0,100],label:{value:"Percentage (%)",angle:-90,position:"insideLeft"}}),r.jsx(zn,{formatter:(F,re,U)=>[`${F}%`,`Average: ${F}% (${U.payload.studentCount} students)`],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),r.jsx(no,{dataKey:"percentage",fill:"#10B981",radius:[4,4,0,0]})]})}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No performance data available"}),r.jsx("p",{className:"text-sm mt-2",children:"Results will appear here once students' grades are entered"})]})]}),r.jsx("div",{className:"mt-2",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center",children:"Today's Attendance"})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx("div",{className:"bg-yellow-100 p-2 rounded-full mr-2",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-600",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Morning Session"})]}),r.jsx(Tm,{width:"100%",height:200,children:r.jsxs(NP,{children:[r.jsx(Vs,{data:G,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"value",label:({name:F,value:re,percent:U})=>`${F}: ${re} (${(U*100).toFixed(1)}%)`,labelLine:!0,children:G.map((F,re)=>r.jsx(Od,{fill:F.color},`cell-${re}`))}),r.jsx(zn,{formatter:F=>[`${F} students`,"Count"],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}})]})}),r.jsx("div",{className:"flex justify-center space-x-6 mt-4",children:G.map(F=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:F.color}}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:F.name}),r.jsx("span",{className:"text-xl font-bold text-gray-900 ml-2",children:F.value})]})]},F.name))}),k.present+k.absent>0&&r.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500",children:["Total: ",k.present+k.absent," students"]})]}),r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-full mr-2",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-orange-600",children:r.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})})}),r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Afternoon Session"})]}),r.jsx(Tm,{width:"100%",height:200,children:r.jsxs(NP,{children:[r.jsx(Vs,{data:B,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"value",label:({name:F,value:re,percent:U})=>`${F}: ${re} (${(U*100).toFixed(1)}%)`,labelLine:!0,children:B.map((F,re)=>r.jsx(Od,{fill:F.color},`cell-${re}`))}),r.jsx(zn,{formatter:F=>[`${F} students`,"Count"],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}})]})}),r.jsx("div",{className:"flex justify-center space-x-6 mt-4",children:B.map(F=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:F.color}}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:F.name}),r.jsx("span",{className:"text-xl font-bold text-gray-900 ml-2",children:F.value})]})]},F.name))}),_.present+_.absent>0&&r.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500",children:["Total: ",_.present+_.absent," students"]})]})]}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 w-full lg:w-3/4 xl:w-1/2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 text-center",children:"Weekly Attendance"}),r.jsx(Tm,{width:"100%",height:250,children:r.jsxs(wP,{data:oe,children:[r.jsx(l1,{strokeDasharray:"3 3"}),r.jsx(lu,{dataKey:"name"}),r.jsx(cu,{}),r.jsx(zn,{}),r.jsx(no,{dataKey:"attendance",fill:"#3B82F6",radius:[4,4,0,0]})]})})]})})]})})};let eX={data:""},tX=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||eX},rX=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,aX=/\/\*[^]*?\*\/|  +/g,SP=/\n+/g,Zi=(e,t)=>{let a="",n="",s="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?a=o+" "+l+";":n+=o[1]=="f"?Zi(l,o):o+"{"+Zi(l,o[1]=="k"?"":t)+"}":typeof l=="object"?n+=Zi(l,t?t.replace(/([^,])+/g,d=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,d):d?d+" "+u:u)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Zi.p?Zi.p(o,l):o+":"+l+";")}return a+(t&&s?t+"{"+s+"}":s)+n},ci={},ZD=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+ZD(e[a]);return t}return e},nX=(e,t,a,n,s)=>{let o=ZD(e),l=ci[o]||(ci[o]=(u=>{let m=0,p=11;for(;m<u.length;)p=101*p+u.charCodeAt(m++)>>>0;return"go"+p})(o));if(!ci[l]){let u=o!==e?e:(m=>{let p,f,x=[{}];for(;p=rX.exec(m.replace(aX,""));)p[4]?x.shift():p[3]?(f=p[3].replace(SP," ").trim(),x.unshift(x[0][f]=x[0][f]||{})):x[0][p[1]]=p[2].replace(SP," ").trim();return x[0]})(e);ci[l]=Zi(s?{["@keyframes "+l]:u}:u,a?"":"."+l)}let d=a&&ci.g?ci.g:null;return a&&(ci.g=ci[l]),((u,m,p,f)=>{f?m.data=m.data.replace(f,u):m.data.indexOf(u)===-1&&(m.data=p?u+m.data:m.data+u)})(ci[l],t,n,d),l},sX=(e,t,a)=>e.reduce((n,s,o)=>{let l=t[o];if(l&&l.call){let d=l(a),u=d&&d.props&&d.props.className||/^go/.test(d)&&d;l=u?"."+u:d&&typeof d=="object"?d.props?"":Zi(d,""):d===!1?"":d}return n+s+(l??"")},"");function Gf(e){let t=this||{},a=e.call?e(t.p):e;return nX(a.unshift?a.raw?sX(a,[].slice.call(arguments,1),t.p):a.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):a,tX(t.target),t.g,t.o,t.k)}let QD,y1,b1;Gf.bind({g:1});let Ni=Gf.bind({k:1});function iX(e,t,a,n){Zi.p=t,QD=e,y1=a,b1=n}function uo(e,t){let a=this||{};return function(){let n=arguments;function s(o,l){let d=Object.assign({},o),u=d.className||s.className;a.p=Object.assign({theme:y1&&y1()},d),a.o=/ *go\d+/.test(u),d.className=Gf.apply(a,n)+(u?" "+u:"");let m=e;return e[0]&&(m=d.as||e,delete d.as),b1&&m[0]&&b1(d),QD(m,d)}return s}}var oX=e=>typeof e=="function",Xh=(e,t)=>oX(e)?e(t):e,lX=(()=>{let e=0;return()=>(++e).toString()})(),eO=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),cX=20,Uj="default",tO=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return tO(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},Xm=[],rO={toasts:[],pausedAt:void 0,settings:{toastLimit:cX}},Bs={},aO=(e,t=Uj)=>{Bs[t]=tO(Bs[t]||rO,e),Xm.forEach(([a,n])=>{a===t&&n(Bs[t])})},nO=e=>Object.keys(Bs).forEach(t=>aO(e,t)),dX=e=>Object.keys(Bs).find(t=>Bs[t].toasts.some(a=>a.id===e)),Kf=(e=Uj)=>t=>{aO(t,e)},uX={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mX=(e={},t=Uj)=>{let[a,n]=S.useState(Bs[t]||rO),s=S.useRef(Bs[t]);S.useEffect(()=>(s.current!==Bs[t]&&n(Bs[t]),Xm.push([t,n]),()=>{let l=Xm.findIndex(([d])=>d===t);l>-1&&Xm.splice(l,1)}),[t]);let o=a.toasts.map(l=>{var d,u,m;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((d=e[l.type])==null?void 0:d.removeDelay)||e?.removeDelay,duration:l.duration||((u=e[l.type])==null?void 0:u.duration)||e?.duration||uX[l.type],style:{...e.style,...(m=e[l.type])==null?void 0:m.style,...l.style}}});return{...a,toasts:o}},hX=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||lX()}),Cu=e=>(t,a)=>{let n=hX(t,e,a);return Kf(n.toasterId||dX(n.id))({type:2,toast:n}),n.id},xe=(e,t)=>Cu("blank")(e,t);xe.error=Cu("error");xe.success=Cu("success");xe.loading=Cu("loading");xe.custom=Cu("custom");xe.dismiss=(e,t)=>{let a={type:3,toastId:e};t?Kf(t)(a):nO(a)};xe.dismissAll=e=>xe.dismiss(void 0,e);xe.remove=(e,t)=>{let a={type:4,toastId:e};t?Kf(t)(a):nO(a)};xe.removeAll=e=>xe.remove(void 0,e);xe.promise=(e,t,a)=>{let n=xe.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?Xh(t.success,s):void 0;return o?xe.success(o,{id:n,...a,...a?.success}):xe.dismiss(n),s}).catch(s=>{let o=t.error?Xh(t.error,s):void 0;o?xe.error(o,{id:n,...a,...a?.error}):xe.dismiss(n)}),e};var fX=1e3,pX=(e,t="default")=>{let{toasts:a,pausedAt:n}=mX(e,t),s=S.useRef(new Map).current,o=S.useCallback((f,x=fX)=>{if(s.has(f))return;let w=setTimeout(()=>{s.delete(f),l({type:4,toastId:f})},x);s.set(f,w)},[]);S.useEffect(()=>{if(n)return;let f=Date.now(),x=a.map(w=>{if(w.duration===1/0)return;let j=(w.duration||0)+w.pauseDuration-(f-w.createdAt);if(j<0){w.visible&&xe.dismiss(w.id);return}return setTimeout(()=>xe.dismiss(w.id,t),j)});return()=>{x.forEach(w=>w&&clearTimeout(w))}},[a,n,t]);let l=S.useCallback(Kf(t),[t]),d=S.useCallback(()=>{l({type:5,time:Date.now()})},[l]),u=S.useCallback((f,x)=>{l({type:1,toast:{id:f,height:x}})},[l]),m=S.useCallback(()=>{n&&l({type:6,time:Date.now()})},[n,l]),p=S.useCallback((f,x)=>{let{reverseOrder:w=!1,gutter:j=8,defaultPosition:v}=x||{},b=a.filter(P=>(P.position||v)===(f.position||v)&&P.height),I=b.findIndex(P=>P.id===f.id),T=b.filter((P,A)=>A<I&&P.visible).length;return b.filter(P=>P.visible).slice(...w?[T+1]:[0,T]).reduce((P,A)=>P+(A.height||0)+j,0)},[a]);return S.useEffect(()=>{a.forEach(f=>{if(f.dismissed)o(f.id,f.removeDelay);else{let x=s.get(f.id);x&&(clearTimeout(x),s.delete(f.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:u,startPause:d,endPause:m,calculateOffset:p}}},gX=Ni`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,xX=Ni`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yX=Ni`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bX=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gX} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${xX} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${yX} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vX=Ni`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jX=uo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${vX} 1s linear infinite;
`,wX=Ni`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,NX=Ni`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,SX=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wX} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${NX} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,CX=uo("div")`
  position: absolute;
`,kX=uo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,IX=Ni`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,AX=uo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${IX} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,PX=({toast:e})=>{let{icon:t,type:a,iconTheme:n}=e;return t!==void 0?typeof t=="string"?S.createElement(AX,null,t):t:a==="blank"?null:S.createElement(kX,null,S.createElement(jX,{...n}),a!=="loading"&&S.createElement(CX,null,a==="error"?S.createElement(bX,{...n}):S.createElement(SX,{...n})))},EX=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TX=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,DX="0%{opacity:0;} 100%{opacity:1;}",OX="0%{opacity:1;} 100%{opacity:0;}",_X=uo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,MX=uo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RX=(e,t)=>{let a=e.includes("top")?1:-1,[n,s]=eO()?[DX,OX]:[EX(a),TX(a)];return{animation:t?`${Ni(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ni(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$X=S.memo(({toast:e,position:t,style:a,children:n})=>{let s=e.height?RX(e.position||t||"top-center",e.visible):{opacity:0},o=S.createElement(PX,{toast:e}),l=S.createElement(MX,{...e.ariaProps},Xh(e.message,e));return S.createElement(_X,{className:e.className,style:{...s,...a,...e.style}},typeof n=="function"?n({icon:o,message:l}):S.createElement(S.Fragment,null,o,l))});iX(S.createElement);var LX=({id:e,className:t,style:a,onHeightUpdate:n,children:s})=>{let o=S.useCallback(l=>{if(l){let d=()=>{let u=l.getBoundingClientRect().height;n(e,u)};d(),new MutationObserver(d).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return S.createElement("div",{ref:o,className:t,style:a},s)},FX=(e,t)=>{let a=e.includes("top"),n=a?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:eO()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...n,...s}},BX=Gf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,zm=16,UX=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:n,children:s,toasterId:o,containerStyle:l,containerClassName:d})=>{let{toasts:u,handlers:m}=pX(a,o);return S.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:zm,left:zm,right:zm,bottom:zm,pointerEvents:"none",...l},className:d,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(p=>{let f=p.position||t,x=m.calculateOffset(p,{reverseOrder:e,gutter:n,defaultPosition:t}),w=FX(f,x);return S.createElement(LX,{id:p.id,key:p.id,onHeightUpdate:m.updateHeight,className:p.visible?BX:"",style:w},p.type==="custom"?Xh(p.message,p):s?s(p):S.createElement($X,{toast:p,position:f}))}))},pt=xe;const gn=()=>{const{user:e,token:t}=dr(),[a,n]=S.useState(null),[s,o]=S.useState(!1),[l,d]=S.useState(null),u=async()=>{if(!e?.schoolCode||!t){d("School code or authentication token not available");return}o(!0),d(null);try{const[I,T]=await Promise.all([bt.get(`/admin/classes/${e.schoolCode}/classes-sections`),bt.get(`/admin/classes/${e.schoolCode}/tests`)]),P=I.data;if(!P.success)throw new Error(P.message||"Failed to fetch classes");let A={tests:[],testsByClass:{},totalTests:0};try{const E=T.data;E.success&&(A=E.data)}catch(E){console.log("Tests endpoint failed, continuing without tests:",E)}const k={...P.data,...A};n(k),console.log(" Classes, sections, and tests loaded:",k)}catch(I){console.error("Error fetching school data:",I),d(I.message||"Failed to fetch school data")}finally{o(!1)}},m=async I=>{if(!e?.schoolCode||!t)throw new Error("School code or authentication token not available");try{const P=(await bt.get(`/admin/classes/${e.schoolCode}/classes/${I}/sections`)).data;if(P.success)return P.data.sections;throw new Error(P.message||"Failed to fetch sections")}catch(T){throw console.error("Error fetching sections for class:",T),T}};S.useEffect(()=>{u()},[e?.schoolCode,t]);const p=S.useCallback(()=>a?.classOptions||[],[a?.classOptions]),f=S.useCallback(()=>a?.allSections||[],[a?.allSections]),x=S.useCallback(I=>a?.sectionsByClass[I]||[],[a?.sectionsByClass]),w=S.useCallback(()=>(a?.totalClasses||0)>0,[a?.totalClasses]),j=S.useCallback(()=>a?.tests||[],[a?.tests]),v=S.useCallback(I=>a?.testsByClass[I]||[],[a?.testsByClass]),b=S.useCallback(()=>(a?.totalTests||0)>0,[a?.totalTests]);return{classesData:a,loading:s,error:l,refetch:u,getSectionsForClass:m,getClassOptions:p,getAllSections:f,getSectionsByClass:x,hasClasses:w,getAllTests:j,getTestsByClass:v,hasTests:b}},Ab=[{id:1,name:"Andhra Pradesh",code:"AP"},{id:2,name:"Arunachal Pradesh",code:"AR"},{id:3,name:"Assam",code:"AS"},{id:4,name:"Bihar",code:"BR"},{id:5,name:"Chhattisgarh",code:"CG"},{id:6,name:"Goa",code:"GA"},{id:7,name:"Gujarat",code:"GJ"},{id:8,name:"Haryana",code:"HR"},{id:9,name:"Himachal Pradesh",code:"HP"},{id:10,name:"Jharkhand",code:"JH"},{id:11,name:"Karnataka",code:"KA"},{id:12,name:"Kerala",code:"KL"},{id:13,name:"Madhya Pradesh",code:"MP"},{id:14,name:"Maharashtra",code:"MH"},{id:15,name:"Manipur",code:"MN"},{id:16,name:"Meghalaya",code:"ML"},{id:17,name:"Mizoram",code:"MZ"},{id:18,name:"Nagaland",code:"NL"},{id:19,name:"Odisha",code:"OR"},{id:20,name:"Punjab",code:"PB"},{id:21,name:"Rajasthan",code:"RJ"},{id:22,name:"Sikkim",code:"SK"},{id:23,name:"Tamil Nadu",code:"TN"},{id:24,name:"Telangana",code:"TG"},{id:25,name:"Tripura",code:"TR"},{id:26,name:"Uttar Pradesh",code:"UP"},{id:27,name:"Uttarakhand",code:"UK"},{id:28,name:"West Bengal",code:"WB"},{id:29,name:"Andaman and Nicobar Islands",code:"AN"},{id:30,name:"Chandigarh",code:"CH"},{id:31,name:"Dadra and Nagar Haveli and Daman and Diu",code:"DN"},{id:32,name:"Delhi",code:"DL"},{id:33,name:"Jammu and Kashmir",code:"JK"},{id:34,name:"Ladakh",code:"LA"},{id:35,name:"Lakshadweep",code:"LD"},{id:36,name:"Puducherry",code:"PY"}],Pb=[{id:1001,name:"Anantapur",stateId:1},{id:1002,name:"Chittoor",stateId:1},{id:1003,name:"East Godavari",stateId:1},{id:1004,name:"Guntur",stateId:1},{id:1005,name:"Krishna",stateId:1},{id:1006,name:"Kurnool",stateId:1},{id:1007,name:"Nellore",stateId:1},{id:1008,name:"Prakasam",stateId:1},{id:1009,name:"Srikakulam",stateId:1},{id:1010,name:"Visakhapatnam",stateId:1},{id:1011,name:"Vizianagaram",stateId:1},{id:1012,name:"West Godavari",stateId:1},{id:1013,name:"YSR Kadapa",stateId:1},{id:1014,name:"Alluri Sitharama Raju",stateId:1},{id:1015,name:"Anakapalli",stateId:1},{id:1016,name:"Annamayya",stateId:1},{id:1017,name:"Bapatla",stateId:1},{id:1018,name:"Dr. B.R. Ambedkar Konaseema",stateId:1},{id:1019,name:"Eluru",stateId:1},{id:1020,name:"Kakinada",stateId:1},{id:1021,name:"NTR",stateId:1},{id:1022,name:"Nandyal",stateId:1},{id:1023,name:"Palnadu",stateId:1},{id:1024,name:"Parvathipuram Manyam",stateId:1},{id:1025,name:"Sri Potti Sriramulu Nellore",stateId:1},{id:1026,name:"Sri Sathya Sai",stateId:1},{id:2001,name:"Anjaw",stateId:2},{id:2002,name:"Changlang",stateId:2},{id:2003,name:"Dibang Valley",stateId:2},{id:2004,name:"East Kameng",stateId:2},{id:2005,name:"East Siang",stateId:2},{id:2006,name:"Kamle",stateId:2},{id:2007,name:"Kra Daadi",stateId:2},{id:2008,name:"Kurung Kumey",stateId:2},{id:2009,name:"Lepa Rada",stateId:2},{id:2010,name:"Lohit",stateId:2},{id:2011,name:"Longding",stateId:2},{id:2012,name:"Lower Dibang Valley",stateId:2},{id:2013,name:"Lower Siang",stateId:2},{id:2014,name:"Lower Subansiri",stateId:2},{id:2015,name:"Namsai",stateId:2},{id:2016,name:"Pakke Kessang",stateId:2},{id:2017,name:"Papum Pare",stateId:2},{id:2018,name:"Shi Yomi",stateId:2},{id:2019,name:"Siang",stateId:2},{id:2020,name:"Tawang",stateId:2},{id:2021,name:"Tirap",stateId:2},{id:2022,name:"Upper Siang",stateId:2},{id:2023,name:"Upper Subansiri",stateId:2},{id:2024,name:"West Kameng",stateId:2},{id:2025,name:"West Siang",stateId:2},{id:2026,name:"Itanagar Capital Complex",stateId:2},{id:3001,name:"Baksa",stateId:3},{id:3002,name:"Barpeta",stateId:3},{id:3003,name:"Biswanath",stateId:3},{id:3004,name:"Bongaigaon",stateId:3},{id:3005,name:"Cachar",stateId:3},{id:3006,name:"Charaideo",stateId:3},{id:3007,name:"Chirang",stateId:3},{id:3008,name:"Darrang",stateId:3},{id:3009,name:"Dhemaji",stateId:3},{id:3010,name:"Dhubri",stateId:3},{id:3011,name:"Dibrugarh",stateId:3},{id:3012,name:"Dima Hasao",stateId:3},{id:3013,name:"Goalpara",stateId:3},{id:3014,name:"Golaghat",stateId:3},{id:3015,name:"Hailakandi",stateId:3},{id:3016,name:"Hojai",stateId:3},{id:3017,name:"Jorhat",stateId:3},{id:3018,name:"Kamrup",stateId:3},{id:3019,name:"Kamrup Metropolitan",stateId:3},{id:3020,name:"Karbi Anglong",stateId:3},{id:3021,name:"Karimganj",stateId:3},{id:3022,name:"Kokrajhar",stateId:3},{id:3023,name:"Lakhimpur",stateId:3},{id:3024,name:"Majuli",stateId:3},{id:3025,name:"Morigaon",stateId:3},{id:3026,name:"Nagaon",stateId:3},{id:3027,name:"Nalbari",stateId:3},{id:3028,name:"Sivasagar",stateId:3},{id:3029,name:"Sonitpur",stateId:3},{id:3030,name:"South Salmara-Mankachar",stateId:3},{id:3031,name:"Tinsukia",stateId:3},{id:3032,name:"Udalguri",stateId:3},{id:3033,name:"West Karbi Anglong",stateId:3},{id:3034,name:"Bajali",stateId:3},{id:3035,name:"Tamulpur",stateId:3},{id:4001,name:"Araria",stateId:4},{id:4002,name:"Arwal",stateId:4},{id:4003,name:"Aurangabad",stateId:4},{id:4004,name:"Banka",stateId:4},{id:4005,name:"Begusarai",stateId:4},{id:4006,name:"Bhagalpur",stateId:4},{id:4007,name:"Bhojpur",stateId:4},{id:4008,name:"Buxar",stateId:4},{id:4009,name:"Darbhanga",stateId:4},{id:4010,name:"East Champaran",stateId:4},{id:4011,name:"Gaya",stateId:4},{id:4012,name:"Gopalganj",stateId:4},{id:4013,name:"Jamui",stateId:4},{id:4014,name:"Jehanabad",stateId:4},{id:4015,name:"Kaimur",stateId:4},{id:4016,name:"Katihar",stateId:4},{id:4017,name:"Khagaria",stateId:4},{id:4018,name:"Kishanganj",stateId:4},{id:4019,name:"Lakhisarai",stateId:4},{id:4020,name:"Madhepura",stateId:4},{id:4021,name:"Madhubani",stateId:4},{id:4022,name:"Munger",stateId:4},{id:4023,name:"Muzaffarpur",stateId:4},{id:4024,name:"Nalanda",stateId:4},{id:4025,name:"Nawada",stateId:4},{id:4026,name:"Patna",stateId:4},{id:4027,name:"Purnia",stateId:4},{id:4028,name:"Rohtas",stateId:4},{id:4029,name:"Saharsa",stateId:4},{id:4030,name:"Samastipur",stateId:4},{id:4031,name:"Saran",stateId:4},{id:4032,name:"Sheikhpura",stateId:4},{id:4033,name:"Sheohar",stateId:4},{id:4034,name:"Sitamarhi",stateId:4},{id:4035,name:"Siwan",stateId:4},{id:4036,name:"Supaul",stateId:4},{id:4037,name:"Vaishali",stateId:4},{id:4038,name:"West Champaran",stateId:4},{id:5001,name:"Balod",stateId:5},{id:5002,name:"Baloda Bazar",stateId:5},{id:5003,name:"Balrampur",stateId:5},{id:5004,name:"Bastar",stateId:5},{id:5005,name:"Bemetara",stateId:5},{id:5006,name:"Bijapur",stateId:5},{id:5007,name:"Bilaspur",stateId:5},{id:5008,name:"Dantewada",stateId:5},{id:5009,name:"Dhamtari",stateId:5},{id:5010,name:"Durg",stateId:5},{id:5011,name:"Gariaband",stateId:5},{id:5012,name:"Gaurela Pendra Marwahi",stateId:5},{id:5013,name:"Janjgir Champa",stateId:5},{id:5014,name:"Jashpur",stateId:5},{id:5015,name:"Kabirdham",stateId:5},{id:5016,name:"Kanker",stateId:5},{id:5017,name:"Kondagaon",stateId:5},{id:5018,name:"Korba",stateId:5},{id:5019,name:"Koriya",stateId:5},{id:5020,name:"Mahasamund",stateId:5},{id:5021,name:"Manendragarh Chirmiri Bharatpur",stateId:5},{id:5022,name:"Mohla Manpur",stateId:5},{id:5023,name:"Mungeli",stateId:5},{id:5024,name:"Narayanpur",stateId:5},{id:5025,name:"Raigarh",stateId:5},{id:5026,name:"Raipur",stateId:5},{id:5027,name:"Rajnandgaon",stateId:5},{id:5028,name:"Sakti",stateId:5},{id:5029,name:"Sarangarh Bilaigarh",stateId:5},{id:5030,name:"Sukma",stateId:5},{id:5031,name:"Surajpur",stateId:5},{id:5032,name:"Surguja",stateId:5},{id:5033,name:"Khairagarh",stateId:5},{id:6001,name:"North Goa",stateId:6},{id:6002,name:"South Goa",stateId:6},{id:7001,name:"Ahmedabad",stateId:7},{id:7002,name:"Amreli",stateId:7},{id:7003,name:"Anand",stateId:7},{id:7004,name:"Aravalli",stateId:7},{id:7005,name:"Banaskantha",stateId:7},{id:7006,name:"Bharuch",stateId:7},{id:7007,name:"Bhavnagar",stateId:7},{id:7008,name:"Botad",stateId:7},{id:7009,name:"Chhota Udaipur",stateId:7},{id:7010,name:"Dahod",stateId:7},{id:7011,name:"Dang",stateId:7},{id:7012,name:"Devbhoomi Dwarka",stateId:7},{id:7013,name:"Gandhinagar",stateId:7},{id:7014,name:"Gir Somnath",stateId:7},{id:7015,name:"Jamnagar",stateId:7},{id:7016,name:"Junagadh",stateId:7},{id:7017,name:"Kheda",stateId:7},{id:7018,name:"Kutch",stateId:7},{id:7019,name:"Mahisagar",stateId:7},{id:7020,name:"Mehsana",stateId:7},{id:7021,name:"Morbi",stateId:7},{id:7022,name:"Narmada",stateId:7},{id:7023,name:"Navsari",stateId:7},{id:7024,name:"Panchmahal",stateId:7},{id:7025,name:"Patan",stateId:7},{id:7026,name:"Porbandar",stateId:7},{id:7027,name:"Rajkot",stateId:7},{id:7028,name:"Sabarkantha",stateId:7},{id:7029,name:"Surat",stateId:7},{id:7030,name:"Surendranagar",stateId:7},{id:7031,name:"Tapi",stateId:7},{id:7032,name:"Vadodara",stateId:7},{id:7033,name:"Valsad",stateId:7},{id:8001,name:"Ambala",stateId:8},{id:8002,name:"Bhiwani",stateId:8},{id:8003,name:"Charkhi Dadri",stateId:8},{id:8004,name:"Faridabad",stateId:8},{id:8005,name:"Fatehabad",stateId:8},{id:8006,name:"Gurugram",stateId:8},{id:8007,name:"Hisar",stateId:8},{id:8008,name:"Jhajjar",stateId:8},{id:8009,name:"Jind",stateId:8},{id:8010,name:"Kaithal",stateId:8},{id:8011,name:"Karnal",stateId:8},{id:8012,name:"Kurukshetra",stateId:8},{id:8013,name:"Mahendragarh",stateId:8},{id:8014,name:"Nuh",stateId:8},{id:8015,name:"Palwal",stateId:8},{id:8016,name:"Panchkula",stateId:8},{id:8017,name:"Panipat",stateId:8},{id:8018,name:"Rewari",stateId:8},{id:8019,name:"Rohtak",stateId:8},{id:8020,name:"Sirsa",stateId:8},{id:8021,name:"Sonipat",stateId:8},{id:8022,name:"Yamunanagar",stateId:8},{id:9001,name:"Bilaspur",stateId:9},{id:9002,name:"Chamba",stateId:9},{id:9003,name:"Hamirpur",stateId:9},{id:9004,name:"Kangra",stateId:9},{id:9005,name:"Kinnaur",stateId:9},{id:9006,name:"Kullu",stateId:9},{id:9007,name:"Lahaul and Spiti",stateId:9},{id:9008,name:"Mandi",stateId:9},{id:9009,name:"Shimla",stateId:9},{id:9010,name:"Sirmaur",stateId:9},{id:9011,name:"Solan",stateId:9},{id:9012,name:"Una",stateId:9},{id:10001,name:"Bokaro",stateId:10},{id:10002,name:"Chatra",stateId:10},{id:10003,name:"Deoghar",stateId:10},{id:10004,name:"Dhanbad",stateId:10},{id:10005,name:"Dumka",stateId:10},{id:10006,name:"East Singhbhum",stateId:10},{id:10007,name:"Garhwa",stateId:10},{id:10008,name:"Giridih",stateId:10},{id:10009,name:"Godda",stateId:10},{id:10010,name:"Gumla",stateId:10},{id:10011,name:"Hazaribagh",stateId:10},{id:10012,name:"Jamtara",stateId:10},{id:10013,name:"Khunti",stateId:10},{id:10014,name:"Koderma",stateId:10},{id:10015,name:"Latehar",stateId:10},{id:10016,name:"Lohardaga",stateId:10},{id:10017,name:"Pakur",stateId:10},{id:10018,name:"Palamu",stateId:10},{id:10019,name:"Ramgarh",stateId:10},{id:10020,name:"Ranchi",stateId:10},{id:10021,name:"Sahebganj",stateId:10},{id:10022,name:"Seraikela Kharsawan",stateId:10},{id:10023,name:"Simdega",stateId:10},{id:10024,name:"West Singhbhum",stateId:10},{id:11001,name:"Bagalkot",stateId:11},{id:11002,name:"Ballari",stateId:11},{id:11003,name:"Belagavi",stateId:11},{id:11004,name:"Bengaluru Rural",stateId:11},{id:11005,name:"Bengaluru Urban",stateId:11},{id:11006,name:"Bidar",stateId:11},{id:11007,name:"Chamarajanagar",stateId:11},{id:11008,name:"Chikkaballapur",stateId:11},{id:11009,name:"Chikkamagaluru",stateId:11},{id:11010,name:"Chitradurga",stateId:11},{id:11011,name:"Dakshina Kannada",stateId:11},{id:11012,name:"Davanagere",stateId:11},{id:11013,name:"Dharwad",stateId:11},{id:11014,name:"Gadag",stateId:11},{id:11015,name:"Hassan",stateId:11},{id:11016,name:"Haveri",stateId:11},{id:11017,name:"Kalaburagi",stateId:11},{id:11018,name:"Kodagu",stateId:11},{id:11019,name:"Kolar",stateId:11},{id:11020,name:"Koppal",stateId:11},{id:11021,name:"Mandya",stateId:11},{id:11022,name:"Mysuru",stateId:11},{id:11023,name:"Raichur",stateId:11},{id:11024,name:"Ramanagara",stateId:11},{id:11025,name:"Shivamogga",stateId:11},{id:11026,name:"Tumakuru",stateId:11},{id:11027,name:"Udupi",stateId:11},{id:11028,name:"Uttara Kannada",stateId:11},{id:11029,name:"Vijayapura",stateId:11},{id:11030,name:"Yadgir",stateId:11},{id:11031,name:"Vijayanagara",stateId:11},{id:12001,name:"Alappuzha",stateId:12},{id:12002,name:"Ernakulam",stateId:12},{id:12003,name:"Idukki",stateId:12},{id:12004,name:"Kannur",stateId:12},{id:12005,name:"Kasaragod",stateId:12},{id:12006,name:"Kollam",stateId:12},{id:12007,name:"Kottayam",stateId:12},{id:12008,name:"Kozhikode",stateId:12},{id:12009,name:"Malappuram",stateId:12},{id:12010,name:"Palakkad",stateId:12},{id:12011,name:"Pathanamthitta",stateId:12},{id:12012,name:"Thiruvananthapuram",stateId:12},{id:12013,name:"Thrissur",stateId:12},{id:12014,name:"Wayanad",stateId:12},{id:13001,name:"Agar Malwa",stateId:13},{id:13002,name:"Alirajpur",stateId:13},{id:13003,name:"Anuppur",stateId:13},{id:13004,name:"Ashoknagar",stateId:13},{id:13005,name:"Balaghat",stateId:13},{id:13006,name:"Barwani",stateId:13},{id:13007,name:"Betul",stateId:13},{id:13008,name:"Bhind",stateId:13},{id:13009,name:"Bhopal",stateId:13},{id:13010,name:"Burhanpur",stateId:13},{id:13011,name:"Chachaura",stateId:13},{id:13012,name:"Chhatarpur",stateId:13},{id:13013,name:"Chhindwara",stateId:13},{id:13014,name:"Damoh",stateId:13},{id:13015,name:"Datia",stateId:13},{id:13016,name:"Dewas",stateId:13},{id:13017,name:"Dhar",stateId:13},{id:13018,name:"Dindori",stateId:13},{id:13019,name:"Guna",stateId:13},{id:13020,name:"Gwalior",stateId:13},{id:13021,name:"Harda",stateId:13},{id:13022,name:"Hoshangabad",stateId:13},{id:13023,name:"Indore",stateId:13},{id:13024,name:"Jabalpur",stateId:13},{id:13025,name:"Jhabua",stateId:13},{id:13026,name:"Katni",stateId:13},{id:13027,name:"Khandwa",stateId:13},{id:13028,name:"Khargone",stateId:13},{id:13029,name:"Maihar",stateId:13},{id:13030,name:"Mandla",stateId:13},{id:13031,name:"Mandsaur",stateId:13},{id:13032,name:"Morena",stateId:13},{id:13033,name:"Nagda",stateId:13},{id:13034,name:"Narsinghpur",stateId:13},{id:13035,name:"Neemuch",stateId:13},{id:13036,name:"Niwari",stateId:13},{id:13037,name:"Panna",stateId:13},{id:13038,name:"Raisen",stateId:13},{id:13039,name:"Rajgarh",stateId:13},{id:13040,name:"Ratlam",stateId:13},{id:13041,name:"Rewa",stateId:13},{id:13042,name:"Sagar",stateId:13},{id:13043,name:"Satna",stateId:13},{id:13044,name:"Sehore",stateId:13},{id:13045,name:"Seoni",stateId:13},{id:13046,name:"Shahdol",stateId:13},{id:13047,name:"Shajapur",stateId:13},{id:13048,name:"Sheopur",stateId:13},{id:13049,name:"Shivpuri",stateId:13},{id:13050,name:"Sidhi",stateId:13},{id:13051,name:"Singrauli",stateId:13},{id:13052,name:"Tikamgarh",stateId:13},{id:13053,name:"Ujjain",stateId:13},{id:13054,name:"Umaria",stateId:13},{id:13055,name:"Vidisha",stateId:13},{id:14001,name:"Ahmednagar",stateId:14},{id:14002,name:"Akola",stateId:14},{id:14003,name:"Amravati",stateId:14},{id:14004,name:"Aurangabad",stateId:14},{id:14005,name:"Beed",stateId:14},{id:14006,name:"Bhandara",stateId:14},{id:14007,name:"Buldhana",stateId:14},{id:14008,name:"Chandrapur",stateId:14},{id:14009,name:"Dhule",stateId:14},{id:14010,name:"Gadchiroli",stateId:14},{id:14011,name:"Gondia",stateId:14},{id:14012,name:"Hingoli",stateId:14},{id:14013,name:"Jalgaon",stateId:14},{id:14014,name:"Jalna",stateId:14},{id:14015,name:"Kolhapur",stateId:14},{id:14016,name:"Latur",stateId:14},{id:14017,name:"Mumbai City",stateId:14},{id:14018,name:"Mumbai Suburban",stateId:14},{id:14019,name:"Nagpur",stateId:14},{id:14020,name:"Nanded",stateId:14},{id:14021,name:"Nandurbar",stateId:14},{id:14022,name:"Nashik",stateId:14},{id:14023,name:"Osmanabad",stateId:14},{id:14024,name:"Palghar",stateId:14},{id:14025,name:"Parbhani",stateId:14},{id:14026,name:"Pune",stateId:14},{id:14027,name:"Raigad",stateId:14},{id:14028,name:"Ratnagiri",stateId:14},{id:14029,name:"Sangli",stateId:14},{id:14030,name:"Satara",stateId:14},{id:14031,name:"Sindhudurg",stateId:14},{id:14032,name:"Solapur",stateId:14},{id:14033,name:"Thane",stateId:14},{id:14034,name:"Wardha",stateId:14},{id:14035,name:"Washim",stateId:14},{id:14036,name:"Yavatmal",stateId:14},{id:15001,name:"Bishnupur",stateId:15},{id:15002,name:"Chandel",stateId:15},{id:15003,name:"Churachandpur",stateId:15},{id:15004,name:"Imphal East",stateId:15},{id:15005,name:"Imphal West",stateId:15},{id:15006,name:"Jiribam",stateId:15},{id:15007,name:"Kakching",stateId:15},{id:15008,name:"Kamjong",stateId:15},{id:15009,name:"Kangpokpi",stateId:15},{id:15010,name:"Noney",stateId:15},{id:15011,name:"Pherzawl",stateId:15},{id:15012,name:"Senapati",stateId:15},{id:15013,name:"Tamenglong",stateId:15},{id:15014,name:"Tengnoupal",stateId:15},{id:15015,name:"Thoubal",stateId:15},{id:15016,name:"Ukhrul",stateId:15},{id:16001,name:"East Garo Hills",stateId:16},{id:16002,name:"East Jaintia Hills",stateId:16},{id:16003,name:"East Khasi Hills",stateId:16},{id:16004,name:"Eastern West Khasi Hills",stateId:16},{id:16005,name:"North Garo Hills",stateId:16},{id:16006,name:"Ri Bhoi",stateId:16},{id:16007,name:"South Garo Hills",stateId:16},{id:16008,name:"South West Garo Hills",stateId:16},{id:16009,name:"South West Khasi Hills",stateId:16},{id:16010,name:"West Garo Hills",stateId:16},{id:16011,name:"West Jaintia Hills",stateId:16},{id:16012,name:"West Khasi Hills",stateId:16},{id:17001,name:"Aizawl",stateId:17},{id:17002,name:"Champhai",stateId:17},{id:17003,name:"Hnahthial",stateId:17},{id:17004,name:"Khawzawl",stateId:17},{id:17005,name:"Kolasib",stateId:17},{id:17006,name:"Lawngtlai",stateId:17},{id:17007,name:"Lunglei",stateId:17},{id:17008,name:"Mamit",stateId:17},{id:17009,name:"Saiha",stateId:17},{id:17010,name:"Saitual",stateId:17},{id:17011,name:"Serchhip",stateId:17},{id:18001,name:"Chumoukedima",stateId:18},{id:18002,name:"Dimapur",stateId:18},{id:18003,name:"Kiphire",stateId:18},{id:18004,name:"Kohima",stateId:18},{id:18005,name:"Longleng",stateId:18},{id:18006,name:"Mokokchung",stateId:18},{id:18007,name:"Mon",stateId:18},{id:18008,name:"Niuland",stateId:18},{id:18009,name:"Noklak",stateId:18},{id:18010,name:"Peren",stateId:18},{id:18011,name:"Phek",stateId:18},{id:18012,name:"Shamator",stateId:18},{id:18013,name:"Tseminyu",stateId:18},{id:18014,name:"Tuensang",stateId:18},{id:18015,name:"Wokha",stateId:18},{id:18016,name:"Zunheboto",stateId:18},{id:19001,name:"Angul",stateId:19},{id:19002,name:"Balangir",stateId:19},{id:19003,name:"Balasore",stateId:19},{id:19004,name:"Bargarh",stateId:19},{id:19005,name:"Bhadrak",stateId:19},{id:19006,name:"Boudh",stateId:19},{id:19007,name:"Cuttack",stateId:19},{id:19008,name:"Debagarh",stateId:19},{id:19009,name:"Dhenkanal",stateId:19},{id:19010,name:"Gajapati",stateId:19},{id:19011,name:"Ganjam",stateId:19},{id:19012,name:"Jagatsinghpur",stateId:19},{id:19013,name:"Jajpur",stateId:19},{id:19014,name:"Jharsuguda",stateId:19},{id:19015,name:"Kalahandi",stateId:19},{id:19016,name:"Kandhamal",stateId:19},{id:19017,name:"Kendrapara",stateId:19},{id:19018,name:"Kendujhar",stateId:19},{id:19019,name:"Khordha",stateId:19},{id:19020,name:"Koraput",stateId:19},{id:19021,name:"Malkangiri",stateId:19},{id:19022,name:"Mayurbhanj",stateId:19},{id:19023,name:"Nabarangpur",stateId:19},{id:19024,name:"Nayagarh",stateId:19},{id:19025,name:"Nuapada",stateId:19},{id:19026,name:"Puri",stateId:19},{id:19027,name:"Rayagada",stateId:19},{id:19028,name:"Sambalpur",stateId:19},{id:19029,name:"Subarnapur",stateId:19},{id:19030,name:"Sundargarh",stateId:19},{id:20001,name:"Amritsar",stateId:20},{id:20002,name:"Barnala",stateId:20},{id:20003,name:"Bathinda",stateId:20},{id:20004,name:"Faridkot",stateId:20},{id:20005,name:"Fatehgarh Sahib",stateId:20},{id:20006,name:"Fazilka",stateId:20},{id:20007,name:"Ferozepur",stateId:20},{id:20008,name:"Gurdaspur",stateId:20},{id:20009,name:"Hoshiarpur",stateId:20},{id:20010,name:"Jalandhar",stateId:20},{id:20011,name:"Kapurthala",stateId:20},{id:20012,name:"Ludhiana",stateId:20},{id:20013,name:"Malerkotla",stateId:20},{id:20014,name:"Mansa",stateId:20},{id:20015,name:"Moga",stateId:20},{id:20016,name:"Mohali",stateId:20},{id:20017,name:"Muktsar",stateId:20},{id:20018,name:"Pathankot",stateId:20},{id:20019,name:"Patiala",stateId:20},{id:20020,name:"Rupnagar",stateId:20},{id:20021,name:"Sangrur",stateId:20},{id:20022,name:"Shaheed Bhagat Singh Nagar",stateId:20},{id:20023,name:"Tarn Taran",stateId:20},{id:21001,name:"Ajmer",stateId:21},{id:21002,name:"Alwar",stateId:21},{id:21003,name:"Anupgarh",stateId:21},{id:21004,name:"Balotra",stateId:21},{id:21005,name:"Banswara",stateId:21},{id:21006,name:"Baran",stateId:21},{id:21007,name:"Barmer",stateId:21},{id:21008,name:"Beawar",stateId:21},{id:21009,name:"Bharatpur",stateId:21},{id:21010,name:"Bhilwara",stateId:21},{id:21011,name:"Bikaner",stateId:21},{id:21012,name:"Bundi",stateId:21},{id:21013,name:"Chittorgarh",stateId:21},{id:21014,name:"Churu",stateId:21},{id:21015,name:"Dausa",stateId:21},{id:21016,name:"Deeg",stateId:21},{id:21017,name:"Dholpur",stateId:21},{id:21018,name:"Didwana Kuchaman",stateId:21},{id:21019,name:"Dudu",stateId:21},{id:21020,name:"Dungarpur",stateId:21},{id:21021,name:"Ganganagar",stateId:21},{id:21022,name:"Gangapur City",stateId:21},{id:21023,name:"Hanumangarh",stateId:21},{id:21024,name:"Jaipur",stateId:21},{id:21025,name:"Jaisalmer",stateId:21},{id:21026,name:"Jalore",stateId:21},{id:21027,name:"Jhalawar",stateId:21},{id:21028,name:"Jhunjhunu",stateId:21},{id:21029,name:"Jodhpur",stateId:21},{id:21030,name:"Karauli",stateId:21},{id:21031,name:"Kekri",stateId:21},{id:21032,name:"Khairthal Tijara",stateId:21},{id:21033,name:"Kota",stateId:21},{id:21034,name:"Kotputli Behror",stateId:21},{id:21035,name:"Nagaur",stateId:21},{id:21036,name:"Neem Ka Thana",stateId:21},{id:21037,name:"Pali",stateId:21},{id:21038,name:"Phalodi",stateId:21},{id:21039,name:"Pratapgarh",stateId:21},{id:21040,name:"Rajsamand",stateId:21},{id:21041,name:"Salumbar",stateId:21},{id:21042,name:"Sanchore",stateId:21},{id:21043,name:"Sawai Madhopur",stateId:21},{id:21044,name:"Shahpura",stateId:21},{id:21045,name:"Sikar",stateId:21},{id:21046,name:"Sirohi",stateId:21},{id:21047,name:"Tonk",stateId:21},{id:21048,name:"Udaipur",stateId:21},{id:21049,name:"Jaipur Rural",stateId:21},{id:21050,name:"Jodhpur Rural",stateId:21},{id:22001,name:"East Sikkim",stateId:22},{id:22002,name:"North Sikkim",stateId:22},{id:22003,name:"Pakyong",stateId:22},{id:22004,name:"Soreng",stateId:22},{id:22005,name:"South Sikkim",stateId:22},{id:22006,name:"West Sikkim",stateId:22},{id:23001,name:"Ariyalur",stateId:23},{id:23002,name:"Chengalpattu",stateId:23},{id:23003,name:"Chennai",stateId:23},{id:23004,name:"Coimbatore",stateId:23},{id:23005,name:"Cuddalore",stateId:23},{id:23006,name:"Dharmapuri",stateId:23},{id:23007,name:"Dindigul",stateId:23},{id:23008,name:"Erode",stateId:23},{id:23009,name:"Kallakurichi",stateId:23},{id:23010,name:"Kanchipuram",stateId:23},{id:23011,name:"Kanyakumari",stateId:23},{id:23012,name:"Karur",stateId:23},{id:23013,name:"Krishnagiri",stateId:23},{id:23014,name:"Madurai",stateId:23},{id:23015,name:"Mayiladuthurai",stateId:23},{id:23016,name:"Nagapattinam",stateId:23},{id:23017,name:"Namakkal",stateId:23},{id:23018,name:"Nilgiris",stateId:23},{id:23019,name:"Perambalur",stateId:23},{id:23020,name:"Pudukkottai",stateId:23},{id:23021,name:"Ramanathapuram",stateId:23},{id:23022,name:"Ranipet",stateId:23},{id:23023,name:"Salem",stateId:23},{id:23024,name:"Sivaganga",stateId:23},{id:23025,name:"Tenkasi",stateId:23},{id:23026,name:"Thanjavur",stateId:23},{id:23027,name:"Theni",stateId:23},{id:23028,name:"Thoothukudi",stateId:23},{id:23029,name:"Tiruchirappalli",stateId:23},{id:23030,name:"Tirunelveli",stateId:23},{id:23031,name:"Tirupathur",stateId:23},{id:23032,name:"Tiruppur",stateId:23},{id:23033,name:"Tiruvallur",stateId:23},{id:23034,name:"Tiruvannamalai",stateId:23},{id:23035,name:"Tiruvarur",stateId:23},{id:23036,name:"Vellore",stateId:23},{id:23037,name:"Viluppuram",stateId:23},{id:23038,name:"Virudhunagar",stateId:23},{id:24001,name:"Adilabad",stateId:24},{id:24002,name:"Bhadradri Kothagudem",stateId:24},{id:24003,name:"Hanamkonda",stateId:24},{id:24004,name:"Hyderabad",stateId:24},{id:24005,name:"Jagtial",stateId:24},{id:24006,name:"Jangaon",stateId:24},{id:24007,name:"Jayashankar Bhupalpally",stateId:24},{id:24008,name:"Jogulamba Gadwal",stateId:24},{id:24009,name:"Kamareddy",stateId:24},{id:24010,name:"Karimnagar",stateId:24},{id:24011,name:"Khammam",stateId:24},{id:24012,name:"Komaram Bheem",stateId:24},{id:24013,name:"Mahabubabad",stateId:24},{id:24014,name:"Mahabubnagar",stateId:24},{id:24015,name:"Mancherial",stateId:24},{id:24016,name:"Medak",stateId:24},{id:24017,name:"Medchal Malkajgiri",stateId:24},{id:24018,name:"Mulugu",stateId:24},{id:24019,name:"Nagarkurnool",stateId:24},{id:24020,name:"Nalgonda",stateId:24},{id:24021,name:"Narayanpet",stateId:24},{id:24022,name:"Nirmal",stateId:24},{id:24023,name:"Nizamabad",stateId:24},{id:24024,name:"Peddapalli",stateId:24},{id:24025,name:"Rajanna Sircilla",stateId:24},{id:24026,name:"Rangareddy",stateId:24},{id:24027,name:"Sangareddy",stateId:24},{id:24028,name:"Siddipet",stateId:24},{id:24029,name:"Suryapet",stateId:24},{id:24030,name:"Vikarabad",stateId:24},{id:24031,name:"Wanaparthy",stateId:24},{id:24032,name:"Warangal",stateId:24},{id:24033,name:"Yadadri Bhuvanagiri",stateId:24},{id:25001,name:"Dhalai",stateId:25},{id:25002,name:"Gomati",stateId:25},{id:25003,name:"Khowai",stateId:25},{id:25004,name:"North Tripura",stateId:25},{id:25005,name:"Sepahijala",stateId:25},{id:25006,name:"South Tripura",stateId:25},{id:25007,name:"Unakoti",stateId:25},{id:25008,name:"West Tripura",stateId:25},{id:26001,name:"Agra",stateId:26},{id:26002,name:"Aligarh",stateId:26},{id:26003,name:"Ambedkar Nagar",stateId:26},{id:26004,name:"Amethi",stateId:26},{id:26005,name:"Amroha",stateId:26},{id:26006,name:"Auraiya",stateId:26},{id:26007,name:"Ayodhya",stateId:26},{id:26008,name:"Azamgarh",stateId:26},{id:26009,name:"Baghpat",stateId:26},{id:26010,name:"Bahraich",stateId:26},{id:26011,name:"Ballia",stateId:26},{id:26012,name:"Balrampur",stateId:26},{id:26013,name:"Banda",stateId:26},{id:26014,name:"Barabanki",stateId:26},{id:26015,name:"Bareilly",stateId:26},{id:26016,name:"Basti",stateId:26},{id:26017,name:"Bhadohi",stateId:26},{id:26018,name:"Bijnor",stateId:26},{id:26019,name:"Budaun",stateId:26},{id:26020,name:"Bulandshahr",stateId:26},{id:26021,name:"Chandauli",stateId:26},{id:26022,name:"Chitrakoot",stateId:26},{id:26023,name:"Deoria",stateId:26},{id:26024,name:"Etah",stateId:26},{id:26025,name:"Etawah",stateId:26},{id:26026,name:"Farrukhabad",stateId:26},{id:26027,name:"Fatehpur",stateId:26},{id:26028,name:"Firozabad",stateId:26},{id:26029,name:"Gautam Buddha Nagar",stateId:26},{id:26030,name:"Ghaziabad",stateId:26},{id:26031,name:"Ghazipur",stateId:26},{id:26032,name:"Gonda",stateId:26},{id:26033,name:"Gorakhpur",stateId:26},{id:26034,name:"Hamirpur",stateId:26},{id:26035,name:"Hapur",stateId:26},{id:26036,name:"Hardoi",stateId:26},{id:26037,name:"Hathras",stateId:26},{id:26038,name:"Jalaun",stateId:26},{id:26039,name:"Jaunpur",stateId:26},{id:26040,name:"Jhansi",stateId:26},{id:26041,name:"Kannauj",stateId:26},{id:26042,name:"Kanpur Dehat",stateId:26},{id:26043,name:"Kanpur Nagar",stateId:26},{id:26044,name:"Kasganj",stateId:26},{id:26045,name:"Kaushambi",stateId:26},{id:26046,name:"Kushinagar",stateId:26},{id:26047,name:"Lakhimpur Kheri",stateId:26},{id:26048,name:"Lalitpur",stateId:26},{id:26049,name:"Lucknow",stateId:26},{id:26050,name:"Maharajganj",stateId:26},{id:26051,name:"Mahoba",stateId:26},{id:26052,name:"Mainpuri",stateId:26},{id:26053,name:"Mathura",stateId:26},{id:26054,name:"Mau",stateId:26},{id:26055,name:"Meerut",stateId:26},{id:26056,name:"Mirzapur",stateId:26},{id:26057,name:"Moradabad",stateId:26},{id:26058,name:"Muzaffarnagar",stateId:26},{id:26059,name:"Pilibhit",stateId:26},{id:26060,name:"Pratapgarh",stateId:26},{id:26061,name:"Prayagraj",stateId:26},{id:26062,name:"Raebareli",stateId:26},{id:26063,name:"Rampur",stateId:26},{id:26064,name:"Saharanpur",stateId:26},{id:26065,name:"Sambhal",stateId:26},{id:26066,name:"Sant Kabir Nagar",stateId:26},{id:26067,name:"Shahjahanpur",stateId:26},{id:26068,name:"Shamli",stateId:26},{id:26069,name:"Shravasti",stateId:26},{id:26070,name:"Siddharthnagar",stateId:26},{id:26071,name:"Sitapur",stateId:26},{id:26072,name:"Sonbhadra",stateId:26},{id:26073,name:"Sultanpur",stateId:26},{id:26074,name:"Unnao",stateId:26},{id:26075,name:"Varanasi",stateId:26},{id:27001,name:"Almora",stateId:27},{id:27002,name:"Bageshwar",stateId:27},{id:27003,name:"Chamoli",stateId:27},{id:27004,name:"Champawat",stateId:27},{id:27005,name:"Dehradun",stateId:27},{id:27006,name:"Haridwar",stateId:27},{id:27007,name:"Nainital",stateId:27},{id:27008,name:"Pauri Garhwal",stateId:27},{id:27009,name:"Pithoragarh",stateId:27},{id:27010,name:"Rudraprayag",stateId:27},{id:27011,name:"Tehri Garhwal",stateId:27},{id:27012,name:"Udham Singh Nagar",stateId:27},{id:27013,name:"Uttarkashi",stateId:27},{id:28001,name:"Alipurduar",stateId:28},{id:28002,name:"Bankura",stateId:28},{id:28003,name:"Birbhum",stateId:28},{id:28004,name:"Cooch Behar",stateId:28},{id:28005,name:"Dakshin Dinajpur",stateId:28},{id:28006,name:"Darjeeling",stateId:28},{id:28007,name:"Hooghly",stateId:28},{id:28008,name:"Howrah",stateId:28},{id:28009,name:"Jalpaiguri",stateId:28},{id:28010,name:"Jhargram",stateId:28},{id:28011,name:"Kalimpong",stateId:28},{id:28012,name:"Kolkata",stateId:28},{id:28013,name:"Malda",stateId:28},{id:28014,name:"Murshidabad",stateId:28},{id:28015,name:"Nadia",stateId:28},{id:28016,name:"North 24 Parganas",stateId:28},{id:28017,name:"Paschim Bardhaman",stateId:28},{id:28018,name:"Paschim Medinipur",stateId:28},{id:28019,name:"Purba Bardhaman",stateId:28},{id:28020,name:"Purba Medinipur",stateId:28},{id:28021,name:"Purulia",stateId:28},{id:28022,name:"South 24 Parganas",stateId:28},{id:28023,name:"Uttar Dinajpur",stateId:28},{id:29001,name:"Nicobar",stateId:29},{id:29002,name:"North and Middle Andaman",stateId:29},{id:29003,name:"South Andaman",stateId:29},{id:30001,name:"Chandigarh",stateId:30},{id:31001,name:"Dadra and Nagar Haveli",stateId:31},{id:31002,name:"Daman",stateId:31},{id:31003,name:"Diu",stateId:31},{id:32001,name:"Central Delhi",stateId:32},{id:32002,name:"East Delhi",stateId:32},{id:32003,name:"New Delhi",stateId:32},{id:32004,name:"North Delhi",stateId:32},{id:32005,name:"North East Delhi",stateId:32},{id:32006,name:"North West Delhi",stateId:32},{id:32007,name:"Shahdara",stateId:32},{id:32008,name:"South Delhi",stateId:32},{id:32009,name:"South East Delhi",stateId:32},{id:32010,name:"South West Delhi",stateId:32},{id:32011,name:"West Delhi",stateId:32},{id:33001,name:"Anantnag",stateId:33},{id:33002,name:"Bandipora",stateId:33},{id:33003,name:"Baramulla",stateId:33},{id:33004,name:"Budgam",stateId:33},{id:33005,name:"Doda",stateId:33},{id:33006,name:"Ganderbal",stateId:33},{id:33007,name:"Jammu",stateId:33},{id:33008,name:"Kathua",stateId:33},{id:33009,name:"Kishtwar",stateId:33},{id:33010,name:"Kulgam",stateId:33},{id:33011,name:"Kupwara",stateId:33},{id:33012,name:"Poonch",stateId:33},{id:33013,name:"Pulwama",stateId:33},{id:33014,name:"Rajouri",stateId:33},{id:33015,name:"Ramban",stateId:33},{id:33016,name:"Reasi",stateId:33},{id:33017,name:"Samba",stateId:33},{id:33018,name:"Shopian",stateId:33},{id:33019,name:"Srinagar",stateId:33},{id:33020,name:"Udhampur",stateId:33},{id:34001,name:"Kargil",stateId:34},{id:34002,name:"Leh",stateId:34},{id:35001,name:"Lakshadweep",stateId:35},{id:36001,name:"Karaikal",stateId:36},{id:36002,name:"Mahe",stateId:36},{id:36003,name:"Puducherry",stateId:36},{id:36004,name:"Yanam",stateId:36}],Eb=[{id:1100101,name:"Badami",districtId:11001},{id:1100102,name:"Bagalkot",districtId:11001},{id:1100103,name:"Bilagi",districtId:11001},{id:1100104,name:"Hunagund",districtId:11001},{id:1100105,name:"Jamkhandi",districtId:11001},{id:1100106,name:"Mudhol",districtId:11001},{id:1100201,name:"Ballari",districtId:11002},{id:1100202,name:"Hadagalli",districtId:11002},{id:1100203,name:"Hagaribommanahalli",districtId:11002},{id:1100204,name:"Hospet",districtId:11002},{id:1100205,name:"Kudligi",districtId:11002},{id:1100206,name:"Sandur",districtId:11002},{id:1100207,name:"Siruguppa",districtId:11002},{id:1100301,name:"Athani",districtId:11003},{id:1100302,name:"Bailhongal",districtId:11003},{id:1100303,name:"Belagavi",districtId:11003},{id:1100304,name:"Chikodi",districtId:11003},{id:1100305,name:"Gokak",districtId:11003},{id:1100306,name:"Hukkeri",districtId:11003},{id:1100307,name:"Khanapur",districtId:11003},{id:1100308,name:"Raibag",districtId:11003},{id:1100309,name:"Ramadurg",districtId:11003},{id:1100310,name:"Soundatti",districtId:11003},{id:1100401,name:"Devanahalli",districtId:11004},{id:1100402,name:"Doddaballapur",districtId:11004},{id:1100403,name:"Hosakote",districtId:11004},{id:1100404,name:"Nelamangala",districtId:11004},{id:1100501,name:"Anekal",districtId:11005},{id:1100502,name:"Bengaluru East",districtId:11005},{id:1100503,name:"Bengaluru North",districtId:11005},{id:1100504,name:"Bengaluru South",districtId:11005},{id:1100601,name:"Aurad",districtId:11006},{id:1100602,name:"Basavakalyan",districtId:11006},{id:1100603,name:"Bidar",districtId:11006},{id:1100604,name:"Bhalki",districtId:11006},{id:1100605,name:"Homnabad",districtId:11006},{id:1100701,name:"Chamarajanagar",districtId:11007},{id:1100702,name:"Gundlupet",districtId:11007},{id:1100703,name:"Kollegal",districtId:11007},{id:1100704,name:"Yelandur",districtId:11007},{id:1100801,name:"Bagepalli",districtId:11008},{id:1100802,name:"Chikkaballapur",districtId:11008},{id:1100803,name:"Chintamani",districtId:11008},{id:1100804,name:"Gauribidanur",districtId:11008},{id:1100805,name:"Gudibande",districtId:11008},{id:1100806,name:"Sidlaghatta",districtId:11008},{id:1100901,name:"Ajjampura",districtId:11009},{id:1100902,name:"Chikkamagaluru",districtId:11009},{id:1100903,name:"Kadur",districtId:11009},{id:1100904,name:"Kalasa",districtId:11009},{id:1100905,name:"Koppa",districtId:11009},{id:1100906,name:"Mudigere",districtId:11009},{id:1100907,name:"Narasimharajapura",districtId:11009},{id:1100908,name:"Sringeri",districtId:11009},{id:1100909,name:"Tarikere",districtId:11009},{id:1101001,name:"Challakere",districtId:11010},{id:1101002,name:"Chitradurga",districtId:11010},{id:1101003,name:"Hiriyur",districtId:11010},{id:1101004,name:"Holalkere",districtId:11010},{id:1101005,name:"Hosadurga",districtId:11010},{id:1101006,name:"Molakalmuru",districtId:11010},{id:1101101,name:"Bantwal",districtId:11011},{id:1101102,name:"Belthangady",districtId:11011},{id:1101103,name:"Mangaluru",districtId:11011},{id:1101104,name:"Puttur",districtId:11011},{id:1101105,name:"Sullia",districtId:11011},{id:1101201,name:"Channagiri",districtId:11012},{id:1101202,name:"Davanagere",districtId:11012},{id:1101203,name:"Harapanahalli",districtId:11012},{id:1101204,name:"Harihar",districtId:11012},{id:1101205,name:"Jagalur",districtId:11012},{id:1101206,name:"Nyamati",districtId:11012},{id:1101301,name:"Dharwad",districtId:11013},{id:1101302,name:"Hubli",districtId:11013},{id:1101303,name:"Kalghatgi",districtId:11013},{id:1101304,name:"Kundgol",districtId:11013},{id:1101305,name:"Navalgund",districtId:11013},{id:1101401,name:"Gadag",districtId:11014},{id:1101402,name:"Lakshmeshwar",districtId:11014},{id:1101403,name:"Mundargi",districtId:11014},{id:1101404,name:"Nargund",districtId:11014},{id:1101405,name:"Ron",districtId:11014},{id:1101406,name:"Shirhatti",districtId:11014},{id:1101501,name:"Alur",districtId:11015},{id:1101502,name:"Arkalgud",districtId:11015},{id:1101503,name:"Arsikere",districtId:11015},{id:1101504,name:"Belur",districtId:11015},{id:1101505,name:"Channarayapatna",districtId:11015},{id:1101506,name:"Hassan",districtId:11015},{id:1101507,name:"Holenarasipur",districtId:11015},{id:1101508,name:"Sakleshpur",districtId:11015},{id:1101601,name:"Byadgi",districtId:11016},{id:1101602,name:"Hangal",districtId:11016},{id:1101603,name:"Haveri",districtId:11016},{id:1101604,name:"Hirekerur",districtId:11016},{id:1101605,name:"Ranebennuru",districtId:11016},{id:1101606,name:"Rattihalli",districtId:11016},{id:1101607,name:"Savanur",districtId:11016},{id:1101608,name:"Shiggaon",districtId:11016},{id:1101701,name:"Afzalpur",districtId:11017},{id:1101702,name:"Aland",districtId:11017},{id:1101703,name:"Chincholi",districtId:11017},{id:1101704,name:"Chitapur",districtId:11017},{id:1101705,name:"Gulbarga",districtId:11017},{id:1101706,name:"Jewargi",districtId:11017},{id:1101707,name:"Kalaburagi",districtId:11017},{id:1101708,name:"Sedam",districtId:11017},{id:1101801,name:"Madikeri",districtId:11018},{id:1101802,name:"Somwarpet",districtId:11018},{id:1101803,name:"Virajpet",districtId:11018},{id:1101901,name:"Bangarpet",districtId:11019},{id:1101902,name:"Kolar",districtId:11019},{id:1101903,name:"Kolar Gold Fields",districtId:11019},{id:1101904,name:"Malur",districtId:11019},{id:1101905,name:"Mulbagal",districtId:11019},{id:1101906,name:"Srinivaspur",districtId:11019},{id:1102001,name:"Gangavathi",districtId:11020},{id:1102002,name:"Koppal",districtId:11020},{id:1102003,name:"Kushtagi",districtId:11020},{id:1102004,name:"Yelburga",districtId:11020},{id:1102101,name:"Krishnarajpet",districtId:11021},{id:1102102,name:"Maddur",districtId:11021},{id:1102103,name:"Malavalli",districtId:11021},{id:1102104,name:"Mandya",districtId:11021},{id:1102105,name:"Nagamangala",districtId:11021},{id:1102106,name:"Pandavapura",districtId:11021},{id:1102107,name:"Shrirangapattana",districtId:11021},{id:1102201,name:"Hunsur",districtId:11022},{id:1102202,name:"Krishnarajanagara",districtId:11022},{id:1102203,name:"Mysuru",districtId:11022},{id:1102204,name:"Nanjangud",districtId:11022},{id:1102205,name:"Periyapatna",districtId:11022},{id:1102206,name:"Saragur",districtId:11022},{id:1102207,name:"Tirumakudalu Narsipur",districtId:11022},{id:1102301,name:"Devadurga",districtId:11023},{id:1102302,name:"Lingsugur",districtId:11023},{id:1102303,name:"Manvi",districtId:11023},{id:1102304,name:"Raichur",districtId:11023},{id:1102305,name:"Sindhnur",districtId:11023},{id:1102401,name:"Channapatna",districtId:11024},{id:1102402,name:"Kanakapura",districtId:11024},{id:1102403,name:"Magadi",districtId:11024},{id:1102404,name:"Ramanagara",districtId:11024},{id:1102501,name:"Bhadravati",districtId:11025},{id:1102502,name:"Hosanagar",districtId:11025},{id:1102503,name:"Sagar",districtId:11025},{id:1102504,name:"Shikaripur",districtId:11025},{id:1102505,name:"Shimoga",districtId:11025},{id:1102506,name:"Sorab",districtId:11025},{id:1102507,name:"Thirthahalli",districtId:11025},{id:1102601,name:"Chikkanayakanahalli",districtId:11026},{id:1102602,name:"Gubbi",districtId:11026},{id:1102603,name:"Koratagere",districtId:11026},{id:1102604,name:"Kunigal",districtId:11026},{id:1102605,name:"Madhugiri",districtId:11026},{id:1102606,name:"Pavagada",districtId:11026},{id:1102607,name:"Sira",districtId:11026},{id:1102608,name:"Tiptur",districtId:11026},{id:1102609,name:"Tumakuru",districtId:11026},{id:1102610,name:"Turuvekere",districtId:11026},{id:1102701,name:"Byndoor",districtId:11027},{id:1102702,name:"Karkala",districtId:11027},{id:1102703,name:"Kundapura",districtId:11027},{id:1102704,name:"Udupi",districtId:11027},{id:1102801,name:"Ankola",districtId:11028},{id:1102802,name:"Bhatkal",districtId:11028},{id:1102803,name:"Haliyal",districtId:11028},{id:1102804,name:"Honnavar",districtId:11028},{id:1102805,name:"Joida",districtId:11028},{id:1102806,name:"Karwar",districtId:11028},{id:1102807,name:"Kumta",districtId:11028},{id:1102808,name:"Mundgod",districtId:11028},{id:1102809,name:"Siddapur",districtId:11028},{id:1102810,name:"Sirsi",districtId:11028},{id:1102811,name:"Yellapur",districtId:11028},{id:1102901,name:"Basavana Bagewadi",districtId:11029},{id:1102902,name:"Bijapur",districtId:11029},{id:1102903,name:"Chadachan",districtId:11029},{id:1102904,name:"Indi",districtId:11029},{id:1102905,name:"Muddebihal",districtId:11029},{id:1102906,name:"Sindagi",districtId:11029},{id:1102907,name:"Vijayapura",districtId:11029},{id:1103001,name:"Gurmitkal",districtId:11030},{id:1103002,name:"Shahapur",districtId:11030},{id:1103003,name:"Shorapur",districtId:11030},{id:1103004,name:"Surpur",districtId:11030},{id:1103005,name:"Yadgir",districtId:11030},{id:1001,name:"Badami",districtId:11},{id:1002,name:"Bagalkot",districtId:11},{id:1003,name:"Bilagi",districtId:11},{id:1004,name:"Hunagund",districtId:11},{id:1005,name:"Jamkhandi",districtId:11},{id:1006,name:"Mudhol",districtId:11},{id:1101,name:"Ballari",districtId:12},{id:1102,name:"Hadagalli",districtId:12},{id:1103,name:"Hagaribommanahalli",districtId:12},{id:1104,name:"Hospet",districtId:12},{id:1105,name:"Kudligi",districtId:12},{id:1106,name:"Sandur",districtId:12},{id:1107,name:"Siruguppa",districtId:12},{id:1201,name:"Athani",districtId:13},{id:1202,name:"Bailhongal",districtId:13},{id:1203,name:"Belagavi",districtId:13},{id:1204,name:"Chikodi",districtId:13},{id:1205,name:"Gokak",districtId:13},{id:1206,name:"Hukkeri",districtId:13},{id:1207,name:"Khanapur",districtId:13},{id:1208,name:"Raibag",districtId:13},{id:1209,name:"Ramadurg",districtId:13},{id:1210,name:"Soundatti",districtId:13},{id:1301,name:"Devanahalli",districtId:14},{id:1302,name:"Doddaballapur",districtId:14},{id:1303,name:"Hosakote",districtId:14},{id:1304,name:"Nelamangala",districtId:14},{id:1401,name:"Anekal",districtId:15},{id:1402,name:"Bengaluru East",districtId:15},{id:1403,name:"Bengaluru North",districtId:15},{id:1404,name:"Bengaluru South",districtId:15},{id:1501,name:"Aurad",districtId:16},{id:1502,name:"Basavakalyan",districtId:16},{id:1503,name:"Bidar",districtId:16},{id:1504,name:"Bhalki",districtId:16},{id:1505,name:"Homnabad",districtId:16},{id:1601,name:"Chamarajanagar",districtId:17},{id:1602,name:"Gundlupet",districtId:17},{id:1603,name:"Kollegal",districtId:17},{id:1604,name:"Yelandur",districtId:17},{id:1701,name:"Bagepalli",districtId:18},{id:1702,name:"Chikkaballapur",districtId:18},{id:1703,name:"Chintamani",districtId:18},{id:1704,name:"Gauribidanur",districtId:18},{id:1705,name:"Gudibande",districtId:18},{id:1706,name:"Sidlaghatta",districtId:18},{id:1801,name:"Ajjampura",districtId:19},{id:1802,name:"Chikkamagaluru",districtId:19},{id:1803,name:"Kadur",districtId:19},{id:1804,name:"Kalasa",districtId:19},{id:1805,name:"Koppa",districtId:19},{id:1806,name:"Mudigere",districtId:19},{id:1807,name:"Narasimharajapura",districtId:19},{id:1808,name:"Sringeri",districtId:19},{id:1809,name:"Tarikere",districtId:19},{id:1901,name:"Challakere",districtId:20},{id:1902,name:"Chitradurga",districtId:20},{id:1903,name:"Hiriyur",districtId:20},{id:1904,name:"Holalkere",districtId:20},{id:1905,name:"Hosadurga",districtId:20},{id:1906,name:"Molakalmuru",districtId:20},{id:2001,name:"Bantwal",districtId:21},{id:2002,name:"Belthangady",districtId:21},{id:2003,name:"Mangaluru",districtId:21},{id:2004,name:"Puttur",districtId:21},{id:2005,name:"Sullia",districtId:21},{id:2101,name:"Channagiri",districtId:22},{id:2102,name:"Davanagere",districtId:22},{id:2103,name:"Harapanahalli",districtId:22},{id:2104,name:"Harihar",districtId:22},{id:2105,name:"Jagalur",districtId:22},{id:2106,name:"Nyamati",districtId:22},{id:2201,name:"Dharwad",districtId:23},{id:2202,name:"Hubli",districtId:23},{id:2203,name:"Kalghatgi",districtId:23},{id:2204,name:"Kundgol",districtId:23},{id:2205,name:"Navalgund",districtId:23},{id:2301,name:"Gadag",districtId:24},{id:2302,name:"Lakshmeshwar",districtId:24},{id:2303,name:"Mundargi",districtId:24},{id:2304,name:"Nargund",districtId:24},{id:2305,name:"Ron",districtId:24},{id:2306,name:"Shirhatti",districtId:24},{id:2401,name:"Alur",districtId:25},{id:2402,name:"Arkalgud",districtId:25},{id:2403,name:"Arsikere",districtId:25},{id:2404,name:"Belur",districtId:25},{id:2405,name:"Channarayapatna",districtId:25},{id:2406,name:"Hassan",districtId:25},{id:2407,name:"Holenarasipur",districtId:25},{id:2408,name:"Sakleshpur",districtId:25},{id:2501,name:"Byadgi",districtId:26},{id:2502,name:"Hangal",districtId:26},{id:2503,name:"Haveri",districtId:26},{id:2504,name:"Hirekerur",districtId:26},{id:2505,name:"Ranebennuru",districtId:26},{id:2506,name:"Rattihalli",districtId:26},{id:2507,name:"Savanur",districtId:26},{id:2508,name:"Shiggaon",districtId:26},{id:2601,name:"Afzalpur",districtId:27},{id:2602,name:"Aland",districtId:27},{id:2603,name:"Chincholi",districtId:27},{id:2604,name:"Chitapur",districtId:27},{id:2605,name:"Gulbarga",districtId:27},{id:2606,name:"Jewargi",districtId:27},{id:2607,name:"Kalaburagi",districtId:27},{id:2608,name:"Sedam",districtId:27},{id:2701,name:"Madikeri",districtId:28},{id:2702,name:"Somwarpet",districtId:28},{id:2703,name:"Virajpet",districtId:28},{id:2801,name:"Bangarpet",districtId:29},{id:2802,name:"Kolar",districtId:29},{id:2803,name:"Kolar Gold Fields",districtId:29},{id:2804,name:"Malur",districtId:29},{id:2805,name:"Mulbagal",districtId:29},{id:2806,name:"Srinivaspur",districtId:29},{id:2901,name:"Gangavathi",districtId:30},{id:2902,name:"Koppal",districtId:30},{id:2903,name:"Kushtagi",districtId:30},{id:2904,name:"Yelburga",districtId:30},{id:3001,name:"Krishnarajpet",districtId:31},{id:3002,name:"Maddur",districtId:31},{id:3003,name:"Malavalli",districtId:31},{id:3004,name:"Mandya",districtId:31},{id:3005,name:"Nagamangala",districtId:31},{id:3006,name:"Pandavapura",districtId:31},{id:3007,name:"Shrirangapattana",districtId:31},{id:3101,name:"Hunsur",districtId:32},{id:3102,name:"Krishnarajanagara",districtId:32},{id:3103,name:"Mysuru",districtId:32},{id:3104,name:"Nanjangud",districtId:32},{id:3105,name:"Periyapatna",districtId:32},{id:3106,name:"Saragur",districtId:32},{id:3107,name:"Tirumakudalu Narsipur",districtId:32},{id:3201,name:"Devadurga",districtId:33},{id:3202,name:"Lingsugur",districtId:33},{id:3203,name:"Manvi",districtId:33},{id:3204,name:"Raichur",districtId:33},{id:3205,name:"Sindhnur",districtId:33},{id:3301,name:"Channapatna",districtId:34},{id:3302,name:"Kanakapura",districtId:34},{id:3303,name:"Magadi",districtId:34},{id:3304,name:"Ramanagara",districtId:34},{id:3401,name:"Bhadravati",districtId:35},{id:3402,name:"Hosanagar",districtId:35},{id:3403,name:"Sagar",districtId:35},{id:3404,name:"Shikaripur",districtId:35},{id:3405,name:"Shimoga",districtId:35},{id:3406,name:"Sorab",districtId:35},{id:3407,name:"Thirthahalli",districtId:35},{id:3501,name:"Chikkanayakanahalli",districtId:36},{id:3502,name:"Gubbi",districtId:36},{id:3503,name:"Koratagere",districtId:36},{id:3504,name:"Kunigal",districtId:36},{id:3505,name:"Madhugiri",districtId:36},{id:3506,name:"Pavagada",districtId:36},{id:3507,name:"Sira",districtId:36},{id:3508,name:"Tiptur",districtId:36},{id:3509,name:"Tumakuru",districtId:36},{id:3510,name:"Turuvekere",districtId:36},{id:3601,name:"Byndoor",districtId:37},{id:3602,name:"Karkala",districtId:37},{id:3603,name:"Kundapura",districtId:37},{id:3604,name:"Udupi",districtId:37},{id:3701,name:"Ankola",districtId:38},{id:3702,name:"Bhatkal",districtId:38},{id:3703,name:"Haliyal",districtId:38},{id:3704,name:"Honnavar",districtId:38},{id:3705,name:"Joida",districtId:38},{id:3706,name:"Karwar",districtId:38},{id:3707,name:"Kumta",districtId:38},{id:3708,name:"Mundgod",districtId:38},{id:3709,name:"Siddapur",districtId:38},{id:3710,name:"Sirsi",districtId:38},{id:3711,name:"Yellapur",districtId:38},{id:3801,name:"Basavana Bagewadi",districtId:39},{id:3802,name:"Bijapur",districtId:39},{id:3803,name:"Chadachan",districtId:39},{id:3804,name:"Indi",districtId:39},{id:3805,name:"Muddebihal",districtId:39},{id:3806,name:"Sindagi",districtId:39},{id:3807,name:"Vijayapura",districtId:39},{id:3901,name:"Gurmitkal",districtId:40},{id:3902,name:"Shahapur",districtId:40},{id:3903,name:"Shorapur",districtId:40},{id:3904,name:"Surpur",districtId:40},{id:3905,name:"Yadgir",districtId:40},{id:4001,name:"Hagaribommanahalli",districtId:41},{id:4002,name:"Hospet",districtId:41},{id:4003,name:"Kottur",districtId:41},{id:4004,name:"Kudligi",districtId:41},{id:10001,name:"Mumbai City",districtId:101},{id:10002,name:"Colaba",districtId:101},{id:20001,name:"Chennai North",districtId:201},{id:20002,name:"Chennai South",districtId:201}];class zX{async getStates(){return await new Promise(t=>setTimeout(t,200)),Ab}async getDistrictsByState(t){return await new Promise(a=>setTimeout(a,200)),Pb.filter(a=>a.stateId===t)}async getTalukasByDistrict(t){return await new Promise(a=>setTimeout(a,200)),Eb.filter(a=>a.districtId===t)}async getStateById(t){return Ab.find(a=>a.id===t)||null}async getDistrictById(t){return Pb.find(a=>a.id===t)||null}async getTalukaById(t){return Eb.find(a=>a.id===t)||null}async searchStates(t){await new Promise(n=>setTimeout(n,100));const a=t.toLowerCase();return Ab.filter(n=>n.name.toLowerCase().includes(a)||n.code.toLowerCase().includes(a))}async searchDistricts(t,a){await new Promise(s=>setTimeout(s,100));const n=a.toLowerCase();return Pb.filter(s=>s.stateId===t&&s.name.toLowerCase().includes(n))}async searchTalukas(t,a){await new Promise(s=>setTimeout(s,100));const n=a.toLowerCase();return Eb.filter(s=>s.districtId===t&&s.name.toLowerCase().includes(n))}}const Tb=new zX,Jh=({selectedState:e,selectedDistrict:t,selectedTaluka:a,onStateChange:n,onDistrictChange:s,onTalukaChange:o,onDistrictTextChange:l,onTalukaTextChange:d,disabled:u=!1,required:m=!1,showTaluka:p=!0,className:f=""})=>{const[x,w]=S.useState([]),[j,v]=S.useState([]),[b,I]=S.useState([]),[T,P]=S.useState({states:!1,districts:!1,talukas:!1});S.useEffect(()=>{(async()=>{P($=>({...$,states:!0}));try{const $=await Tb.getStates();w($)}catch($){console.error("Error loading states:",$)}finally{P($=>({...$,states:!1}))}})()},[]),S.useEffect(()=>{(async()=>{if(!e){v([]),I([]);return}P($=>({...$,districts:!0}));try{const $=typeof e=="string"?parseInt(e):e,H=await Tb.getDistrictsByState($);v(H),I([])}catch($){console.error("Error loading districts:",$)}finally{P($=>({...$,districts:!1}))}})()},[e]),S.useEffect(()=>{(async()=>{if(!t||!p){I([]);return}P($=>({...$,talukas:!0}));try{const $=typeof t=="string"?parseInt(t):t,H=await Tb.getTalukasByDistrict($);I(H)}catch($){console.error("Error loading talukas:",$)}finally{P($=>({...$,talukas:!1}))}})()},[t,p]);const A=R=>{const $=parseInt(R.target.value),H=x.find(L=>L.id===$);H&&n&&n($,H)},k=R=>{const $=parseInt(R.target.value),H=j.find(L=>L.id===$);H&&s&&s($,H)},E=R=>{const $=parseInt(R.target.value),H=b.find(L=>L.id===$);H&&o&&o($,H)},_=`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none ${u?"bg-gray-100 cursor-not-allowed":"bg-white"}`;return r.jsxs("div",{className:`space-y-4 ${f}`,children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["State ",m&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:e||"",onChange:A,disabled:u||T.states,required:m,className:_,children:[r.jsx("option",{value:"",children:T.states?"Loading states...":"Select State"}),x.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),r.jsx(Us,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["District ",m&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:t||"",onChange:k,disabled:u||T.districts||!e,required:m,className:_,children:[r.jsx("option",{value:"",children:T.districts?"Loading districts...":e?j.length===0?"No districts found":"Select District":"Select state first"}),j.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),r.jsx(Us,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),p&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Taluka/Taluk ",m&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:a||"",onChange:E,disabled:u||T.talukas||!t,required:m,className:_,children:[r.jsx("option",{value:"",children:T.talukas?"Loading talukas...":t?b.length===0?"No talukas found":"Select Taluka":"Select district first"}),b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),r.jsx(Us,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]})]})},qX=e=>{if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type))return{valid:!1,error:"Invalid file type. Please upload JPG, PNG, GIF, or WebP images."};const a=10*1024*1024;return e.size>a?{valid:!1,error:"File size too large. Maximum size is 10MB."}:{valid:!0}},CP=()=>{const{user:e}=dr(),{classesData:t,loading:a,error:n,getClassOptions:s,getSectionsByClass:o,hasClasses:l}=gn(),[d,u]=S.useState([]),m=g=>{if(g&&t){const ue=o(g);u(ue)}else u([])},p=async(g,ue)=>{const Te=g.charAt(0).toUpperCase(),ve=`${ue.toUpperCase()}-${Te}-`,be=I.filter(Ke=>Ke.role===g&&Ke._id&&Ke._id.toString().startsWith(ve)).map(Ke=>{const Xt=Ke._id.toString().match(new RegExp(`${ve}(\\d+)$`));return Xt?parseInt(Xt[1]):0}).filter(Ke=>!isNaN(Ke));let _e=be.length>0?Math.max(...be)+1:1,Ze,Ge=!1;for(;!Ge;){const Ke=_e.toString().padStart(4,"0");Ze=`${ve}${Ke}`,I.some(Et=>Et._id===Ze)?_e++:Ge=!0}return Ze},f=()=>{const ue="abcdefghijklmnopqrstuvwxyz",Te="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ve="0123456789",le="!@#$%^&*";let be="";be+=ue.charAt(Math.floor(Math.random()*ue.length)),be+=Te.charAt(Math.floor(Math.random()*Te.length)),be+=ve.charAt(Math.floor(Math.random()*ve.length)),be+=le.charAt(Math.floor(Math.random()*le.length));const _e=ue+Te+ve+le;for(let Ze=be.length;Ze<8;Ze++)be+=_e.charAt(Math.floor(Math.random()*_e.length));return be.split("").sort(()=>Math.random()-.5).join("")},x=S.useRef(!1),w=g=>{const ue=[];if(!g)return ue.push("Form data is required"),ue;(!g.firstName||g.firstName.trim()==="")&&ue.push("First name is required"),(!g.lastName||g.lastName.trim()==="")&&ue.push("Last name is required"),(!g.email||!g.email.includes("@"))&&ue.push("A valid email is required");const Te=g.primaryPhone||g.phone;if(Te){const le=Te.replace(/\D/g,"");(le.length<7||le.length>15)&&ue.push("Phone number must be 7-15 digits")}else g.role!=="teacher"&&ue.push("Phone number is required");if(g.role!=="teacher"){const le=g.permanentStreet||g.address,be=g.permanentCity||g.city,_e=g.permanentState||g.state,Ze=g.permanentPincode||g.pinCode;(!le||le.trim()==="")&&ue.push("Address/Street is required"),(!be||be.trim()==="")&&ue.push("City is required"),(!_e||_e.trim()==="")&&ue.push("State is required"),(!Ze||!/^\d{6}$/.test(Ze))&&ue.push("A valid 6-digit PIN code is required")}if(g.role==="student"){const le=g.studentDetails,be=le?.currentClass||g.class,_e=le?.currentSection||g.section,Ze=le?.dateOfBirth||g.dateOfBirth,Ge=le?.gender||g.gender;(!be||be==="")&&ue.push("Class selection is required for students"),(!_e||_e==="")&&ue.push("Section selection is required for students"),Ze||ue.push("Date of birth is required for students"),Ge||ue.push("Gender is required for students");const Ke=le?.fatherName||g.fatherName,Xt=le?.motherName||g.motherName;(!Ke||Ke.trim()==="")&&ue.push("Father's name is required for students"),(!Xt||Xt.trim()==="")&&ue.push("Mother's name is required for students");const Et=le?.ageYears||g.ageYears;le?.socialCategory||g.socialCategory,le?.belongingToBPL||g.belongingToBPL,le?.disability||g.disability,Et&&(Et<3||Et>25)&&ue.push("Student age must be between 3 and 25 years");const na=le?.studentAadhaar||g.studentAadhaar,It=le?.fatherAadhaar||g.fatherAadhaar,_r=le?.motherAadhaar||g.motherAadhaar;na&&!/^\d{12}$/.test(na)&&ue.push("Student Aadhaar number must be 12 digits"),It&&!/^\d{12}$/.test(It)&&ue.push("Father Aadhaar number must be 12 digits"),_r&&!/^\d{12}$/.test(_r)&&ue.push("Mother Aadhaar number must be 12 digits");const mr=le?.fatherPhone||g.fatherPhone||g.fatherMobile,Tt=le?.motherPhone||g.motherPhone||g.motherMobile;mr&&!/^[6-9]\d{9}$/.test(mr)&&ue.push("Father phone number must be a valid 10-digit mobile number"),Tt&&!/^[6-9]\d{9}$/.test(Tt)&&ue.push("Mother phone number must be a valid 10-digit mobile number");const hr=le?.bankIFSC||N.bankIFSC;hr&&!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(hr)&&ue.push("Bank IFSC code must be in valid format (e.g., SBIN0012345)")}else if(N.role==="teacher"){const le=N.teacherDetails,be=le?.highestQualification||N.qualification,_e=le?.totalExperience||Number(N.experience);le?.subjects||(typeof N.subjects=="string"?N.subjects.split(","):N.subjects),(!be||be.trim()==="")&&ue.push("Highest qualification is required for teachers"),(_e===void 0||_e<0)&&ue.push("Total experience is required for teachers (minimum 0 years)");const Ze=le?.employeeId||N.employeeId;Ze&&Ze.trim()===""&&ue.push("Employee ID cannot be empty if provided");const Ge=le?.bankIFSC||N.bankIFSC;Ge&&!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(Ge)&&ue.push("Bank IFSC code must be in valid format (e.g., SBIN0012345)")}else if(N.role==="admin"){const le=N.adminDetails,be=le?.adminType||N.adminLevel;le?.designation,(!be||be.trim()==="")&&ue.push("Admin type/level is required for administrators");const _e=le?.employeeId||N.employeeId;_e&&_e.trim()===""&&ue.push("Employee ID cannot be empty if provided"),le&&(Object.values({userManagement:le.userManagement,academicManagement:le.academicManagement,feeManagement:le.feeManagement,reportGeneration:le.reportGeneration,systemSettings:le.systemSettings,schoolSettings:le.schoolSettings,dataExport:le.dataExport,auditLogs:le.auditLogs}).some(Ke=>Ke===!0)||ue.push("At least one permission must be granted to admin users"));const Ze=le?.bankIFSC||N.bankIFSC;Ze&&!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(Ze)&&ue.push("Bank IFSC code must be in valid format (e.g., SBIN0012345)")}const ve=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return N.email&&!ve.test(N.email)&&ue.push("Please enter a valid email address"),N.panNumber&&!/^[A-Z]{5}\d{4}[A-Z]$/.test(N.panNumber)&&ue.push("PAN number must be in valid format (e.g., ABCDE1234F)"),N.aadharNumber&&!/^\d{12}$/.test(N.aadharNumber)&&ue.push("Aadhaar number must be 12 digits"),g.role==="student"&&((!g.nationality||g.nationality.trim()==="")&&ue.push("Nationality is required for students"),g.alternatePhone&&!/^[6-9]\d{9}$/.test(g.alternatePhone)&&ue.push("Emergency contact phone must be a valid 10-digit mobile number"),g.previousSchool&&g.previousSchool.trim()!==""&&(!g.tcNumber||g.tcNumber.trim()==="")&&ue.push("TC Number is required when previous school is mentioned"),g.birthCertificateNumber&&g.birthCertificateNumber.trim().length<5&&ue.push("Birth certificate number must be at least 5 characters"),g.rationCardNumber&&g.rationCardNumber.trim().length<5&&ue.push("Ration card number must be at least 5 characters"),g.familyIncome&&!["Below 1 Lakh","1-2 Lakhs","2-5 Lakhs","5-10 Lakhs","Above 10 Lakhs"].includes(g.familyIncome)&&ue.push("Please select a valid family income range"),g.economicStatus==="BPL"&&(!g.bplCardNumber||g.bplCardNumber.trim()==="")&&ue.push("BPL card number is required when economic status is BPL"),g.guardianName&&g.guardianName.trim()!==""&&(!g.guardianRelation||g.guardianRelation.trim()==="")&&ue.push("Guardian relationship is required when guardian name is provided"),g.transportMode==="School Bus"&&(!g.busRoute||g.busRoute.trim()==="")&&ue.push("Bus route is required when school bus transport is selected")),ue},j=async g=>{console.log(` Role changed to: ${g}`);const ue=g==="student"?"":f();Ne(Te=>({...Te,role:g,userId:"",generatedPassword:ue})),tt("");try{console.log(` Auto-fetching next ID for role: ${g}`);const Te=await nn(g);Te?(console.log(` Auto-generated ID for ${g}: ${Te}`),xe.success(`Role set to ${g.charAt(0).toUpperCase()+g.slice(1)}. Next available ID: ${Te}`)):(console.log(` Failed to auto-fetch ID for role: ${g}`),xe.error(`Role set to ${g.charAt(0).toUpperCase()+g.slice(1)}, but failed to fetch ID. Please try again.`))}catch(Te){console.error(` Error auto-fetching ID for role ${g}:`,Te),xe.error(`Role set to ${g.charAt(0).toUpperCase()+g.slice(1)}, but failed to fetch ID. Please try again.`)}},v=g=>{Ne(ue=>{const Te={...ue,dateOfBirth:g};if(ue.role==="student"&&g){const ve=new Date(g);if(!isNaN(ve.getTime())){const le=ve.getDate().toString().padStart(2,"0"),be=(ve.getMonth()+1).toString().padStart(2,"0"),_e=ve.getFullYear();Te.generatedPassword=`${le}${be}${_e}`}}return Te})},b=g=>{Ne(ue=>{const Te={...ue,dateOfBirth:g,studentDetails:{...ue.studentDetails,dateOfBirth:g}};if(ue.role==="student"&&g){const ve=new Date(g);if(!isNaN(ve.getTime())){const le=ve.getDate().toString().padStart(2,"0"),be=(ve.getMonth()+1).toString().padStart(2,"0"),_e=ve.getFullYear();Te.generatedPassword=`${le}${be}${_e}`}}return Te})},[I,T]=S.useState([]),[P,A]=S.useState(null),[k,E]=S.useState(!1),[_,R]=S.useState(""),[$,H]=S.useState("all"),[L,Y]=S.useState(null),[X,me]=S.useState(!1),[K,oe]=S.useState(!1),[G,B]=S.useState(null),[F,re]=S.useState(null),[U,ae]=S.useState("student"),[W,fe]=S.useState(null),[Se,Ie]=S.useState(null),[te,se]=S.useState(!1),Q=S.useRef(null),[de,we]=S.useState("all"),[ce,Ve]=S.useState("all"),[Be,at]=S.useState(null),[pe,tt]=S.useState(""),[ut,vt]=S.useState(!1),[Nt,tr]=S.useState(new Set),[ar,jt]=S.useState("table"),[Kt,De]=S.useState(!1),[et,Ae]=S.useState(null),[Xe,ot]=S.useState([]),[Ot,Lt]=S.useState(0),[gt,nr]=S.useState(!1),[Rt,Pr]=S.useState(null),[N,Ne]=S.useState({role:"student",firstName:"",middleName:"",lastName:"",email:"",phone:"",primaryPhone:"",secondaryPhone:"",whatsappNumber:"",emergencyContactName:"",emergencyContactRelation:"",emergencyContactPhone:"",permanentStreet:"",permanentArea:"",permanentCity:"",permanentState:"Karnataka",permanentCountry:"India",permanentPincode:"",permanentLandmark:"",stateId:"",districtId:"",talukaId:"",districtText:"",talukaText:"",currentStreet:"",currentArea:"",currentCity:"",currentState:"Karnataka",currentCountry:"India",currentPincode:"",currentLandmark:"",sameAsPermanent:!0,aadharNumber:"",panNumber:"",voterIdNumber:"",drivingLicenseNumber:"",passportNumber:"",studentDetails:{currentClass:"",currentSection:"",academicYear:"2024-25",admissionDate:"",admissionClass:"",rollNumber:"",admissionNumber:"",enrollmentNo:"",tcNo:"",previousSchoolName:"",previousBoard:"",lastClass:"",tcNumber:"",tcDate:"",reasonForTransfer:"",dateOfBirth:"",placeOfBirth:"",gender:"male",bloodGroup:"",nationality:"Indian",religion:"",religionOther:"",caste:"",casteOther:"",category:"",categoryOther:"",motherTongue:"",motherTongueOther:"",ageYears:0,ageMonths:0,socialCategory:"",socialCategoryOther:"",studentCaste:"",studentCasteOther:"",studentAadhaar:"",studentCasteCertNo:"",belongingToBPL:"No",bplCardNo:"",bhagyalakshmiBondNo:"",disability:"Not Applicable",disabilityOther:"",isRTECandidate:"No",fatherName:"",fatherOccupation:"",fatherQualification:"",fatherPhone:"",fatherEmail:"",fatherAadhaar:"",fatherCaste:"",fatherCasteOther:"",fatherCasteCertNo:"",fatherAnnualIncome:0,motherName:"",motherOccupation:"",motherQualification:"",motherPhone:"",motherEmail:"",motherAadhaar:"",motherCaste:"",motherCasteOther:"",motherCasteCertNo:"",motherAnnualIncome:0,guardianName:"",guardianRelationship:"",guardianPhone:"",guardianEmail:"",isEmergencyContact:!1,transportMode:"",busRoute:"",pickupPoint:"",dropPoint:"",pickupTime:"",dropTime:"",feeCategory:"",concessionType:"",concessionPercentage:0,scholarshipName:"",scholarshipAmount:0,scholarshipProvider:"",bankName:"",bankAccountNo:"",bankIFSC:"",bankAccountHolderName:"",allergies:[],chronicConditions:[],medications:[],doctorName:"",hospitalName:"",doctorPhone:"",lastMedicalCheckup:""},teacherDetails:{employeeId:"",joiningDate:"",highestQualification:"",specialization:"",university:"",graduationYear:0,totalExperience:0,experienceAtCurrentSchool:0,previousSchools:[],subjects:[],primarySubjects:[],classTeacherOf:"",responsibilities:[],department:"",workingDays:[],workingHoursStart:"",workingHoursEnd:"",maxPeriodsPerDay:0,maxPeriodsPerWeek:0,basicSalary:0,allowances:[],bankAccountNumber:"",bankIFSC:"",bankName:"",bankBranchName:""},adminDetails:{adminType:"",employeeId:"",joiningDate:"",designation:"",department:"",userManagement:!1,academicManagement:!1,feeManagement:!1,reportGeneration:!1,systemSettings:!1,schoolSettings:!1,dataExport:!1,auditLogs:!1,workingDays:[],workingHoursStart:"",workingHoursEnd:"",basicSalary:0,allowances:[],bankAccountNumber:"",bankIFSC:"",bankName:"",bankBranchName:"",bankAccountHolderName:""},name:"",address:"",city:"",state:"Karnataka",dateOfBirth:"",gender:"male",fatherName:"",motherName:"",class:"",section:"",rollNumber:"",qualification:"",experience:"",subjects:[],adminLevel:"",accessLevel:"",userId:"",generatedPassword:"",studentNameKannada:"",ageYears:0,ageMonths:0,socialCategory:"",socialCategoryOther:"",studentCaste:"",studentCasteOther:"",studentAadhaar:"",studentCasteCertNo:"",fatherNameKannada:"",fatherAadhaar:"",fatherCaste:"",fatherCasteOther:"",fatherCasteCertNo:"",motherNameKannada:"",motherAadhaar:"",motherCaste:"",motherCasteOther:"",motherCasteCertNo:"",religion:"",religionOther:"",belongingToBPL:"No",bplCardNo:"",bhagyalakshmiBondNo:"",disability:"Not Applicable",disabilityOther:"",cityVillageTown:"",locality:"",taluka:"",district:"",pinCode:"",studentMobile:"",studentEmail:"",fatherMobile:"",fatherEmail:"",motherMobile:"",motherEmail:"",schoolAdmissionDate:"",bankName:"",bankAccountNo:"",bankIFSC:"",nationality:"Indian",bloodGroup:"",fatherPhone:"",fatherOccupation:"",motherPhone:"",motherOccupation:"",guardianName:"",guardianRelation:"",fatherEducation:"",motherEducation:"",familyIncome:"",alternatePhone:"",parentEmail:"",admissionNumber:"",admissionDate:"",previousSchool:"",previousClass:"",tcNumber:"",migrationCertificate:"",aadhaarNumber:"",birthCertificateNumber:"",rationCardNumber:"",caste:"",casteOther:"",category:"",categoryOther:"",subCaste:"",economicStatus:"",bplCardNumber:"",scholarshipDetails:"",specialNeeds:"",disabilityType:"",disabilityCertificate:"",medicalConditions:"",permanentAddress:"",currentAddress:"",village:"",motherTongue:"",motherTongueOther:"",mediumOfInstruction:"",spouseName:""}),[Br,Zt]=S.useState({}),[Pe,st]=S.useState(!1),[qe,lt]=S.useState("single"),[ee,Ce]=S.useState(null),[Fe,ke]=S.useState(""),[Ue,We]=S.useState(""),[ft,Mt]=S.useState(!1),[rr,Vr]=S.useState([]),[Gr,Yt]=S.useState(!1),[Ur,ur]=S.useState(!1),[_t,ra]=S.useState(null),[pr,Or]=S.useState(""),[Cr,La]=S.useState(""),[xn,Aa]=S.useState(!1),Va=(g,ue)=>{try{console.log(`Toggling visibility for user: ${g}, Current state: ${!!Br[g]}`),Br[g]?(console.log(`Hiding password for ${g}`),Zt(ve=>{const le={...ve,[g]:!1};return console.log("New visibility state (hiding):",le),le})):(console.log(`Requesting admin password to show password for ${g} (${ue})`),Ce(g),ke(ue),lt("single"),st(!0))}catch(Te){console.error("Error in togglePasswordVisibility:",Te),xe.error("Failed to toggle password visibility")}},Ga=()=>{try{Gr?(console.log("Hiding all passwords"),Zt({}),Yt(!1),Vr([]),xe.success("All passwords hidden")):(console.log("Opening bulk password modal"),lt("bulk"),st(!0))}catch(g){console.error("Error in handleShowAllPasswords:",g),xe.error("Failed to toggle passwords")}},Pa=async()=>{if(!Ue.trim()){xe.error("Please enter your admin password");return}Mt(!0);try{const g=localStorage.getItem("erp.auth"),ue=g?JSON.parse(g).token:null;if(!ue){xe.error("Authentication token not found"),Mt(!1);return}const Te=e?.schoolCode||P?.code||"SB";console.log("Verifying admin password with school code:",Te),console.log("Token available:",!!ue);const ve=await un.verifyAdminAndGetPasswords(Te,Ue,qe==="single"?ee:null,ue);if(qe==="single"){const le=ve.data;if(!le||!le.temporaryPassword){xe.error("Password not available. This user may have been created without storing the temporary password."),st(!1),We(""),Ce(null),ke("");return}Zt(be=>({...be,[ee]:!0})),xe.success("Password revealed")}else{const le=Array.isArray(ve.data)?ve.data.filter(Ge=>Ge.temporaryPassword):[];if(le.length===0){xe.error("No passwords available. Teachers may have been created without storing temporary passwords."),st(!1),We("");return}Vr(ve.data||[]);const be={};(ve.data||[]).forEach(Ge=>{Ge.temporaryPassword&&(be[Ge.userId]=!0)}),Zt(be),Yt(!0);const _e=le.length,Ze=ve.count||(Array.isArray(ve.data)?ve.data.length:0);_e<Ze?xe.success(`Revealed ${_e} of ${Ze} teacher passwords. Some passwords are not available.`,{duration:5e3}):xe.success(`Revealed ${_e} teacher passwords`)}st(!1),We(""),Ce(null),ke("")}catch(g){console.error("Error verifying admin password:",g),xe.error(g.message||"Invalid admin password")}finally{Mt(!1)}},Is=(g,ue)=>{console.log("State changed:",g,ue.name),Ne(Te=>({...Te,stateId:g.toString(),state:ue.name,permanentState:ue.name,districtId:"",district:"",talukaId:"",taluka:"",districtText:"",talukaText:""}))},Pi=(g,ue)=>{console.log("District changed:",g,ue.name),Ne(Te=>({...Te,districtId:g.toString(),district:ue.name,talukaId:"",taluka:"",talukaText:""}))},kr=(g,ue)=>{console.log("Taluka changed:",g,ue.name),Ne(Te=>({...Te,talukaId:g.toString(),taluka:ue.name}))},ja=g=>{Ne(ue=>({...ue,districtText:g,district:g,talukaText:""}))},As=g=>{Ne(ue=>({...ue,talukaText:g,taluka:g}))},On=()=>{Ne({role:"student",firstName:"",middleName:"",lastName:"",email:"",phone:"",primaryPhone:"",secondaryPhone:"",whatsappNumber:"",emergencyContactName:"",emergencyContactRelation:"",emergencyContactPhone:"",permanentStreet:"",permanentArea:"",permanentCity:"",permanentState:"",permanentCountry:"India",permanentPincode:"",permanentLandmark:"",stateId:"",districtId:"",talukaId:"",districtText:"",talukaText:"",currentStreet:"",currentArea:"",currentCity:"",currentState:"",currentCountry:"India",currentPincode:"",currentLandmark:"",sameAsPermanent:!0,aadharNumber:"",panNumber:"",voterIdNumber:"",drivingLicenseNumber:"",passportNumber:"",studentDetails:{currentClass:"",currentSection:"",academicYear:"2024-25",admissionDate:"",admissionClass:"",rollNumber:"",admissionNumber:"",enrollmentNo:"",tcNo:"",previousSchoolName:"",previousBoard:"",lastClass:"",tcNumber:"",tcDate:"",reasonForTransfer:"",dateOfBirth:"",placeOfBirth:"",gender:"male",bloodGroup:"",nationality:"Indian",religion:"",religionOther:"",caste:"",casteOther:"",category:"",categoryOther:"",motherTongue:"",motherTongueOther:"",studentNameKannada:"",ageYears:0,ageMonths:0,socialCategory:"",socialCategoryOther:"",studentCaste:"",studentCasteOther:"",studentAadhaar:"",studentCasteCertNo:"",belongingToBPL:"No",bplCardNo:"",bhagyalakshmiBondNo:"",disability:"Not Applicable",disabilityOther:"",isRTECandidate:"No",fatherName:"",fatherNameKannada:"",fatherOccupation:"",fatherQualification:"",fatherPhone:"",fatherEmail:"",fatherAadhaar:"",fatherCaste:"",fatherCasteOther:"",fatherCasteCertNo:"",fatherWorkAddress:"",fatherAnnualIncome:0,motherName:"",motherNameKannada:"",motherOccupation:"",motherQualification:"",motherPhone:"",motherEmail:"",motherAadhaar:"",motherCaste:"",motherCasteOther:"",motherCasteCertNo:"",motherWorkAddress:"",motherAnnualIncome:0,guardianName:"",guardianRelationship:"",guardianPhone:"",guardianEmail:"",guardianAddress:"",isEmergencyContact:!1,transportMode:"",busRoute:"",pickupPoint:"",dropPoint:"",pickupTime:"",dropTime:"",feeCategory:"",concessionType:"",concessionPercentage:0,scholarshipName:"",scholarshipAmount:0,scholarshipProvider:"",bankName:"",bankAccountNo:"",bankIFSC:"",bankAccountHolderName:"",allergies:[],chronicConditions:[],medications:[],doctorName:"",hospitalName:"",doctorPhone:"",lastMedicalCheckup:""},teacherDetails:{employeeId:"",joiningDate:"",highestQualification:"",specialization:"",university:"",graduationYear:0,totalExperience:0,experienceAtCurrentSchool:0,previousSchools:[],subjects:[],primarySubjects:[],classTeacherOf:"",responsibilities:[],department:"",workingDays:[],workingHoursStart:"",workingHoursEnd:"",maxPeriodsPerDay:0,maxPeriodsPerWeek:0,basicSalary:0,allowances:[],bankAccountNumber:"",bankIFSC:"",bankName:"",bankBranchName:""},adminDetails:{adminType:"",employeeId:"",joiningDate:"",designation:"",department:"",userManagement:!1,academicManagement:!1,feeManagement:!1,reportGeneration:!1,systemSettings:!1,schoolSettings:!1,dataExport:!1,auditLogs:!1,workingDays:[],workingHoursStart:"",workingHoursEnd:"",basicSalary:0,allowances:[],bankAccountNumber:"",bankIFSC:"",bankName:"",bankBranchName:"",bankAccountHolderName:""},name:"",address:"",city:"",state:"",dateOfBirth:"",gender:"male",fatherName:"",motherName:"",class:"",section:"",rollNumber:"",qualification:"",experience:"",subjects:[],adminLevel:"",accessLevel:"",userId:"",generatedPassword:"",studentNameKannada:"",ageYears:0,ageMonths:0,socialCategory:"",socialCategoryOther:"",studentCaste:"",studentCasteOther:"",studentAadhaar:"",studentCasteCertNo:"",fatherNameKannada:"",fatherAadhaar:"",fatherCaste:"",fatherCasteOther:"",fatherCasteCertNo:"",motherNameKannada:"",motherAadhaar:"",motherCaste:"",motherCasteOther:"",motherCasteCertNo:"",religion:"",religionOther:"",belongingToBPL:"No",bplCardNo:"",bhagyalakshmiBondNo:"",disability:"Not Applicable",disabilityOther:"",cityVillageTown:"",locality:"",taluka:"",district:"",pinCode:"",studentMobile:"",studentEmail:"",fatherMobile:"",fatherEmail:"",motherMobile:"",motherEmail:"",schoolAdmissionDate:"",bankName:"",bankAccountNo:"",bankIFSC:"",nationality:"Indian",bloodGroup:"",fatherPhone:"",fatherOccupation:"",motherPhone:"",motherOccupation:"",guardianName:"",guardianRelation:"",fatherEducation:"",motherEducation:"",familyIncome:"",alternatePhone:"",parentEmail:"",admissionNumber:"",admissionDate:"",previousSchool:"",previousClass:"",tcNumber:"",migrationCertificate:"",aadhaarNumber:"",birthCertificateNumber:"",rationCardNumber:"",caste:"",casteOther:"",category:"",categoryOther:"",subCaste:"",economicStatus:"",bplCardNumber:"",scholarshipDetails:"",specialNeeds:"",disabilityType:"",disabilityCertificate:"",medicalConditions:"",permanentAddress:"",currentAddress:"",village:"",motherTongue:"",motherTongueOther:"",mediumOfInstruction:"",spouseName:""})};S.useEffect(()=>{yn(),sn()},[]),S.useEffect(()=>{X&&!N.userId&&j(N.role)},[X]),S.useEffect(()=>{pe&&Ne(g=>({...g,userId:pe}))},[pe]),S.useEffect(()=>{X&&Ne(g=>({...g,role:U}))},[U,X]);const Vn=async()=>{console.log("===  DEBUG: Testing Next ID API ===");const g=["student","teacher","admin"],ue=localStorage.getItem("erp.auth"),Te=ue?JSON.parse(ue).token:null;if(!Te){console.log(" No authentication token found");return}console.log(" Using token:",Te.substring(0,20)+"..."),console.log(" User context:",{schoolCode:e?.schoolCode,role:e?.role});for(const ve of g)try{console.log(`
 Testing ${ve.toUpperCase()} endpoint...`);const le={Authorization:`Bearer ${Te}`,"Content-Type":"application/json"};e?.schoolCode&&(le["x-school-code"]=e.schoolCode);const be=await fetch(`https://erp-backend-1jtx.onrender.com/api/users/next-id/${ve}`,{method:"GET",headers:le});if(console.log(` ${ve} Response Status:`,be.status,be.statusText),be.ok){const _e=await be.json();console.log(` ${ve.toUpperCase()} Next ID:`,_e)}else{const _e=await be.json().catch(()=>({message:"Unknown error"}));console.log(` ${ve.toUpperCase()} Error:`,_e)}}catch(le){console.error(` ${ve.toUpperCase()} Network Error:`,le)}console.log(`===  DEBUG COMPLETE ===
`)};S.useEffect(()=>{},[e?.schoolCode]),S.useEffect(()=>{typeof window<"u"&&(window.testManageUsersAPI=async()=>{console.log(" Manual API Test Started"),await Vn();const g=["student","teacher","admin"];for(const ue of g)try{console.log(`
 Testing ${ue} ID generation...`);const Te=window.fetchNextUserId||nn;if(typeof Te=="function"){const ve=await Te(ue);console.log(`Result for ${ue}:`,ve)}else console.warn("fetchNextUserId not available to call")}catch(Te){console.error("Error testing role",ue,Te)}console.log(" Manual API Test Complete")},console.log(" Test function registered: window.testManageUsersAPI()"))},[e]);const yn=async()=>{try{E(!0);const g=localStorage.getItem("erp.auth"),ue=g?JSON.parse(g).token:null,Te=e?.schoolCode||"P";if(!ue){xe.error("Authentication required");return}console.log("Fetching users for school:",Te),console.log("API URL will be:",`https://erp-backend-1jtx.onrender.com/api/school-users/${Te}/users`),console.log("Token being used:",ue?"Present":"Missing");try{const ve=await un.getAllUsers(Te,ue);console.log("API Response:",ve);const le=[];ve.data&&Array.isArray(ve.data)?ve.data.forEach(be=>{const _e={_id:be._id||be.userId,userId:be.userId,name:be.name?.displayName||(be.name?.firstName&&be.name?.lastName?`${be.name.firstName} ${be.name.lastName}`:be.name?.firstName||be.name?.lastName||be.name||"Unknown"),email:be.email||"No email",role:be.role,phone:be.contact?.primaryPhone||be.contact?.phone||be.phone,temporaryPassword:be.temporaryPassword||be.tempPassword||null,address:be.address,isActive:be.isActive!==!1,createdAt:be.createdAt||new Date().toISOString(),profileImage:be.profileImage||be.profilePicture||null,studentDetails:be.role==="student"?{}:void 0};be.role==="student"&&be.studentDetails?_e.studentDetails={...be.studentDetails,class:be.studentDetails.currentClass||be.class||"Not assigned",section:be.studentDetails.currentSection||be.section||"Not assigned",studentId:be.userId||be._id}:be.role==="teacher"&&be.teacherDetails&&(_e.teacherDetails={employeeId:be.teacherDetails?.employeeId||be.employeeId||"Not assigned",temporaryPassword:be.temporaryPassword||be.tempPassword||null,subjects:Array.isArray(be.teacherDetails?.subjects)?be.teacherDetails.subjects:typeof be.teacherDetails?.subjects=="string"?be.teacherDetails.subjects.split(",").map(Ze=>Ze.trim()):[],qualification:be.teacherDetails?.qualification||"Not provided",experience:be.teacherDetails?.experience||0}),le.push(_e)}):["students","teachers","admins"].forEach(be=>{ve[be]&&Array.isArray(ve[be])&&ve[be].forEach(_e=>{const Ze=be.slice(0,-1),Ge={_id:_e._id||_e.userId,userId:_e.userId,name:_e.name?.displayName||(_e.name?.firstName&&_e.name?.lastName?`${_e.name.firstName} ${_e.name.lastName}`:_e.name?.firstName||_e.name?.lastName||_e.name||"Unknown"),email:_e.email||"No email",role:Ze,phone:_e.contact?.primaryPhone||_e.contact?.phone||_e.phone,temporaryPassword:_e.temporaryPassword||_e.tempPassword||null,address:_e.address?.permanent?.street||_e.address?.street||_e.address,profileImage:_e.profileImage||_e.profilePicture||null,isActive:_e.isActive!==!1,createdAt:_e.createdAt||new Date().toISOString()};Ze==="student"?Ge.studentDetails={studentId:_e.userId||_e._id,class:_e.academicInfo?.class||_e.class||"Not assigned",section:_e.academicInfo?.section||_e.section||"Not assigned",rollNumber:_e.studentDetails?.rollNumber||_e.rollNumber||""}:Ze==="teacher"?Ge.teacherDetails={employeeId:_e.teacherDetails?.employeeId||_e.employeeId||_e.teacherId||"Not assigned",subjects:_e.subjects||[],qualification:_e.qualification||"Not provided",experience:_e.experience||0}:Ze==="admin"&&(Ge.adminDetails={employeeId:_e.adminDetails?.employeeId||_e.employeeId||"Not assigned",designation:_e.adminDetails?.designation||"Administrator"}),le.push(Ge)})}),console.log("Processed users:",le),console.log("Processed Users with Passwords:",le.filter(be=>be.role==="teacher").map(be=>({id:be.userId,name:be.name,pass:be.temporaryPassword,hasPassword:!!be.temporaryPassword}))),console.log("Raw teacher data from API:",ve.data?.filter(be=>be.role==="teacher").map(be=>({userId:be.userId,temporaryPassword:be.temporaryPassword,tempPassword:be.tempPassword}))),T(le)}catch(ve){console.error("API Error:",ve),xe.error("Failed to fetch users from API"),T([])}}catch(g){console.error("Error fetching users:",g),xe.error("Failed to fetch users")}finally{E(!1)}},nn=async g=>{if(!g)return console.log(" No role provided to fetchNextUserId"),tt(""),"";try{vt(!0),console.log(` Fetching next user ID for role: ${g}`);const ue=localStorage.getItem("erp.auth"),Te=ue?JSON.parse(ue).token:null;if(!Te)return console.error(" No authentication token available"),xe.error("Authentication required. Please login again."),"";const ve={Authorization:`Bearer ${Te}`,"Content-Type":"application/json"};e?.schoolCode?(ve["x-school-code"]=e.schoolCode,console.log(` Adding school context: ${e.schoolCode}`)):console.log(" No school code available in user context"),console.log(" Making API request to:",`https://erp-backend-1jtx.onrender.com/api/users/next-id/${g}`),console.log(" Request headers:",ve);const le=await fetch(`https://erp-backend-1jtx.onrender.com/api/users/next-id/${g}`,{method:"GET",headers:ve});if(console.log(` Response status: ${le.status} ${le.statusText}`),le.ok){const be=await le.json();if(console.log(" API Response data:",be),be.success&&be.nextUserId){const _e=be.nextUserId;return tt(_e),Ne(Ze=>({...Ze,userId:_e})),console.log(` Successfully fetched next ${g} ID: ${_e}`),xe.success(`Next available ID: ${_e}`),_e}else return console.error(" Invalid response format:",be),xe.error(be.message||"Invalid response from server"),tt(""),""}else{const be=await le.json().catch(()=>({message:"Server error"}));return console.error(" Failed to fetch next user ID:",le.status,be),xe.error(be.message||`Failed to fetch next user ID (${le.status})`),tt(""),""}}catch(ue){return console.error(" Error fetching next user ID:",ue),xe.error(`Network error: ${ue.message}`),tt(""),""}finally{vt(!1)}},sn=async()=>{try{e?.schoolCode&&A({_id:"1",name:e.schoolName||"School",code:e.schoolCode}),console.log("School details set from user context")}catch(g){console.error("Error fetching school details:",g)}},Ea=async g=>{try{const ue=I.find(be=>be.email.toLowerCase()===g.toLowerCase());if(ue)return{exists:!0,role:ue.role,name:ue.name};const Te=localStorage.getItem("erp.auth"),ve=Te?JSON.parse(Te).token:null,le=e?.schoolCode||"P";if(ve)try{const be=await un.getAllUsers(le,ve);if(be.data&&Array.isArray(be.data)){const _e=be.data.find(Ze=>Ze.email&&Ze.email.toLowerCase()===g.toLowerCase());if(_e)return{exists:!0,role:_e.role,name:_e.name?.displayName||(_e.name?.firstName&&_e.name?.lastName?`${_e.name.firstName} ${_e.name.lastName}`:_e.name?.firstName||_e.name?.lastName||_e.name||"Unknown")}}}catch{console.warn("Could not verify email uniqueness via API, proceeding with form validation only")}return{exists:!1}}catch(ue){return console.error("Error checking email existence:",ue),{exists:!1}}},ms=async g=>{g.preventDefault();try{if(x.current)return;const ue=w(N);if(ue.length>0){ue.slice(0,3).forEach(It=>xe.error(It));return}x.current=!0,E(!0);const Te=await Ea(N.email);if(Te.exists){xe.error(`Email already exists for ${Te.role}: ${Te.name}`),E(!1),x.current=!1;return}const ve=localStorage.getItem("erp.auth"),le=ve?JSON.parse(ve).token:null,be=e?.schoolCode||"NPS";if(!le){xe.error("Authentication required");return}const _e=N.role==="student"&&N.dateOfBirth?(()=>{const It=new Date(N.dateOfBirth);return`${It.getDate().toString().padStart(2,"0")}${(It.getMonth()+1).toString().padStart(2,"0")}${It.getFullYear()}`})():N.generatedPassword||"defaultPassword123",Ze={role:N.role,email:N.email,firstName:N.firstName,lastName:N.lastName,phone:N.primaryPhone||N.phone,password:_e,dateOfBirth:N.dateOfBirth,gender:N.gender,address:N.address,city:N.cityVillageTown||N.city,state:N.state,pinCode:N.pinCode,name:{firstName:N.firstName,middleName:N.middleName||"",lastName:N.lastName,displayName:`${N.firstName} ${N.lastName}`.trim()},temporaryPassword:_e,passwordChangeRequired:!0,contact:{primaryPhone:N.primaryPhone||N.phone,secondaryPhone:N.secondaryPhone||"",whatsappNumber:N.whatsappNumber||"",emergencyContact:{name:N.emergencyContactName||"",relationship:N.emergencyContactRelation||"",phone:N.emergencyContactPhone||""}},addressDetails:{permanent:{street:N.permanentStreet||N.address||"",area:N.permanentArea||"",city:N.permanentCity||N.city||"",state:N.permanentState||N.state||"",country:N.permanentCountry||"India",pincode:N.permanentPincode||N.pinCode||"",landmark:N.permanentLandmark||""},current:{street:N.sameAsPermanent?N.permanentStreet||N.address||"":N.currentStreet||"",area:N.sameAsPermanent?N.permanentArea||"":N.currentArea||"",city:N.sameAsPermanent?N.permanentCity||N.city||"":N.currentCity||"",state:N.sameAsPermanent?N.permanentState||N.state||"":N.currentState||"",country:N.sameAsPermanent?N.permanentCountry||"India":N.currentCountry||"India",pincode:N.sameAsPermanent?N.permanentPincode||N.pinCode||"":N.currentPincode||"",landmark:N.sameAsPermanent?N.permanentLandmark||"":N.currentLandmark||"",sameAsPermanent:N.sameAsPermanent}},identity:{aadharNumber:N.aadharNumber||N.studentAadhaar||N.aadhaarNumber||"",panNumber:N.panNumber||"",voterIdNumber:N.voterIdNumber||"",drivingLicenseNumber:N.drivingLicenseNumber||"",passportNumber:N.passportNumber||""},isActive:!0,isVerified:!1,schoolCode:be,schoolAccess:{joinedDate:new Date,status:"active",accessLevel:"standard"}};if(N.role==="student"?Ze.studentDetails={academic:{currentClass:N.studentDetails?.currentClass||N.class||"",currentSection:N.studentDetails?.currentSection||N.section||"",academicYear:N.studentDetails?.academicYear||"2024-25",admissionDate:N.studentDetails?.admissionDate?new Date(N.studentDetails.admissionDate):void 0,admissionClass:N.studentDetails?.admissionClass||"",rollNumber:N.studentDetails?.rollNumber||N.rollNumber||"",admissionNumber:N.studentDetails?.admissionNumber||N.admissionNumber||"",enrollmentNo:N.studentDetails?.enrollmentNo||"",tcNo:N.studentDetails?.tcNo||"",previousSchool:{name:N.studentDetails?.previousSchoolName||N.previousSchool||"",board:N.studentDetails?.previousBoard||"",lastClass:N.studentDetails?.lastClass||N.previousClass||"",tcNumber:N.studentDetails?.tcNumber||N.tcNumber||"",tcDate:N.studentDetails?.tcDate?new Date(N.studentDetails.tcDate):void 0,reasonForTransfer:N.studentDetails?.reasonForTransfer||""}},personal:{dateOfBirth:N.studentDetails?.dateOfBirth?new Date(N.studentDetails.dateOfBirth):N.dateOfBirth?new Date(N.dateOfBirth):void 0,placeOfBirth:N.studentDetails?.placeOfBirth||"",gender:N.studentDetails?.gender||N.gender||"male",bloodGroup:N.studentDetails?.bloodGroup||N.bloodGroup||"",nationality:N.studentDetails?.nationality||N.nationality||"Indian",religion:N.studentDetails?.religion||N.religion||"",religionOther:N.studentDetails?.religionOther||N.religionOther||"",caste:N.studentDetails?.caste||N.caste||"",casteOther:N.studentDetails?.casteOther||N.casteOther||"",category:N.studentDetails?.category||N.category||"",categoryOther:N.studentDetails?.categoryOther||N.categoryOther||"",motherTongue:N.studentDetails?.motherTongue||N.motherTongue||"",motherTongueOther:N.studentDetails?.motherTongueOther||N.motherTongueOther||"",studentNameKannada:N.studentDetails?.studentNameKannada||N.studentNameKannada||"",ageYears:N.studentDetails?.ageYears||N.ageYears||0,ageMonths:N.studentDetails?.ageMonths||N.ageMonths||0,socialCategory:N.studentDetails?.socialCategory||N.socialCategory||"",socialCategoryOther:N.studentDetails?.socialCategoryOther||N.socialCategoryOther||"",studentCaste:N.studentDetails?.studentCaste||N.studentCaste||"",studentCasteOther:N.studentDetails?.studentCasteOther||N.studentCasteOther||"",studentAadhaar:N.studentDetails?.studentAadhaar||N.studentAadhaar||"",studentCasteCertNo:N.studentDetails?.studentCasteCertNo||N.studentCasteCertNo||"",belongingToBPL:N.studentDetails?.belongingToBPL||N.belongingToBPL||"No",bplCardNo:N.studentDetails?.bplCardNo||N.bplCardNo||"",bhagyalakshmiBondNo:N.studentDetails?.bhagyalakshmiBondNo||N.bhagyalakshmiBondNo||"",disability:N.studentDetails?.disability||N.disability||"Not Applicable",disabilityOther:N.studentDetails?.disabilityOther||N.disabilityOther||"",isRTECandidate:N.studentDetails?.isRTECandidate||N.isRTECandidate||"No"},family:{father:{name:N.studentDetails?.fatherName||N.fatherName||"",nameKannada:N.studentDetails?.fatherNameKannada||N.fatherNameKannada||"",occupation:N.studentDetails?.fatherOccupation||N.fatherOccupation||"",qualification:N.studentDetails?.fatherQualification||N.fatherEducation||"",phone:N.studentDetails?.fatherPhone||N.fatherPhone||N.fatherMobile||"",email:N.studentDetails?.fatherEmail||N.fatherEmail||"",aadhaar:N.studentDetails?.fatherAadhaar||N.fatherAadhaar||"",caste:N.studentDetails?.fatherCaste||N.fatherCaste||"",casteOther:N.studentDetails?.fatherCasteOther||N.fatherCasteOther||"",casteCertNo:N.studentDetails?.fatherCasteCertNo||N.fatherCasteCertNo||"",workAddress:N.studentDetails?.fatherWorkAddress||"",annualIncome:N.studentDetails?.fatherAnnualIncome||0},mother:{name:N.studentDetails?.motherName||N.motherName||"",nameKannada:N.studentDetails?.motherNameKannada||N.motherNameKannada||"",occupation:N.studentDetails?.motherOccupation||N.motherOccupation||"",qualification:N.studentDetails?.motherQualification||N.motherEducation||"",phone:N.studentDetails?.motherPhone||N.motherPhone||N.motherMobile||"",email:N.studentDetails?.motherEmail||N.motherEmail||"",aadhaar:N.studentDetails?.motherAadhaar||N.motherAadhaar||"",caste:N.studentDetails?.motherCaste||N.motherCaste||"",casteOther:N.studentDetails?.motherCasteOther||N.motherCasteOther||"",casteCertNo:N.studentDetails?.motherCasteCertNo||N.motherCasteCertNo||"",workAddress:N.studentDetails?.motherWorkAddress||"",annualIncome:N.studentDetails?.motherAnnualIncome||0},guardian:N.studentDetails?.guardianName?{name:N.studentDetails.guardianName,relationship:N.studentDetails.guardianRelationship||N.guardianRelation||"",phone:N.studentDetails.guardianPhone||"",email:N.studentDetails.guardianEmail||"",address:N.studentDetails.guardianAddress||"",isEmergencyContact:N.studentDetails.isEmergencyContact||!1}:void 0},transport:{mode:N.studentDetails?.transportMode||"",busRoute:N.studentDetails?.busRoute||"",pickupPoint:N.studentDetails?.pickupPoint||"",dropPoint:N.studentDetails?.dropPoint||"",pickupTime:N.studentDetails?.pickupTime||"",dropTime:N.studentDetails?.dropTime||""},financial:{feeCategory:N.studentDetails?.feeCategory||"",concessionType:N.studentDetails?.concessionType||"",concessionPercentage:N.studentDetails?.concessionPercentage||0,scholarshipDetails:N.studentDetails?.scholarshipName?{name:N.studentDetails.scholarshipName,amount:N.studentDetails.scholarshipAmount||0,provider:N.studentDetails.scholarshipProvider||""}:void 0,bankDetails:{bankName:N.studentDetails?.bankName||N.bankName||"",accountNumber:N.studentDetails?.bankAccountNo||N.bankAccountNo||"",ifscCode:N.studentDetails?.bankIFSC||N.bankIFSC||"",accountHolderName:N.studentDetails?.bankAccountHolderName||""}},medical:N.studentDetails?.allergies?.length?{allergies:N.studentDetails.allergies,chronicConditions:N.studentDetails.chronicConditions||[],medications:N.studentDetails.medications||[],emergencyMedicalContact:{doctorName:N.studentDetails.doctorName||"",hospitalName:N.studentDetails.hospitalName||"",phone:N.studentDetails.doctorPhone||""},lastMedicalCheckup:N.studentDetails.lastMedicalCheckup?new Date(N.studentDetails.lastMedicalCheckup):void 0}:void 0}:N.role==="teacher"?Ze.teacherDetails={employeeId:N.teacherDetails?.employeeId||N.employeeId||"",joiningDate:N.teacherDetails?.joiningDate?new Date(N.teacherDetails.joiningDate):void 0,qualification:{highest:N.teacherDetails?.highestQualification||N.qualification||"",specialization:N.teacherDetails?.specialization||"",university:N.teacherDetails?.university||"",year:N.teacherDetails?.graduationYear||0},experience:{total:N.teacherDetails?.totalExperience||Number(N.experience)||0,atCurrentSchool:N.teacherDetails?.experienceAtCurrentSchool||0,previousSchools:N.teacherDetails?.previousSchools||[]},subjects:N.teacherDetails?.subjects?.map(It=>({subjectCode:It,subjectName:It,classes:[],isPrimary:N.teacherDetails?.primarySubjects?.includes(It)||!1}))||(typeof N.subjects=="string"?N.subjects.split(",").map(It=>({subjectCode:It.trim(),subjectName:It.trim(),classes:[],isPrimary:!0})):[]),classTeacherOf:N.teacherDetails?.classTeacherOf||"",responsibilities:N.teacherDetails?.responsibilities||[],workSchedule:{workingDays:N.teacherDetails?.workingDays||[],workingHours:{start:N.teacherDetails?.workingHoursStart||"",end:N.teacherDetails?.workingHoursEnd||""},maxPeriodsPerDay:N.teacherDetails?.maxPeriodsPerDay||0,maxPeriodsPerWeek:N.teacherDetails?.maxPeriodsPerWeek||0},salary:N.teacherDetails?.basicSalary?{basic:N.teacherDetails.basicSalary,allowances:N.teacherDetails.allowances||[],currency:"INR"}:void 0,bankDetails:N.teacherDetails?.bankAccountNumber?{accountNumber:N.teacherDetails.bankAccountNumber,ifscCode:N.teacherDetails.bankIFSC||"",bankName:N.teacherDetails.bankName||"",branchName:N.teacherDetails.bankBranchName||""}:void 0}:N.role==="admin"&&(Ze.adminDetails={adminType:N.adminDetails?.adminType||N.adminLevel||"",employeeId:N.adminDetails?.employeeId||N.employeeId||"",joiningDate:N.adminDetails?.joiningDate?new Date(N.adminDetails.joiningDate):void 0,designation:N.adminDetails?.designation||"",department:N.adminDetails?.department||N.department||"",permissions:{userManagement:N.adminDetails?.userManagement||!1,academicManagement:N.adminDetails?.academicManagement||!1,feeManagement:N.adminDetails?.feeManagement||!1,reportGeneration:N.adminDetails?.reportGeneration||!1,systemSettings:N.adminDetails?.systemSettings||!1,schoolSettings:N.adminDetails?.schoolSettings||!1,dataExport:N.adminDetails?.dataExport||!1,auditLogs:N.adminDetails?.auditLogs||!1},workSchedule:{workingDays:N.adminDetails?.workingDays||[],workingHours:{start:N.adminDetails?.workingHoursStart||"",end:N.adminDetails?.workingHoursEnd||""}},salary:N.adminDetails?.basicSalary?{basic:N.adminDetails.basicSalary,allowances:N.adminDetails.allowances||[],currency:"INR"}:void 0,bankDetails:N.adminDetails?.bankAccountNumber?{accountNumber:N.adminDetails.bankAccountNumber,ifscCode:N.adminDetails.bankIFSC||"",bankName:N.adminDetails.bankName||"",branchName:N.adminDetails.bankBranchName||"",accountHolderName:N.adminDetails.bankAccountHolderName||""}:void 0}),console.log("Creating user with comprehensive data:",Ze),N.userId)Ze.userId=N.userId;else try{await nn(N.role),Ze.userId=pe||N.userId}catch{console.warn("Could not fetch next user ID before create, proceeding with backend generation")}const Ge=await un.addUser(be,Ze,le),Ke=Ge?.data?.user?.userId||Ge?.data?.credentials?.userId||Ge?.user?.userId||Ge?.userId,Xt=_e||Ge?.data?.credentials?.password||Ge?.data?.user?.tempPassword||Ge?.user?.tempPassword,Et=Ge?.data?.user?.email||Ge?.user?.email||N.email,na=Ge?.data?.user?.role||Ge?.user?.role||N.role;if(!Ke||!Xt)throw console.error("Server response:",Ge),new Error("Server did not return required user credentials");Y({userId:Ke,password:Xt,email:Et,role:na}),xe.success("User created successfully with comprehensive details"),me(!1),On(),yn()}catch(ue){console.error("Error creating user:",ue),xe.error(ue.response?.data?.message||ue.message||"Failed to create user")}finally{E(!1),x.current=!1}},aa=g=>{console.log("=== EDITING USER ==="),console.log("User:",g),B(g),oe(!0)};S.useEffect(()=>{if(!G)return;console.log("=== POPULATING FORM DATA FROM EDITING USER ==="),console.log("Full editingUser:",JSON.stringify(G,null,2));const g=G;console.log("Name structure:",g.name),console.log("userData.name?.firstName:",g.name?.firstName),console.log("userData.name?.lastName:",g.name?.lastName),console.log("userData.firstName:",g.firstName),console.log("userData.lastName:",g.lastName),console.log("Contact structure:",g.contact),console.log("Address structure:",g.address),console.log("Address type:",typeof g.address),console.log("StudentDetails:",g.studentDetails),console.log("StudentDetails.class:",g.studentDetails?.class),console.log("StudentDetails.section:",g.studentDetails?.section),console.log("TeacherDetails:",g.teacherDetails),console.log("AdminDetails:",g.adminDetails);let ue="",Te="";if(typeof g.name=="string"&&g.name){const le=g.name.trim().split(" ");ue=le[0]||"",Te=le.slice(1).join(" ")||"",console.log("Parsed firstName from string:",ue),console.log("Parsed lastName from string:",Te)}const ve={userId:g.userId||g._id||"",generatedPassword:"",enrollmentNo:g.enrollmentNo||"",tcNo:g.tcNo||"",role:g.role||"student",class:g.academicInfo?.class||g.studentDetails?.currentClass||g.studentDetails?.class||g.class||"",academicYear:g.academicYear||g.studentDetails?.academicYear||"2024-2025",section:g.academicInfo?.section||g.section||g.studentDetails?.currentSection||g.studentDetails?.section||"",mediumOfInstruction:g.mediumOfInstruction||"English",motherTongue:g.motherTongue||g.studentDetails?.motherTongue||"",motherTongueOther:g.motherTongueOther||g.studentDetails?.motherTongueOther||"",name:g.name?.displayName||(g.name?.firstName&&g.name?.lastName?g.name.firstName+" "+g.name.lastName:"")||(typeof g.name=="string"?g.name:"")||(g.firstName&&g.lastName?g.firstName+" "+g.lastName:"")||(g.studentDetails?.firstName&&g.studentDetails?.lastName?g.studentDetails.firstName+" "+g.studentDetails.lastName:"")||"",studentNameKannada:g.studentNameKannada||g.studentDetails?.studentNameKannada||"",firstName:g.name?.firstName||ue||g.firstName||g.studentDetails?.firstName||"",middleName:g.name?.middleName||g.middleName||g.studentDetails?.middleName||"",lastName:g.name?.lastName||Te||g.lastName||g.studentDetails?.lastName||"",dateOfBirth:g.dateOfBirth||g.studentDetails?.dateOfBirth||"",ageYears:g.ageYears||g.studentDetails?.ageYears||0,ageMonths:g.ageMonths||g.studentDetails?.ageMonths||0,gender:g.gender||g.studentDetails?.gender||"male",fatherName:g.studentDetails?.fatherName||g.fatherName||"",fatherNameKannada:g.studentDetails?.fatherNameKannada||g.fatherNameKannada||"",fatherAadhaar:g.studentDetails?.fatherAadhaar||g.fatherAadhaar||"",motherName:g.studentDetails?.motherName||g.motherName||"",motherNameKannada:g.studentDetails?.motherNameKannada||g.motherNameKannada||"",motherAadhaar:g.studentDetails?.motherAadhaar||g.motherAadhaar||"",guardianName:g.studentDetails?.guardianName||g.guardianName||"",studentAadhaar:g.identity?.aadharNumber||g.studentDetails?.studentAadhaar||g.studentAadhaar||g.aadhaarNumber||"",studentCasteCertNo:g.studentDetails?.studentCasteCertNo||g.studentCasteCertNo||"",fatherCasteCertNo:g.studentDetails?.fatherCasteCertNo||g.fatherCasteCertNo||"",motherCasteCertNo:g.studentDetails?.motherCasteCertNo||g.motherCasteCertNo||"",studentCaste:g.studentDetails?.caste||g.studentCaste||g.caste||"",studentCasteOther:g.studentDetails?.studentCasteOther||g.studentCasteOther||"",fatherCaste:g.studentDetails?.fatherCaste||g.fatherCaste||"",fatherCasteOther:g.studentDetails?.fatherCasteOther||g.fatherCasteOther||"",motherCaste:g.studentDetails?.motherCaste||g.motherCaste||"",motherCasteOther:g.studentDetails?.motherCasteOther||g.motherCasteOther||"",socialCategory:g.studentDetails?.category||g.socialCategory||g.category||"",socialCategoryOther:g.studentDetails?.socialCategoryOther||g.socialCategoryOther||"",religion:g.studentDetails?.religion||g.religion||"",religionOther:g.studentDetails?.religionOther||g.religionOther||"",belongingToBPL:g.belongingToBPL||g.studentDetails?.belongingToBPL||"No",bplCardNo:g.bplCardNo||g.studentDetails?.bplCardNo||g.bplCardNumber||"",bhagyalakshmiBondNo:g.bhagyalakshmiBondNo||g.studentDetails?.bhagyalakshmiBondNo||"",disability:g.disability||g.studentDetails?.disability||g.specialNeeds||"Not Applicable",disabilityOther:g.disabilityOther||g.studentDetails?.disabilityOther||"",isRTECandidate:g.isRTECandidate||g.studentDetails?.isRTECandidate||"No",address:g.addressFull?.permanent?.street||g.address?.permanent?.street||(typeof g.address=="string"?g.address:"")||"",cityVillageTown:g.addressFull?.permanent?.city||g.address?.permanent?.city||g.cityVillageTown||g.city||"",locality:g.locality||"",taluka:g.taluka||g.taluk||"",district:g.addressFull?.permanent?.district||g.address?.permanent?.district||g.district||"",pinCode:g.addressFull?.permanent?.pincode||g.address?.permanent?.pincode||g.pinCode||"",state:g.addressFull?.permanent?.state||g.address?.permanent?.state||g.state||"",stateId:g.stateId||g.addressFull?.permanent?.stateId||g.address?.permanent?.stateId||"",districtId:g.districtId||g.addressFull?.permanent?.districtId||g.address?.permanent?.districtId||"",talukaId:g.talukaId||g.addressFull?.permanent?.talukaId||g.address?.permanent?.talukaId||"",districtText:g.districtText||g.district||"",talukaText:g.talukaText||g.taluka||"",permanentStreet:g.addressFull?.permanent?.street||g.address?.permanent?.street||(typeof g.address=="string"?g.address:"")||"",permanentArea:g.addressFull?.permanent?.area||g.address?.permanent?.area||"",permanentCity:g.addressFull?.permanent?.city||g.address?.permanent?.city||g.city||"",permanentState:g.addressFull?.permanent?.state||g.address?.permanent?.state||g.state||"Karnataka",permanentCountry:g.addressFull?.permanent?.country||g.address?.permanent?.country||"India",permanentPincode:g.addressFull?.permanent?.pincode||g.address?.permanent?.pincode||g.pinCode||"",permanentLandmark:g.addressFull?.permanent?.landmark||g.address?.permanent?.landmark||"",currentStreet:g.address?.current?.street||"",currentArea:g.address?.current?.area||"",currentCity:g.address?.current?.city||"",currentState:g.address?.current?.state||"Karnataka",currentCountry:g.address?.current?.country||"India",currentPincode:g.address?.current?.pincode||"",currentLandmark:g.address?.current?.landmark||"",sameAsPermanent:g.address?.sameAsPermanent!==void 0?g.address.sameAsPermanent:!0,studentMobile:g.contact?.primaryPhone||g.studentMobile||g.phone||"",studentEmail:g.email||g.studentEmail||"",fatherMobile:g.studentDetails?.fatherPhone||g.fatherMobile||g.fatherPhone||"",fatherEmail:g.studentDetails?.fatherEmail||g.fatherEmail||"",motherMobile:g.studentDetails?.motherPhone||g.motherMobile||g.motherPhone||"",motherEmail:g.studentDetails?.motherEmail||g.motherEmail||"",schoolAdmissionDate:g.studentDetails?.admissionDate?new Date(g.studentDetails.admissionDate).toISOString().split("T")[0]:g.schoolAdmissionDate||g.admissionDate||"",bankName:g.studentDetails?.bankName||g.bankName||"",bankAccountNo:g.studentDetails?.bankAccountNo||g.bankAccountNo||g.bankAccountNumber||"",bankIFSC:g.studentDetails?.bankIFSC||g.bankIFSC||g.ifscCode||"",email:g.email||"",phone:g.contact?.primaryPhone||g.phone||"",primaryPhone:g.contact?.primaryPhone||g.phone||"",secondaryPhone:g.contact?.secondaryPhone||"",whatsappNumber:g.contact?.whatsappNumber||"",city:g.address?.permanent?.city||"",nationality:g.nationality||g.studentDetails?.nationality||"Indian",bloodGroup:g.bloodGroup||g.studentDetails?.bloodGroup||"",fatherPhone:g.fatherPhone||g.studentDetails?.fatherPhone||"",fatherOccupation:g.fatherOccupation||g.studentDetails?.fatherOccupation||"",motherPhone:g.motherPhone||g.studentDetails?.motherPhone||"",motherOccupation:g.motherOccupation||g.studentDetails?.motherOccupation||"",guardianRelation:g.guardianRelation||g.studentDetails?.guardianRelationship||"",fatherEducation:g.fatherEducation||g.studentDetails?.fatherQualification||"",motherEducation:g.motherEducation||g.studentDetails?.motherQualification||"",familyIncome:g.familyIncome||"",emergencyContactName:g.emergencyContactName||"",emergencyContactPhone:g.contact?.emergencyContact||"",emergencyContactRelation:g.emergencyContactRelation||"",alternatePhone:g.contact?.secondaryPhone||"",parentEmail:g.parentEmail||"",rollNumber:g.academicInfo?.rollNumber||g.rollNumber||g.studentDetails?.rollNumber||g.studentDetails?.studentId||"",admissionNumber:g.academicInfo?.admissionNumber||g.admissionNumber||g.studentDetails?.admissionNumber||g.studentDetails?.studentId||"",admissionDate:g.academicInfo?.admissionDate?new Date(g.academicInfo.admissionDate).toISOString().split("T")[0]:g.admissionDate||g.studentDetails?.admissionDate||"",previousSchool:g.previousSchool||g.studentDetails?.previousSchoolName||"",previousClass:g.previousClass||g.studentDetails?.lastClass||"",tcNumber:g.tcNumber||g.studentDetails?.tcNumber||"",migrationCertificate:g.migrationCertificate||"",aadhaarNumber:g.identity?.aadharNumber||g.aadhaarNumber||"",panNumber:g.identity?.panNumber||g.panNumber||"",drivingLicenseNumber:g.drivingLicenseNumber||"",birthCertificateNumber:g.birthCertificateNumber||"",rationCardNumber:g.rationCardNumber||"",voterIdNumber:g.voterIdNumber||"",passportNumber:g.passportNumber||"",caste:g.studentDetails?.caste||g.caste||"",casteOther:g.casteOther||"",category:g.studentDetails?.category||g.category||"",categoryOther:g.categoryOther||"",subCaste:g.subCaste||"",economicStatus:g.economicStatus||"",bplCardNumber:g.bplCardNumber||"",scholarshipDetails:g.scholarshipDetails||"",specialNeeds:g.studentDetails?.specialNeeds||g.specialNeeds||"",disabilityType:g.disabilityType||"",disabilityCertificate:g.disabilityCertificate||"",medicalConditions:g.studentDetails?.medicalConditions||g.medicalConditions||"",allergies:g.studentDetails?.allergies||g.allergies||"",permanentAddress:g.address?.permanent?.street||"",currentAddress:g.address?.current?.street||"",village:g.village||"",bankAccountNumber:g.bankAccountNumber||"",ifscCode:g.ifscCode||"",accountHolderName:g.accountHolderName||"",subjects:Array.isArray(g.teacherDetails?.subjects)?g.teacherDetails.subjects.map(le=>le.subjectName||le).join(", "):g.teacherDetails?.subjects||g.subjects||"",qualification:g.teacherDetails?.qualification?.highest||g.qualification||"",experience:g.teacherDetails?.experience?.total||g.experience||0,employeeId:g.teacherDetails?.employeeId||g.employeeId||"",department:g.department||g.teacherDetails?.department||"",joiningDate:g.joiningDate||g.teacherDetails?.joiningDate||"",adminLevel:g.adminLevel||g.adminDetails?.adminType||"",accessLevel:g.accessLevel||"",studentDetails:g.studentDetails||{},teacherDetails:g.teacherDetails||{},adminDetails:g.adminDetails||{}};console.log("=== FORM DATA POPULATED ==="),console.log("Basic Info:"),console.log("  firstName:",ve.firstName),console.log("  middleName:",ve.middleName),console.log("  lastName:",ve.lastName),console.log("  email:",ve.email),console.log("  phone:",ve.phone),console.log("  dateOfBirth:",ve.dateOfBirth),console.log("  gender:",ve.gender),console.log("Contact Info:"),console.log("  primaryPhone:",ve.primaryPhone),console.log("  secondaryPhone:",ve.secondaryPhone),console.log("  whatsappNumber:",ve.whatsappNumber),console.log("Address Info:"),console.log("  address:",ve.address),console.log("  permanentStreet:",ve.permanentStreet),console.log("  permanentCity:",ve.permanentCity),console.log("  permanentState:",ve.permanentState),console.log("  permanentPincode:",ve.permanentPincode),console.log("Location Info:"),console.log("  stateId:",ve.stateId),console.log("  districtId:",ve.districtId),console.log("  talukaId:",ve.talukaId),console.log("  districtText:",ve.districtText),console.log("  talukaText:",ve.talukaText),console.log("Academic Info:"),console.log("  class:",ve.class),console.log("  section:",ve.section),console.log("  rollNumber:",ve.rollNumber),console.log("  admissionNumber:",ve.admissionNumber),console.log("  academicYear:",ve.academicYear),console.log("Student Details Object:"),console.log("  studentDetails:",ve.studentDetails),console.log("Total fields populated:",Object.keys(ve).length),Ne(ve)},[G]);const Xs=async g=>{if(g.preventDefault(),!!G)try{if(E(!0),N.email!==G.email){const be=await Ea(N.email);if(be.exists){xe.error(`Email already exists for ${be.role}: ${be.name}`),E(!1);return}}const ue=localStorage.getItem("erp.auth"),Te=ue?JSON.parse(ue).token:null,ve=e?.schoolCode||"P";if(!Te){xe.error("Authentication required");return}const le={firstName:N.firstName,middleName:N.middleName,lastName:N.lastName,email:N.email,phone:N.phone,role:G.role,primaryPhone:N.primaryPhone||N.phone,secondaryPhone:N.secondaryPhone,whatsappNumber:N.whatsappNumber,emergencyContactPhone:N.emergencyContactPhone,permanentStreet:N.permanentStreet,permanentArea:N.permanentArea,permanentCity:N.permanentCity,permanentState:N.permanentState,permanentCountry:N.permanentCountry,permanentPincode:N.permanentPincode,permanentLandmark:N.permanentLandmark,currentStreet:N.currentStreet,currentArea:N.currentArea,currentCity:N.currentCity,currentState:N.currentState,currentCountry:N.currentCountry,currentPincode:N.currentPincode,currentLandmark:N.currentLandmark,sameAsPermanent:N.sameAsPermanent,stateId:N.stateId,districtId:N.districtId,talukaId:N.talukaId,districtText:N.districtText,talukaText:N.talukaText,state:N.state||N.permanentState,district:N.district,taluka:N.taluka,city:N.city||N.permanentCity,pinCode:N.pinCode||N.permanentPincode};if(G.role==="student"?(le.class=N.class,le.section=N.section,le.rollNumber=N.rollNumber,le.dateOfBirth=N.dateOfBirth,le.gender=N.gender,le.admissionDate=N.admissionDate,le.admissionNumber=N.admissionNumber,le.motherTongue=N.motherTongue,le.motherTongueOther=N.motherTongueOther,le.fatherName=N.fatherName,le.motherName=N.motherName,le.fatherPhone=N.fatherPhone,le.motherPhone=N.motherPhone,le.fatherOccupation=N.fatherOccupation,le.motherOccupation=N.motherOccupation,le.guardianName=N.guardianName,le.guardianRelation=N.guardianRelation,le.fatherEducation=N.fatherEducation,le.motherEducation=N.motherEducation,le.familyIncome=N.familyIncome,le.studentCaste=N.studentCaste,le.studentCasteOther=N.studentCasteOther,le.fatherCaste=N.fatherCaste,le.fatherCasteOther=N.fatherCasteOther,le.motherCaste=N.motherCaste,le.motherCasteOther=N.motherCasteOther,le.socialCategory=N.socialCategory,le.socialCategoryOther=N.socialCategoryOther,le.religion=N.religion,le.religionOther=N.religionOther,le.disability=N.disability,le.disabilityOther=N.disabilityOther,le.isRTECandidate=N.isRTECandidate,le.aadhaarNumber=N.aadhaarNumber,le.birthCertificateNumber=N.birthCertificateNumber,le.rationCardNumber=N.rationCardNumber,le.voterIdNumber=N.voterIdNumber,le.passportNumber=N.passportNumber,le.caste=N.caste,le.category=N.category,le.subCaste=N.subCaste,le.religion=N.religion,le.economicStatus=N.economicStatus,le.bplCardNumber=N.bplCardNumber,le.scholarshipDetails=N.scholarshipDetails,le.specialNeeds=N.specialNeeds,le.disabilityType=N.disabilityType,le.disabilityCertificate=N.disabilityCertificate,le.medicalConditions=N.medicalConditions,le.permanentAddress=N.permanentAddress,le.currentAddress=N.currentAddress,le.taluka=N.taluka,le.village=N.village,le.alternatePhone=N.alternatePhone,le.parentEmail=N.parentEmail,le.bankAccountNumber=N.bankAccountNumber,le.bankName=N.bankName,le.ifscCode=N.ifscCode,le.accountHolderName=N.accountHolderName,N.studentDetails&&(le.studentDetails=N.studentDetails)):G.role==="teacher"?(le.qualification=N.qualification,le.experience=N.experience,le.subjects=N.subjects,le.department=N.department,le.employeeId=N.employeeId,le.joiningDate=N.joiningDate,N.teacherDetails&&(le.teacherDetails=N.teacherDetails)):G.role==="admin"&&(le.adminLevel=N.adminLevel,le.department=N.department,le.employeeId=N.employeeId,le.accessLevel=N.accessLevel,N.adminDetails&&(le.adminDetails=N.adminDetails)),le.address=N.address,le.city=N.city,le.state=N.state,le.pinCode=N.pinCode,le.district=N.district,console.log("Updating user with data:",le),W){console.log(" Uploading with profile image...");const be=new FormData;Object.entries(le).forEach(([Ze,Ge])=>{Ge!=null&&be.append(Ze,typeof Ge=="object"?JSON.stringify(Ge):String(Ge))}),be.append("profileImage",W),console.log("Sending FormData with image...");const _e=await fetch(`https://erp-backend-1jtx.onrender.com/api/user-management/${ve}/users/${G._id}`,{method:"PUT",headers:{Authorization:`Bearer ${Te}`},body:be});if(!_e.ok){const Ze=await _e.json();throw new Error(Ze.message||"Failed to update user with image")}console.log(" User updated with image successfully")}else console.log("Updating without image..."),await un.updateUser(ve,G._id,le,Te);xe.success("User updated successfully"),oe(!1),B(null),fe(null),Ie(null),On(),yn()}catch(ue){console.error("Error updating user:",ue),xe.error(ue.response?.data?.message||"Failed to update user")}finally{E(!1)}},Js=async(g,ue)=>{try{const Te=localStorage.getItem("erp.auth"),ve=Te?JSON.parse(Te).token:null,le=e?.schoolCode||"P";if(!ve){xe.error("Authentication required");return}const be=!ue,_e=be?"activate":"deactivate";await un.toggleStatus(le,g,be,ve),xe.success(`User ${_e}d successfully`),yn()}catch(Te){console.error("Error toggling user status:",Te),xe.error(Te.response?.data?.message||"Failed to update user status")}},Ps=async(g,ue)=>{if(console.log("Delete button clicked for user:",g,ue),!window.confirm(`Are you sure you want to delete user "${ue}"? This action cannot be undone.`)){console.log("User cancelled deletion");return}try{console.log("Starting delete process...");const Te=localStorage.getItem("erp.auth"),ve=Te?JSON.parse(Te).token:null,le=e?.schoolCode||"P";if(console.log("Delete request details:",{schoolCode:le,userId:g,hasToken:!!ve}),!ve){xe.error("Authentication required");return}console.log("Calling delete API..."),await un.deleteUser(le,g,ve),console.log("Delete API successful"),xe.success("User deleted successfully"),yn()}catch(Te){console.error("Error deleting user:",Te),xe.error(Te.response?.data?.message||"Failed to delete user")}},_n=(g,ue,Te)=>{console.log("Opening change password modal for:",{userId:g,name:ue,email:Te}),ra({userId:g,name:ue,email:Te}),Or(""),La(""),ur(!0)},hs=async()=>{if(!_t){console.error("No user selected for password change");return}if(console.log("Starting password change for:",_t.userId),!pr||!Cr){xe.error("Please enter both password fields");return}if(pr.trim()===""){xe.error("Password cannot be empty");return}if(pr!==Cr){xe.error("Passwords do not match");return}Aa(!0);try{const g=localStorage.getItem("erp.auth"),ue=g?JSON.parse(g).token:null;if(!ue){xe.error("Authentication token not found");return}const Te=e?.schoolCode||P?.code||"SB";console.log("Calling changePassword API with:",{schoolCode:Te,userId:_t.userId});const ve=await un.changePassword(Te,_t.userId,pr,ue);console.log("Change password response:",ve),(ve.data||ve.success)&&(xe.success("Password changed successfully"),ur(!1),ra(null),Or(""),La(""),yn())}catch(g){console.error("Error changing password:",g),xe.error(g.response?.data?.message||g.message||"Failed to change password")}finally{Aa(!1)}},ca=I.filter(g=>{const ue=(g.userId||g._id||"").toLowerCase(),Te=typeof g.name=="string"?g.name.toLowerCase():(g.name?.displayName||"").toLowerCase(),ve=(g.email||"").toLowerCase(),le=_.toLowerCase(),be=Te.includes(le)||ve.includes(le)||ue.includes(le),_e=g.role===U,Ze=U!=="student"||de==="all"||g.studentDetails?.currentClass===de,Ge=U!=="student"||ce==="all"||g.studentDetails?.currentSection===ce;return be&&_e&&Ze&&Ge}).sort((g,ue)=>{if(g.role==="student"&&ue.role==="student"){const Te=g.userId||g._id||"",ve=ue.userId||ue._id||"",le=Ze=>{const Ge=Ze.match(/\d+$/);return Ge?parseInt(Ge[0]):0},be=le(Te),_e=le(ve);return be!==0||_e!==0?be-_e:Te.localeCompare(ve)}if(g.role==="teacher"&&ue.role==="teacher"){const Te=g.userId||g._id||"",ve=ue.userId||ue._id||"",le=Ze=>{const Ge=Ze.match(/\d+$/);return Ge?parseInt(Ge[0]):0},be=le(Te),_e=le(ve);return be!==0||_e!==0?be-_e:Te.localeCompare(ve)}if(g.role==="admin"&&ue.role==="admin"){const Te=g.userId||g._id||"",ve=ue.userId||ue._id||"",le=Ze=>{const Ge=Ze.match(/\d+$/);return Ge?parseInt(Ge[0]):0},be=le(Te),_e=le(ve);return be!==0||_e!==0?be-_e:Te.localeCompare(ve)}return 0}),Mn=()=>w(N).length===0,D=()=>{const g=w(N);if(g.length===0)return"";const ue=ve=>ve.includes("First name")?"First name":ve.includes("Last name")?"Last name":ve.includes("email")?"Email":ve.includes("phone")?"Phone":ve.includes("Date of birth")?"Date of birth":ve.includes("Gender")?"Gender":ve.includes("Address")?"Address":ve.includes("Class selection")?"Class":ve.includes("Father's name")?"Father's name":ve.includes("Mother's name")?"Mother's name":ve,Te=g.map(ue);return`Missing: ${Array.from(new Set(Te)).join(", ")}`},q=g=>Array.from(g.querySelectorAll('input:not([type=hidden]):not(:disabled), select:not(:disabled), textarea:not(:disabled), button:not(:disabled), [tabindex]:not([tabindex="-1"])')).filter(ve=>!!(ve.offsetWidth||ve.offsetHeight||ve.getClientRects().length)),Z=g=>{const ue=g.key;if(!["Enter","ArrowDown","ArrowUp"].includes(ue))return;const Te=g.target;if(!Te||Te.tagName==="TEXTAREA")return;if(Te.tagName==="INPUT"){const Ze=Te;if(typeof Ze.selectionStart=="number"){const Ge=Ze.selectionStart||0,Ke=Ze.selectionEnd||0;if(Ge!==Ke||(ue==="ArrowDown"||ue==="Enter")&&Ge<(Ze.value?.length||0)||ue==="ArrowUp"&&Ge>0)return}}let ve=Te.closest("form");if(!ve)return;const le=q(ve),be=le.indexOf(Te);if(be===-1)return;let _e=be;if((ue==="Enter"||ue==="ArrowDown")&&(_e=Math.min(le.length-1,be+1)),ue==="ArrowUp"&&(_e=Math.max(0,be-1)),_e!==be){g.preventDefault();const Ze=le[_e];Ze.focus();try{Ze.select&&Ze.select()}catch{}}},ie=async()=>{try{const g=e?.schoolCode||"P",ue=await kg.exportUsers(g,{role:U,format:"csv"}),Te=new Blob([ue.data],{type:"text/csv"}),ve=window.URL.createObjectURL(Te),le=document.createElement("a");le.href=ve;const be=new Date().toISOString().split("T")[0];le.download=`${U}_users_${be}.csv`,document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(ve),xe.success(`${ca.length} ${U} records exported successfully!`)}catch(g){console.error("Export error:",g),xe.error("Failed to export users. Please try again.")}},Re=async g=>{try{const ue=e?.schoolCode||"P",Te=await kg.generateTemplate(ue,g),ve=new Blob([Te.data],{type:"text/csv"}),le=window.URL.createObjectURL(ve),be=document.createElement("a");be.href=le;const _e=new Date().toISOString().split("T")[0];be.download=`${g}_import_template_${_e}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(le),xe.success(`${g} template downloaded successfully!`)}catch(ue){console.error("Template generation error:",ue),xe.error("API template failed. Using fallback template.");try{Ee(g)}catch(Te){console.error("Fallback template error:",Te),xe.error("Failed to generate template. Please try again.")}}},Ee=g=>{const ue=new Date().toISOString().split("T")[0],Te=`${g}_import_template_${ue}.csv`;let ve=[],le=[];g==="student"?(ve=["User ID","First Name","Middle Name","Last Name","Email","Phone","Student ID","Admission Number","Roll Number","Class","Section","Academic Year","Admission Date","Admission Class","Stream","Electives","Enrollment No","TC No","Date of Birth","Place of Birth","Gender","Blood Group","Nationality","Religion","Religion Other","Caste","Caste Other","Category","Category Other","Mother Tongue","Mother Tongue Other","Languages Known","Student Name Kannada","Age Years","Age Months","Social Category","Social Category Other","Student Caste","Student Caste Other","Student Aadhaar","Student Caste Certificate No","Belonging to BPL","BPL Card No","Bhagyalakshmi Bond No","Disability","Disability Other","Is RTE Candidate*","Current Address Line 1","Current Address Line 2","Current City","Current District","Current State","Current Pin Code","Current Taluka","Current Urban Rural","Permanent Address Line 1","Permanent Address Line 2","Permanent City","Permanent District","Permanent State","Permanent Pin Code","Permanent Taluka","Permanent Urban Rural","Father Name","Father Name Kannada","Father Occupation","Father Qualification","Father Phone","Father Email","Father Work Address","Father Annual Income","Father Aadhaar","Father Caste","Father Caste Other","Father Caste Certificate No","Mother Name","Mother Name Kannada","Mother Occupation","Mother Qualification","Mother Phone","Mother Email","Mother Work Address","Mother Annual Income","Mother Aadhaar","Mother Caste","Mother Caste Other","Mother Caste Certificate No","Guardian Name","Guardian Relationship","Guardian Phone","Guardian Email","Guardian Address","Guardian Is Emergency Contact","Sibling 1 Name","Sibling 1 Age","Sibling 1 Relationship","Sibling 1 School","Sibling 1 Class","Sibling 2 Name","Sibling 2 Age","Sibling 2 Relationship","Sibling 2 School","Sibling 2 Class","Sibling 3 Name","Sibling 3 Age","Sibling 3 Relationship","Sibling 3 School","Sibling 3 Class","Allergies","Chronic Conditions","Medications","Emergency Doctor Name","Emergency Hospital Name","Emergency Hospital Phone","Last Medical Checkup","Vaccination Status","Transport Mode","Bus Route","Pickup Point","Drop Point","Pickup Time","Drop Time","Fee Category","Concession Type","Concession Percentage","Scholarship Name","Scholarship Amount","Scholarship Provider","Bank Name","Account Number","IFSC Code","Account Holder Name","Profile Image Path","Previous School Name","Previous School Board","Previous School Last Class","Previous School TC Number","Previous School TC Date","Reason for Transfer","Emergency Contact 1 Name","Emergency Contact 1 Relationship","Emergency Contact 1 Phone","Emergency Contact 1 Address","Emergency Contact 1 Is Primary","Emergency Contact 2 Name","Emergency Contact 2 Relationship","Emergency Contact 2 Phone","Emergency Contact 2 Address","Emergency Contact 2 Is Primary","Current Academic Year","Current Class Result","Current Percentage","Current Rank","Current Attendance","Status","Created Date","Last Modified","Source","Import Batch","Tags","Notes"],le=ca.map(Ze=>{const Ge=Ze,Ke=Ge.studentDetails||{},Xt=Ge.name||{},Et=Ge.address||{},na=Ge.contact||{},It=Ke.personal||{},_r=Ke.academic||{},mr=Ke.family||{},Tt=mr.father||{},hr=mr.mother||{},Kr=mr.guardian||{},Qt=mr.siblings||[],ir=Ke.medical||{},da=Ke.transport||{},Jr=Ke.financial||{},Zr=Jr.bankDetails||{},Mr=_r.previousSchool||{},ua=(Ke.academicHistory||[])[0]||{},ga=Ge.identity||{},vr=Ge.metadata||{},gr=Ge.parentDetails||{};return[Ge.userId||Ze._id||"",Xt.firstName||"",Xt.middleName||"",Xt.lastName||"",Ze.email||"",na.primaryPhone||na.phone||Ze.phone||"",Ke.studentId||Ge.userId||"",Ke.admissionNumber||"",Ke.rollNumber||"",Ke.currentClass||"",Ke.currentSection||"",Ke.academicYear||"",Ke.admissionDate?new Date(Ke.admissionDate).toISOString().split("T")[0]:"",Ke.admissionClass||"",Ke.stream||"",Array.isArray(Ke.electives)?Ke.electives.join(", "):"",Ke.enrollmentNo||"",Ke.tcNo||"",Ke.dateOfBirth?new Date(Ke.dateOfBirth).toISOString().split("T")[0]:"",Ke.placeOfBirth||"",Ke.gender||"",Ke.bloodGroup||"",Ke.nationality||"",Ke.religion||"",Ke.religionOther||"",Ke.caste||"",Ke.casteOther||"",Ke.category||"",Ke.categoryOther||"",Ke.motherTongue||"",Ke.motherTongueOther||"",Array.isArray(Ke.languagesKnown)?Ke.languagesKnown.join(", "):"",It.studentNameKannada||"",It.ageYears||"",It.ageMonths||"",It.socialCategory||"",It.socialCategoryOther||"",It.studentCaste||"",It.studentCasteOther||"",It.studentAadhaar||ga.aadharNumber||"",It.studentCasteCertNo||"",It.belongingToBPL||"",It.bplCardNo||"",It.bhagyalakshmiBondNo||"",It.disability||"",It.disabilityOther||"",It.isRTECandidate||"",Et.current?.street||"",Et.current?.area||"",Et.current?.city||"",Et.current?.district||"",Et.current?.state||"",Et.current?.pincode||"",Et.current?.taluka||"",Et.current?.urbanRural||"",Et.permanent?.street||"",Et.permanent?.area||"",Et.permanent?.city||"",Et.permanent?.district||"",Et.permanent?.state||"",Et.permanent?.pincode||"",Et.permanent?.taluka||"",Et.permanent?.urbanRural||"",Tt.name||"",Tt.nameKannada||"",Tt.occupation||"",Tt.qualification||"",Tt.phone||"",Tt.email||"",Tt.workAddress||"",Tt.annualIncome||"",Tt.aadhaar||"",Tt.caste||"",Tt.casteOther||"",Tt.casteCertNo||"",hr.name||"",hr.nameKannada||"",hr.occupation||"",hr.qualification||"",hr.phone||"",hr.email||"",hr.workAddress||"",hr.annualIncome||"",hr.aadhaar||"",hr.caste||"",hr.casteOther||"",hr.casteCertNo||"",Kr.name||"",Kr.relationship||"",Kr.phone||"",Kr.email||"",Kr.address||"",Kr.isEmergencyContact===!0?"TRUE":"FALSE",Qt[0]?.name||"",Qt[0]?.age||"",Qt[0]?.relationship||"",Qt[0]?.school||"",Qt[0]?.class||"",Qt[1]?.name||"",Qt[1]?.age||"",Qt[1]?.relationship||"",Qt[1]?.school||"",Qt[1]?.class||"",Qt[2]?.name||"",Qt[2]?.age||"",Qt[2]?.relationship||"",Qt[2]?.school||"",Qt[2]?.class||"",Array.isArray(ir.allergies)?ir.allergies.join(", "):"",Array.isArray(ir.chronicConditions)?ir.chronicConditions.join(", "):"",Array.isArray(ir.medications)?ir.medications.join(", "):"",ir.emergencyMedicalContact?.doctorName||"",ir.emergencyMedicalContact?.hospitalName||"",ir.emergencyMedicalContact?.phone||"",ir.lastMedicalCheckup?new Date(ir.lastMedicalCheckup).toISOString().split("T")[0]:"",Array.isArray(ir.vaccinationStatus)?ir.vaccinationStatus.map(on=>on.vaccine).join(", "):"",da.mode||"",da.busRoute||"",da.pickupPoint||"",da.dropPoint||"",da.pickupTime||"",da.dropTime||"",Jr.feeCategory||"",Jr.concessionType||"",Jr.concessionPercentage||"",Jr.scholarshipDetails?.name||"",Jr.scholarshipDetails?.amount||"",Jr.scholarshipDetails?.provider||"",Zr.bankName||"",Zr.accountNumber||"",Zr.ifscCode||"",Zr.accountHolderName||"",Ge.profileImage||Ge.profilePicture||"",Mr.name||"",Mr.board||"",Mr.lastClass||"",Mr.tcNumber||"",Mr.tcDate?new Date(Mr.tcDate).toISOString().split("T")[0]:"",Mr.reasonForTransfer||"",gr.emergencyContacts?.[0]?.name||"",gr.emergencyContacts?.[0]?.relationship||"",gr.emergencyContacts?.[0]?.phone||"",gr.emergencyContacts?.[0]?.address||"",gr.emergencyContacts?.[0]?.isPrimary||"",gr.emergencyContacts?.[1]?.name||"",gr.emergencyContacts?.[1]?.relationship||"",gr.emergencyContacts?.[1]?.phone||"",gr.emergencyContacts?.[1]?.address||"",gr.emergencyContacts?.[1]?.isPrimary||"",ua.academicYear||"",ua.result||"",ua.percentage||"",ua.rank||"",ua.attendance||"",Ze.isActive?"Active":"Inactive",new Date(Ze.createdAt).toLocaleDateString(),Ge.updatedAt?new Date(Ge.updatedAt).toLocaleDateString():"",vr.source||"",vr.importBatch||"",Array.isArray(vr.tags)?vr.tags.join(", "):"",vr.notes||""].map(on=>`"${String(on).replace(/"/g,'""')}"`).join(",")})):U==="teacher"?(ve=["User ID","First Name","Middle Name","Last Name","Email","Phone","Date of Birth","Place of Birth","Gender","Blood Group","Nationality","Religion","Caste","Category","Mother Tongue","Languages Known","Marital Status","Spouse Name","Current Address Line 1","Current Address Line 2","Current City","Current District","Current State","Current Pin Code","Permanent Address Line 1","Permanent Address Line 2","Permanent City","Permanent District","Permanent State","Permanent Pin Code","Aadhaar Number","PAN Number","Passport Number","Driving License","Employee ID","Joining Date","Designation","Department","Highest Qualification","Specialization","University","Qualification Year","Teaching License","Certificate 1 Name","Certificate 1 Institution","Certificate 1 Year","Certificate 2 Name","Certificate 2 Institution","Certificate 2 Year","Certificate 3 Name","Certificate 3 Institution","Certificate 3 Year","Total Experience (Years)","Experience at Current School (Years)","Previous School 1 Name","Previous School 1 Duration","Previous School 1 Position","Previous School 1 Reason for Leaving","Previous School 2 Name","Previous School 2 Duration","Previous School 2 Position","Previous School 2 Reason for Leaving","Previous School 3 Name","Previous School 3 Duration","Previous School 3 Position","Previous School 3 Reason for Leaving","Primary Subject 1 Code","Primary Subject 1 Name","Primary Subject 1 Classes","Primary Subject 1 Is Primary","Secondary Subject 2 Code","Secondary Subject 2 Name","Secondary Subject 2 Classes","Secondary Subject 2 Is Primary","Secondary Subject 3 Code","Secondary Subject 3 Name","Secondary Subject 3 Classes","Secondary Subject 3 Is Primary","Class Teacher Of","Responsibilities","Working Days","Working Hours Start","Working Hours End","Max Periods Per Day","Max Periods Per Week","Latest Review Academic Year","Latest Review Rating","Latest Review Comments","Basic Salary","HRA Allowance","Transport Allowance","Medical Allowance","Other Allowances","Currency","Bank Name","Account Number","IFSC Code","Branch Name","Account Holder Name","Profile Image Path","Emergency Contact 1 Name","Emergency Contact 1 Relationship","Emergency Contact 1 Phone","Emergency Contact 1 Address","Emergency Contact 2 Name","Emergency Contact 2 Relationship","Emergency Contact 2 Phone","Emergency Contact 2 Address","Assigned By","Admin Role Level","Permissions","Last Login","Status","Created Date","Last Modified","Source","Import Batch","Tags","Notes"],le=ca.map(Ze=>{const Ge=Ze,Ke=Ge.teacherDetails||{},Xt=Ge.name||{},Et=Ge.address||{},na=Ge.contact||{},It=Ge.personalInfo||{},_r=Ge.identity||{},Tt=(Ke.qualification||{}).certificates||[];(Ke.experience||{}).previousSchools;const Kr=Ke.subjects||[];Ke.responsibilities,Ke.workSchedule;const ir=(Ke.performanceReviews||[])[0]||{},da=Ke.salary||{},Jr=da.allowances||[],Zr=Ke.bankDetails||{},Mr=Ge.emergencyContacts||[],pa=Ge.metadata||{},ua=na.emergencyContact||{},ga={total:0,atCurrentSchool:0,previousSchools:[]},vr=Ke.experience||ga,gr=Ke.qualification||{},on=Ke.workSchedule||{},Rn=new Map(Jr.map(zr=>[zr.type,zr.amount])),xa=Kr.map(zr=>({subjectCode:zr.subjectCode||zr,subjectName:zr.subjectName||zr,classes:Array.isArray(zr.classes)?zr.classes.join(", "):"",isPrimary:zr.isPrimary===!0?"TRUE":"FALSE"})).filter(Boolean);return[Ge.userId||Ze._id||"",Xt.firstName||"",Xt.middleName||"",Xt.lastName||"",Ze.email||"",na.primaryPhone||na.phone||Ze.phone||"",Ke.dateOfBirth?new Date(Ke.dateOfBirth).toISOString().split("T")[0]:"",It.placeOfBirth||"",Ke.gender||"",Ke.bloodGroup||"",Ke.nationality||"",Ke.religion||"",It.caste||"",It.category||"",It.motherTongue||"",Array.isArray(It.languagesKnown)?It.languagesKnown.join(", "):"",It.maritalStatus||"",It.spouseName||"",Et.current?.street||"",Et.current?.area||"",Et.current?.city||"",Et.current?.district||"",Et.current?.state||"",Et.current?.pincode||"",Et.permanent?.street||"",Et.permanent?.area||"",Et.permanent?.city||"",Et.permanent?.district||"",Et.permanent?.state||"",Et.permanent?.pincode||"",_r.aadharNumber||"",_r.panNumber||"",_r.passportNumber||"",_r.drivingLicenseNumber||"",Ke.employeeId||"",Ke.joiningDate?new Date(Ke.joiningDate).toISOString().split("T")[0]:"",Ke.designation||"",Ke.department||"",gr.highest||"",gr.specialization||"",gr.university||"",gr.year||"","",Tt[0]?.name||"",Tt[0]?.institution||"",Tt[0]?.year||"",Tt[1]?.name||"",Tt[1]?.institution||"",Tt[1]?.year||"",Tt[2]?.name||"",Tt[2]?.institution||"",Tt[2]?.year||"",vr.total||"",vr.atCurrentSchool||"",vr.previousSchools[0]?.schoolName||"",vr.previousSchools[0]?.duration||"",vr.previousSchools[0]?.position||"",vr.previousSchools[0]?.reasonForLeaving||"",vr.previousSchools[1]?.schoolName||"",vr.previousSchools[1]?.duration||"",vr.previousSchools[1]?.position||"",vr.previousSchools[1]?.reasonForLeaving||"",vr.previousSchools[2]?.schoolName||"",vr.previousSchools[2]?.duration||"",vr.previousSchools[2]?.position||"",vr.previousSchools[2]?.reasonForLeaving||"",xa[0]?.subjectCode||"",xa[0]?.subjectName||"",xa[0]?.classes||"",xa[0]?.isPrimary||"",xa[1]?.subjectCode||"",xa[1]?.subjectName||"",xa[1]?.classes||"",xa[1]?.isPrimary||"",xa[2]?.subjectCode||"",xa[2]?.subjectName||"",xa[2]?.classes||"",xa[2]?.isPrimary||"",Ke.classTeacherOf||"",Array.isArray(Ke.responsibilities)?Ke.responsibilities.join(", "):"",Array.isArray(on.workingDays)?on.workingDays.join(", "):"",on.workingHours?.start||"",on.workingHours?.end||"",on.maxPeriodsPerDay||"",on.maxPeriodsPerWeek||"",ir.academicYear||"",ir.rating||"",ir.comments||"",da.basic||"",Rn.get("HRA")||"",Rn.get("Transport")||"",Rn.get("Medical")||"",Jr.filter(zr=>!["HRA","Transport","Medical"].includes(zr.type)).map(zr=>`${zr.type}: ${zr.amount}`).join(", ")||"",da.currency||"",Zr.bankName||"",Zr.accountNumber||"",Zr.ifscCode||"",Zr.branchName||"",Zr.accountHolderName||Xt.firstName&&Xt.lastName?`${Xt.firstName} ${Xt.lastName}`:"",Ge.profileImage||Ge.profilePicture||"",ua.name||"",ua.relationship||"",ua.phone||"",ua.address||"",Mr[0]?.name||"",Mr[0]?.relationship||"",Mr[0]?.phone||"",Mr[0]?.address||"",Ge.schoolAccess?.assignedBy||"",Ze.role||"teacher",Array.isArray(Ge.permissions)?Ge.permissions.join(", "):"",Ge.lastLogin?new Date(Ge.lastLogin).toLocaleDateString():"",Ze.isActive?"Active":"Inactive",new Date(Ze.createdAt).toLocaleDateString(),Ge.updatedAt?new Date(Ge.updatedAt).toLocaleDateString():"",pa.source||"",pa.importBatch||"",Array.isArray(pa.tags)?pa.tags.join(", "):"",pa.notes||""].map(zr=>`"${String(zr).replace(/"/g,'""')}"`).join(",")})):U==="admin"&&(ve=["User ID","First Name","Middle Name","Last Name","Email","Phone","Date of Birth","Place of Birth","Gender","Blood Group","Nationality","Religion","Caste","Category","Mother Tongue","Languages Known","Marital Status","Spouse Name","Current Address Line 1","Current Address Line 2","Current City","Current District","Current State","Current Pin Code","Permanent Address Line 1","Permanent Address Line 2","Permanent City","Permanent District","Permanent State","Permanent Pin Code","Aadhaar Number","PAN Number","Passport Number","Driving License","Admin ID","Admin Level","Designation","Department","Joining Date","Reporting Manager","Permissions","Access Level","Can Manage Users","Can Manage Academics","Can Manage Finance","Can Manage Reports","Can Manage School Settings","Can View All Data","Can Export Data","Can Import Data","Primary Responsibilities","Secondary Responsibilities","Committees","Special Duties","Highest Qualification","Specialization","University","Qualification Year","Total Experience (Years)","Administrative Experience (Years)","Education Sector Experience (Years)","Previous Organization 1","Previous Position 1","Previous Duration 1","Previous Responsibilities 1","Previous Organization 2","Previous Position 2","Previous Duration 2","Previous Responsibilities 2","Previous Organization 3","Previous Position 3","Previous Duration 3","Previous Responsibilities 3","Working Days","Working Hours Start","Working Hours End","Overtime Eligible","On-Call Duties","Basic Salary","HRA Allowance","Transport Allowance","Medical Allowance","Management Allowance","Other Allowances","Currency","Bank Name","Account Number","IFSC Code","Branch Name","Account Holder Name","Profile Image Path","Emergency Contact 1 Name","Emergency Contact 1 Relationship","Emergency Contact 1 Phone","Emergency Contact 1 Address","Emergency Contact 2 Name","Emergency Contact 2 Relationship","Emergency Contact 2 Phone","Emergency Contact 2 Address","Assigned By","Admin Role Level","Permissions","Last Login","Status","Created Date","Last Modified","Source","Import Batch","Tags","Notes"],le=ca.map(Ze=>{const Ge=Ze,Ke=Ge.adminDetails||{},Xt=Ge.name||{},Et=Ge.address||{},na=Ge.contact||{},It=Ge.personalInfo||{},_r=Ge.identity||{},mr=Ke.permissions||{},Tt=Ke.responsibilities||{},hr=Ke.qualification||{},Kr=Ke.experience||{},Qt=Kr.previousExperience||[],ir=Ke.workSchedule||{},da=Ke.salary||{},Jr=da.allowances||[],Zr=Ke.bankDetails||{},Mr=Ge.emergencyContacts||[];Ke.systemAccess,Ke.performanceReview;const pa=Ge.metadata||{},ua=na.emergencyContact||{},ga=new Map(Jr.map(gr=>[gr.type,gr.amount])),vr=[mr.userManagement?"UserManagement":"",mr.academicManagement?"AcademicManagement":"",mr.feeManagement?"FeeManagement":"",mr.reportGeneration?"ReportGeneration":"",mr.systemSettings?"SystemSettings":"",mr.schoolSettings?"SchoolSettings":"",mr.dataExport?"DataExport":"",mr.auditLogs?"AuditLogs":""].filter(Boolean).join(", ");return[Ge.userId||Ze._id||"",Xt.firstName||"",Xt.middleName||"",Xt.lastName||"",Ze.email||"",na.primaryPhone||na.phone||Ze.phone||"",Ke.dateOfBirth?new Date(Ke.dateOfBirth).toISOString().split("T")[0]:"",It.placeOfBirth||"",Ze.gender||Ke.gender||"",Ze.bloodGroup||Ke.bloodGroup||"",Ze.nationality||"Indian",Ze.religion||Ke.religion||"",Ze.caste||Ke.caste||"",Ze.category||Ke.category||"",It.motherTongue||"",Array.isArray(It.languagesKnown)?It.languagesKnown.join(", "):"",It.maritalStatus||"",It.spouseName||"",Et.current?.street||"",Et.current?.area||"",Et.current?.city||"",Et.current?.district||"",Et.current?.state||"",Et.current?.pincode||"",Et.permanent?.street||"",Et.permanent?.area||"",Et.permanent?.city||"",Et.permanent?.district||"",Et.permanent?.state||"",Et.permanent?.pincode||"",_r.aadharNumber||"",_r.panNumber||"",_r.passportNumber||"",_r.drivingLicenseNumber||"",Ke.employeeId||"",Ke.adminType||"Admin",Ke.designation||"",Ke.department||"",Ke.joiningDate?new Date(Ke.joiningDate).toISOString().split("T")[0]:"",Ke.reportingTo||"",vr,Ge.accessLevel||"",mr.userManagement?"TRUE":"FALSE",mr.academicManagement?"TRUE":"FALSE",mr.feeManagement?"TRUE":"FALSE",mr.reportGeneration?"TRUE":"FALSE",mr.systemSettings?"TRUE":"FALSE",mr.schoolSettings?"TRUE":"FALSE",mr.dataExport?"TRUE":"FALSE",mr.auditLogs?"TRUE":"FALSE",Array.isArray(Ke.responsibilities)?Ke.responsibilities.join(", "):"",Tt.secondary||"",Tt.committees||"",Tt.specialDuties||"",hr.highest||"",hr.specialization||"",hr.university||"",hr.year||"",Kr.total||"",Kr.administrativeYears||"",Kr.educationSectorYears||"",Qt[0]?.organization||"",Qt[0]?.position||"",Qt[0]?.duration||"",Qt[0]?.responsibilities||"",Qt[1]?.organization||"",Qt[1]?.position||"",Qt[1]?.duration||"",Qt[1]?.responsibilities||"",Qt[2]?.organization||"",Qt[2]?.position||"",Qt[2]?.duration||"",Qt[2]?.responsibilities||"",Array.isArray(ir.workingDays)?ir.workingDays.join(", "):"",ir.workingHours?.start||"",ir.workingHours?.end||"",ir.overtimeEligible||"",ir.onCallDuties||"",da.basic||"",ga.get("HRA")||"",ga.get("Transport")||"",ga.get("Medical")||"",ga.get("Management")||"",Jr.filter(gr=>!["HRA","Transport","Medical","Management"].includes(gr.type)).map(gr=>`${gr.type}: ${gr.amount}`).join(", ")||"",da.currency||"",Zr.bankName||"",Zr.accountNumber||"",Zr.ifscCode||"",Zr.branchName||"",Zr.accountHolderName||Xt.firstName&&Xt.lastName?`${Xt.firstName} ${Xt.lastName}`:"",Ge.profileImage||Ge.profilePicture||"",ua.name||"",ua.relationship||"",ua.phone||"",ua.address||"",Mr[0]?.name||"",Mr[0]?.relationship||"",Mr[0]?.phone||"",Mr[0]?.address||"",Ge.schoolAccess?.assignedBy||"",Ze.role||"admin",vr,Ge.lastLogin?new Date(Ge.lastLogin).toLocaleDateString():"",Ze.isActive?"Active":"Inactive",new Date(Ze.createdAt).toLocaleDateString(),Ge.updatedAt?new Date(Ge.updatedAt).toLocaleDateString():"",pa.source||"",pa.importBatch||"",Array.isArray(pa.tags)?pa.tags.join(", "):"",pa.notes||""].map(gr=>`"${String(gr).replace(/"/g,'""')}"`).join(",")}));const be="data:text/csv;charset=utf-8,"+ve.join(",")+`
`+le.map(Ze=>Ze.map(Ge=>{const Ke=String(Ge??"");return Ke.includes('"')||Ke.includes(",")||Ke.includes(`
`)||Ke.includes("\r")?`"${Ke.replace(/"/g,'""')}"`:Ke}).join(",")).join(`
`),_e=document.createElement("a");_e.setAttribute("href",encodeURI(be)),_e.setAttribute("download",Te),document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),xe.success(`${ca.length} ${U} records exported successfully!`)},Ye=g=>{const ue=g.target.files?.[0];if(ue){if(!ue.name.toLowerCase().endsWith(".csv")){xe.error("Please select a CSV file");return}Ae(ue),ot([]),Pr(null)}},dt=async()=>{if(!et){xe.error("No file selected for import");return}nr(!0),Lt(0);try{const g=e?.schoolCode||"SB";console.log("Starting import for school:",g);const ue=await kg.importUsers(g,et);console.log("Import response:",ue),Lt(100);const Te=ue.data?.results||ue.data||{successData:[],errors:[]},ve=Array.isArray(Te.successData)?Te.successData:Array.isArray(Te.success)?Te.success:[],le=Array.isArray(Te.errors)?Te.errors:[],be=Te.insertedCount||ve.length;Pr({success:ve,errors:le}),be>0&&xe.success(`Successfully imported ${be} users`),le.length>0&&xe.error(`${le.length} rows had errors`),be===0&&le.length===0&&xe.error("No users were imported. Please check your CSV file.")}catch(g){console.error("Import error:",g);const ue=g.response?.data?.message||g.message||"Failed to import users. Please try again.";xe.error(ue);const Te=g.response?.data?.results;Pr(Te?{success:Te.successData||Te.success||[],errors:Te.errors||[]}:{success:[],errors:[{row:"N/A",error:ue,data:{}}]})}finally{nr(!1)}},xt=()=>{if(!Rt?.success.length){xe.error("No successful imports to download credentials for");return}const ue=`imported_user_credentials_${new Date().toISOString().split("T")[0]}.csv`,Te=["User ID","Email","Default Password","Role","Login Instructions"],ve=Rt.success.map(_e=>[_e.userId,_e.email,"Use DOB (DDMMYYYY)",_e.role,"Use Date of Birth (DDMMYYYY) as password, change on first login"]),le="data:text/csv;charset=utf-8,"+Te.join(",")+`
`+ve.map(_e=>_e.map(Ze=>`"${Ze}"`).join(",")).join(`
`),be=document.createElement("a");be.setAttribute("href",encodeURI(le)),be.setAttribute("download",ue),document.body.appendChild(be),be.click(),document.body.removeChild(be),xe.success("User credentials downloaded successfully!")},$t=()=>{const g=ca.filter(be=>be.role==="student"),ue={},Te=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"];g.forEach(be=>{const _e=be.studentDetails?.class||"Unassigned",Ze=be.studentDetails?.section||"A";ue[_e]||(ue[_e]={}),ue[_e][Ze]||(ue[_e][Ze]=[]),ue[_e][Ze].push(be)});const ve=Object.keys(ue).sort((be,_e)=>{const Ze=Te.indexOf(be),Ge=Te.indexOf(_e);return Ze===-1&&Ge===-1?be.localeCompare(_e):Ze===-1?1:Ge===-1?-1:Ze-Ge}),le={};return ve.forEach(be=>{le[be]=ue[be];const _e={};Object.keys(ue[be]).sort().forEach(Ze=>{_e[Ze]=ue[be][Ze].sort((Ge,Ke)=>{const Xt=Ge.userId||Ge._id||"",Et=Ke.userId||Ke._id||"",na=mr=>{const Tt=mr.match(/\d+$/);return Tt?parseInt(Tt[0]):0},It=na(Xt),_r=na(Et);return It!==0||_r!==0?It-_r:Xt.localeCompare(Et)})}),le[be]=_e}),le},Ht=g=>{const ue=new Set(Nt);ue.has(g)?ue.delete(g):ue.add(g),tr(ue)},br=g=>{we(g),Ve("all"),m(g)},[Ka,Fa]=ge.useState(!1);if(Ka)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error rendering the page."}),r.jsx("button",{onClick:()=>{Fa(!1),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Reload Page"})]})});try{return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ub,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Manage Users"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Add, edit, and manage system users"})]})]}),P&&r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[P.logoUrl&&r.jsx("img",{src:P.logoUrl,alt:P.name,className:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg object-cover"}),r.jsxs("div",{className:"text-left sm:text-right",children:[r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:P.name}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["School Code: ",P.code]})]})]})]}),r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("div",{className:"hidden sm:block border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>{console.log(" Switching to Student tab"),ae("student"),X&&j("student")},className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${U==="student"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ho,{className:"h-4 w-4"}),r.jsxs("span",{children:["Students (",I.filter(g=>g.role==="student").length,")"]})]})}),r.jsx("button",{onClick:()=>{console.log(" Switching to Teacher tab"),ae("teacher"),X&&j("teacher")},className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${U==="teacher"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ta,{className:"h-4 w-4"}),r.jsxs("span",{children:["Teachers (",I.filter(g=>g.role==="teacher").length,")"]})]})}),r.jsx("button",{onClick:()=>{console.log(" Switching to Admin tab"),ae("admin"),X&&j("admin")},className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${U==="admin"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hb,{className:"h-4 w-4"}),r.jsxs("span",{children:["Admins (",I.filter(g=>g.role==="admin").length,")"]})]})})]})}),r.jsxs("div",{className:"sm:hidden grid grid-cols-3 gap-2 mb-4",children:[r.jsx("button",{onClick:()=>{ae("student"),X&&j("student")},className:`p-3 rounded-lg border-2 transition-all ${U==="student"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(Ho,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Students"}),r.jsx("span",{className:"text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:I.filter(g=>g.role==="student").length})]})}),r.jsx("button",{onClick:()=>{ae("teacher"),X&&j("teacher")},className:`p-3 rounded-lg border-2 transition-all ${U==="teacher"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(ta,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Teachers"}),r.jsx("span",{className:"text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:I.filter(g=>g.role==="teacher").length})]})}),r.jsx("button",{onClick:()=>{ae("admin"),X&&j("admin")},className:`p-3 rounded-lg border-2 transition-all ${U==="admin"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[r.jsx(Hb,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Admins"}),r.jsx("span",{className:"text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:I.filter(g=>g.role==="admin").length})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 flex-1",children:[r.jsxs("div",{className:"relative flex-1 max-w-full sm:max-w-md",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:_,onChange:g=>R(g.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),U==="student"&&r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(t4,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),r.jsxs("select",{value:de,onChange:g=>br(g.target.value),className:"border border-gray-300 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:a,children:[r.jsx("option",{value:"all",children:"All Classes"}),t?.classes?.map(g=>r.jsxs("option",{value:g.className,children:["Class ",g.className]},g._id))]}),de!=="all"&&r.jsxs("select",{value:ce,onChange:g=>Ve(g.target.value),className:"border border-gray-300 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:a,children:[r.jsx("option",{value:"all",children:"All Sections"}),d.map(g=>r.jsxs("option",{value:g.section,children:["Section ",g.section]},g.value))]})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>jt("table"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${ar==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Table View"}),r.jsx("button",{onClick:()=>jt("hierarchy"),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${ar==="hierarchy"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Class View"})]})]})]}),r.jsxs("div",{className:"hidden sm:flex flex-row gap-2",children:[r.jsxs("button",{onClick:ie,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[r.jsx(Ns,{className:"h-4 w-4"}),r.jsx("span",{children:"Export"})]}),r.jsxs("button",{onClick:()=>{try{console.log("Opening import modal for:",U),De(!0)}catch(g){console.error("Error opening import modal:",g),xe.error("Failed to open import dialog")}},className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[r.jsx(Bo,{className:"h-4 w-4"}),r.jsx("span",{children:"Import"})]}),r.jsxs("button",{onClick:()=>Re(U),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",title:`Download ${U} import template`,children:[r.jsx(fa,{className:"h-4 w-4"}),r.jsx("span",{children:"Template"})]}),U==="teacher"&&r.jsx("button",{onClick:Ga,className:`flex items-center space-x-2 px-4 py-2 border rounded-lg text-sm ${Gr?"border-gray-300 bg-gray-50 text-gray-700 hover:bg-gray-100":"border-purple-300 bg-purple-50 text-purple-700 hover:bg-purple-100"}`,title:Gr?"Hide all teacher passwords":"Show all teacher passwords (requires admin password)",children:Gr?r.jsxs(r.Fragment,{children:[r.jsx(mi,{className:"h-4 w-4"}),r.jsx("span",{children:"Hide All Passwords"})]}):r.jsxs(r.Fragment,{children:[r.jsx(oa,{className:"h-4 w-4"}),r.jsx("span",{children:"Show All Passwords"})]})}),r.jsxs("button",{onClick:async()=>{me(!0),Ne(ve=>({...ve,role:U}));const g=e?.schoolCode||"P",ue=await p(U,g),Te=U==="student"?"":f();Ne(ve=>({...ve,userId:ue,generatedPassword:Te}))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsxs("span",{children:["Add ",U.charAt(0).toUpperCase()+U.slice(1)]})]})]}),r.jsx("div",{className:"sm:hidden",children:r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:ie,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",title:"Export Users",children:r.jsx(Ns,{className:"h-4 w-4 text-gray-600"})}),r.jsx("button",{onClick:()=>{try{De(!0)}catch{xe.error("Failed to open import dialog")}},className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",title:"Import Users",children:r.jsx(Bo,{className:"h-4 w-4 text-gray-600"})}),r.jsx("button",{onClick:()=>Re(U),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",title:"Download Template",children:r.jsx(fa,{className:"h-4 w-4 text-gray-600"})}),U==="teacher"&&r.jsx("button",{onClick:Ga,className:`p-2 border rounded-lg ${Gr?"border-gray-300 bg-gray-50 hover:bg-gray-100":"border-purple-300 bg-purple-50 hover:bg-purple-100"}`,title:Gr?"Hide passwords":"Show passwords",children:Gr?r.jsx(mi,{className:"h-4 w-4 text-gray-600"}):r.jsx(oa,{className:"h-4 w-4 text-purple-600"})})]}),r.jsxs("button",{onClick:async()=>{me(!0),Ne(ve=>({...ve,role:U}));const g=e?.schoolCode||"P",ue=await p(U,g),Te=U==="student"?"":f();Ne(ve=>({...ve,userId:ue,generatedPassword:Te}))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm shadow-lg",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsxs("span",{children:["Add ",U.charAt(0).toUpperCase()+U.slice(1)]})]})]})})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:U==="student"&&ar==="hierarchy"?r.jsx("div",{className:"p-3 sm:p-6",children:Object.keys($t()).length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No students found"})}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries($t()).map(([g,ue])=>r.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"bg-gray-50 px-3 sm:px-4 py-2 sm:py-3 cursor-pointer hover:bg-gray-100 transition-colors flex items-center justify-between",onClick:()=>Ht(g),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`transform transition-transform ${Nt.has(g)?"rotate-90":""}`,children:""}),r.jsxs("h3",{className:"text-sm sm:text-lg font-semibold text-gray-800",children:["Class ",g]}),r.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs sm:text-sm font-medium px-1.5 sm:px-2.5 py-0.5 rounded",children:[Object.values(ue).reduce((Te,ve)=>Te+ve.length,0)," students"]})]})}),Nt.has(g)&&r.jsx("div",{className:"border-t border-gray-200",children:Object.entries(ue).map(([Te,ve])=>r.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[r.jsx("div",{className:"bg-gray-25 px-6 py-2 border-b border-gray-100",children:r.jsxs("h4",{className:"text-md font-medium text-gray-700 flex items-center space-x-2",children:[r.jsxs("span",{children:["Section ",Te]}),r.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-0.5 rounded",children:[ve.length," students"]})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:ve.map(le=>r.jsxs("div",{className:"px-6 py-3 hover:bg-gray-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:le.name.charAt(0)})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 break-words",children:le.name}),r.jsx("div",{className:"text-sm text-gray-500 break-words",children:le.email}),le.studentDetails?.studentId&&r.jsxs("div",{className:"text-xs text-gray-400 truncate",children:["ID: ",le.studentDetails.studentId]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center",children:[le.isActive?r.jsx(as,{className:"h-4 w-4 text-green-500 mr-1"}):r.jsx(Wm,{className:"h-4 w-4 text-red-500 mr-1"}),r.jsx("span",{className:`text-sm ${le.isActive?"text-green-700":"text-red-700"}`,children:le.isActive?"Active":"Inactive"})]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>aa(le),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit User",children:r.jsx(zs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ps(le._id,le.name||`User ${le._id}`),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete User",children:r.jsx(pn,{className:"h-4 w-4"})})]})]})]},le._id))})]},Te))})]},g))})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),U==="student"&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"})]}),U==="teacher"&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Password"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Experience"})]}),U==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Access Level"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Loading users..."})}):ca.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):ca.map(g=>{const ue="https://erp-backend-1jtx.onrender.com/api",Te=ue?ue.replace(/\/api\/?$/,""):typeof window<"u"?window.location.origin:"",ve=g.profileImage||g.profilePicture,le=ve?ve.startsWith("http")?ve:`${Te}${ve.startsWith("/")?"":"/"}${ve}`:null,be=g.name?.firstName||"",_e=g.name?.lastName||"",Ze=`${be.charAt(0)}${_e.charAt(0)}`.toUpperCase()||"U";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:le?r.jsx("img",{src:le,alt:`${le}`,className:"h-10 w-10 rounded-full object-cover border border-gray-200",onError:Ge=>{const Ke=Ge.target;Ke.style.display="none";const Xt=Ke.parentElement;Xt&&(Xt.innerHTML=`<div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"><span class="text-sm font-medium text-blue-700">${Ze}</span></div>`)}}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-700",children:Ze})})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-xs",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 break-words",children:g.name?.displayName||(g.name?.firstName&&g.name?.lastName?`${g.name.firstName} ${g.name.lastName}`:g.name?.firstName||g.name||"No name")}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:g.userId||g._id})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:r.jsxs("div",{className:"max-w-xs",children:[r.jsx("div",{className:"break-words",children:g.email}),r.jsx("div",{className:"text-xs text-gray-400",children:g.contact?.primaryPhone||g.phone||"No phone"})]})}),U==="student"&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.studentDetails?.currentClass||"Not assigned"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.studentDetails?.currentSection||"Not assigned"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.userId||g._id||"Not assigned"})]}),U==="teacher"&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.teacherDetails?.employeeId||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"flex items-center space-x-1",children:g.temporaryPassword?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-grow font-mono text-xs text-gray-700",children:Br[g.userId]?g.temporaryPassword:"********"}),r.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),Va(g.userId,g.name?.displayName||"this user")},className:"text-gray-400 hover:text-gray-600 p-0.5 rounded hover:bg-gray-100 flex-shrink-0",title:Br[g.userId]?"Hide password":"Show password (requires admin password)",type:"button",children:Br[g.userId]?r.jsx(mi,{size:14}):r.jsx(oa,{size:14})})]}):r.jsx("span",{className:"text-xs text-gray-400 italic",children:"Not Available"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.teacherDetails?.experience!==void 0&&g.teacherDetails?.experience!==null?`${g.teacherDetails.experience} years`:"N/A"})]}),U==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Employee ID"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Administration"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Full Access"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[g.isActive?r.jsx(as,{className:"h-4 w-4 text-green-500 mr-1"}):r.jsx(Wm,{className:"h-4 w-4 text-red-500 mr-1"}),r.jsx("span",{className:`text-sm ${g.isActive?"text-green-700":"text-red-700"}`,children:g.isActive?"Active":"Inactive"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>aa(g),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit User",children:r.jsx(zs,{className:"h-4 w-4"})}),U==="teacher"&&r.jsx("button",{onClick:()=>{console.log("Change password clicked for:",g.userId,g.email),_n(g.userId||g._id,g.name?.displayName||g.name||"User",g.email)},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Change Password (Set New Password)",children:r.jsx(u2,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ps(g._id,g.name||`User ${g._id}`),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete User",disabled:!1,children:r.jsx(pn,{className:"h-4 w-4"})})]})})]},g._id)})})]})}),r.jsx("div",{className:"md:hidden",children:k?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):ca.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No users found"})]}):r.jsx("div",{className:"space-y-3 p-4",children:ca.map(g=>{const ue="https://erp-backend-1jtx.onrender.com/api",Te=ue?ue.replace(/\/api\/?$/,""):typeof window<"u"?window.location.origin:"",ve=g.profileImage||g.profilePicture,le=ve?ve.startsWith("http")?ve:`${Te}${ve.startsWith("/")?"":"/"}${ve}`:null,be=g.name?.firstName||"",_e=g.name?.lastName||"",Ze=`${be.charAt(0)}${_e.charAt(0)}`.toUpperCase()||"U";return r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:le?r.jsx("img",{src:le,alt:`${le}`,className:"h-12 w-12 rounded-full object-cover border border-gray-200",onError:Ge=>{const Ke=Ge.target;Ke.style.display="none";const Xt=Ke.parentElement;Xt&&(Xt.innerHTML=`<div class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"><span class="text-sm font-medium text-blue-700">${Ze}</span></div>`)}}):r.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-700",children:Ze})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:g.name?.displayName||(g.name?.firstName&&g.name?.lastName?`${g.name.firstName} ${g.name.lastName}`:g.name?.firstName||g.name||"No name")}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.isActive?"Active":"Inactive"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",g.userId||g._id]}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[" ",g.email]}),r.jsxs("p",{className:"text-xs text-gray-600",children:[" ",g.contact?.primaryPhone||g.phone||"No phone"]}),U==="student"&&r.jsxs("div",{className:"flex space-x-4 text-xs text-gray-600",children:[r.jsxs("span",{children:["Class: ",g.studentDetails?.currentClass||"N/A"]}),r.jsxs("span",{children:["Section: ",g.studentDetails?.currentSection||"N/A"]})]}),U==="teacher"&&r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[r.jsxs("span",{children:["ID: ",g.teacherDetails?.employeeId||"N/A"]}),g.temporaryPassword&&r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-mono",children:Br[g.userId]?g.temporaryPassword:""}),r.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),Va(g.userId,g.name?.displayName||"this user")},className:"text-gray-400 hover:text-gray-600",children:Br[g.userId]?r.jsx(mi,{size:12}):r.jsx(oa,{size:12})})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[r.jsx("button",{onClick:()=>handleEditUser(g),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit User",children:r.jsx(zs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>{setUserToDelete(g),setShowDeleteModal(!0)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Delete User",children:r.jsx(pn,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Js(g),className:`p-1.5 rounded ${g.isActive?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:g.isActive?"Deactivate User":"Activate User",children:g.isActive?r.jsx(Wm,{className:"h-4 w-4"}):r.jsx(as,{className:"h-4 w-4"})})]})]})]})},g._id)})})})]})}),X&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[60]",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[95vh] overflow-y-auto relative z-[61]",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:["Add New ",N.role.charAt(0).toUpperCase()+N.role.slice(1)," - Enrollment Form"]}),r.jsxs("form",{onSubmit:ms,onKeyDown:Z,className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Role"}),r.jsx("div",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-700 font-medium",children:U.charAt(0).toUpperCase()+U.slice(1)}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role is automatically set based on the current tab"})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Generated Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Next User ID",ut&&r.jsx("span",{className:"text-blue-500 ml-1",children:"(Loading...)"}),!ut&&N.userId&&r.jsx("span",{className:"text-green-600 ml-1",children:""})]}),r.jsx("input",{type:"text",value:ut?"Generating next ID...":N.userId||pe||"Select a role to auto-generate ID",readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100",placeholder:"Next sequential ID will appear here"}),!N.userId&&!ut&&N.role&&r.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:r.jsx("p",{className:"text-xs text-blue-700",children:" Select a role above to automatically fetch the next available ID from the database"})}),N.userId&&!ut&&r.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[r.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" Next available ID for ",N.role," role: ",r.jsx("strong",{children:N.userId})]}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"This ID has been reserved from the backend database"})]}),ut&&r.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:r.jsx("p",{className:"text-xs text-blue-700",children:" Fetching next available ID from database..."})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[N.role==="student"?"Student Password":"Generated Password",N.generatedPassword&&r.jsx("span",{className:"text-green-600 ml-1",children:""})]}),N.role==="student"?r.jsxs("div",{children:[N.generatedPassword?r.jsxs("div",{className:"w-full border rounded-lg px-3 py-2 bg-green-50 border-green-300 text-green-800 font-mono",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-lg",children:N.generatedPassword}),r.jsx("span",{className:"text-green-600 text-sm font-semibold",children:" Generated from DOB"})]}),r.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Password format: DDMMYYYY (e.g., 15032010)"})]}):r.jsxs("div",{className:"w-full border rounded-lg px-3 py-2 bg-blue-50 border-blue-300 text-blue-800",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-blue-500 mr-2",children:""}),r.jsx("span",{className:"font-medium",children:"Enter Date of Birth to generate password"})]}),r.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Password will be in DDMMYYYY format (e.g., 15032010)"})]}),N.generatedPassword&&r.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"text-green-500 text-lg",children:""})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" Password created from Date of Birth: ",r.jsx("code",{className:"bg-green-100 px-2 py-1 rounded font-mono text-sm",children:N.generatedPassword})]}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Give this password to the student for their first login. They will be required to change it on first login."}),r.jsxs("div",{className:"mt-2 text-xs text-green-600",children:[r.jsx("strong",{children:"Format:"})," DDMMYYYY (Day-Month-Year)"]})]})]})})]}):r.jsx("input",{type:"text",value:N.generatedPassword||"Password will be generated when role is selected",readOnly:!0,className:`w-full border rounded-lg px-3 py-2 font-mono ${N.generatedPassword?"bg-green-50 border-green-300 text-green-800":"bg-gray-100 border-gray-300 text-gray-500"}`,placeholder:"8-character secure password will appear here"}),N.generatedPassword&&N.role!=="student"&&r.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[r.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" 8-character secure password generated:",r.jsx("code",{className:"bg-green-100 px-1 rounded",children:N.generatedPassword})]}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Copy this password - user will need it for first login"})]})]})]}),(N.userId||N.generatedPassword)&&r.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-yellow-800 font-medium",children:[" ",r.jsx("strong",{children:"Important:"})," Save this password! It will be needed for the user's first login."]}),r.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"The user will be required to change this password on their first login."})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",required:!0,value:N.firstName,onChange:g=>Ne({...N,firstName:g.target.value,name:`${g.target.value} ${N.lastName}`.trim()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter first name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",required:!0,value:N.lastName,onChange:g=>Ne({...N,lastName:g.target.value,name:`${N.firstName} ${g.target.value}`.trim()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter last name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:N.email,onChange:g=>Ne({...N,email:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",required:!0,value:N.phone,onChange:g=>Ne({...N,phone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter phone number (10 digits)",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),r.jsx("input",{type:"date",required:!0,value:N.dateOfBirth||N.studentDetails?.dateOfBirth||"",onChange:g=>b(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),r.jsxs("select",{required:!0,value:N.gender||N.studentDetails?.gender||"male",onChange:g=>{const ue=g.target.value;Ne({...N,gender:ue,studentDetails:{...N.studentDetails,gender:ue}})},className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})]}),N.role==="student"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment No"}),r.jsx("input",{type:"text",value:N.enrollmentNo,onChange:g=>Ne({...N,enrollmentNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter enrollment number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TC No"}),r.jsx("input",{type:"text",value:N.tcNo,onChange:g=>Ne({...N,tcNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter TC number"})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Admission Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission to Class *"}),a?r.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"Loading classes..."}):r.jsxs("select",{required:!0,value:N.class||N.studentDetails?.currentClass||"",onChange:g=>{const ue=g.target.value;m(ue),Ne({...N,class:ue,section:"",studentDetails:{...N.studentDetails,currentClass:ue,currentSection:""}})},className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Class"}),l()?s().map(g=>r.jsx("option",{value:g.value,children:g.label},g.value)):r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"LKG",children:"LKG"}),r.jsx("option",{value:"UKG",children:"UKG"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(g=>r.jsx("option",{value:g.toString(),children:g},g))]})]}),n&&r.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:" Using default classes (Super Admin hasn't configured classes yet)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),r.jsxs("select",{required:!0,value:N.studentDetails?.academicYear||"2024-25",onChange:g=>{const ue=g.target.value;Ne({...N,studentDetails:{...N.studentDetails,academicYear:ue}})},className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"2024-25",children:"2024-25"}),r.jsx("option",{value:"2025-26",children:"2025-26"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),r.jsxs("select",{value:N.section||N.studentDetails?.currentSection||"",onChange:g=>{const ue=g.target.value;Ne({...N,section:ue,studentDetails:{...N.studentDetails,currentSection:ue}})},className:"w-full border border-gray-300 rounded-lg px-3 py-2",disabled:!N.class&&!N.studentDetails?.currentClass,children:[r.jsx("option",{value:"",children:!N.class&&!N.studentDetails?.currentClass?"Select Class First":"Select Section"}),d.length>0?d.map(g=>r.jsx("option",{value:g.value,children:g.label},g.value)):["A","B","C","D","E","F","G","H","I","J","K","L","M"].map(g=>r.jsxs("option",{value:g,children:["Section ",g]},g))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medium of Instruction *"}),r.jsxs("select",{required:!0,value:N.mediumOfInstruction,onChange:g=>Ne({...N,mediumOfInstruction:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Kannada",children:"Kannada"}),r.jsx("option",{value:"Hindi",children:"Hindi"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Tongue"}),r.jsxs("select",{value:N.motherTongue,onChange:g=>Ne({...N,motherTongue:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Mother Tongue"}),r.jsx("option",{value:"Kannada",children:"Kannada"}),r.jsx("option",{value:"Hindi",children:"Hindi"}),r.jsx("option",{value:"Tamil",children:"Tamil"}),r.jsx("option",{value:"Telugu",children:"Telugu"}),r.jsx("option",{value:"Malayalam",children:"Malayalam"}),r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Urdu",children:"Urdu"}),r.jsx("option",{value:"Marathi",children:"Marathi"}),r.jsx("option",{value:"Bengali",children:"Bengali"}),r.jsx("option",{value:"Gujarati",children:"Gujarati"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.motherTongue==="Other"&&r.jsx("input",{type:"text",value:N.motherTongueOther||"",onChange:g=>Ne({...N,motherTongueOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify mother tongue"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.name,onChange:g=>Ne({...N,name:g.target.value,firstName:g.target.value.split(" ")[0],lastName:g.target.value.split(" ").slice(1).join(" ")}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter full name in English"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),r.jsx("input",{type:"date",required:!0,value:N.dateOfBirth,onChange:g=>v(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age (Years)"}),r.jsx("input",{type:"number",value:N.ageYears,onChange:g=>Ne({...N,ageYears:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Years",min:"0",max:"25"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age (Months)"}),r.jsx("input",{type:"number",value:N.ageMonths,onChange:g=>Ne({...N,ageMonths:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Months",min:"0",max:"11"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),r.jsxs("select",{required:!0,value:N.gender,onChange:g=>Ne({...N,gender:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Family Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.fatherName,onChange:g=>Ne({...N,fatherName:g.target.value,studentDetails:{...N.studentDetails,fatherName:g.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter father's name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Aadhaar No"}),r.jsx("input",{type:"text",value:N.fatherAadhaar,onChange:g=>Ne({...N,fatherAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.motherName,onChange:g=>Ne({...N,motherName:g.target.value,studentDetails:{...N.studentDetails,motherName:g.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter mother's name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Aadhaar No"}),r.jsx("input",{type:"text",value:N.motherAadhaar,onChange:g=>Ne({...N,motherAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]})]})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Identity Documents"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aadhaar/KPR No"}),r.jsx("input",{type:"text",value:N.studentAadhaar,onChange:g=>Ne({...N,studentAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Caste Certificate No"}),r.jsx("input",{type:"text",value:N.studentCasteCertNo,onChange:g=>Ne({...N,studentCasteCertNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter certificate number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Caste Certificate No"}),r.jsx("input",{type:"text",value:N.fatherCasteCertNo,onChange:g=>Ne({...N,fatherCasteCertNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter certificate number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Caste Certificate No"}),r.jsx("input",{type:"text",value:N.motherCasteCertNo,onChange:g=>Ne({...N,motherCasteCertNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter certificate number"})]})]})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Caste and Category"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Caste"}),r.jsxs("select",{value:N.studentCaste,onChange:g=>Ne({...N,studentCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.studentCaste==="Other"&&r.jsx("input",{type:"text",value:N.studentCasteOther,onChange:g=>Ne({...N,studentCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify student caste"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Caste"}),r.jsxs("select",{value:N.fatherCaste,onChange:g=>Ne({...N,fatherCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.fatherCaste==="Other"&&r.jsx("input",{type:"text",value:N.fatherCasteOther,onChange:g=>Ne({...N,fatherCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify father caste"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Caste"}),r.jsxs("select",{value:N.motherCaste,onChange:g=>Ne({...N,motherCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.motherCaste==="Other"&&r.jsx("input",{type:"text",value:N.motherCasteOther,onChange:g=>Ne({...N,motherCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify mother caste"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Category"}),r.jsxs("select",{value:N.socialCategory,onChange:g=>Ne({...N,socialCategory:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Category"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"SC",children:"SC (Scheduled Caste)"}),r.jsx("option",{value:"ST",children:"ST (Scheduled Tribe)"}),r.jsx("option",{value:"OBC",children:"OBC (Other Backward Class)"}),r.jsx("option",{value:"Category-1",children:"Category-1"}),r.jsx("option",{value:"Category-2A",children:"Category-2A"}),r.jsx("option",{value:"Category-2B",children:"Category-2B"}),r.jsx("option",{value:"Category-3A",children:"Category-3A"}),r.jsx("option",{value:"Category-3B",children:"Category-3B"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.socialCategory==="Other"&&r.jsx("input",{type:"text",value:N.socialCategoryOther,onChange:g=>Ne({...N,socialCategoryOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify social category"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Religion"}),r.jsxs("select",{value:N.religion,onChange:g=>Ne({...N,religion:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Religion"}),r.jsx("option",{value:"Hindu",children:"Hindu"}),r.jsx("option",{value:"Muslim",children:"Muslim"}),r.jsx("option",{value:"Christian",children:"Christian"}),r.jsx("option",{value:"Sikh",children:"Sikh"}),r.jsx("option",{value:"Buddhist",children:"Buddhist"}),r.jsx("option",{value:"Jain",children:"Jain"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.religion==="Other"&&r.jsx("input",{type:"text",value:N.religionOther,onChange:g=>Ne({...N,religionOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify religion"})]})]})]}),r.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Economic Status"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Belonging to BPL"}),r.jsxs("select",{value:N.belongingToBPL,onChange:g=>Ne({...N,belongingToBPL:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"No",children:"No"}),r.jsx("option",{value:"Yes",children:"Yes"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BPL Card No"}),r.jsx("input",{type:"text",value:N.bplCardNo,onChange:g=>Ne({...N,bplCardNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter BPL card number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bhagyalakshmi Bond No"}),r.jsx("input",{type:"text",value:N.bhagyalakshmiBondNo,onChange:g=>Ne({...N,bhagyalakshmiBondNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter bond number"})]})]})]}),r.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Special Needs"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disability / Child with Special Need"}),r.jsxs("select",{value:N.disability,onChange:g=>Ne({...N,disability:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"Not Applicable",children:"Not Applicable"}),r.jsx("option",{value:"Visual Impairment",children:"Visual Impairment"}),r.jsx("option",{value:"Hearing Impairment",children:"Hearing Impairment"}),r.jsx("option",{value:"Speech and Language Disability",children:"Speech and Language Disability"}),r.jsx("option",{value:"Locomotor Disability",children:"Locomotor Disability"}),r.jsx("option",{value:"Intellectual Disability",children:"Intellectual Disability"}),r.jsx("option",{value:"Learning Disability",children:"Learning Disability"}),r.jsx("option",{value:"Autism Spectrum Disorder",children:"Autism Spectrum Disorder"}),r.jsx("option",{value:"Multiple Disabilities",children:"Multiple Disabilities"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.disability==="Other"&&r.jsx("input",{type:"text",value:N.disabilityOther,onChange:g=>Ne({...N,disabilityOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify disability type"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Is the student an RTE (Right to Education) candidate? ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:N.isRTECandidate||"",onChange:g=>Ne({...N,isRTECandidate:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Option"}),r.jsx("option",{value:"Yes",children:"Yes"}),r.jsx("option",{value:"No",children:"No"})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),r.jsx("textarea",{required:!0,value:N.address,onChange:g=>Ne({...N,address:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter complete address",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City/Village/Town *"}),r.jsx("input",{type:"text",required:!0,value:N.cityVillageTown,onChange:g=>Ne({...N,cityVillageTown:g.target.value,city:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter city/village/town"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Locality"}),r.jsx("input",{type:"text",value:N.locality,onChange:g=>Ne({...N,locality:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter locality"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pin Code *"}),r.jsx("input",{type:"text",required:!0,value:N.pinCode,onChange:g=>Ne({...N,pinCode:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"6-digit pin code",pattern:"[0-9]{6}",maxLength:6})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-2",children:"Location Details (State, District, Taluka)"}),r.jsx(Jh,{selectedState:N.stateId,selectedDistrict:N.districtId,selectedTaluka:N.talukaId,districtText:N.districtText,talukaText:N.talukaText,onStateChange:Is,onDistrictChange:Pi,onTalukaChange:kr,onDistrictTextChange:ja,onTalukaTextChange:As,required:!0,className:"grid grid-cols-1 md:grid-cols-3 gap-4"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"})]}),r.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Communication Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Mobile No"}),r.jsx("input",{type:"tel",value:N.studentMobile,onChange:g=>Ne({...N,studentMobile:g.target.value,phone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"10-digit mobile number",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Email ID"}),r.jsx("input",{type:"email",value:N.studentEmail,onChange:g=>Ne({...N,studentEmail:g.target.value,email:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Mobile No"}),r.jsx("input",{type:"tel",value:N.fatherMobile,onChange:g=>Ne({...N,fatherMobile:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"10-digit mobile number",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Email ID"}),r.jsx("input",{type:"email",value:N.fatherEmail,onChange:g=>Ne({...N,fatherEmail:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Mobile No"}),r.jsx("input",{type:"tel",value:N.motherMobile,onChange:g=>Ne({...N,motherMobile:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"10-digit mobile number",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Email ID"}),r.jsx("input",{type:"email",value:N.motherEmail,onChange:g=>Ne({...N,motherEmail:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]})]})]}),r.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"School and Banking"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"School Admission Date"}),r.jsx("input",{type:"date",value:N.schoolAdmissionDate,onChange:g=>Ne({...N,schoolAdmissionDate:g.target.value,admissionDate:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),r.jsx("input",{type:"text",value:N.bankName,onChange:g=>Ne({...N,bankName:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter bank name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account No"}),r.jsx("input",{type:"text",value:N.bankAccountNo,onChange:g=>Ne({...N,bankAccountNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter account number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank IFSC Code"}),r.jsx("input",{type:"text",value:N.bankIFSC,onChange:g=>Ne({...N,bankIFSC:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"11-character IFSC code",pattern:"[A-Z]{4}0[A-Z0-9]{6}",maxLength:11})]})]})]}),r.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Additional Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),r.jsxs("select",{value:N.section,onChange:g=>Ne({...N,section:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Section"}),["A","B","C","D","E"].map(g=>r.jsx("option",{value:g,children:g},g))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Roll Number"}),r.jsx("input",{type:"text",value:N.rollNumber,onChange:g=>Ne({...N,rollNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter roll number"})]})]})]}),r.jsxs("div",{className:"bg-rose-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Additional Essential Information"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Personal Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),r.jsxs("select",{value:N.bloodGroup||"",onChange:g=>Ne({...N,bloodGroup:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Blood Group"}),r.jsx("option",{value:"A+",children:"A+"}),r.jsx("option",{value:"A-",children:"A-"}),r.jsx("option",{value:"B+",children:"B+"}),r.jsx("option",{value:"B-",children:"B-"}),r.jsx("option",{value:"AB+",children:"AB+"}),r.jsx("option",{value:"AB-",children:"AB-"}),r.jsx("option",{value:"O+",children:"O+"}),r.jsx("option",{value:"O-",children:"O-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality *"}),r.jsx("input",{type:"text",required:!0,value:N.nationality||"Indian",onChange:g=>Ne({...N,nationality:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter nationality"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Birth"}),r.jsx("input",{type:"text",value:N.placeOfBirth||"",onChange:g=>Ne({...N,placeOfBirth:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter place of birth"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Previous School Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous School Name"}),r.jsx("input",{type:"text",value:N.previousSchool||"",onChange:g=>Ne({...N,previousSchool:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter previous school name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TC Number"}),r.jsx("input",{type:"text",value:N.tcNumber||"",onChange:g=>Ne({...N,tcNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter TC number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Migration Certificate"}),r.jsx("input",{type:"text",value:N.migrationCertificate||"",onChange:g=>Ne({...N,migrationCertificate:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter migration certificate number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Class Passed"}),r.jsx("input",{type:"text",value:N.previousClass||"",onChange:g=>Ne({...N,previousClass:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter last class passed"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Guardian & Emergency Contact"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Name"}),r.jsx("input",{type:"text",value:N.guardianName||"",onChange:g=>Ne({...N,guardianName:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter guardian name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Relationship"}),r.jsxs("select",{value:N.guardianRelation||"",onChange:g=>Ne({...N,guardianRelation:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Relationship"}),r.jsx("option",{value:"Father",children:"Father"}),r.jsx("option",{value:"Mother",children:"Mother"}),r.jsx("option",{value:"Uncle",children:"Uncle"}),r.jsx("option",{value:"Aunt",children:"Aunt"}),r.jsx("option",{value:"Grandfather",children:"Grandfather"}),r.jsx("option",{value:"Grandmother",children:"Grandmother"}),r.jsx("option",{value:"Elder Brother",children:"Elder Brother"}),r.jsx("option",{value:"Elder Sister",children:"Elder Sister"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact Phone"}),r.jsx("input",{type:"tel",value:N.alternatePhone||"",onChange:g=>Ne({...N,alternatePhone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"10-digit emergency contact",pattern:"[0-9]{10}",maxLength:10})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Medical Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medical Conditions"}),r.jsx("textarea",{value:N.medicalConditions||"",onChange:g=>Ne({...N,medicalConditions:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter any chronic medical conditions",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Needs"}),r.jsx("textarea",{value:N.specialNeeds||"",onChange:g=>Ne({...N,specialNeeds:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter any special educational needs",rows:2})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Transport Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Required"}),r.jsxs("select",{value:N.transportMode||"Own",onChange:g=>Ne({...N,transportMode:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"Own",children:"Own Transport"}),r.jsx("option",{value:"School Bus",children:"School Bus"}),r.jsx("option",{value:"Public Transport",children:"Public Transport"}),r.jsx("option",{value:"Walking",children:"Walking"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bus Route"}),r.jsx("input",{type:"text",value:N.busRoute||"",onChange:g=>Ne({...N,busRoute:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter bus route (if applicable)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Point"}),r.jsx("input",{type:"text",value:N.pickupPoint||"",onChange:g=>Ne({...N,pickupPoint:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter pickup point"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Additional Documents"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Certificate Number"}),r.jsx("input",{type:"text",value:N.birthCertificateNumber||"",onChange:g=>Ne({...N,birthCertificateNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter birth certificate number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ration Card Number"}),r.jsx("input",{type:"text",value:N.rationCardNumber||"",onChange:g=>Ne({...N,rationCardNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter ration card number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scholarship Details"}),r.jsx("input",{type:"text",value:N.scholarshipDetails||"",onChange:g=>Ne({...N,scholarshipDetails:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter scholarship information"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-3",children:"Family Economic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Education"}),r.jsx("input",{type:"text",value:N.fatherEducation||"",onChange:g=>Ne({...N,fatherEducation:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter father's education"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Education"}),r.jsx("input",{type:"text",value:N.motherEducation||"",onChange:g=>Ne({...N,motherEducation:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter mother's education"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family Income (Annual)"}),r.jsxs("select",{value:N.familyIncome||"",onChange:g=>Ne({...N,familyIncome:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Income Range"}),r.jsx("option",{value:"Below 1 Lakh",children:"Below 1 Lakh"}),r.jsx("option",{value:"1-2 Lakhs",children:"1-2 Lakhs"}),r.jsx("option",{value:"2-5 Lakhs",children:"2-5 Lakhs"}),r.jsx("option",{value:"5-10 Lakhs",children:"5-10 Lakhs"}),r.jsx("option",{value:"Above 10 Lakhs",children:"Above 10 Lakhs"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Economic Status"}),r.jsxs("select",{value:N.economicStatus||"",onChange:g=>Ne({...N,economicStatus:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Status"}),r.jsx("option",{value:"BPL",children:"Below Poverty Line (BPL)"}),r.jsx("option",{value:"APL",children:"Above Poverty Line (APL)"}),r.jsx("option",{value:"EWS",children:"Economically Weaker Section (EWS)"}),r.jsx("option",{value:"General",children:"General"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BPL Card Number"}),r.jsx("input",{type:"text",value:N.bplCardNumber||"",onChange:g=>Ne({...N,bplCardNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter BPL card number"})]})]})]})]})]}),N.role==="teacher"&&r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Professional Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification *"}),r.jsx("input",{type:"text",required:!0,value:N.qualification,onChange:g=>Ne({...N,qualification:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter qualification"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience (Years)"}),r.jsx("input",{type:"number",value:N.experience,onChange:g=>Ne({...N,experience:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter experience in years",min:"0"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subjects Taught"}),r.jsx("input",{type:"text",value:N.subjects,onChange:g=>Ne({...N,subjects:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter subjects separated by commas (e.g., Mathematics, Physics, Chemistry)"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter subjects separated by commas"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),r.jsx("input",{type:"text",value:N.employeeId,onChange:g=>Ne({...N,employeeId:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter employee ID (optional)"})]})]})]}),N.role==="admin"&&r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Administrative Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Level *"}),r.jsxs("select",{required:!0,value:N.adminLevel,onChange:g=>Ne({...N,adminLevel:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Admin Level"}),r.jsx("option",{value:"Super Admin",children:"Super Admin"}),r.jsx("option",{value:"Principal",children:"Principal"}),r.jsx("option",{value:"Vice Principal",children:"Vice Principal"}),r.jsx("option",{value:"Academic Coordinator",children:"Academic Coordinator"}),r.jsx("option",{value:"Administrative Officer",children:"Administrative Officer"}),r.jsx("option",{value:"Office Staff",children:"Office Staff"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r.jsxs("select",{value:N.department,onChange:g=>Ne({...N,department:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Department"}),r.jsx("option",{value:"Administration",children:"Administration"}),r.jsx("option",{value:"Academic Affairs",children:"Academic Affairs"}),r.jsx("option",{value:"Student Affairs",children:"Student Affairs"}),r.jsx("option",{value:"Finance",children:"Finance"}),r.jsx("option",{value:"Human Resources",children:"Human Resources"}),r.jsx("option",{value:"IT Department",children:"IT Department"}),r.jsx("option",{value:"Facilities",children:"Facilities"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),r.jsx("input",{type:"text",value:N.employeeId,onChange:g=>Ne({...N,employeeId:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter employee ID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Level"}),r.jsxs("select",{value:N.accessLevel,onChange:g=>Ne({...N,accessLevel:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Access Level"}),r.jsx("option",{value:"Full Access",children:"Full Access"}),r.jsx("option",{value:"Limited Access",children:"Limited Access"}),r.jsx("option",{value:"Read Only",children:"Read Only"}),r.jsx("option",{value:"Department Specific",children:"Department Specific"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("textarea",{value:N.address,onChange:g=>Ne({...N,address:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter address",rows:2})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{me(!1),On()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:k||!Mn(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",title:k?"Please wait...":Mn()?void 0:D(),children:k?"Adding...":"Add User"})]})]})]})}),K&&G&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[60]",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto relative z-[61]",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:["Edit User - ",G.role.charAt(0).toUpperCase()+G.role.slice(1)]}),r.jsxs("form",{onSubmit:Xs,className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"User Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),r.jsx("div",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-700 font-mono",children:G.userId||G._id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsx("div",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-700",children:G.role.charAt(0).toUpperCase()+G.role.slice(1)})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Profile Picture"}),r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-32 h-32 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:Se||G.profileImage&&`${"https://erp-backend-1jtx.onrender.com/api".replace("/api","")||"https://erp-backend-1jtx.onrender.com/api"}${G.profileImage}`?r.jsx("img",{src:Se||`${"https://erp-backend-1jtx.onrender.com/api".replace("/api","")||"https://erp-backend-1jtx.onrender.com/api"}${G.profileImage}`,alt:"Profile preview",className:"w-full h-full object-cover"}):r.jsx(U6,{className:"w-12 h-12 text-gray-400"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:Q,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:g=>{const ue=g.target.files?.[0];if(!ue)return;console.log(` Selected image: ${ue.name}, Size: ${(ue.size/1024).toFixed(2)}KB`);const Te=qX(ue);if(!Te.valid){xe.error(Te.error||"Invalid file");return}const ve=new FileReader;ve.onload=le=>{Ie(le.target?.result)},ve.readAsDataURL(ue),fe(ue),xe.success("Image selected. Will be compressed on upload.")},className:"hidden",id:"profile-image-input"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("label",{htmlFor:"profile-image-input",className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors ${te?"opacity-50 cursor-not-allowed":""}`,children:Se||G.profileImage?"Change Photo":"Upload Photo"}),(Se||G.profileImage)&&r.jsxs("button",{type:"button",onClick:()=>{Ie(null),fe(null),Q.current&&(Q.current.value="")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Remove"]})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Upload JPG, PNG, GIF or WebP (max 10MB). Image will be automatically compressed to ~30KB on the server."}),G.profileImage&&!Se&&r.jsx("p",{className:"text-sm text-blue-600",children:"Current image will be kept if no new image is uploaded."})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",required:!0,value:N.firstName,onChange:g=>Ne({...N,firstName:g.target.value,name:`${g.target.value} ${N.lastName}`.trim()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter first name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),r.jsx("input",{type:"text",required:!0,value:N.lastName,onChange:g=>Ne({...N,lastName:g.target.value,name:`${N.firstName} ${g.target.value}`.trim()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter last name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:N.email,onChange:g=>Ne({...N,email:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),r.jsx("input",{type:"tel",required:!0,value:N.phone,onChange:g=>Ne({...N,phone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter phone number (10 digits)",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),r.jsx("input",{type:"date",value:N.dateOfBirth,onChange:g=>v(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),r.jsxs("select",{value:N.gender,onChange:g=>Ne({...N,gender:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})]}),G.role==="student"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.name,onChange:g=>Ne({...N,name:g.target.value,firstName:g.target.value.split(" ")[0],lastName:g.target.value.split(" ").slice(1).join(" ")}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter full name in English"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),r.jsx("input",{type:"date",required:!0,value:N.dateOfBirth,onChange:g=>v(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age (Years)"}),r.jsx("input",{type:"number",value:N.ageYears,onChange:g=>Ne({...N,ageYears:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Years",min:"0",max:"25"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age (Months)"}),r.jsx("input",{type:"number",value:N.ageMonths,onChange:g=>Ne({...N,ageMonths:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Months",min:"0",max:"11"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),r.jsxs("select",{required:!0,value:N.gender,onChange:g=>Ne({...N,gender:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Admission Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),r.jsxs("select",{required:!0,value:N.academicYear,onChange:g=>Ne({...N,academicYear:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"2024-2025",children:"2024-2025"}),r.jsx("option",{value:"2025-2026",children:"2025-2026"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medium of Instruction *"}),r.jsxs("select",{required:!0,value:N.mediumOfInstruction,onChange:g=>Ne({...N,mediumOfInstruction:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Kannada",children:"Kannada"}),r.jsx("option",{value:"Hindi",children:"Hindi"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Tongue"}),r.jsxs("select",{value:N.motherTongue,onChange:g=>Ne({...N,motherTongue:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Mother Tongue"}),r.jsx("option",{value:"Kannada",children:"Kannada"}),r.jsx("option",{value:"Hindi",children:"Hindi"}),r.jsx("option",{value:"Tamil",children:"Tamil"}),r.jsx("option",{value:"Telugu",children:"Telugu"}),r.jsx("option",{value:"Malayalam",children:"Malayalam"}),r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Urdu",children:"Urdu"}),r.jsx("option",{value:"Marathi",children:"Marathi"}),r.jsx("option",{value:"Bengali",children:"Bengali"}),r.jsx("option",{value:"Gujarati",children:"Gujarati"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.motherTongue==="Other"&&r.jsx("input",{type:"text",value:N.motherTongueOther||"",onChange:g=>Ne({...N,motherTongueOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify mother tongue"})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Academic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),r.jsxs("select",{required:!0,value:N.class,onChange:g=>Ne({...N,class:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Class"}),r.jsx("option",{value:"LKG",children:"LKG"}),r.jsx("option",{value:"UKG",children:"UKG"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(g=>r.jsx("option",{value:g.toString(),children:g},g))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),r.jsxs("select",{value:N.section,onChange:g=>Ne({...N,section:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Section"}),["A","B","C","D","E","F","G","H","I","J","K","L","M"].map(g=>r.jsxs("option",{value:g,children:["Section ",g]},g))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Roll Number"}),r.jsx("input",{type:"text",value:N.rollNumber,onChange:g=>Ne({...N,rollNumber:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter roll number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admission Date"}),r.jsx("input",{type:"date",value:N.admissionDate,onChange:g=>Ne({...N,admissionDate:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Family Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.fatherName,onChange:g=>Ne({...N,fatherName:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter father's name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Aadhaar No"}),r.jsx("input",{type:"text",value:N.fatherAadhaar,onChange:g=>Ne({...N,fatherAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Name (English) *"}),r.jsx("input",{type:"text",required:!0,value:N.motherName,onChange:g=>Ne({...N,motherName:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter mother's name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Aadhaar No"}),r.jsx("input",{type:"text",value:N.motherAadhaar,onChange:g=>Ne({...N,motherAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father's Phone"}),r.jsx("input",{type:"tel",value:N.fatherPhone,onChange:g=>Ne({...N,fatherPhone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter father's phone (10 digits)",pattern:"[0-9]{10}",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother's Phone"}),r.jsx("input",{type:"tel",value:N.motherPhone,onChange:g=>Ne({...N,motherPhone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter mother's phone (10 digits)",pattern:"[0-9]{10}",maxLength:10})]})]})]}),r.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Email"}),r.jsx("input",{type:"email",value:N.email,onChange:g=>Ne({...N,email:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Mobile"}),r.jsx("input",{type:"tel",value:N.phone,onChange:g=>Ne({...N,phone:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter mobile number (10 digits)",pattern:"[0-9]{10}",maxLength:10})]})]})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Identity Documents"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Aadhaar/KPR No"}),r.jsx("input",{type:"text",value:N.studentAadhaar,onChange:g=>Ne({...N,studentAadhaar:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:12})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Caste Certificate No"}),r.jsx("input",{type:"text",value:N.studentCasteCertNo,onChange:g=>Ne({...N,studentCasteCertNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter certificate number"})]})]})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Caste and Category"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Category"}),r.jsxs("select",{value:N.socialCategory,onChange:g=>Ne({...N,socialCategory:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Category"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"SC",children:"SC (Scheduled Caste)"}),r.jsx("option",{value:"ST",children:"ST (Scheduled Tribe)"}),r.jsx("option",{value:"OBC",children:"OBC (Other Backward Class)"}),r.jsx("option",{value:"Category-1",children:"Category-1"}),r.jsx("option",{value:"Category-2A",children:"Category-2A"}),r.jsx("option",{value:"Category-2B",children:"Category-2B"}),r.jsx("option",{value:"Category-3A",children:"Category-3A"}),r.jsx("option",{value:"Category-3B",children:"Category-3B"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.socialCategory==="Other"&&r.jsx("input",{type:"text",value:N.socialCategoryOther,onChange:g=>Ne({...N,socialCategoryOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify social category"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Religion"}),r.jsxs("select",{value:N.religion,onChange:g=>Ne({...N,religion:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Religion"}),r.jsx("option",{value:"Hindu",children:"Hindu"}),r.jsx("option",{value:"Muslim",children:"Muslim"}),r.jsx("option",{value:"Christian",children:"Christian"}),r.jsx("option",{value:"Sikh",children:"Sikh"}),r.jsx("option",{value:"Buddhist",children:"Buddhist"}),r.jsx("option",{value:"Jain",children:"Jain"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.religion==="Other"&&r.jsx("input",{type:"text",value:N.religionOther,onChange:g=>Ne({...N,religionOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify religion"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Caste"}),r.jsxs("select",{value:N.studentCaste,onChange:g=>Ne({...N,studentCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.studentCaste==="Other"&&r.jsx("input",{type:"text",value:N.studentCasteOther,onChange:g=>Ne({...N,studentCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify student caste"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Father Caste"}),r.jsxs("select",{value:N.fatherCaste,onChange:g=>Ne({...N,fatherCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.fatherCaste==="Other"&&r.jsx("input",{type:"text",value:N.fatherCasteOther,onChange:g=>Ne({...N,fatherCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify father caste"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mother Caste"}),r.jsxs("select",{value:N.motherCaste,onChange:g=>Ne({...N,motherCaste:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Caste"}),r.jsx("option",{value:"Brahmin",children:"Brahmin"}),r.jsx("option",{value:"Kshatriya",children:"Kshatriya"}),r.jsx("option",{value:"Vaishya",children:"Vaishya"}),r.jsx("option",{value:"Shudra",children:"Shudra"}),r.jsx("option",{value:"Lingayat",children:"Lingayat"}),r.jsx("option",{value:"Vokkaliga",children:"Vokkaliga"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.motherCaste==="Other"&&r.jsx("input",{type:"text",value:N.motherCasteOther,onChange:g=>Ne({...N,motherCasteOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify mother caste"})]})]})]}),r.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Special Needs"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disability / Child with Special Need"}),r.jsxs("select",{value:N.disability,onChange:g=>Ne({...N,disability:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"Not Applicable",children:"Not Applicable"}),r.jsx("option",{value:"Visual Impairment",children:"Visual Impairment"}),r.jsx("option",{value:"Hearing Impairment",children:"Hearing Impairment"}),r.jsx("option",{value:"Speech and Language Disability",children:"Speech and Language Disability"}),r.jsx("option",{value:"Locomotor Disability",children:"Locomotor Disability"}),r.jsx("option",{value:"Intellectual Disability",children:"Intellectual Disability"}),r.jsx("option",{value:"Learning Disability",children:"Learning Disability"}),r.jsx("option",{value:"Autism Spectrum Disorder",children:"Autism Spectrum Disorder"}),r.jsx("option",{value:"Multiple Disabilities",children:"Multiple Disabilities"}),r.jsx("option",{value:"Other",children:"Other"})]}),N.disability==="Other"&&r.jsx("input",{type:"text",value:N.disabilityOther,onChange:g=>Ne({...N,disabilityOther:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-2",placeholder:"Please specify disability type"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Is the student an RTE (Right to Education) candidate? ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:N.isRTECandidate||"",onChange:g=>Ne({...N,isRTECandidate:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Option"}),r.jsx("option",{value:"Yes",children:"Yes"}),r.jsx("option",{value:"No",children:"No"})]})]})]})]}),r.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Banking Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),r.jsx("input",{type:"text",value:N.bankName,onChange:g=>Ne({...N,bankName:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter bank name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account No"}),r.jsx("input",{type:"text",value:N.bankAccountNo,onChange:g=>Ne({...N,bankAccountNo:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter account number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank IFSC Code"}),r.jsx("input",{type:"text",value:N.bankIFSC,onChange:g=>Ne({...N,bankIFSC:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"11-character IFSC code",pattern:"[A-Z]{4}0[A-Z0-9]{6}",maxLength:11})]})]})]})]}),G.role==="teacher"&&r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Teacher Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),r.jsx("input",{type:"text",value:N.employeeId,onChange:g=>Ne({...N,employeeId:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter employee ID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qualification"}),r.jsx("input",{type:"text",value:N.qualification,onChange:g=>Ne({...N,qualification:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter qualification"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience (Years)"}),r.jsx("input",{type:"number",value:N.experience,onChange:g=>Ne({...N,experience:parseInt(g.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter years of experience",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subjects (comma-separated)"}),r.jsx("input",{type:"text",value:N.subjects,onChange:g=>Ne({...N,subjects:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Mathematics, Physics"})]})]})]}),G.role==="admin"&&r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Administrative Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Level *"}),r.jsxs("select",{required:!0,value:N.adminLevel,onChange:g=>Ne({...N,adminLevel:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Admin Level"}),r.jsx("option",{value:"Super Admin",children:"Super Admin"}),r.jsx("option",{value:"Principal",children:"Principal"}),r.jsx("option",{value:"Vice Principal",children:"Vice Principal"}),r.jsx("option",{value:"Academic Coordinator",children:"Academic Coordinator"}),r.jsx("option",{value:"Administrative Officer",children:"Administrative Officer"}),r.jsx("option",{value:"Office Staff",children:"Office Staff"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r.jsxs("select",{value:N.department,onChange:g=>Ne({...N,department:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Department"}),r.jsx("option",{value:"Administration",children:"Administration"}),r.jsx("option",{value:"Academic Affairs",children:"Academic Affairs"}),r.jsx("option",{value:"Student Affairs",children:"Student Affairs"}),r.jsx("option",{value:"Finance",children:"Finance"}),r.jsx("option",{value:"Human Resources",children:"Human Resources"}),r.jsx("option",{value:"IT Department",children:"IT Department"}),r.jsx("option",{value:"Facilities",children:"Facilities"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),r.jsx("input",{type:"text",value:N.employeeId,onChange:g=>Ne({...N,employeeId:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter employee ID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Level"}),r.jsxs("select",{value:N.accessLevel,onChange:g=>Ne({...N,accessLevel:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[r.jsx("option",{value:"",children:"Select Access Level"}),r.jsx("option",{value:"Full Access",children:"Full Access"}),r.jsx("option",{value:"Limited Access",children:"Limited Access"}),r.jsx("option",{value:"Read Only",children:"Read Only"}),r.jsx("option",{value:"Department Specific",children:"Department Specific"})]})]})]})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("textarea",{value:N.address,onChange:g=>Ne({...N,address:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter complete address",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:N.city,onChange:g=>Ne({...N,city:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter city"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pin Code"}),r.jsx("input",{type:"text",value:N.pinCode,onChange:g=>Ne({...N,pinCode:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter pin code",pattern:"[0-9]{6}",maxLength:6})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h5",{className:"text-md font-medium text-gray-800 mb-2",children:"Location Details"}),r.jsx(Jh,{selectedState:N.stateId,selectedDistrict:N.districtId,selectedTaluka:N.talukaId,districtText:N.districtText,talukaText:N.talukaText,onStateChange:(g,ue)=>{Ne(Te=>({...Te,stateId:g.toString(),state:ue.name,permanentState:ue.name,districtId:"",district:"",talukaId:"",taluka:"",districtText:"",talukaText:""}))},onDistrictChange:(g,ue)=>{Ne(Te=>({...Te,districtId:g.toString(),district:ue.name,talukaId:"",taluka:"",talukaText:""}))},onTalukaChange:(g,ue)=>{Ne(Te=>({...Te,talukaId:g.toString(),taluka:ue.name}))},onDistrictTextChange:g=>{Ne(ue=>({...ue,districtText:g,district:g,talukaText:""}))},onTalukaTextChange:g=>{Ne(ue=>({...ue,talukaText:g,taluka:g}))},required:!1,className:"grid grid-cols-1 md:grid-cols-3 gap-4"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{oe(!1),B(null),On()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:k?"Updating...":"Update User"})]})]})]})}),L&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[70]",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative z-[71]",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:r.jsx(as,{className:"h-6 w-6 text-green-600"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"User Created Successfully!"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Please save these credentials and share them with the user."})]}),r.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Login Credentials"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"User ID"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm font-mono text-gray-900",children:L.userId}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(L.userId),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm text-gray-900",children:L.email}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(L.email),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Password"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm font-mono text-gray-900",children:L.password}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(L.password),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Role"}),r.jsx("div",{className:"mt-1 bg-white border rounded px-3 py-2",children:r.jsx("span",{className:"text-sm capitalize text-gray-900",children:L.role})})]})]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Done"})})]})})}),Be&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[70]",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative z-[71]",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-purple-100",children:r.jsx(Z6,{className:"h-6 w-6 text-purple-600"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Password Reset Successfully!"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Please save these new credentials and share them with the user."})]}),r.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Login Credentials"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"User ID"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm font-mono text-gray-900",children:Be.userId}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(Be.userId),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm text-gray-900",children:Be.email}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(Be.email),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"New Password"}),r.jsxs("div",{className:"mt-1 flex items-center justify-between bg-white border rounded px-3 py-2",children:[r.jsx("span",{className:"text-sm font-mono text-gray-900",children:Be.password}),r.jsx("button",{onClick:()=>navigator.clipboard.writeText(Be.password),className:"text-blue-600 hover:text-blue-800 text-xs",children:"Copy"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Role"}),r.jsx("div",{className:"mt-1 bg-white border rounded px-3 py-2",children:r.jsx("span",{className:"text-sm capitalize text-gray-900",children:Be.role})})]})]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:()=>at(null),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Done"})})]})})}),Kt&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[60]",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto relative z-[61]",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Import ",U?U.charAt(0).toUpperCase()+U.slice(1):"User","s"]}),r.jsxs("button",{onClick:()=>{De(!1),Ae(null),ot([]),Pr(null),nr(!1),Lt(0)},className:"text-gray-400 hover:text-gray-600",children:[r.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),Rt?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:r.jsx(Id,{className:"h-6 w-6 text-green-600"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Import Completed"}),r.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[Rt.success.length," users imported successfully",Rt.errors.length>0&&`, ${Rt.errors.length} failed`]})]}),Rt.success.length>0&&r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsxs("h4",{className:"font-medium text-green-900 mb-2",children:["Successfully Imported (",Rt.success.length,")"]}),r.jsxs("div",{className:"max-h-40 overflow-auto",children:[r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-green-700",children:[r.jsx("th",{className:"font-medium",children:"User ID"}),r.jsx("th",{className:"font-medium",children:"Email"}),r.jsx("th",{className:"font-medium",children:"Password"})]})}),r.jsx("tbody",{className:"text-green-800",children:Rt.success.slice(0,10).map((g,ue)=>r.jsxs("tr",{children:[r.jsx("td",{className:"font-mono",children:g.userId}),r.jsx("td",{children:g.email}),r.jsx("td",{className:"font-mono",children:g.password})]},ue))})]}),Rt.success.length>10&&r.jsxs("p",{className:"text-green-600 text-center mt-2",children:["+",Rt.success.length-10," more users"]})]})]}),Rt.errors.length>0&&r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsxs("h4",{className:"font-medium text-red-900 mb-2",children:["Failed to Import (",Rt.errors.length,")"]}),r.jsxs("div",{className:"max-h-40 overflow-auto space-y-2",children:[Rt.errors.slice(0,10).map((g,ue)=>r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"font-medium text-red-800",children:["Row ",g.row,":"]}),r.jsx("span",{className:"text-red-700 ml-2",children:g.error})]},ue)),Rt.errors.length>10&&r.jsxs("p",{className:"text-red-600 text-center",children:["+",Rt.errors.length-10," more errors"]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:()=>{Pr(null),Ae(null),ot([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Import More"}),r.jsxs("div",{className:"space-x-2",children:[Rt.success.length>0&&r.jsx("button",{onClick:xt,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Download Credentials"}),r.jsx("button",{onClick:()=>{yn(),De(!1),Ae(null),ot([]),Pr(null),nr(!1),Lt(0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Done"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Import Instructions"}),r.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[r.jsxs("li",{children:[" Download the template for ",U,'s using the "Template" button']}),r.jsx("li",{children:" Fill in your data (required fields marked with *)"}),r.jsx("li",{children:" Date of Birth will be used as the default password (format: DDMMYYYY)"}),r.jsx("li",{children:" User IDs will be auto-generated sequentially"}),r.jsx("li",{children:" Upload the completed CSV file below"})]})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx("input",{type:"file",accept:".csv",onChange:Ye,className:"hidden",id:"csv-upload"}),r.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[r.jsx(Bo,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-lg text-gray-600 mb-2",children:et?et.name:"Choose CSV file or drag and drop"}),r.jsx("p",{className:"text-sm text-gray-500",children:"CSV files only. Make sure to use the template format."})]})]}),et&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:["File Selected: ",et.name]}),r.jsx("div",{className:"space-x-2",children:r.jsx("button",{onClick:()=>Re(U),className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"Download Template"})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(fa,{className:"h-5 w-5 text-blue-500 mr-2"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Ready to import ",U," users"]}),r.jsx("p",{className:"text-xs text-blue-600",children:"Make sure your CSV file follows the template format"})]})]})}),gt?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Processing users..."}),r.jsxs("span",{children:[Math.round(Ot),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Ot}%`}})})]}):r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{Ae(null),ot([]),Pr(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"}),r.jsx("button",{onClick:dt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Import Users"})]})]})]})]})})}),Pe&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md relative z-[71]",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:qe==="single"?`Verify Admin Password${Fe?` - ${Fe}`:""}`:"Show All Teacher Passwords"}),r.jsx("button",{onClick:()=>{st(!1),We(""),Ce(null),ke("")},className:"text-gray-400 hover:text-gray-600 rounded-full p-1 hover:bg-gray-100",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(Vb,{className:"h-5 w-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Admin Authentication Required"}),r.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:qe==="single"?`Enter your admin password to view the password${Fe?` for ${Fe}`:""}`:"Enter your admin password to reveal all teacher passwords"})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-xs text-blue-700",children:[r.jsx("strong",{children:"Note:"})," Only passwords stored during user creation are available. Users created before this feature may not have viewable passwords."]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Password"}),r.jsx("input",{type:"password",value:Ue,onChange:g=>We(g.target.value),onKeyPress:g=>{g.key==="Enter"&&Pa()},placeholder:"Enter your admin password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 p-6 bg-gray-50 border-t rounded-b-xl",children:[r.jsx("button",{onClick:()=>{st(!1),We(""),Ce(null),ke("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancel"}),r.jsx("button",{onClick:Pa,disabled:ft||!Ue.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:ft?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Verifying..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(oa,{className:"h-4 w-4"}),r.jsx("span",{children:"Show Password"})]})})]})]})}),Ur&&_t&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-[70]",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative z-[71]",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Change Password"}),r.jsx("button",{onClick:()=>{ur(!1),ra(null),Or(""),La("")},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Set a new password for ",r.jsx("strong",{children:_t.name})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Email: ",_t.email]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),r.jsx("input",{type:"password",value:pr,onChange:g=>Or(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password *"}),r.jsx("input",{type:"password",value:Cr,onChange:g=>La(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Re-enter new password"})]}),pr&&Cr&&pr!==Cr&&r.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded",children:r.jsx("p",{className:"text-xs text-red-600",children:"Passwords do not match"})}),pr&&pr.trim()!==""&&r.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:r.jsxs("p",{className:"text-xs text-green-600",children:["Password length: ",pr.length," characters"]})})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{ur(!1),ra(null),Or(""),La("")},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",disabled:xn,children:"Cancel"}),r.jsx("button",{onClick:hs,disabled:xn||!pr||!Cr||pr!==Cr||pr.trim()==="",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:xn?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Changing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(u2,{className:"h-4 w-4"}),r.jsx("span",{children:"Change Password"})]})})]})]})})})]})}catch(g){return console.error("Render error in ManageUsers:",g),Fa(!0),null}},HX=({promotionMode:e,setPromotionMode:t,fromYear:a,setFromYear:n,toYear:s,finalYearAction:o,setFinalYearAction:l,classes:d,selectedPromotionClass:u,setSelectedPromotionClass:m,selectedPromotionSection:p,setSelectedPromotionSection:f,holdBackSeqIds:x,setHoldBackSeqIds:w,onBulkPromote:j,onManualPromote:v,loading:b})=>{const I=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],T=d.length>0?d.reduce((A,k)=>{const E=I.indexOf(A.className);return I.indexOf(k.className)>E?k:A}).className:"12",P=d.find(A=>A.className===u);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Student Promotion System"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Promote students to the next academic year"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Promote From:"}),r.jsxs("select",{value:a,onChange:A=>n(A.target.value),className:"w-full border border-blue-300 rounded-lg px-3 py-2 bg-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"2023-24",children:"2023-24"}),r.jsx("option",{value:"2024-25",children:"2024-25"}),r.jsx("option",{value:"2025-26",children:"2025-26"})]})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx(F6,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Promote To:"}),r.jsx("input",{type:"text",value:s,disabled:!0,className:"w-full border border-blue-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-700"})]})]})}),e==="bulk"?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Bulk School-Wide Promotion"}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Wa,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-yellow-900",children:["Final Year Class Detected: Class ",T]}),r.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please choose how to handle final-year students before proceeding."})]})]})}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:o==="graduate"?"#3b82f6":"#e5e7eb"},children:[r.jsx("input",{type:"radio",name:"finalYearAction",value:"graduate",checked:o==="graduate",onChange:A=>l(A.target.value),className:"mt-1"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["Mark 'Class ",T,"' students as Graduated/Alumni"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Students will be archived and moved to alumni records."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:o==="request"?"#3b82f6":"#e5e7eb"},children:[r.jsx("input",{type:"radio",name:"finalYearAction",value:"request",checked:o==="request",onChange:A=>l(A.target.value),className:"mt-1"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["Request creation of next class (Class ",parseInt(T)+1||"Next",")"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["A notification will be sent to SuperAdmin. Class ",T," promotion will be paused."]})]})]})]}),r.jsxs("button",{onClick:j,disabled:!o||b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[r.jsx(ta,{className:"h-5 w-5"}),b?"Promoting...":`Promote All Students (from ${a} to ${s})`]}),r.jsxs("button",{onClick:()=>t("manual"),className:"w-full mt-4 bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(ta,{className:"h-5 w-5"}),"Switch to Manual Mode (Hold Back Students)"]})]})}):r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Manual Exception Mode"}),r.jsx("button",{onClick:()=>t("bulk"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:" Back to Bulk Promotion"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," Select a class and section, then enter the Sequence IDs of students to hold back (comma-separated). All other students will be promoted."]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class"}),r.jsxs("select",{value:u,onChange:A=>{m(A.target.value),f("")},className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a class..."}),d.sort((A,k)=>{const E=I.indexOf(A.className),_=I.indexOf(k.className);return E!==-1&&_!==-1?E-_:E!==-1?-1:_!==-1?1:A.className.localeCompare(k.className)}).map(A=>r.jsxs("option",{value:A.className,children:["Class ",A.className]},A._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Section"}),r.jsxs("select",{value:p,onChange:A=>f(A.target.value),disabled:!u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:"Select a section..."}),P?.sections.sort().map(A=>r.jsxs("option",{value:A,children:["Section ",A]},A))]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Sequence IDs of Students to Hold Back"}),r.jsx("textarea",{value:x,onChange:A=>w(A.target.value),placeholder:"e.g., SB-S-0001, SB-S-0005, SB-S-0012",rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple IDs with commas"})]}),r.jsx("button",{onClick:v,disabled:!u||!p||b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:b?"Promoting...":"Promote This Section (with exceptions)"})]})})]})};var Vi={},Eo={};var kP;function WX(){if(kP)return Eo;kP=1;var e=mu();function t(D){for(var q="https://reactjs.org/docs/error-decoder.html?invariant="+D,Z=1;Z<arguments.length;Z++)q+="&args[]="+encodeURIComponent(arguments[Z]);return"Minified React error #"+D+"; visit "+q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=Object.prototype.hasOwnProperty,n=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},o={};function l(D){return a.call(o,D)?!0:a.call(s,D)?!1:n.test(D)?o[D]=!0:(s[D]=!0,!1)}function d(D,q,Z,ie,Re,Ee,Ye){this.acceptsBooleans=q===2||q===3||q===4,this.attributeName=ie,this.attributeNamespace=Re,this.mustUseProperty=Z,this.propertyName=D,this.type=q,this.sanitizeURL=Ee,this.removeEmptyString=Ye}var u={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(D){u[D]=new d(D,0,!1,D,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(D){var q=D[0];u[q]=new d(q,1,!1,D[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(D){u[D]=new d(D,2,!1,D.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(D){u[D]=new d(D,2,!1,D,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(D){u[D]=new d(D,3,!1,D.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(D){u[D]=new d(D,3,!0,D,null,!1,!1)}),["capture","download"].forEach(function(D){u[D]=new d(D,4,!1,D,null,!1,!1)}),["cols","rows","size","span"].forEach(function(D){u[D]=new d(D,6,!1,D,null,!1,!1)}),["rowSpan","start"].forEach(function(D){u[D]=new d(D,5,!1,D.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function p(D){return D[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(D){var q=D.replace(m,p);u[q]=new d(q,1,!1,D,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(D){var q=D.replace(m,p);u[q]=new d(q,1,!1,D,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(D){var q=D.replace(m,p);u[q]=new d(q,1,!1,D,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(D){u[D]=new d(D,1,!1,D.toLowerCase(),null,!1,!1)}),u.xlinkHref=new d("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(D){u[D]=new d(D,1,!1,D.toLowerCase(),null,!0,!0)});var f={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x=["Webkit","ms","Moz","O"];Object.keys(f).forEach(function(D){x.forEach(function(q){q=q+D.charAt(0).toUpperCase()+D.substring(1),f[q]=f[D]})});var w=/["'&<>]/;function j(D){if(typeof D=="boolean"||typeof D=="number")return""+D;D=""+D;var q=w.exec(D);if(q){var Z="",ie,Re=0;for(ie=q.index;ie<D.length;ie++){switch(D.charCodeAt(ie)){case 34:q="&quot;";break;case 38:q="&amp;";break;case 39:q="&#x27;";break;case 60:q="&lt;";break;case 62:q="&gt;";break;default:continue}Re!==ie&&(Z+=D.substring(Re,ie)),Re=ie+1,Z+=q}D=Re!==ie?Z+D.substring(Re,ie):Z}return D}var v=/([A-Z])/g,b=/^ms-/,I=Array.isArray;function T(D,q){return{insertionMode:D,selectedValue:q}}function P(D,q,Z){switch(q){case"select":return T(1,Z.value!=null?Z.value:Z.defaultValue);case"svg":return T(2,null);case"math":return T(3,null);case"foreignObject":return T(1,null);case"table":return T(4,null);case"thead":case"tbody":case"tfoot":return T(5,null);case"colgroup":return T(7,null);case"tr":return T(6,null)}return 4<=D.insertionMode||D.insertionMode===0?T(1,null):D}var A=new Map;function k(D,q,Z){if(typeof Z!="object")throw Error(t(62));q=!0;for(var ie in Z)if(a.call(Z,ie)){var Re=Z[ie];if(Re!=null&&typeof Re!="boolean"&&Re!==""){if(ie.indexOf("--")===0){var Ee=j(ie);Re=j((""+Re).trim())}else{Ee=ie;var Ye=A.get(Ee);Ye!==void 0||(Ye=j(Ee.replace(v,"-$1").toLowerCase().replace(b,"-ms-")),A.set(Ee,Ye)),Ee=Ye,Re=typeof Re=="number"?Re===0||a.call(f,ie)?""+Re:Re+"px":j((""+Re).trim())}q?(q=!1,D.push(' style="',Ee,":",Re)):D.push(";",Ee,":",Re)}}q||D.push('"')}function E(D,q,Z,ie){switch(Z){case"style":k(D,q,ie);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<Z.length)||Z[0]!=="o"&&Z[0]!=="O"||Z[1]!=="n"&&Z[1]!=="N"){if(q=u.hasOwnProperty(Z)?u[Z]:null,q!==null){switch(typeof ie){case"function":case"symbol":return;case"boolean":if(!q.acceptsBooleans)return}switch(Z=q.attributeName,q.type){case 3:ie&&D.push(" ",Z,'=""');break;case 4:ie===!0?D.push(" ",Z,'=""'):ie!==!1&&D.push(" ",Z,'="',j(ie),'"');break;case 5:isNaN(ie)||D.push(" ",Z,'="',j(ie),'"');break;case 6:!isNaN(ie)&&1<=ie&&D.push(" ",Z,'="',j(ie),'"');break;default:q.sanitizeURL&&(ie=""+ie),D.push(" ",Z,'="',j(ie),'"')}}else if(l(Z)){switch(typeof ie){case"function":case"symbol":return;case"boolean":if(q=Z.toLowerCase().slice(0,5),q!=="data-"&&q!=="aria-")return}D.push(" ",Z,'="',j(ie),'"')}}}function _(D,q,Z){if(q!=null){if(Z!=null)throw Error(t(60));if(typeof q!="object"||!("__html"in q))throw Error(t(61));q=q.__html,q!=null&&D.push(""+q)}}function R(D){var q="";return e.Children.forEach(D,function(Z){Z!=null&&(q+=Z)}),q}function $(D,q,Z,ie){D.push(Y(Z));var Re=Z=null,Ee;for(Ee in q)if(a.call(q,Ee)){var Ye=q[Ee];if(Ye!=null)switch(Ee){case"children":Z=Ye;break;case"dangerouslySetInnerHTML":Re=Ye;break;default:E(D,ie,Ee,Ye)}}return D.push(">"),_(D,Re,Z),typeof Z=="string"?(D.push(j(Z)),null):Z}var H=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,L=new Map;function Y(D){var q=L.get(D);if(q===void 0){if(!H.test(D))throw Error(t(65,D));q="<"+D,L.set(D,q)}return q}function X(D,q,Z,ie,Re){switch(q){case"select":D.push(Y("select"));var Ee=null,Ye=null;for(Ht in Z)if(a.call(Z,Ht)){var dt=Z[Ht];if(dt!=null)switch(Ht){case"children":Ee=dt;break;case"dangerouslySetInnerHTML":Ye=dt;break;case"defaultValue":case"value":break;default:E(D,ie,Ht,dt)}}return D.push(">"),_(D,Ye,Ee),Ee;case"option":Ye=Re.selectedValue,D.push(Y("option"));var xt=dt=null,$t=null,Ht=null;for(Ee in Z)if(a.call(Z,Ee)){var br=Z[Ee];if(br!=null)switch(Ee){case"children":dt=br;break;case"selected":$t=br;break;case"dangerouslySetInnerHTML":Ht=br;break;case"value":xt=br;default:E(D,ie,Ee,br)}}if(Ye!=null)if(Z=xt!==null?""+xt:R(dt),I(Ye)){for(ie=0;ie<Ye.length;ie++)if(""+Ye[ie]===Z){D.push(' selected=""');break}}else""+Ye===Z&&D.push(' selected=""');else $t&&D.push(' selected=""');return D.push(">"),_(D,Ht,dt),dt;case"textarea":D.push(Y("textarea")),Ht=Ye=Ee=null;for(dt in Z)if(a.call(Z,dt)&&(xt=Z[dt],xt!=null))switch(dt){case"children":Ht=xt;break;case"value":Ee=xt;break;case"defaultValue":Ye=xt;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:E(D,ie,dt,xt)}if(Ee===null&&Ye!==null&&(Ee=Ye),D.push(">"),Ht!=null){if(Ee!=null)throw Error(t(92));if(I(Ht)&&1<Ht.length)throw Error(t(93));Ee=""+Ht}return typeof Ee=="string"&&Ee[0]===`
`&&D.push(`
`),Ee!==null&&D.push(j(""+Ee)),null;case"input":D.push(Y("input")),xt=Ht=dt=Ee=null;for(Ye in Z)if(a.call(Z,Ye)&&($t=Z[Ye],$t!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":xt=$t;break;case"defaultValue":dt=$t;break;case"checked":Ht=$t;break;case"value":Ee=$t;break;default:E(D,ie,Ye,$t)}return Ht!==null?E(D,ie,"checked",Ht):xt!==null&&E(D,ie,"checked",xt),Ee!==null?E(D,ie,"value",Ee):dt!==null&&E(D,ie,"value",dt),D.push("/>"),null;case"menuitem":D.push(Y("menuitem"));for(var Ka in Z)if(a.call(Z,Ka)&&(Ee=Z[Ka],Ee!=null))switch(Ka){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:E(D,ie,Ka,Ee)}return D.push(">"),null;case"title":D.push(Y("title")),Ee=null;for(br in Z)if(a.call(Z,br)&&(Ye=Z[br],Ye!=null))switch(br){case"children":Ee=Ye;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:E(D,ie,br,Ye)}return D.push(">"),Ee;case"listing":case"pre":D.push(Y(q)),Ye=Ee=null;for(xt in Z)if(a.call(Z,xt)&&(dt=Z[xt],dt!=null))switch(xt){case"children":Ee=dt;break;case"dangerouslySetInnerHTML":Ye=dt;break;default:E(D,ie,xt,dt)}if(D.push(">"),Ye!=null){if(Ee!=null)throw Error(t(60));if(typeof Ye!="object"||!("__html"in Ye))throw Error(t(61));Z=Ye.__html,Z!=null&&(typeof Z=="string"&&0<Z.length&&Z[0]===`
`?D.push(`
`,Z):D.push(""+Z))}return typeof Ee=="string"&&Ee[0]===`
`&&D.push(`
`),Ee;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":D.push(Y(q));for(var Fa in Z)if(a.call(Z,Fa)&&(Ee=Z[Fa],Ee!=null))switch(Fa){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,q));default:E(D,ie,Fa,Ee)}return D.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return $(D,Z,q,ie);case"html":return Re.insertionMode===0&&D.push("<!DOCTYPE html>"),$(D,Z,q,ie);default:if(q.indexOf("-")===-1&&typeof Z.is!="string")return $(D,Z,q,ie);D.push(Y(q)),Ye=Ee=null;for($t in Z)if(a.call(Z,$t)&&(dt=Z[$t],dt!=null))switch($t){case"children":Ee=dt;break;case"dangerouslySetInnerHTML":Ye=dt;break;case"style":k(D,ie,dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:l($t)&&typeof dt!="function"&&typeof dt!="symbol"&&D.push(" ",$t,'="',j(dt),'"')}return D.push(">"),_(D,Ye,Ee),Ee}}function me(D,q,Z){if(D.push('<!--$?--><template id="'),Z===null)throw Error(t(395));return D.push(Z),D.push('"></template>')}function K(D,q,Z,ie){switch(Z.insertionMode){case 0:case 1:return D.push('<div hidden id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 2:return D.push('<svg aria-hidden="true" style="display:none" id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 3:return D.push('<math aria-hidden="true" style="display:none" id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 4:return D.push('<table hidden id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 5:return D.push('<table hidden><tbody id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 6:return D.push('<table hidden><tr id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');case 7:return D.push('<table hidden><colgroup id="'),D.push(q.segmentPrefix),q=ie.toString(16),D.push(q),D.push('">');default:throw Error(t(397))}}function oe(D,q){switch(q.insertionMode){case 0:case 1:return D.push("</div>");case 2:return D.push("</svg>");case 3:return D.push("</math>");case 4:return D.push("</table>");case 5:return D.push("</tbody></table>");case 6:return D.push("</tr></table>");case 7:return D.push("</colgroup></table>");default:throw Error(t(397))}}var G=/[<\u2028\u2029]/g;function B(D){return JSON.stringify(D).replace(G,function(q){switch(q){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function F(D,q){return q=q===void 0?"":q,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:q+"P:",segmentPrefix:q+"S:",boundaryPrefix:q+"B:",idPrefix:q,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:D}}function re(D,q,Z,ie){return Z.generateStaticMarkup?(D.push(j(q)),!1):(q===""?D=ie:(ie&&D.push("<!-- -->"),D.push(j(q)),D=!0),D)}var U=Object.assign,ae=Symbol.for("react.element"),W=Symbol.for("react.portal"),fe=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),se=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),Be=Symbol.for("react.scope"),at=Symbol.for("react.debug_trace_mode"),pe=Symbol.for("react.legacy_hidden"),tt=Symbol.for("react.default_value"),ut=Symbol.iterator;function vt(D){if(D==null)return null;if(typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case fe:return"Fragment";case W:return"Portal";case Ie:return"Profiler";case Se:return"StrictMode";case de:return"Suspense";case we:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case se:return(D.displayName||"Context")+".Consumer";case te:return(D._context.displayName||"Context")+".Provider";case Q:var q=D.render;return D=D.displayName,D||(D=q.displayName||q.name||"",D=D!==""?"ForwardRef("+D+")":"ForwardRef"),D;case ce:return q=D.displayName||null,q!==null?q:vt(D.type)||"Memo";case Ve:q=D._payload,D=D._init;try{return vt(D(q))}catch{}}return null}var Nt={};function tr(D,q){if(D=D.contextTypes,!D)return Nt;var Z={},ie;for(ie in D)Z[ie]=q[ie];return Z}var ar=null;function jt(D,q){if(D!==q){D.context._currentValue2=D.parentValue,D=D.parent;var Z=q.parent;if(D===null){if(Z!==null)throw Error(t(401))}else{if(Z===null)throw Error(t(401));jt(D,Z)}q.context._currentValue2=q.value}}function Kt(D){D.context._currentValue2=D.parentValue,D=D.parent,D!==null&&Kt(D)}function De(D){var q=D.parent;q!==null&&De(q),D.context._currentValue2=D.value}function et(D,q){if(D.context._currentValue2=D.parentValue,D=D.parent,D===null)throw Error(t(402));D.depth===q.depth?jt(D,q):et(D,q)}function Ae(D,q){var Z=q.parent;if(Z===null)throw Error(t(402));D.depth===Z.depth?jt(D,Z):Ae(D,Z),q.context._currentValue2=q.value}function Xe(D){var q=ar;q!==D&&(q===null?De(D):D===null?Kt(q):q.depth===D.depth?jt(q,D):q.depth>D.depth?et(q,D):Ae(q,D),ar=D)}var ot={isMounted:function(){return!1},enqueueSetState:function(D,q){D=D._reactInternals,D.queue!==null&&D.queue.push(q)},enqueueReplaceState:function(D,q){D=D._reactInternals,D.replace=!0,D.queue=[q]},enqueueForceUpdate:function(){}};function Ot(D,q,Z,ie){var Re=D.state!==void 0?D.state:null;D.updater=ot,D.props=Z,D.state=Re;var Ee={queue:[],replace:!1};D._reactInternals=Ee;var Ye=q.contextType;if(D.context=typeof Ye=="object"&&Ye!==null?Ye._currentValue2:ie,Ye=q.getDerivedStateFromProps,typeof Ye=="function"&&(Ye=Ye(Z,Re),Re=Ye==null?Re:U({},Re,Ye),D.state=Re),typeof q.getDerivedStateFromProps!="function"&&typeof D.getSnapshotBeforeUpdate!="function"&&(typeof D.UNSAFE_componentWillMount=="function"||typeof D.componentWillMount=="function"))if(q=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),q!==D.state&&ot.enqueueReplaceState(D,D.state,null),Ee.queue!==null&&0<Ee.queue.length)if(q=Ee.queue,Ye=Ee.replace,Ee.queue=null,Ee.replace=!1,Ye&&q.length===1)D.state=q[0];else{for(Ee=Ye?q[0]:D.state,Re=!0,Ye=Ye?1:0;Ye<q.length;Ye++){var dt=q[Ye];dt=typeof dt=="function"?dt.call(D,Ee,Z,ie):dt,dt!=null&&(Re?(Re=!1,Ee=U({},Ee,dt)):U(Ee,dt))}D.state=Ee}else Ee.queue=null}var Lt={id:1,overflow:""};function gt(D,q,Z){var ie=D.id;D=D.overflow;var Re=32-nr(ie)-1;ie&=~(1<<Re),Z+=1;var Ee=32-nr(q)+Re;if(30<Ee){var Ye=Re-Re%5;return Ee=(ie&(1<<Ye)-1).toString(32),ie>>=Ye,Re-=Ye,{id:1<<32-nr(q)+Re|Z<<Re|ie,overflow:Ee+D}}return{id:1<<Ee|Z<<Re|ie,overflow:D}}var nr=Math.clz32?Math.clz32:N,Rt=Math.log,Pr=Math.LN2;function N(D){return D>>>=0,D===0?32:31-(Rt(D)/Pr|0)|0}function Ne(D,q){return D===q&&(D!==0||1/D===1/q)||D!==D&&q!==q}var Br=typeof Object.is=="function"?Object.is:Ne,Zt=null,Pe=null,st=null,qe=null,lt=!1,ee=!1,Ce=0,Fe=null,ke=0;function Ue(){if(Zt===null)throw Error(t(321));return Zt}function We(){if(0<ke)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function ft(){return qe===null?st===null?(lt=!1,st=qe=We()):(lt=!0,qe=st):qe.next===null?(lt=!1,qe=qe.next=We()):(lt=!0,qe=qe.next),qe}function Mt(){Pe=Zt=null,ee=!1,st=null,ke=0,qe=Fe=null}function rr(D,q){return typeof q=="function"?q(D):q}function Vr(D,q,Z){if(Zt=Ue(),qe=ft(),lt){var ie=qe.queue;if(q=ie.dispatch,Fe!==null&&(Z=Fe.get(ie),Z!==void 0)){Fe.delete(ie),ie=qe.memoizedState;do ie=D(ie,Z.action),Z=Z.next;while(Z!==null);return qe.memoizedState=ie,[ie,q]}return[qe.memoizedState,q]}return D=D===rr?typeof q=="function"?q():q:Z!==void 0?Z(q):q,qe.memoizedState=D,D=qe.queue={last:null,dispatch:null},D=D.dispatch=Yt.bind(null,Zt,D),[qe.memoizedState,D]}function Gr(D,q){if(Zt=Ue(),qe=ft(),q=q===void 0?null:q,qe!==null){var Z=qe.memoizedState;if(Z!==null&&q!==null){var ie=Z[1];e:if(ie===null)ie=!1;else{for(var Re=0;Re<ie.length&&Re<q.length;Re++)if(!Br(q[Re],ie[Re])){ie=!1;break e}ie=!0}if(ie)return Z[0]}}return D=D(),qe.memoizedState=[D,q],D}function Yt(D,q,Z){if(25<=ke)throw Error(t(301));if(D===Zt)if(ee=!0,D={action:Z,next:null},Fe===null&&(Fe=new Map),Z=Fe.get(q),Z===void 0)Fe.set(q,D);else{for(q=Z;q.next!==null;)q=q.next;q.next=D}}function Ur(){throw Error(t(394))}function ur(){}var _t={readContext:function(D){return D._currentValue2},useContext:function(D){return Ue(),D._currentValue2},useMemo:Gr,useReducer:Vr,useRef:function(D){Zt=Ue(),qe=ft();var q=qe.memoizedState;return q===null?(D={current:D},qe.memoizedState=D):q},useState:function(D){return Vr(rr,D)},useInsertionEffect:ur,useLayoutEffect:function(){},useCallback:function(D,q){return Gr(function(){return D},q)},useImperativeHandle:ur,useEffect:ur,useDebugValue:ur,useDeferredValue:function(D){return Ue(),D},useTransition:function(){return Ue(),[!1,Ur]},useId:function(){var D=Pe.treeContext,q=D.overflow;D=D.id,D=(D&~(1<<32-nr(D)-1)).toString(32)+q;var Z=ra;if(Z===null)throw Error(t(404));return q=Ce++,D=":"+Z.idPrefix+"R"+D,0<q&&(D+="H"+q.toString(32)),D+":"},useMutableSource:function(D,q){return Ue(),q(D._source)},useSyncExternalStore:function(D,q,Z){if(Z===void 0)throw Error(t(407));return Z()}},ra=null,pr=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Or(D){return console.error(D),null}function Cr(){}function La(D,q,Z,ie,Re,Ee,Ye,dt,xt){var $t=[],Ht=new Set;return q={destination:null,responseState:q,progressiveChunkSize:ie===void 0?12800:ie,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Ht,pingedTasks:$t,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Re===void 0?Or:Re,onAllReady:Cr,onShellReady:Ye===void 0?Cr:Ye,onShellError:Cr,onFatalError:Cr},Z=Aa(q,0,null,Z,!1,!1),Z.parentFlushed=!0,D=xn(q,D,null,Z,Ht,Nt,null,Lt),$t.push(D),q}function xn(D,q,Z,ie,Re,Ee,Ye,dt){D.allPendingTasks++,Z===null?D.pendingRootTasks++:Z.pendingTasks++;var xt={node:q,ping:function(){var $t=D.pingedTasks;$t.push(xt),$t.length===1&&Ea(D)},blockedBoundary:Z,blockedSegment:ie,abortSet:Re,legacyContext:Ee,context:Ye,treeContext:dt};return Re.add(xt),xt}function Aa(D,q,Z,ie,Re,Ee){return{status:0,id:-1,index:q,parentFlushed:!1,chunks:[],children:[],formatContext:ie,boundary:Z,lastPushedText:Re,textEmbedded:Ee}}function Va(D,q){if(D=D.onError(q),D!=null&&typeof D!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof D+'" instead');return D}function Ga(D,q){var Z=D.onShellError;Z(q),Z=D.onFatalError,Z(q),D.destination!==null?(D.status=2,D.destination.destroy(q)):(D.status=1,D.fatalError=q)}function Pa(D,q,Z,ie,Re){for(Zt={},Pe=q,Ce=0,D=Z(ie,Re);ee;)ee=!1,Ce=0,ke+=1,qe=null,D=Z(ie,Re);return Mt(),D}function Is(D,q,Z,ie){var Re=Z.render(),Ee=ie.childContextTypes;if(Ee!=null){var Ye=q.legacyContext;if(typeof Z.getChildContext!="function")ie=Ye;else{Z=Z.getChildContext();for(var dt in Z)if(!(dt in Ee))throw Error(t(108,vt(ie)||"Unknown",dt));ie=U({},Ye,Z)}q.legacyContext=ie,ja(D,q,Re),q.legacyContext=Ye}else ja(D,q,Re)}function Pi(D,q){if(D&&D.defaultProps){q=U({},q),D=D.defaultProps;for(var Z in D)q[Z]===void 0&&(q[Z]=D[Z]);return q}return q}function kr(D,q,Z,ie,Re){if(typeof Z=="function")if(Z.prototype&&Z.prototype.isReactComponent){Re=tr(Z,q.legacyContext);var Ee=Z.contextType;Ee=new Z(ie,typeof Ee=="object"&&Ee!==null?Ee._currentValue2:Re),Ot(Ee,Z,ie,Re),Is(D,q,Ee,Z)}else{Ee=tr(Z,q.legacyContext),Re=Pa(D,q,Z,ie,Ee);var Ye=Ce!==0;if(typeof Re=="object"&&Re!==null&&typeof Re.render=="function"&&Re.$$typeof===void 0)Ot(Re,Z,ie,Ee),Is(D,q,Re,Z);else if(Ye){ie=q.treeContext,q.treeContext=gt(ie,1,0);try{ja(D,q,Re)}finally{q.treeContext=ie}}else ja(D,q,Re)}else if(typeof Z=="string"){switch(Re=q.blockedSegment,Ee=X(Re.chunks,Z,ie,D.responseState,Re.formatContext),Re.lastPushedText=!1,Ye=Re.formatContext,Re.formatContext=P(Ye,Z,ie),On(D,q,Ee),Re.formatContext=Ye,Z){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Re.chunks.push("</",Z,">")}Re.lastPushedText=!1}else{switch(Z){case pe:case at:case Se:case Ie:case fe:ja(D,q,ie.children);return;case we:ja(D,q,ie.children);return;case Be:throw Error(t(343));case de:e:{Z=q.blockedBoundary,Re=q.blockedSegment,Ee=ie.fallback,ie=ie.children,Ye=new Set;var dt={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Ye,errorDigest:null},xt=Aa(D,Re.chunks.length,dt,Re.formatContext,!1,!1);Re.children.push(xt),Re.lastPushedText=!1;var $t=Aa(D,0,null,Re.formatContext,!1,!1);$t.parentFlushed=!0,q.blockedBoundary=dt,q.blockedSegment=$t;try{if(On(D,q,ie),D.responseState.generateStaticMarkup||$t.lastPushedText&&$t.textEmbedded&&$t.chunks.push("<!-- -->"),$t.status=1,nn(dt,$t),dt.pendingTasks===0)break e}catch(Ht){$t.status=4,dt.forceClientRender=!0,dt.errorDigest=Va(D,Ht)}finally{q.blockedBoundary=Z,q.blockedSegment=Re}q=xn(D,Ee,Z,xt,Ye,q.legacyContext,q.context,q.treeContext),D.pingedTasks.push(q)}return}if(typeof Z=="object"&&Z!==null)switch(Z.$$typeof){case Q:if(ie=Pa(D,q,Z.render,ie,Re),Ce!==0){Z=q.treeContext,q.treeContext=gt(Z,1,0);try{ja(D,q,ie)}finally{q.treeContext=Z}}else ja(D,q,ie);return;case ce:Z=Z.type,ie=Pi(Z,ie),kr(D,q,Z,ie,Re);return;case te:if(Re=ie.children,Z=Z._context,ie=ie.value,Ee=Z._currentValue2,Z._currentValue2=ie,Ye=ar,ar=ie={parent:Ye,depth:Ye===null?0:Ye.depth+1,context:Z,parentValue:Ee,value:ie},q.context=ie,ja(D,q,Re),D=ar,D===null)throw Error(t(403));ie=D.parentValue,D.context._currentValue2=ie===tt?D.context._defaultValue:ie,D=ar=D.parent,q.context=D;return;case se:ie=ie.children,ie=ie(Z._currentValue2),ja(D,q,ie);return;case Ve:Re=Z._init,Z=Re(Z._payload),ie=Pi(Z,ie),kr(D,q,Z,ie,void 0);return}throw Error(t(130,Z==null?Z:typeof Z,""))}}function ja(D,q,Z){if(q.node=Z,typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ae:kr(D,q,Z.type,Z.props,Z.ref);return;case W:throw Error(t(257));case Ve:var ie=Z._init;Z=ie(Z._payload),ja(D,q,Z);return}if(I(Z)){As(D,q,Z);return}if(Z===null||typeof Z!="object"?ie=null:(ie=ut&&Z[ut]||Z["@@iterator"],ie=typeof ie=="function"?ie:null),ie&&(ie=ie.call(Z))){if(Z=ie.next(),!Z.done){var Re=[];do Re.push(Z.value),Z=ie.next();while(!Z.done);As(D,q,Re)}return}throw D=Object.prototype.toString.call(Z),Error(t(31,D==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":D))}typeof Z=="string"?(ie=q.blockedSegment,ie.lastPushedText=re(q.blockedSegment.chunks,Z,D.responseState,ie.lastPushedText)):typeof Z=="number"&&(ie=q.blockedSegment,ie.lastPushedText=re(q.blockedSegment.chunks,""+Z,D.responseState,ie.lastPushedText))}function As(D,q,Z){for(var ie=Z.length,Re=0;Re<ie;Re++){var Ee=q.treeContext;q.treeContext=gt(Ee,ie,Re);try{On(D,q,Z[Re])}finally{q.treeContext=Ee}}}function On(D,q,Z){var ie=q.blockedSegment.formatContext,Re=q.legacyContext,Ee=q.context;try{return ja(D,q,Z)}catch(xt){if(Mt(),typeof xt=="object"&&xt!==null&&typeof xt.then=="function"){Z=xt;var Ye=q.blockedSegment,dt=Aa(D,Ye.chunks.length,null,Ye.formatContext,Ye.lastPushedText,!0);Ye.children.push(dt),Ye.lastPushedText=!1,D=xn(D,q.node,q.blockedBoundary,dt,q.abortSet,q.legacyContext,q.context,q.treeContext).ping,Z.then(D,D),q.blockedSegment.formatContext=ie,q.legacyContext=Re,q.context=Ee,Xe(Ee)}else throw q.blockedSegment.formatContext=ie,q.legacyContext=Re,q.context=Ee,Xe(Ee),xt}}function Vn(D){var q=D.blockedBoundary;D=D.blockedSegment,D.status=3,sn(this,q,D)}function yn(D,q,Z){var ie=D.blockedBoundary;D.blockedSegment.status=3,ie===null?(q.allPendingTasks--,q.status!==2&&(q.status=2,q.destination!==null&&q.destination.push(null))):(ie.pendingTasks--,ie.forceClientRender||(ie.forceClientRender=!0,D=Z===void 0?Error(t(432)):Z,ie.errorDigest=q.onError(D),ie.parentFlushed&&q.clientRenderedBoundaries.push(ie)),ie.fallbackAbortableTasks.forEach(function(Re){return yn(Re,q,Z)}),ie.fallbackAbortableTasks.clear(),q.allPendingTasks--,q.allPendingTasks===0&&(ie=q.onAllReady,ie()))}function nn(D,q){if(q.chunks.length===0&&q.children.length===1&&q.children[0].boundary===null){var Z=q.children[0];Z.id=q.id,Z.parentFlushed=!0,Z.status===1&&nn(D,Z)}else D.completedSegments.push(q)}function sn(D,q,Z){if(q===null){if(Z.parentFlushed){if(D.completedRootSegment!==null)throw Error(t(389));D.completedRootSegment=Z}D.pendingRootTasks--,D.pendingRootTasks===0&&(D.onShellError=Cr,q=D.onShellReady,q())}else q.pendingTasks--,q.forceClientRender||(q.pendingTasks===0?(Z.parentFlushed&&Z.status===1&&nn(q,Z),q.parentFlushed&&D.completedBoundaries.push(q),q.fallbackAbortableTasks.forEach(Vn,D),q.fallbackAbortableTasks.clear()):Z.parentFlushed&&Z.status===1&&(nn(q,Z),q.completedSegments.length===1&&q.parentFlushed&&D.partialBoundaries.push(q)));D.allPendingTasks--,D.allPendingTasks===0&&(D=D.onAllReady,D())}function Ea(D){if(D.status!==2){var q=ar,Z=pr.current;pr.current=_t;var ie=ra;ra=D.responseState;try{var Re=D.pingedTasks,Ee;for(Ee=0;Ee<Re.length;Ee++){var Ye=Re[Ee],dt=D,xt=Ye.blockedSegment;if(xt.status===0){Xe(Ye.context);try{ja(dt,Ye,Ye.node),dt.responseState.generateStaticMarkup||xt.lastPushedText&&xt.textEmbedded&&xt.chunks.push("<!-- -->"),Ye.abortSet.delete(Ye),xt.status=1,sn(dt,Ye.blockedBoundary,xt)}catch(g){if(Mt(),typeof g=="object"&&g!==null&&typeof g.then=="function"){var $t=Ye.ping;g.then($t,$t)}else{Ye.abortSet.delete(Ye),xt.status=4;var Ht=Ye.blockedBoundary,br=g,Ka=Va(dt,br);if(Ht===null?Ga(dt,br):(Ht.pendingTasks--,Ht.forceClientRender||(Ht.forceClientRender=!0,Ht.errorDigest=Ka,Ht.parentFlushed&&dt.clientRenderedBoundaries.push(Ht))),dt.allPendingTasks--,dt.allPendingTasks===0){var Fa=dt.onAllReady;Fa()}}}finally{}}}Re.splice(0,Ee),D.destination!==null&&_n(D,D.destination)}catch(g){Va(D,g),Ga(D,g)}finally{ra=ie,pr.current=Z,Z===_t&&Xe(q)}}}function ms(D,q,Z){switch(Z.parentFlushed=!0,Z.status){case 0:var ie=Z.id=D.nextSegmentId++;return Z.lastPushedText=!1,Z.textEmbedded=!1,D=D.responseState,q.push('<template id="'),q.push(D.placeholderPrefix),D=ie.toString(16),q.push(D),q.push('"></template>');case 1:Z.status=2;var Re=!0;ie=Z.chunks;var Ee=0;Z=Z.children;for(var Ye=0;Ye<Z.length;Ye++){for(Re=Z[Ye];Ee<Re.index;Ee++)q.push(ie[Ee]);Re=aa(D,q,Re)}for(;Ee<ie.length-1;Ee++)q.push(ie[Ee]);return Ee<ie.length&&(Re=q.push(ie[Ee])),Re;default:throw Error(t(390))}}function aa(D,q,Z){var ie=Z.boundary;if(ie===null)return ms(D,q,Z);if(ie.parentFlushed=!0,ie.forceClientRender)return D.responseState.generateStaticMarkup||(ie=ie.errorDigest,q.push("<!--$!-->"),q.push("<template"),ie&&(q.push(' data-dgst="'),ie=j(ie),q.push(ie),q.push('"')),q.push("></template>")),ms(D,q,Z),D=D.responseState.generateStaticMarkup?!0:q.push("<!--/$-->"),D;if(0<ie.pendingTasks){ie.rootSegmentID=D.nextSegmentId++,0<ie.completedSegments.length&&D.partialBoundaries.push(ie);var Re=D.responseState,Ee=Re.nextSuspenseID++;return Re=Re.boundaryPrefix+Ee.toString(16),ie=ie.id=Re,me(q,D.responseState,ie),ms(D,q,Z),q.push("<!--/$-->")}if(ie.byteSize>D.progressiveChunkSize)return ie.rootSegmentID=D.nextSegmentId++,D.completedBoundaries.push(ie),me(q,D.responseState,ie.id),ms(D,q,Z),q.push("<!--/$-->");if(D.responseState.generateStaticMarkup||q.push("<!--$-->"),Z=ie.completedSegments,Z.length!==1)throw Error(t(391));return aa(D,q,Z[0]),D=D.responseState.generateStaticMarkup?!0:q.push("<!--/$-->"),D}function Xs(D,q,Z){return K(q,D.responseState,Z.formatContext,Z.id),aa(D,q,Z),oe(q,Z.formatContext)}function Js(D,q,Z){for(var ie=Z.completedSegments,Re=0;Re<ie.length;Re++)Ps(D,q,Z,ie[Re]);if(ie.length=0,D=D.responseState,ie=Z.id,Z=Z.rootSegmentID,q.push(D.startInlineScript),D.sentCompleteBoundaryFunction?q.push('$RC("'):(D.sentCompleteBoundaryFunction=!0,q.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),ie===null)throw Error(t(395));return Z=Z.toString(16),q.push(ie),q.push('","'),q.push(D.segmentPrefix),q.push(Z),q.push('")<\/script>')}function Ps(D,q,Z,ie){if(ie.status===2)return!0;var Re=ie.id;if(Re===-1){if((ie.id=Z.rootSegmentID)===-1)throw Error(t(392));return Xs(D,q,ie)}return Xs(D,q,ie),D=D.responseState,q.push(D.startInlineScript),D.sentCompleteSegmentFunction?q.push('$RS("'):(D.sentCompleteSegmentFunction=!0,q.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),q.push(D.segmentPrefix),Re=Re.toString(16),q.push(Re),q.push('","'),q.push(D.placeholderPrefix),q.push(Re),q.push('")<\/script>')}function _n(D,q){try{var Z=D.completedRootSegment;if(Z!==null&&D.pendingRootTasks===0){aa(D,q,Z),D.completedRootSegment=null;var ie=D.responseState.bootstrapChunks;for(Z=0;Z<ie.length-1;Z++)q.push(ie[Z]);Z<ie.length&&q.push(ie[Z])}var Re=D.clientRenderedBoundaries,Ee;for(Ee=0;Ee<Re.length;Ee++){var Ye=Re[Ee];ie=q;var dt=D.responseState,xt=Ye.id,$t=Ye.errorDigest,Ht=Ye.errorMessage,br=Ye.errorComponentStack;if(ie.push(dt.startInlineScript),dt.sentClientRenderFunction?ie.push('$RX("'):(dt.sentClientRenderFunction=!0,ie.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),xt===null)throw Error(t(395));if(ie.push(xt),ie.push('"'),$t||Ht||br){ie.push(",");var Ka=B($t||"");ie.push(Ka)}if(Ht||br){ie.push(",");var Fa=B(Ht||"");ie.push(Fa)}if(br){ie.push(",");var g=B(br);ie.push(g)}if(!ie.push(")<\/script>")){D.destination=null,Ee++,Re.splice(0,Ee);return}}Re.splice(0,Ee);var ue=D.completedBoundaries;for(Ee=0;Ee<ue.length;Ee++)if(!Js(D,q,ue[Ee])){D.destination=null,Ee++,ue.splice(0,Ee);return}ue.splice(0,Ee);var Te=D.partialBoundaries;for(Ee=0;Ee<Te.length;Ee++){var ve=Te[Ee];e:{Re=D,Ye=q;var le=ve.completedSegments;for(dt=0;dt<le.length;dt++)if(!Ps(Re,Ye,ve,le[dt])){dt++,le.splice(0,dt);var be=!1;break e}le.splice(0,dt),be=!0}if(!be){D.destination=null,Ee++,Te.splice(0,Ee);return}}Te.splice(0,Ee);var _e=D.completedBoundaries;for(Ee=0;Ee<_e.length;Ee++)if(!Js(D,q,_e[Ee])){D.destination=null,Ee++,_e.splice(0,Ee);return}_e.splice(0,Ee)}finally{D.allPendingTasks===0&&D.pingedTasks.length===0&&D.clientRenderedBoundaries.length===0&&D.completedBoundaries.length===0&&q.push(null)}}function hs(D,q){try{var Z=D.abortableTasks;Z.forEach(function(ie){return yn(ie,D,q)}),Z.clear(),D.destination!==null&&_n(D,D.destination)}catch(ie){Va(D,ie),Ga(D,ie)}}function ca(){}function Mn(D,q,Z,ie){var Re=!1,Ee=null,Ye="",dt={push:function($t){return $t!==null&&(Ye+=$t),!0},destroy:function($t){Re=!0,Ee=$t}},xt=!1;if(D=La(D,F(Z,q?q.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ca,void 0,function(){xt=!0}),Ea(D),hs(D,ie),D.status===1)D.status=2,dt.destroy(D.fatalError);else if(D.status!==2&&D.destination===null){D.destination=dt;try{_n(D,dt)}catch($t){Va(D,$t),Ga(D,$t)}}if(Re)throw Ee;if(!xt)throw Error(t(426));return Ye}return Eo.renderToNodeStream=function(){throw Error(t(207))},Eo.renderToStaticMarkup=function(D,q){return Mn(D,q,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Eo.renderToStaticNodeStream=function(){throw Error(t(208))},Eo.renderToString=function(D,q){return Mn(D,q,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Eo.version="18.3.1",Eo}var qm={};var IP;function VX(){if(IP)return qm;IP=1;var e=mu();function t(O){for(var z="https://reactjs.org/docs/error-decoder.html?invariant="+O,J=1;J<arguments.length;J++)z+="&args[]="+encodeURIComponent(arguments[J]);return"Minified React error #"+O+"; visit "+z+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=null,n=0;function s(O,z){if(z.length!==0)if(512<z.length)0<n&&(O.enqueue(new Uint8Array(a.buffer,0,n)),a=new Uint8Array(512),n=0),O.enqueue(z);else{var J=a.length-n;J<z.length&&(J===0?O.enqueue(a):(a.set(z.subarray(0,J),n),O.enqueue(a),z=z.subarray(J)),a=new Uint8Array(512),n=0),a.set(z,n),n+=z.length}}function o(O,z){return s(O,z),!0}function l(O){a&&0<n&&(O.enqueue(new Uint8Array(a.buffer,0,n)),a=null,n=0)}var d=new TextEncoder;function u(O){return d.encode(O)}function m(O){return d.encode(O)}function p(O,z){typeof O.error=="function"?O.error(z):O.close()}var f=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},j={};function v(O){return f.call(j,O)?!0:f.call(w,O)?!1:x.test(O)?j[O]=!0:(w[O]=!0,!1)}function b(O,z,J,ne,Le,Me,Qe){this.acceptsBooleans=z===2||z===3||z===4,this.attributeName=ne,this.attributeNamespace=Le,this.mustUseProperty=J,this.propertyName=O,this.type=z,this.sanitizeURL=Me,this.removeEmptyString=Qe}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(O){I[O]=new b(O,0,!1,O,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(O){var z=O[0];I[z]=new b(z,1,!1,O[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(O){I[O]=new b(O,2,!1,O.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(O){I[O]=new b(O,2,!1,O,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(O){I[O]=new b(O,3,!1,O.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(O){I[O]=new b(O,3,!0,O,null,!1,!1)}),["capture","download"].forEach(function(O){I[O]=new b(O,4,!1,O,null,!1,!1)}),["cols","rows","size","span"].forEach(function(O){I[O]=new b(O,6,!1,O,null,!1,!1)}),["rowSpan","start"].forEach(function(O){I[O]=new b(O,5,!1,O.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function P(O){return O[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(O){var z=O.replace(T,P);I[z]=new b(z,1,!1,O,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(O){var z=O.replace(T,P);I[z]=new b(z,1,!1,O,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(O){var z=O.replace(T,P);I[z]=new b(z,1,!1,O,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(O){I[O]=new b(O,1,!1,O.toLowerCase(),null,!1,!1)}),I.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(O){I[O]=new b(O,1,!1,O.toLowerCase(),null,!0,!0)});var A={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k=["Webkit","ms","Moz","O"];Object.keys(A).forEach(function(O){k.forEach(function(z){z=z+O.charAt(0).toUpperCase()+O.substring(1),A[z]=A[O]})});var E=/["'&<>]/;function _(O){if(typeof O=="boolean"||typeof O=="number")return""+O;O=""+O;var z=E.exec(O);if(z){var J="",ne,Le=0;for(ne=z.index;ne<O.length;ne++){switch(O.charCodeAt(ne)){case 34:z="&quot;";break;case 38:z="&amp;";break;case 39:z="&#x27;";break;case 60:z="&lt;";break;case 62:z="&gt;";break;default:continue}Le!==ne&&(J+=O.substring(Le,ne)),Le=ne+1,J+=z}O=Le!==ne?J+O.substring(Le,ne):J}return O}var R=/([A-Z])/g,$=/^ms-/,H=Array.isArray,L=m("<script>"),Y=m("<\/script>"),X=m('<script src="'),me=m('<script type="module" src="'),K=m('" async=""><\/script>'),oe=/(<\/|<)(s)(cript)/gi;function G(O,z,J,ne){return""+z+(J==="s"?"\\u0073":"\\u0053")+ne}function B(O,z,J,ne,Le){O=O===void 0?"":O,z=z===void 0?L:m('<script nonce="'+_(z)+'">');var Me=[];if(J!==void 0&&Me.push(z,u((""+J).replace(oe,G)),Y),ne!==void 0)for(J=0;J<ne.length;J++)Me.push(X,u(_(ne[J])),K);if(Le!==void 0)for(ne=0;ne<Le.length;ne++)Me.push(me,u(_(Le[ne])),K);return{bootstrapChunks:Me,startInlineScript:z,placeholderPrefix:m(O+"P:"),segmentPrefix:m(O+"S:"),boundaryPrefix:O+"B:",idPrefix:O,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function F(O,z){return{insertionMode:O,selectedValue:z}}function re(O){return F(O==="http://www.w3.org/2000/svg"?2:O==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function U(O,z,J){switch(z){case"select":return F(1,J.value!=null?J.value:J.defaultValue);case"svg":return F(2,null);case"math":return F(3,null);case"foreignObject":return F(1,null);case"table":return F(4,null);case"thead":case"tbody":case"tfoot":return F(5,null);case"colgroup":return F(7,null);case"tr":return F(6,null)}return 4<=O.insertionMode||O.insertionMode===0?F(1,null):O}var ae=m("<!-- -->");function W(O,z,J,ne){return z===""?ne:(ne&&O.push(ae),O.push(u(_(z))),!0)}var fe=new Map,Se=m(' style="'),Ie=m(":"),te=m(";");function se(O,z,J){if(typeof J!="object")throw Error(t(62));z=!0;for(var ne in J)if(f.call(J,ne)){var Le=J[ne];if(Le!=null&&typeof Le!="boolean"&&Le!==""){if(ne.indexOf("--")===0){var Me=u(_(ne));Le=u(_((""+Le).trim()))}else{Me=ne;var Qe=fe.get(Me);Qe!==void 0||(Qe=m(_(Me.replace(R,"-$1").toLowerCase().replace($,"-ms-"))),fe.set(Me,Qe)),Me=Qe,Le=typeof Le=="number"?Le===0||f.call(A,ne)?u(""+Le):u(Le+"px"):u(_((""+Le).trim()))}z?(z=!1,O.push(Se,Me,Ie,Le)):O.push(te,Me,Ie,Le)}}z||O.push(we)}var Q=m(" "),de=m('="'),we=m('"'),ce=m('=""');function Ve(O,z,J,ne){switch(J){case"style":se(O,z,ne);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<J.length)||J[0]!=="o"&&J[0]!=="O"||J[1]!=="n"&&J[1]!=="N"){if(z=I.hasOwnProperty(J)?I[J]:null,z!==null){switch(typeof ne){case"function":case"symbol":return;case"boolean":if(!z.acceptsBooleans)return}switch(J=u(z.attributeName),z.type){case 3:ne&&O.push(Q,J,ce);break;case 4:ne===!0?O.push(Q,J,ce):ne!==!1&&O.push(Q,J,de,u(_(ne)),we);break;case 5:isNaN(ne)||O.push(Q,J,de,u(_(ne)),we);break;case 6:!isNaN(ne)&&1<=ne&&O.push(Q,J,de,u(_(ne)),we);break;default:z.sanitizeURL&&(ne=""+ne),O.push(Q,J,de,u(_(ne)),we)}}else if(v(J)){switch(typeof ne){case"function":case"symbol":return;case"boolean":if(z=J.toLowerCase().slice(0,5),z!=="data-"&&z!=="aria-")return}O.push(Q,u(J),de,u(_(ne)),we)}}}var Be=m(">"),at=m("/>");function pe(O,z,J){if(z!=null){if(J!=null)throw Error(t(60));if(typeof z!="object"||!("__html"in z))throw Error(t(61));z=z.__html,z!=null&&O.push(u(""+z))}}function tt(O){var z="";return e.Children.forEach(O,function(J){J!=null&&(z+=J)}),z}var ut=m(' selected=""');function vt(O,z,J,ne){O.push(jt(J));var Le=J=null,Me;for(Me in z)if(f.call(z,Me)){var Qe=z[Me];if(Qe!=null)switch(Me){case"children":J=Qe;break;case"dangerouslySetInnerHTML":Le=Qe;break;default:Ve(O,ne,Me,Qe)}}return O.push(Be),pe(O,Le,J),typeof J=="string"?(O.push(u(_(J))),null):J}var Nt=m(`
`),tr=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ar=new Map;function jt(O){var z=ar.get(O);if(z===void 0){if(!tr.test(O))throw Error(t(65,O));z=m("<"+O),ar.set(O,z)}return z}var Kt=m("<!DOCTYPE html>");function De(O,z,J,ne,Le){switch(z){case"select":O.push(jt("select"));var Me=null,Qe=null;for(Wt in J)if(f.call(J,Wt)){var ct=J[Wt];if(ct!=null)switch(Wt){case"children":Me=ct;break;case"dangerouslySetInnerHTML":Qe=ct;break;case"defaultValue":case"value":break;default:Ve(O,ne,Wt,ct)}}return O.push(Be),pe(O,Qe,Me),Me;case"option":Qe=Le.selectedValue,O.push(jt("option"));var Ut=ct=null,Jt=null,Wt=null;for(Me in J)if(f.call(J,Me)){var Tr=J[Me];if(Tr!=null)switch(Me){case"children":ct=Tr;break;case"selected":Jt=Tr;break;case"dangerouslySetInnerHTML":Wt=Tr;break;case"value":Ut=Tr;default:Ve(O,ne,Me,Tr)}}if(Qe!=null)if(J=Ut!==null?""+Ut:tt(ct),H(Qe)){for(ne=0;ne<Qe.length;ne++)if(""+Qe[ne]===J){O.push(ut);break}}else""+Qe===J&&O.push(ut);else Jt&&O.push(ut);return O.push(Be),pe(O,Wt,ct),ct;case"textarea":O.push(jt("textarea")),Wt=Qe=Me=null;for(ct in J)if(f.call(J,ct)&&(Ut=J[ct],Ut!=null))switch(ct){case"children":Wt=Ut;break;case"value":Me=Ut;break;case"defaultValue":Qe=Ut;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:Ve(O,ne,ct,Ut)}if(Me===null&&Qe!==null&&(Me=Qe),O.push(Be),Wt!=null){if(Me!=null)throw Error(t(92));if(H(Wt)&&1<Wt.length)throw Error(t(93));Me=""+Wt}return typeof Me=="string"&&Me[0]===`
`&&O.push(Nt),Me!==null&&O.push(u(_(""+Me))),null;case"input":O.push(jt("input")),Ut=Wt=ct=Me=null;for(Qe in J)if(f.call(J,Qe)&&(Jt=J[Qe],Jt!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":Ut=Jt;break;case"defaultValue":ct=Jt;break;case"checked":Wt=Jt;break;case"value":Me=Jt;break;default:Ve(O,ne,Qe,Jt)}return Wt!==null?Ve(O,ne,"checked",Wt):Ut!==null&&Ve(O,ne,"checked",Ut),Me!==null?Ve(O,ne,"value",Me):ct!==null&&Ve(O,ne,"value",ct),O.push(at),null;case"menuitem":O.push(jt("menuitem"));for(var Ya in J)if(f.call(J,Ya)&&(Me=J[Ya],Me!=null))switch(Ya){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:Ve(O,ne,Ya,Me)}return O.push(Be),null;case"title":O.push(jt("title")),Me=null;for(Tr in J)if(f.call(J,Tr)&&(Qe=J[Tr],Qe!=null))switch(Tr){case"children":Me=Qe;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:Ve(O,ne,Tr,Qe)}return O.push(Be),Me;case"listing":case"pre":O.push(jt(z)),Qe=Me=null;for(Ut in J)if(f.call(J,Ut)&&(ct=J[Ut],ct!=null))switch(Ut){case"children":Me=ct;break;case"dangerouslySetInnerHTML":Qe=ct;break;default:Ve(O,ne,Ut,ct)}if(O.push(Be),Qe!=null){if(Me!=null)throw Error(t(60));if(typeof Qe!="object"||!("__html"in Qe))throw Error(t(61));J=Qe.__html,J!=null&&(typeof J=="string"&&0<J.length&&J[0]===`
`?O.push(Nt,u(J)):O.push(u(""+J)))}return typeof Me=="string"&&Me[0]===`
`&&O.push(Nt),Me;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":O.push(jt(z));for(var bn in J)if(f.call(J,bn)&&(Me=J[bn],Me!=null))switch(bn){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,z));default:Ve(O,ne,bn,Me)}return O.push(at),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return vt(O,J,z,ne);case"html":return Le.insertionMode===0&&O.push(Kt),vt(O,J,z,ne);default:if(z.indexOf("-")===-1&&typeof J.is!="string")return vt(O,J,z,ne);O.push(jt(z)),Qe=Me=null;for(Jt in J)if(f.call(J,Jt)&&(ct=J[Jt],ct!=null))switch(Jt){case"children":Me=ct;break;case"dangerouslySetInnerHTML":Qe=ct;break;case"style":se(O,ne,ct);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:v(Jt)&&typeof ct!="function"&&typeof ct!="symbol"&&O.push(Q,u(Jt),de,u(_(ct)),we)}return O.push(Be),pe(O,Qe,Me),Me}}var et=m("</"),Ae=m(">"),Xe=m('<template id="'),ot=m('"></template>'),Ot=m("<!--$-->"),Lt=m('<!--$?--><template id="'),gt=m('"></template>'),nr=m("<!--$!-->"),Rt=m("<!--/$-->"),Pr=m("<template"),N=m('"'),Ne=m(' data-dgst="');m(' data-msg="'),m(' data-stck="');var Br=m("></template>");function Zt(O,z,J){if(s(O,Lt),J===null)throw Error(t(395));return s(O,J),o(O,gt)}var Pe=m('<div hidden id="'),st=m('">'),qe=m("</div>"),lt=m('<svg aria-hidden="true" style="display:none" id="'),ee=m('">'),Ce=m("</svg>"),Fe=m('<math aria-hidden="true" style="display:none" id="'),ke=m('">'),Ue=m("</math>"),We=m('<table hidden id="'),ft=m('">'),Mt=m("</table>"),rr=m('<table hidden><tbody id="'),Vr=m('">'),Gr=m("</tbody></table>"),Yt=m('<table hidden><tr id="'),Ur=m('">'),ur=m("</tr></table>"),_t=m('<table hidden><colgroup id="'),ra=m('">'),pr=m("</colgroup></table>");function Or(O,z,J,ne){switch(J.insertionMode){case 0:case 1:return s(O,Pe),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,st);case 2:return s(O,lt),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,ee);case 3:return s(O,Fe),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,ke);case 4:return s(O,We),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,ft);case 5:return s(O,rr),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,Vr);case 6:return s(O,Yt),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,Ur);case 7:return s(O,_t),s(O,z.segmentPrefix),s(O,u(ne.toString(16))),o(O,ra);default:throw Error(t(397))}}function Cr(O,z){switch(z.insertionMode){case 0:case 1:return o(O,qe);case 2:return o(O,Ce);case 3:return o(O,Ue);case 4:return o(O,Mt);case 5:return o(O,Gr);case 6:return o(O,ur);case 7:return o(O,pr);default:throw Error(t(397))}}var La=m('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),xn=m('$RS("'),Aa=m('","'),Va=m('")<\/script>'),Ga=m('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Pa=m('$RC("'),Is=m('","'),Pi=m('")<\/script>'),kr=m('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),ja=m('$RX("'),As=m('"'),On=m(")<\/script>"),Vn=m(","),yn=/[<\u2028\u2029]/g;function nn(O){return JSON.stringify(O).replace(yn,function(z){switch(z){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var sn=Object.assign,Ea=Symbol.for("react.element"),ms=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),Xs=Symbol.for("react.strict_mode"),Js=Symbol.for("react.profiler"),Ps=Symbol.for("react.provider"),_n=Symbol.for("react.context"),hs=Symbol.for("react.forward_ref"),ca=Symbol.for("react.suspense"),Mn=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Z=Symbol.for("react.scope"),ie=Symbol.for("react.debug_trace_mode"),Re=Symbol.for("react.legacy_hidden"),Ee=Symbol.for("react.default_value"),Ye=Symbol.iterator;function dt(O){if(O==null)return null;if(typeof O=="function")return O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case aa:return"Fragment";case ms:return"Portal";case Js:return"Profiler";case Xs:return"StrictMode";case ca:return"Suspense";case Mn:return"SuspenseList"}if(typeof O=="object")switch(O.$$typeof){case _n:return(O.displayName||"Context")+".Consumer";case Ps:return(O._context.displayName||"Context")+".Provider";case hs:var z=O.render;return O=O.displayName,O||(O=z.displayName||z.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case D:return z=O.displayName||null,z!==null?z:dt(O.type)||"Memo";case q:z=O._payload,O=O._init;try{return dt(O(z))}catch{}}return null}var xt={};function $t(O,z){if(O=O.contextTypes,!O)return xt;var J={},ne;for(ne in O)J[ne]=z[ne];return J}var Ht=null;function br(O,z){if(O!==z){O.context._currentValue=O.parentValue,O=O.parent;var J=z.parent;if(O===null){if(J!==null)throw Error(t(401))}else{if(J===null)throw Error(t(401));br(O,J)}z.context._currentValue=z.value}}function Ka(O){O.context._currentValue=O.parentValue,O=O.parent,O!==null&&Ka(O)}function Fa(O){var z=O.parent;z!==null&&Fa(z),O.context._currentValue=O.value}function g(O,z){if(O.context._currentValue=O.parentValue,O=O.parent,O===null)throw Error(t(402));O.depth===z.depth?br(O,z):g(O,z)}function ue(O,z){var J=z.parent;if(J===null)throw Error(t(402));O.depth===J.depth?br(O,J):ue(O,J),z.context._currentValue=z.value}function Te(O){var z=Ht;z!==O&&(z===null?Fa(O):O===null?Ka(z):z.depth===O.depth?br(z,O):z.depth>O.depth?g(z,O):ue(z,O),Ht=O)}var ve={isMounted:function(){return!1},enqueueSetState:function(O,z){O=O._reactInternals,O.queue!==null&&O.queue.push(z)},enqueueReplaceState:function(O,z){O=O._reactInternals,O.replace=!0,O.queue=[z]},enqueueForceUpdate:function(){}};function le(O,z,J,ne){var Le=O.state!==void 0?O.state:null;O.updater=ve,O.props=J,O.state=Le;var Me={queue:[],replace:!1};O._reactInternals=Me;var Qe=z.contextType;if(O.context=typeof Qe=="object"&&Qe!==null?Qe._currentValue:ne,Qe=z.getDerivedStateFromProps,typeof Qe=="function"&&(Qe=Qe(J,Le),Le=Qe==null?Le:sn({},Le,Qe),O.state=Le),typeof z.getDerivedStateFromProps!="function"&&typeof O.getSnapshotBeforeUpdate!="function"&&(typeof O.UNSAFE_componentWillMount=="function"||typeof O.componentWillMount=="function"))if(z=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),z!==O.state&&ve.enqueueReplaceState(O,O.state,null),Me.queue!==null&&0<Me.queue.length)if(z=Me.queue,Qe=Me.replace,Me.queue=null,Me.replace=!1,Qe&&z.length===1)O.state=z[0];else{for(Me=Qe?z[0]:O.state,Le=!0,Qe=Qe?1:0;Qe<z.length;Qe++){var ct=z[Qe];ct=typeof ct=="function"?ct.call(O,Me,J,ne):ct,ct!=null&&(Le?(Le=!1,Me=sn({},Me,ct)):sn(Me,ct))}O.state=Me}else Me.queue=null}var be={id:1,overflow:""};function _e(O,z,J){var ne=O.id;O=O.overflow;var Le=32-Ze(ne)-1;ne&=~(1<<Le),J+=1;var Me=32-Ze(z)+Le;if(30<Me){var Qe=Le-Le%5;return Me=(ne&(1<<Qe)-1).toString(32),ne>>=Qe,Le-=Qe,{id:1<<32-Ze(z)+Le|J<<Le|ne,overflow:Me+O}}return{id:1<<Me|J<<Le|ne,overflow:O}}var Ze=Math.clz32?Math.clz32:Xt,Ge=Math.log,Ke=Math.LN2;function Xt(O){return O>>>=0,O===0?32:31-(Ge(O)/Ke|0)|0}function Et(O,z){return O===z&&(O!==0||1/O===1/z)||O!==O&&z!==z}var na=typeof Object.is=="function"?Object.is:Et,It=null,_r=null,mr=null,Tt=null,hr=!1,Kr=!1,Qt=0,ir=null,da=0;function Jr(){if(It===null)throw Error(t(321));return It}function Zr(){if(0<da)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Mr(){return Tt===null?mr===null?(hr=!1,mr=Tt=Zr()):(hr=!0,Tt=mr):Tt.next===null?(hr=!1,Tt=Tt.next=Zr()):(hr=!0,Tt=Tt.next),Tt}function pa(){_r=It=null,Kr=!1,mr=null,da=0,Tt=ir=null}function ua(O,z){return typeof z=="function"?z(O):z}function ga(O,z,J){if(It=Jr(),Tt=Mr(),hr){var ne=Tt.queue;if(z=ne.dispatch,ir!==null&&(J=ir.get(ne),J!==void 0)){ir.delete(ne),ne=Tt.memoizedState;do ne=O(ne,J.action),J=J.next;while(J!==null);return Tt.memoizedState=ne,[ne,z]}return[Tt.memoizedState,z]}return O=O===ua?typeof z=="function"?z():z:J!==void 0?J(z):z,Tt.memoizedState=O,O=Tt.queue={last:null,dispatch:null},O=O.dispatch=gr.bind(null,It,O),[Tt.memoizedState,O]}function vr(O,z){if(It=Jr(),Tt=Mr(),z=z===void 0?null:z,Tt!==null){var J=Tt.memoizedState;if(J!==null&&z!==null){var ne=J[1];e:if(ne===null)ne=!1;else{for(var Le=0;Le<ne.length&&Le<z.length;Le++)if(!na(z[Le],ne[Le])){ne=!1;break e}ne=!0}if(ne)return J[0]}}return O=O(),Tt.memoizedState=[O,z],O}function gr(O,z,J){if(25<=da)throw Error(t(301));if(O===It)if(Kr=!0,O={action:J,next:null},ir===null&&(ir=new Map),J=ir.get(z),J===void 0)ir.set(z,O);else{for(z=J;z.next!==null;)z=z.next;z.next=O}}function on(){throw Error(t(394))}function Rn(){}var xa={readContext:function(O){return O._currentValue},useContext:function(O){return Jr(),O._currentValue},useMemo:vr,useReducer:ga,useRef:function(O){It=Jr(),Tt=Mr();var z=Tt.memoizedState;return z===null?(O={current:O},Tt.memoizedState=O):z},useState:function(O){return ga(ua,O)},useInsertionEffect:Rn,useLayoutEffect:function(){},useCallback:function(O,z){return vr(function(){return O},z)},useImperativeHandle:Rn,useEffect:Rn,useDebugValue:Rn,useDeferredValue:function(O){return Jr(),O},useTransition:function(){return Jr(),[!1,on]},useId:function(){var O=_r.treeContext,z=O.overflow;O=O.id,O=(O&~(1<<32-Ze(O)-1)).toString(32)+z;var J=zr;if(J===null)throw Error(t(404));return z=Qt++,O=":"+J.idPrefix+"R"+O,0<z&&(O+="H"+z.toString(32)),O+":"},useMutableSource:function(O,z){return Jr(),z(O._source)},useSyncExternalStore:function(O,z,J){if(J===void 0)throw Error(t(407));return J()}},zr=null,Ba=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ei(O){return console.error(O),null}function Zs(){}function mo(O,z,J,ne,Le,Me,Qe,ct,Ut){var Jt=[],Wt=new Set;return z={destination:null,responseState:z,progressiveChunkSize:ne===void 0?12800:ne,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Wt,pingedTasks:Jt,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Le===void 0?Ei:Le,onAllReady:Me===void 0?Zs:Me,onShellReady:Qe===void 0?Zs:Qe,onShellError:ct===void 0?Zs:ct,onFatalError:Ut===void 0?Zs:Ut},J=Ti(z,0,null,J,!1,!1),J.parentFlushed=!0,O=Cc(z,O,null,J,Wt,xt,null,be),Jt.push(O),z}function Cc(O,z,J,ne,Le,Me,Qe,ct){O.allPendingTasks++,J===null?O.pendingRootTasks++:J.pendingTasks++;var Ut={node:z,ping:function(){var Jt=O.pingedTasks;Jt.push(Ut),Jt.length===1&&Pc(O)},blockedBoundary:J,blockedSegment:ne,abortSet:Le,legacyContext:Me,context:Qe,treeContext:ct};return Le.add(Ut),Ut}function Ti(O,z,J,ne,Le,Me){return{status:0,id:-1,index:z,parentFlushed:!1,chunks:[],children:[],formatContext:ne,boundary:J,lastPushedText:Le,textEmbedded:Me}}function Qs(O,z){if(O=O.onError(z),O!=null&&typeof O!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof O+'" instead');return O}function Es(O,z){var J=O.onShellError;J(z),J=O.onFatalError,J(z),O.destination!==null?(O.status=2,p(O.destination,z)):(O.status=1,O.fatalError=z)}function ho(O,z,J,ne,Le){for(It={},_r=z,Qt=0,O=J(ne,Le);Kr;)Kr=!1,Qt=0,da+=1,Tt=null,O=J(ne,Le);return pa(),O}function kc(O,z,J,ne){var Le=J.render(),Me=ne.childContextTypes;if(Me!=null){var Qe=z.legacyContext;if(typeof J.getChildContext!="function")ne=Qe;else{J=J.getChildContext();for(var ct in J)if(!(ct in Me))throw Error(t(108,dt(ne)||"Unknown",ct));ne=sn({},Qe,J)}z.legacyContext=ne,ln(O,z,Le),z.legacyContext=Qe}else ln(O,z,Le)}function ku(O,z){if(O&&O.defaultProps){z=sn({},z),O=O.defaultProps;for(var J in O)z[J]===void 0&&(z[J]=O[J]);return z}return z}function Ic(O,z,J,ne,Le){if(typeof J=="function")if(J.prototype&&J.prototype.isReactComponent){Le=$t(J,z.legacyContext);var Me=J.contextType;Me=new J(ne,typeof Me=="object"&&Me!==null?Me._currentValue:Le),le(Me,J,ne,Le),kc(O,z,Me,J)}else{Me=$t(J,z.legacyContext),Le=ho(O,z,J,ne,Me);var Qe=Qt!==0;if(typeof Le=="object"&&Le!==null&&typeof Le.render=="function"&&Le.$$typeof===void 0)le(Le,J,ne,Me),kc(O,z,Le,J);else if(Qe){ne=z.treeContext,z.treeContext=_e(ne,1,0);try{ln(O,z,Le)}finally{z.treeContext=ne}}else ln(O,z,Le)}else if(typeof J=="string"){switch(Le=z.blockedSegment,Me=De(Le.chunks,J,ne,O.responseState,Le.formatContext),Le.lastPushedText=!1,Qe=Le.formatContext,Le.formatContext=U(Qe,J,ne),Ac(O,z,Me),Le.formatContext=Qe,J){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Le.chunks.push(et,u(J),Ae)}Le.lastPushedText=!1}else{switch(J){case Re:case ie:case Xs:case Js:case aa:ln(O,z,ne.children);return;case Mn:ln(O,z,ne.children);return;case Z:throw Error(t(343));case ca:e:{J=z.blockedBoundary,Le=z.blockedSegment,Me=ne.fallback,ne=ne.children,Qe=new Set;var ct={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Qe,errorDigest:null},Ut=Ti(O,Le.chunks.length,ct,Le.formatContext,!1,!1);Le.children.push(Ut),Le.lastPushedText=!1;var Jt=Ti(O,0,null,Le.formatContext,!1,!1);Jt.parentFlushed=!0,z.blockedBoundary=ct,z.blockedSegment=Jt;try{if(Ac(O,z,ne),Jt.lastPushedText&&Jt.textEmbedded&&Jt.chunks.push(ae),Jt.status=1,nl(ct,Jt),ct.pendingTasks===0)break e}catch(Wt){Jt.status=4,ct.forceClientRender=!0,ct.errorDigest=Qs(O,Wt)}finally{z.blockedBoundary=J,z.blockedSegment=Le}z=Cc(O,Me,J,Ut,Qe,z.legacyContext,z.context,z.treeContext),O.pingedTasks.push(z)}return}if(typeof J=="object"&&J!==null)switch(J.$$typeof){case hs:if(ne=ho(O,z,J.render,ne,Le),Qt!==0){J=z.treeContext,z.treeContext=_e(J,1,0);try{ln(O,z,ne)}finally{z.treeContext=J}}else ln(O,z,ne);return;case D:J=J.type,ne=ku(J,ne),Ic(O,z,J,ne,Le);return;case Ps:if(Le=ne.children,J=J._context,ne=ne.value,Me=J._currentValue,J._currentValue=ne,Qe=Ht,Ht=ne={parent:Qe,depth:Qe===null?0:Qe.depth+1,context:J,parentValue:Me,value:ne},z.context=ne,ln(O,z,Le),O=Ht,O===null)throw Error(t(403));ne=O.parentValue,O.context._currentValue=ne===Ee?O.context._defaultValue:ne,O=Ht=O.parent,z.context=O;return;case _n:ne=ne.children,ne=ne(J._currentValue),ln(O,z,ne);return;case q:Le=J._init,J=Le(J._payload),ne=ku(J,ne),Ic(O,z,J,ne,void 0);return}throw Error(t(130,J==null?J:typeof J,""))}}function ln(O,z,J){if(z.node=J,typeof J=="object"&&J!==null){switch(J.$$typeof){case Ea:Ic(O,z,J.type,J.props,J.ref);return;case ms:throw Error(t(257));case q:var ne=J._init;J=ne(J._payload),ln(O,z,J);return}if(H(J)){al(O,z,J);return}if(J===null||typeof J!="object"?ne=null:(ne=Ye&&J[Ye]||J["@@iterator"],ne=typeof ne=="function"?ne:null),ne&&(ne=ne.call(J))){if(J=ne.next(),!J.done){var Le=[];do Le.push(J.value),J=ne.next();while(!J.done);al(O,z,Le)}return}throw O=Object.prototype.toString.call(J),Error(t(31,O==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":O))}typeof J=="string"?(ne=z.blockedSegment,ne.lastPushedText=W(z.blockedSegment.chunks,J,O.responseState,ne.lastPushedText)):typeof J=="number"&&(ne=z.blockedSegment,ne.lastPushedText=W(z.blockedSegment.chunks,""+J,O.responseState,ne.lastPushedText))}function al(O,z,J){for(var ne=J.length,Le=0;Le<ne;Le++){var Me=z.treeContext;z.treeContext=_e(Me,ne,Le);try{Ac(O,z,J[Le])}finally{z.treeContext=Me}}}function Ac(O,z,J){var ne=z.blockedSegment.formatContext,Le=z.legacyContext,Me=z.context;try{return ln(O,z,J)}catch(Ut){if(pa(),typeof Ut=="object"&&Ut!==null&&typeof Ut.then=="function"){J=Ut;var Qe=z.blockedSegment,ct=Ti(O,Qe.chunks.length,null,Qe.formatContext,Qe.lastPushedText,!0);Qe.children.push(ct),Qe.lastPushedText=!1,O=Cc(O,z.node,z.blockedBoundary,ct,z.abortSet,z.legacyContext,z.context,z.treeContext).ping,J.then(O,O),z.blockedSegment.formatContext=ne,z.legacyContext=Le,z.context=Me,Te(Me)}else throw z.blockedSegment.formatContext=ne,z.legacyContext=Le,z.context=Me,Te(Me),Ut}}function Xf(O){var z=O.blockedBoundary;O=O.blockedSegment,O.status=3,Au(this,z,O)}function Iu(O,z,J){var ne=O.blockedBoundary;O.blockedSegment.status=3,ne===null?(z.allPendingTasks--,z.status!==2&&(z.status=2,z.destination!==null&&z.destination.close())):(ne.pendingTasks--,ne.forceClientRender||(ne.forceClientRender=!0,O=J===void 0?Error(t(432)):J,ne.errorDigest=z.onError(O),ne.parentFlushed&&z.clientRenderedBoundaries.push(ne)),ne.fallbackAbortableTasks.forEach(function(Le){return Iu(Le,z,J)}),ne.fallbackAbortableTasks.clear(),z.allPendingTasks--,z.allPendingTasks===0&&(ne=z.onAllReady,ne()))}function nl(O,z){if(z.chunks.length===0&&z.children.length===1&&z.children[0].boundary===null){var J=z.children[0];J.id=z.id,J.parentFlushed=!0,J.status===1&&nl(O,J)}else O.completedSegments.push(z)}function Au(O,z,J){if(z===null){if(J.parentFlushed){if(O.completedRootSegment!==null)throw Error(t(389));O.completedRootSegment=J}O.pendingRootTasks--,O.pendingRootTasks===0&&(O.onShellError=Zs,z=O.onShellReady,z())}else z.pendingTasks--,z.forceClientRender||(z.pendingTasks===0?(J.parentFlushed&&J.status===1&&nl(z,J),z.parentFlushed&&O.completedBoundaries.push(z),z.fallbackAbortableTasks.forEach(Xf,O),z.fallbackAbortableTasks.clear()):J.parentFlushed&&J.status===1&&(nl(z,J),z.completedSegments.length===1&&z.parentFlushed&&O.partialBoundaries.push(z)));O.allPendingTasks--,O.allPendingTasks===0&&(O=O.onAllReady,O())}function Pc(O){if(O.status!==2){var z=Ht,J=Ba.current;Ba.current=xa;var ne=zr;zr=O.responseState;try{var Le=O.pingedTasks,Me;for(Me=0;Me<Le.length;Me++){var Qe=Le[Me],ct=O,Ut=Qe.blockedSegment;if(Ut.status===0){Te(Qe.context);try{ln(ct,Qe,Qe.node),Ut.lastPushedText&&Ut.textEmbedded&&Ut.chunks.push(ae),Qe.abortSet.delete(Qe),Ut.status=1,Au(ct,Qe.blockedBoundary,Ut)}catch(vn){if(pa(),typeof vn=="object"&&vn!==null&&typeof vn.then=="function"){var Jt=Qe.ping;vn.then(Jt,Jt)}else{Qe.abortSet.delete(Qe),Ut.status=4;var Wt=Qe.blockedBoundary,Tr=vn,Ya=Qs(ct,Tr);if(Wt===null?Es(ct,Tr):(Wt.pendingTasks--,Wt.forceClientRender||(Wt.forceClientRender=!0,Wt.errorDigest=Ya,Wt.parentFlushed&&ct.clientRenderedBoundaries.push(Wt))),ct.allPendingTasks--,ct.allPendingTasks===0){var bn=ct.onAllReady;bn()}}}finally{}}}Le.splice(0,Me),O.destination!==null&&Ec(O,O.destination)}catch(vn){Qs(O,vn),Es(O,vn)}finally{zr=ne,Ba.current=J,J===xa&&Te(z)}}}function sl(O,z,J){switch(J.parentFlushed=!0,J.status){case 0:var ne=J.id=O.nextSegmentId++;return J.lastPushedText=!1,J.textEmbedded=!1,O=O.responseState,s(z,Xe),s(z,O.placeholderPrefix),O=u(ne.toString(16)),s(z,O),o(z,ot);case 1:J.status=2;var Le=!0;ne=J.chunks;var Me=0;J=J.children;for(var Qe=0;Qe<J.length;Qe++){for(Le=J[Qe];Me<Le.index;Me++)s(z,ne[Me]);Le=il(O,z,Le)}for(;Me<ne.length-1;Me++)s(z,ne[Me]);return Me<ne.length&&(Le=o(z,ne[Me])),Le;default:throw Error(t(390))}}function il(O,z,J){var ne=J.boundary;if(ne===null)return sl(O,z,J);if(ne.parentFlushed=!0,ne.forceClientRender)ne=ne.errorDigest,o(z,nr),s(z,Pr),ne&&(s(z,Ne),s(z,u(_(ne))),s(z,N)),o(z,Br),sl(O,z,J);else if(0<ne.pendingTasks){ne.rootSegmentID=O.nextSegmentId++,0<ne.completedSegments.length&&O.partialBoundaries.push(ne);var Le=O.responseState,Me=Le.nextSuspenseID++;Le=m(Le.boundaryPrefix+Me.toString(16)),ne=ne.id=Le,Zt(z,O.responseState,ne),sl(O,z,J)}else if(ne.byteSize>O.progressiveChunkSize)ne.rootSegmentID=O.nextSegmentId++,O.completedBoundaries.push(ne),Zt(z,O.responseState,ne.id),sl(O,z,J);else{if(o(z,Ot),J=ne.completedSegments,J.length!==1)throw Error(t(391));il(O,z,J[0])}return o(z,Rt)}function Pu(O,z,J){return Or(z,O.responseState,J.formatContext,J.id),il(O,z,J),Cr(z,J.formatContext)}function Eu(O,z,J){for(var ne=J.completedSegments,Le=0;Le<ne.length;Le++)ol(O,z,J,ne[Le]);if(ne.length=0,O=O.responseState,ne=J.id,J=J.rootSegmentID,s(z,O.startInlineScript),O.sentCompleteBoundaryFunction?s(z,Pa):(O.sentCompleteBoundaryFunction=!0,s(z,Ga)),ne===null)throw Error(t(395));return J=u(J.toString(16)),s(z,ne),s(z,Is),s(z,O.segmentPrefix),s(z,J),o(z,Pi)}function ol(O,z,J,ne){if(ne.status===2)return!0;var Le=ne.id;if(Le===-1){if((ne.id=J.rootSegmentID)===-1)throw Error(t(392));return Pu(O,z,ne)}return Pu(O,z,ne),O=O.responseState,s(z,O.startInlineScript),O.sentCompleteSegmentFunction?s(z,xn):(O.sentCompleteSegmentFunction=!0,s(z,La)),s(z,O.segmentPrefix),Le=u(Le.toString(16)),s(z,Le),s(z,Aa),s(z,O.placeholderPrefix),s(z,Le),o(z,Va)}function Ec(O,z){a=new Uint8Array(512),n=0;try{var J=O.completedRootSegment;if(J!==null&&O.pendingRootTasks===0){il(O,z,J),O.completedRootSegment=null;var ne=O.responseState.bootstrapChunks;for(J=0;J<ne.length-1;J++)s(z,ne[J]);J<ne.length&&o(z,ne[J])}var Le=O.clientRenderedBoundaries,Me;for(Me=0;Me<Le.length;Me++){var Qe=Le[Me];ne=z;var ct=O.responseState,Ut=Qe.id,Jt=Qe.errorDigest,Wt=Qe.errorMessage,Tr=Qe.errorComponentStack;if(s(ne,ct.startInlineScript),ct.sentClientRenderFunction?s(ne,ja):(ct.sentClientRenderFunction=!0,s(ne,kr)),Ut===null)throw Error(t(395));s(ne,Ut),s(ne,As),(Jt||Wt||Tr)&&(s(ne,Vn),s(ne,u(nn(Jt||"")))),(Wt||Tr)&&(s(ne,Vn),s(ne,u(nn(Wt||"")))),Tr&&(s(ne,Vn),s(ne,u(nn(Tr)))),o(ne,On)}Le.splice(0,Me);var Ya=O.completedBoundaries;for(Me=0;Me<Ya.length;Me++)Eu(O,z,Ya[Me]);Ya.splice(0,Me),l(z),a=new Uint8Array(512),n=0;var bn=O.partialBoundaries;for(Me=0;Me<bn.length;Me++){var vn=bn[Me];e:{Le=O,Qe=z;var fo=vn.completedSegments;for(ct=0;ct<fo.length;ct++)if(!ol(Le,Qe,vn,fo[ct])){ct++,fo.splice(0,ct);var Tc=!1;break e}fo.splice(0,ct),Tc=!0}if(!Tc){O.destination=null,Me++,bn.splice(0,Me);return}}bn.splice(0,Me);var Ts=O.completedBoundaries;for(Me=0;Me<Ts.length;Me++)Eu(O,z,Ts[Me]);Ts.splice(0,Me)}finally{l(z),O.allPendingTasks===0&&O.pingedTasks.length===0&&O.clientRenderedBoundaries.length===0&&O.completedBoundaries.length===0&&z.close()}}function Tu(O,z){try{var J=O.abortableTasks;J.forEach(function(ne){return Iu(ne,O,z)}),J.clear(),O.destination!==null&&Ec(O,O.destination)}catch(ne){Qs(O,ne),Es(O,ne)}}return qm.renderToReadableStream=function(O,z){return new Promise(function(J,ne){var Le,Me,Qe=new Promise(function(Wt,Tr){Me=Wt,Le=Tr}),ct=mo(O,B(z?z.identifierPrefix:void 0,z?z.nonce:void 0,z?z.bootstrapScriptContent:void 0,z?z.bootstrapScripts:void 0,z?z.bootstrapModules:void 0),re(z?z.namespaceURI:void 0),z?z.progressiveChunkSize:void 0,z?z.onError:void 0,Me,function(){var Wt=new ReadableStream({type:"bytes",pull:function(Tr){if(ct.status===1)ct.status=2,p(Tr,ct.fatalError);else if(ct.status!==2&&ct.destination===null){ct.destination=Tr;try{Ec(ct,Tr)}catch(Ya){Qs(ct,Ya),Es(ct,Ya)}}},cancel:function(){Tu(ct)}},{highWaterMark:0});Wt.allReady=Qe,J(Wt)},function(Wt){Qe.catch(function(){}),ne(Wt)},Le);if(z&&z.signal){var Ut=z.signal,Jt=function(){Tu(ct,Ut.reason),Ut.removeEventListener("abort",Jt)};Ut.addEventListener("abort",Jt)}Pc(ct)})},qm.version="18.3.1",qm}var AP;function GX(){if(AP)return Vi;AP=1;var e,t;return e=WX(),t=VX(),Vi.version=e.version,Vi.renderToString=e.renderToString,Vi.renderToStaticMarkup=e.renderToStaticMarkup,Vi.renderToNodeStream=e.renderToNodeStream,Vi.renderToStaticNodeStream=e.renderToStaticNodeStream,Vi.renderToReadableStream=t.renderToReadableStream,Vi}var Jm=GX();const v1=({settings:e,student:t,subjects:a,testName:n,enableRoomNumbers:s=!1,instructions:o=[],mode:l="preview",className:d=""})=>{const u=(p,f,x)=>{if(!p||!f||!x)return"Time not set";try{return`${p==="00"?"12":p}:${f} ${x}`}catch(w){return console.error("Error formatting 12-hour time:",w),"Time error"}},m=l==="print"?{fontFamily:"Arial, sans-serif",aspectRatio:"210/297",minHeight:"297mm",width:"210mm",padding:"20mm",boxSizing:"border-box",background:"white",display:"flex",flexDirection:"column",position:"relative",pageBreakAfter:"always",marginBottom:"20px"}:{};return r.jsxs("div",{className:`hall-ticket ${d} ${l==="print"?"":"w-full max-w-4xl mx-auto bg-white shadow-lg flex flex-col"}`,style:l==="print"?m:{fontFamily:"Arial, sans-serif",aspectRatio:"210/297",minHeight:"297mm",width:"210mm",padding:"20mm",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[r.jsx("div",{className:l==="print"?"":"flex justify-between items-start mb-4 pb-4 border-b-2 border-gray-300",style:l==="print"?{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px",paddingBottom:"16px",borderBottom:"2px solid #d1d5db"}:{},children:r.jsxs("div",{className:l==="print"?"":"flex items-center space-x-4",style:l==="print"?{display:"flex",alignItems:"center",gap:"16px"}:{},children:[e.logoUrl?r.jsx("img",{src:e.logoUrl,alt:"Logo",className:l==="print"?"":"w-16 h-16 object-contain",style:l==="print"?{width:"64px",height:"64px",objectFit:"contain"}:{}}):r.jsx("div",{className:l==="print"?"":"w-16 h-16 bg-gray-800 rounded-lg flex items-center justify-center",style:l==="print"?{width:"64px",height:"64px",backgroundColor:"#1f2937",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"}:{},children:r.jsx("div",{className:l==="print"?"":"w-10 h-10 border-2 border-white rounded transform rotate-45",style:l==="print"?{width:"40px",height:"40px",border:"2px solid white",borderRadius:"4px",transform:"rotate(45deg)"}:{}})}),r.jsxs("div",{children:[r.jsx("h1",{className:l==="print"?"":"text-2xl font-bold text-gray-800",style:l==="print"?{fontSize:"24px",fontWeight:"bold",color:"#1f2937",margin:0}:{},children:e.schoolName}),r.jsxs("p",{className:l==="print"?"":"text-sm text-gray-600",style:l==="print"?{fontSize:"14px",color:"#4b5563",margin:"4px 0"}:{},children:["School Code: ",e.schoolCode]}),r.jsx("p",{className:l==="print"?"":"text-sm text-gray-600",style:l==="print"?{fontSize:"14px",color:"#4b5563",margin:"4px 0"}:{},children:e.address})]})]})}),r.jsxs("div",{className:l==="print"?"":"text-center mb-4",style:l==="print"?{textAlign:"center",marginBottom:"16px"}:{},children:[r.jsx("h2",{className:l==="print"?"":"text-3xl font-bold text-gray-800",style:l==="print"?{fontSize:"28px",fontWeight:"bold",color:"#1f2937",margin:0}:{},children:"ADMIT CARD"}),r.jsx("p",{className:l==="print"?"":"text-lg font-semibold text-gray-700 mt-2",style:l==="print"?{fontSize:"16px",fontWeight:"600",color:"#374151",marginTop:"8px",margin:"8px 0 0 0"}:{},children:n})]}),r.jsxs("div",{className:l==="print"?"":"grid grid-cols-2 gap-6 mb-4 p-3 bg-gray-50 rounded-lg border",style:l==="print"?{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"24px",marginBottom:"16px",padding:"12px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px"}:{},children:[r.jsxs("div",{children:[r.jsx("h3",{className:l==="print"?"":"text-base font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-300",style:l==="print"?{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid #d1d5db"}:{},children:"Student Details"}),r.jsxs("div",{className:l==="print"?"":"space-y-2",style:l==="print"?{display:"flex",flexDirection:"column",gap:"8px"}:{},children:[r.jsxs("div",{style:l==="print"?{display:"flex",alignItems:"center",gap:"8px"}:{},children:[r.jsx("span",{style:l==="print"?{fontSize:"12px",fontWeight:"600",color:"#374151",minWidth:"80px"}:{},children:"Name:"}),r.jsx("span",{style:l==="print"?{fontSize:"12px",color:"#1f2937"}:{},children:t.name})]}),r.jsxs("div",{style:l==="print"?{display:"flex",alignItems:"center",gap:"8px"}:{},children:[r.jsx("span",{style:l==="print"?{fontSize:"12px",fontWeight:"600",color:"#374151",minWidth:"80px"}:{},children:"Class:"}),r.jsxs("span",{style:l==="print"?{fontSize:"12px",color:"#1f2937"}:{},children:[t.className," - Section ",t.section]})]}),r.jsxs("div",{style:l==="print"?{display:"flex",alignItems:"center",gap:"8px"}:{},children:[r.jsx("span",{style:l==="print"?{fontSize:"12px",fontWeight:"600",color:"#374151",minWidth:"80px"}:{},children:"Student ID:"}),r.jsx("span",{style:l==="print"?{fontSize:"12px",color:"#1f2937"}:{},children:t.sequenceId})]})]})]}),r.jsxs("div",{className:l==="print"?"":"flex flex-col items-center",style:l==="print"?{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}:{},children:[r.jsx("h3",{className:l==="print"?"":"text-base font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-300",style:l==="print"?{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid #d1d5db",width:"100%",textAlign:"center"}:{},children:"Student Photo"}),r.jsx("div",{className:l==="print"?"":"w-28 h-32 border-2 border-gray-400 rounded-lg flex items-center justify-center bg-white shadow-sm",style:l==="print"?{width:"112px",height:"128px",border:"2px solid #9ca3af",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"white",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"}:{},children:t.profileImage?r.jsx("img",{src:t.profileImage,alt:"Student Photo",className:l==="print"?"":"w-full h-full object-cover rounded-lg",style:l==="print"?{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"}:{}}):r.jsx("span",{className:l==="print"?"":"text-xs text-gray-500 text-center px-2",style:l==="print"?{fontSize:"10px",color:"#6b7280",textAlign:"center",padding:"0 8px"}:{},children:"Student Photo"})})]})]}),r.jsxs("div",{className:l==="print"?"":"mb-4",style:l==="print"?{marginBottom:"16px"}:{},children:[r.jsx("h3",{className:l==="print"?"":"text-base font-semibold text-gray-800 mb-3 pb-2 border-b-2 border-blue-200",style:l==="print"?{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"12px",paddingBottom:"8px",borderBottom:"2px solid #bfdbfe"}:{},children:"Examination Schedule"}),r.jsxs("table",{className:l==="print"?"":"w-full border-collapse border border-gray-300",style:l==="print"?{width:"100%",borderCollapse:"collapse",border:"1px solid #d1d5db"}:{},children:[r.jsx("thead",{children:r.jsxs("tr",{style:l==="print"?{backgroundColor:"#f3f4f6"}:{},children:[r.jsx("th",{className:l==="print"?"":"px-2 py-1 border border-gray-300 text-left font-semibold",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600",fontSize:"11px"}:{},children:"Date"}),r.jsx("th",{className:l==="print"?"":"px-2 py-1 border border-gray-300 text-left font-semibold",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600",fontSize:"11px"}:{},children:"Subject"}),r.jsx("th",{className:l==="print"?"":"px-2 py-1 border border-gray-300 text-left font-semibold",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600",fontSize:"11px"}:{},children:"Time"}),s&&r.jsx("th",{className:l==="print"?"":"px-2 py-1 border border-gray-300 text-left font-semibold",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600",fontSize:"11px"}:{},children:"Room"}),r.jsx("th",{className:l==="print"?"":"px-2 py-1 border border-gray-300 text-left font-semibold",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600",fontSize:"11px"}:{},children:"Invigilator Sign"})]})}),r.jsx("tbody",{children:a.map((p,f)=>r.jsxs("tr",{children:[r.jsx("td",{className:l==="print"?"":"px-2 py-1 border border-gray-300",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",fontSize:"10px"}:{},children:p.examDate}),r.jsx("td",{className:l==="print"?"":"px-2 py-1 border border-gray-300",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",fontSize:"10px"}:{},children:p.name}),r.jsx("td",{className:l==="print"?"":"px-2 py-1 border border-gray-300",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",fontSize:"10px"}:{},children:u(p.examHour,p.examMinute,p.examAmPm)}),s&&r.jsx("td",{className:l==="print"?"":"px-2 py-1 border border-gray-300",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",fontSize:"10px"}:{},children:p.roomNumber||"N/A"}),r.jsx("td",{className:l==="print"?"":"px-2 py-1 border border-gray-300",style:l==="print"?{padding:"4px 8px",border:"1px solid #d1d5db",height:"20px",minHeight:"20px"}:{}})]},p.id))})]})]}),r.jsxs("div",{className:l==="print"?"":"mb-4",style:l==="print"?{marginBottom:"16px",pageBreakInside:"avoid",display:"block",visibility:"visible"}:{},children:[r.jsx("h3",{className:l==="print"?"":"text-base font-semibold text-gray-800 mb-3",style:l==="print"?{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"12px"}:{},children:"Instructions"}),r.jsx("div",{className:l==="print"?"":"grid grid-cols-2 gap-x-4 gap-y-1",style:l==="print"?{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"11px",color:"#374151",lineHeight:"1.4"}:{},children:o&&o.length>0?o.map((p,f)=>r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:p})]},f)):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:" Bring this admit card to the examination hall"})]}),r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:"Arrive at least 30 minutes before the exam starts"})]}),r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:"Carry a valid ID proof along with this admit card"})]}),r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:"Mobile phones and electronic devices are not allowed"})]}),r.jsxs("div",{className:l==="print"?"":"flex items-start",style:l==="print"?{display:"flex",alignItems:"flex-start",marginBottom:"2px",visibility:"visible",color:"#374151"}:{},children:[r.jsx("span",{style:l==="print"?{marginRight:"6px",fontSize:"11px",color:"#374151",flexShrink:0}:{},children:""}),r.jsx("span",{style:l==="print"?{fontSize:"11px",color:"#374151",lineHeight:"1.3"}:{},children:"Follow all examination rules and regulations"})]})]})})]}),r.jsx("div",{className:l==="print"?"":"flex justify-end mb-4 mt-4",style:l==="print"?{display:"flex",justifyContent:"flex-end",marginBottom:"80px",marginTop:"16px"}:{},children:r.jsxs("div",{className:l==="print"?"":"text-center",style:l==="print"?{textAlign:"center",minWidth:"150px"}:{},children:[r.jsx("div",{className:l==="print"?"":"border-b border-gray-400 mb-1 pb-4",style:l==="print"?{borderBottom:"1px solid #9ca3af",marginBottom:"4px",paddingBottom:"20px",minHeight:"25px"}:{}}),r.jsx("p",{className:l==="print"?"":"text-xs font-medium text-gray-700",style:l==="print"?{fontSize:"10px",fontWeight:"500",color:"#374151",margin:0}:{},children:"Principal Signature"})]})}),r.jsx("div",{className:l==="print"?"":"mt-auto bg-gray-50 px-8 py-4 border-t",style:l==="print"?{position:"absolute",bottom:"20mm",left:"20mm",right:"20mm",background:"#f9fafb",padding:"16px 32px",borderTop:"1px solid #e5e7eb"}:{marginTop:"auto",background:"#f9fafb",padding:"16px 32px",borderTop:"1px solid #e5e7eb"},children:r.jsxs("div",{className:l==="print"?"":"flex justify-between items-center text-sm text-gray-600",style:l==="print"?{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"#4b5563"}:{},children:[r.jsxs("div",{className:l==="print"?"":"flex items-center space-x-4",style:l==="print"?{display:"flex",alignItems:"center",gap:"16px"}:{},children:[r.jsx("span",{children:e.phone}),r.jsx("span",{children:e.email}),r.jsx("span",{children:e.website})]}),r.jsxs("div",{className:l==="print"?"":"flex items-center text-xs text-gray-500",style:l==="print"?{display:"flex",alignItems:"center",fontSize:"10px",color:"#6b7280"}:{},children:[r.jsx("span",{children:"Powered by"}),r.jsx("strong",{className:l==="print"?"":"ml-1",style:l==="print"?{marginLeft:"4px"}:{},children:"EduLogix"})]})]})})]})},PP=({settings:e,invoiceData:t,mode:a="preview",className:n=""})=>{const s=a==="print"?{fontFamily:"Arial, sans-serif",aspectRatio:"297/210",minHeight:"210mm",width:"297mm",padding:"10mm",boxSizing:"border-box",background:"white",fontSize:"10px"}:{},o=({copyType:l})=>r.jsxs("div",{className:a==="print"?"":"flex-1 border border-gray-300 p-3",style:a==="print"?{flex:"1",border:"1px solid #d1d5db",padding:"12px",marginBottom:"8px",fontSize:"10px"}:{},children:[r.jsx("div",{className:a==="print"?"":"text-center mb-2 pb-2 border-b border-gray-400",style:a==="print"?{textAlign:"center",marginBottom:"8px",paddingBottom:"8px",borderBottom:"1px solid #9ca3af"}:{},children:r.jsx("h3",{className:a==="print"?"":"text-sm font-bold text-gray-800",style:a==="print"?{fontSize:"12px",fontWeight:"bold",color:"#1f2937",margin:0}:{},children:l})}),r.jsxs("div",{className:a==="print"?"":"flex justify-between items-center mb-3 pb-2 border-b border-gray-300",style:a==="print"?{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid #d1d5db"}:{},children:[r.jsxs("div",{className:a==="print"?"":"flex items-center space-x-2",style:a==="print"?{display:"flex",alignItems:"center",gap:"8px"}:{},children:[e.logoUrl?r.jsx("img",{src:e.logoUrl,alt:"Logo",className:a==="print"?"":"w-8 h-8 object-contain",style:a==="print"?{width:"32px",height:"32px",objectFit:"contain"}:{}}):r.jsx("div",{className:a==="print"?"":"w-8 h-8 bg-gray-800 rounded flex items-center justify-center",style:a==="print"?{width:"32px",height:"32px",background:"#1f2937",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"}:{},children:r.jsx("div",{className:a==="print"?"":"w-4 h-4 border border-white rounded transform rotate-45",style:a==="print"?{width:"16px",height:"16px",border:"1px solid white",borderRadius:"2px",transform:"rotate(45deg)"}:{}})}),r.jsxs("div",{children:[r.jsx("h1",{className:a==="print"?"":"text-sm font-bold text-gray-800",style:a==="print"?{fontSize:"12px",fontWeight:"bold",color:"#1f2937",margin:0}:{},children:e.schoolName}),r.jsx("p",{className:a==="print"?"":"text-xs text-gray-600",style:a==="print"?{fontSize:"8px",color:"#4b5563",margin:"1px 0"}:{},children:e.address})]})]}),r.jsx("div",{className:a==="print"?"":"text-right",style:a==="print"?{textAlign:"right"}:{}})]}),r.jsxs("div",{className:a==="print"?"":"text-center mb-3",style:a==="print"?{textAlign:"center",marginBottom:"12px"}:{},children:[r.jsx("h2",{className:a==="print"?"":"text-lg font-bold text-blue-600",style:a==="print"?{fontSize:"14px",fontWeight:"bold",color:"#2563eb",margin:0}:{},children:"INVOICE"}),r.jsxs("p",{className:a==="print"?"":"text-xs text-gray-600",style:a==="print"?{fontSize:"10px",color:"#4b5563",marginTop:"2px"}:{},children:["#",t.invoiceNumber]})]}),r.jsxs("div",{className:a==="print"?"":"grid grid-cols-2 gap-8 mb-8",style:a==="print"?{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",marginBottom:"32px"}:{},children:[r.jsxs("div",{children:[r.jsx("h3",{className:a==="print"?"":"text-sm font-semibold text-gray-800 mb-2",style:a==="print"?{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"}:{},children:"INVOICE TO:"}),r.jsxs("div",{className:a==="print"?"":"text-sm text-gray-700",style:a==="print"?{fontSize:"12px",color:"#374151"}:{},children:[r.jsx("p",{style:a==="print"?{margin:"4px 0",fontWeight:"bold"}:{},children:r.jsx("strong",{children:t.clientName})}),r.jsx("p",{style:a==="print"?{margin:"4px 0"}:{},children:t.clientAddress})]})]}),r.jsx("div",{className:a==="print"?"":"text-right",style:a==="print"?{textAlign:"right"}:{},children:r.jsxs("div",{className:a==="print"?"":"text-sm text-gray-700",style:a==="print"?{fontSize:"12px",color:"#374151"}:{},children:[r.jsxs("p",{style:a==="print"?{margin:"4px 0"}:{},children:[r.jsx("strong",{children:"Invoice Date:"})," ",t.date]}),r.jsxs("p",{style:a==="print"?{margin:"4px 0"}:{},children:[r.jsx("strong",{children:"Due Date:"})," ",t.dueDate]})]})})]}),r.jsxs("table",{className:a==="print"?"":"w-full border-collapse border border-gray-300 mb-8",style:a==="print"?{width:"100%",borderCollapse:"collapse",border:"1px solid #d1d5db",marginBottom:"32px"}:{},children:[r.jsx("thead",{children:r.jsxs("tr",{style:a==="print"?{backgroundColor:"#f3f4f6"}:{},children:[r.jsx("th",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-left font-semibold",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"left",fontWeight:"600"}:{},children:"Description"}),r.jsx("th",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-center font-semibold",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"center",fontWeight:"600"}:{},children:"Qty"}),r.jsx("th",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-right font-semibold",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"right",fontWeight:"600"}:{},children:"Rate"}),r.jsx("th",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-right font-semibold",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"right",fontWeight:"600"}:{},children:"Amount"})]})}),r.jsx("tbody",{children:t.items.map((d,u)=>r.jsxs("tr",{children:[r.jsx("td",{className:a==="print"?"":"px-4 py-3 border border-gray-300",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db"}:{},children:d.description}),r.jsx("td",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-center",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"center"}:{},children:d.quantity}),r.jsxs("td",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-right",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"right"}:{},children:["",d.rate.toFixed(2)]}),r.jsxs("td",{className:a==="print"?"":"px-4 py-3 border border-gray-300 text-right",style:a==="print"?{padding:"12px 16px",border:"1px solid #d1d5db",textAlign:"right"}:{},children:["",d.amount.toFixed(2)]})]},u))})]}),r.jsx("div",{className:a==="print"?"":"flex justify-end mb-8",style:a==="print"?{display:"flex",justifyContent:"flex-end",marginBottom:"32px"}:{},children:r.jsxs("div",{className:a==="print"?"":"w-64",style:a==="print"?{width:"256px"}:{},children:[r.jsxs("div",{className:a==="print"?"":"flex justify-between py-2 border-b border-gray-300",style:a==="print"?{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #d1d5db"}:{},children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["",t.subtotal.toFixed(2)]})]}),r.jsxs("div",{className:a==="print"?"":"flex justify-between py-2 border-b border-gray-300",style:a==="print"?{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #d1d5db"}:{},children:[r.jsx("span",{children:"Tax:"}),r.jsxs("span",{children:["",t.tax.toFixed(2)]})]}),r.jsxs("div",{className:a==="print"?"":"flex justify-between py-3 font-bold text-lg border-b-2 border-gray-800",style:a==="print"?{display:"flex",justifyContent:"space-between",padding:"12px 0",fontWeight:"bold",fontSize:"18px",borderBottom:"2px solid #1f2937"}:{},children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["",t.total.toFixed(2)]})]})]})}),r.jsx("div",{className:a==="print"?"":"mt-auto pt-8 border-t border-gray-300",style:a==="print"?{marginTop:"auto",paddingTop:"32px",borderTop:"1px solid #d1d5db"}:{},children:r.jsxs("div",{className:a==="print"?"":"text-center text-sm text-gray-600",style:a==="print"?{textAlign:"center",fontSize:"12px",color:"#4b5563"}:{},children:[r.jsx("p",{style:a==="print"?{margin:"4px 0"}:{},children:"Thank you for your business!"}),r.jsxs("p",{style:a==="print"?{margin:"4px 0"}:{},children:["For any queries, contact us at ",e.phone," or ",e.email]})]})})]});return r.jsx("div",{className:`invoice-template ${n} ${a==="print"?"":"w-full max-w-6xl mx-auto bg-white shadow-lg"}`,style:a==="print"?s:{fontFamily:"Arial, sans-serif",aspectRatio:"297/210",minHeight:"210mm",width:"297mm",padding:"10mm",boxSizing:"border-box",fontSize:"10px"},children:r.jsxs("div",{className:a==="print"?"":"flex flex-row gap-4",style:a==="print"?{display:"flex",flexDirection:"row",gap:"16px"}:{},children:[r.jsx(o,{copyType:"ADMIN COPY"}),r.jsx(o,{copyType:"STUDENT COPY"})]})})},EP=({settings:e,certificateData:t,mode:a="preview",className:n=""})=>{const s=a==="print"?{fontFamily:"Arial, sans-serif",aspectRatio:"297/210",minHeight:"210mm",width:"297mm",padding:"20mm",boxSizing:"border-box",background:"white"}:{};return r.jsx("div",{className:`certificate-template ${n}`,style:s,children:r.jsxs("div",{className:a==="print"?"":"border-4 border-double border-gray-800 p-8 h-full",style:a==="print"?{border:"4px double #1f2937",padding:"32px",height:"100%"}:{},children:[r.jsxs("div",{className:a==="print"?"":"text-center mb-8",style:a==="print"?{textAlign:"center",marginBottom:"32px"}:{},children:[e.logoUrl&&r.jsx("img",{src:e.logoUrl,alt:"Logo",className:a==="print"?"":"w-20 h-20 mx-auto mb-4 object-contain",style:a==="print"?{width:"80px",height:"80px",margin:"0 auto 16px",objectFit:"contain"}:{}}),r.jsx("h1",{className:a==="print"?"":"text-3xl font-bold text-gray-800 mb-2",style:a==="print"?{fontSize:"28px",fontWeight:"bold",color:"#1f2937",marginBottom:"8px"}:{},children:e.schoolName}),r.jsx("p",{className:a==="print"?"":"text-lg text-gray-600",style:a==="print"?{fontSize:"16px",color:"#4b5563",margin:0}:{},children:e.address})]}),r.jsxs("div",{className:a==="print"?"":"text-center mb-12",style:a==="print"?{textAlign:"center",marginBottom:"48px"}:{},children:[r.jsx("h2",{className:a==="print"?"":"text-5xl font-bold text-blue-600 mb-4",style:a==="print"?{fontSize:"48px",fontWeight:"bold",color:"#2563eb",marginBottom:"16px"}:{},children:"CERTIFICATE"}),r.jsx("h3",{className:a==="print"?"":"text-2xl font-semibold text-gray-700",style:a==="print"?{fontSize:"24px",fontWeight:"600",color:"#374151",margin:0}:{},children:"OF COMPLETION"})]}),r.jsxs("div",{className:a==="print"?"":"text-center mb-12 space-y-6",style:a==="print"?{textAlign:"center",marginBottom:"48px"}:{},children:[r.jsx("p",{className:a==="print"?"":"text-lg text-gray-700",style:a==="print"?{fontSize:"18px",color:"#374151",marginBottom:"24px"}:{},children:"This is to certify that"}),r.jsx("div",{className:a==="print"?"":"border-b-2 border-gray-300 pb-2 mb-6",style:a==="print"?{borderBottom:"2px solid #d1d5db",paddingBottom:"8px",marginBottom:"24px"}:{},children:r.jsx("h4",{className:a==="print"?"":"text-3xl font-bold text-gray-800",style:a==="print"?{fontSize:"32px",fontWeight:"bold",color:"#1f2937",margin:0}:{},children:t.recipientName})}),r.jsx("p",{className:a==="print"?"":"text-lg text-gray-700 mb-4",style:a==="print"?{fontSize:"18px",color:"#374151",marginBottom:"16px"}:{},children:"has successfully completed the course"}),r.jsx("div",{className:a==="print"?"":"border-b-2 border-gray-300 pb-2 mb-6",style:a==="print"?{borderBottom:"2px solid #d1d5db",paddingBottom:"8px",marginBottom:"24px"}:{},children:r.jsx("h5",{className:a==="print"?"":"text-2xl font-semibold text-blue-600",style:a==="print"?{fontSize:"24px",fontWeight:"600",color:"#2563eb",margin:0}:{},children:t.courseName})}),r.jsxs("p",{className:a==="print"?"":"text-lg text-gray-700",style:a==="print"?{fontSize:"18px",color:"#374151",margin:0}:{},children:["on ",t.completionDate]})]}),r.jsxs("div",{className:a==="print"?"":"flex justify-between items-end mt-16",style:a==="print"?{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginTop:"64px"}:{},children:[r.jsxs("div",{className:a==="print"?"":"text-left",style:a==="print"?{textAlign:"left"}:{},children:[r.jsxs("p",{className:a==="print"?"":"text-sm text-gray-600 mb-1",style:a==="print"?{fontSize:"12px",color:"#4b5563",marginBottom:"4px"}:{},children:["Certificate No: ",t.certificateNumber]}),r.jsxs("p",{className:a==="print"?"":"text-sm text-gray-600",style:a==="print"?{fontSize:"12px",color:"#4b5563",margin:0}:{},children:["Date of Issue: ",t.completionDate]})]}),r.jsx("div",{className:a==="print"?"":"text-center",style:a==="print"?{textAlign:"center"}:{},children:r.jsxs("div",{className:a==="print"?"":"border-t-2 border-gray-800 pt-2",style:a==="print"?{borderTop:"2px solid #1f2937",paddingTop:"8px",minWidth:"200px"}:{},children:[r.jsx("p",{className:a==="print"?"":"font-semibold text-gray-800",style:a==="print"?{fontWeight:"600",color:"#1f2937",margin:"0 0 4px 0"}:{},children:t.signatory}),r.jsx("p",{className:a==="print"?"":"text-sm text-gray-600",style:a==="print"?{fontSize:"12px",color:"#4b5563",margin:0}:{},children:t.signatoryTitle})]})}),r.jsxs("div",{className:a==="print"?"":"text-right",style:a==="print"?{textAlign:"right"}:{},children:[r.jsx("p",{className:a==="print"?"":"text-sm text-gray-600",style:a==="print"?{fontSize:"12px",color:"#4b5563",margin:0}:{},children:e.phone}),r.jsx("p",{className:a==="print"?"":"text-sm text-gray-600",style:a==="print"?{fontSize:"12px",color:"#4b5563",margin:0}:{},children:e.email})]})]}),r.jsx("div",{className:a==="print"?"":"absolute top-4 left-4 w-16 h-16 border-4 border-blue-200 rounded-full opacity-20",style:a==="print"?{position:"absolute",top:"16px",left:"16px",width:"64px",height:"64px",border:"4px solid #dbeafe",borderRadius:"50%",opacity:.2}:{}}),r.jsx("div",{className:a==="print"?"":"absolute top-4 right-4 w-16 h-16 border-4 border-blue-200 rounded-full opacity-20",style:a==="print"?{position:"absolute",top:"16px",right:"16px",width:"64px",height:"64px",border:"4px solid #dbeafe",borderRadius:"50%",opacity:.2}:{}}),r.jsx("div",{className:a==="print"?"":"absolute bottom-4 left-4 w-16 h-16 border-4 border-blue-200 rounded-full opacity-20",style:a==="print"?{position:"absolute",bottom:"16px",left:"16px",width:"64px",height:"64px",border:"4px solid #dbeafe",borderRadius:"50%",opacity:.2}:{}}),r.jsx("div",{className:a==="print"?"":"absolute bottom-4 right-4 w-16 h-16 border-4 border-blue-200 rounded-full opacity-20",style:a==="print"?{position:"absolute",bottom:"16px",right:"16px",width:"64px",height:"64px",border:"4px solid #dbeafe",borderRadius:"50%",opacity:.2}:{}})]})})},KX=()=>{const{user:e}=dr(),[t,a]=S.useState({schoolName:e?.schoolName||"School Name",schoolCode:e?.schoolCode||"SCH001",website:"www.edulogix.com",logoUrl:"",headerColor:"#1f2937",accentColor:"#3b82f6",address:"123 School Street, City, State 12345",phone:"+91-XXXXXXXXXX",email:"info@school.com"}),[n,s]=S.useState(!1),[o,l]=S.useState("invoice"),[d,u]=S.useState(!1),m=()=>{switch(o){case"invoice":return{invoiceNumber:"INV-2024-001",date:new Date().toLocaleDateString(),dueDate:new Date(Date.now()+720*60*60*1e3).toLocaleDateString(),clientName:"John Doe",clientAddress:"123 Student Street, City, State 12345",items:[{description:"Tuition Fee",quantity:1,rate:5e3,amount:5e3},{description:"Library Fee",quantity:1,rate:500,amount:500},{description:"Lab Fee",quantity:1,rate:1e3,amount:1e3}],subtotal:6500,tax:650,total:7150};case"admit_card":return{student:{id:"1",name:"John Doe",rollNumber:"R001",sequenceId:"SEQ001",className:"10",section:"A",profileImage:""},subjects:[{id:"1",name:"Mathematics",examDate:"2024-03-15",examTime:"09:00 AM",examHour:"09",examMinute:"00",examAmPm:"AM"},{id:"2",name:"Science",examDate:"2024-03-16",examTime:"09:00 AM",examHour:"09",examMinute:"00",examAmPm:"AM"},{id:"3",name:"English",examDate:"2024-03-17",examTime:"09:00 AM",examHour:"09",examMinute:"00",examAmPm:"AM"}],testName:"Final Examination 2024",enableRoomNumbers:!0};case"certificate":return{recipientName:"John Doe",courseName:"Academic Excellence",completionDate:new Date().toLocaleDateString(),certificateNumber:"CERT-2024-001",signatory:"Principal Name",signatoryTitle:"Principal"};case"id_card_landscape_front":case"id_card_landscape_back":case"id_card_portrait_front":case"id_card_portrait_back":return{student:{id:"1",name:"John Doe",rollNumber:"R001",sequenceId:"STU001",className:"10",section:"A",profileImage:"",dateOfBirth:"15/01/2008",bloodGroup:"O+",fatherName:"Mr. Robert Doe",address:"123 Student Street, City, State 12345",phone:"+91-9876543210"}};default:return{}}},p=async()=>{try{localStorage.setItem("universalTemplate",JSON.stringify(t)),xe.success("Template settings saved successfully!")}catch{xe.error("Failed to save template settings")}},f=()=>{const v=window.open("","_blank","width=800,height=600");if(!v){alert("Please allow popups to print template");return}let b="";try{switch(o){case"invoice":{const T=m();b=Jm.renderToString(ge.createElement(PP,{settings:t,invoiceData:T,mode:"print"}));break}case"certificate":{const T=m();b=Jm.renderToString(ge.createElement(EP,{settings:t,certificateData:T,mode:"print"}));break}case"admit_card":{const T=m();b=Jm.renderToString(ge.createElement(v1,{settings:t,student:T.student,subjects:T.subjects,testName:T.testName,enableRoomNumbers:T.enableRoomNumbers,instructions:["Bring this admit card to the examination hall","Arrive at least 30 minutes before the exam starts","Carry a valid ID proof along with this admit card","Mobile phones and electronic devices are not allowed","Follow all examination rules and regulations"],mode:"print"}));break}case"id_card_landscape_front":b=`
            <div style="text-align: center; padding: 20px;">
              <h2>ID Card Template - Landscape Front</h2>
              <img src="https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/landscape-front_m59zcq.png" 
                   alt="Landscape Front Template" 
                   style="max-width: 100%; height: auto;" />
            </div>
          `;break;case"id_card_landscape_back":b=`
            <div style="text-align: center; padding: 20px;">
              <h2>ID Card Template - Landscape Back</h2>
              <img src="https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/landscape-back_fqroxh.png" 
                   alt="Landscape Back Template" 
                   style="max-width: 100%; height: auto;" />
            </div>
          `;break;case"id_card_portrait_front":b=`
            <div style="text-align: center; padding: 20px;">
              <h2>ID Card Template - Portrait Front</h2>
              <img src="https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/portrait-front_iqllye.png" 
                   alt="Portrait Front Template" 
                   style="max-width: 100%; height: auto;" />
            </div>
          `;break;case"id_card_portrait_back":b=`
            <div style="text-align: center; padding: 20px;">
              <h2>ID Card Template - Portrait Back</h2>
              <img src="https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/portrait-back_m5wxzh.png" 
                   alt="Portrait Back Template" 
                   style="max-width: 100%; height: auto;" />
            </div>
          `;break;default:b=`
            <div style="font-family: Arial, sans-serif; padding: 40px; text-align: center;">
              <h1>Custom Template</h1>
              <p>Your content will appear here</p>
            </div>
          `}}catch(T){console.error("Error rendering component:",T),b=`
        <div style="font-family: Arial, sans-serif; padding: 40px; text-align: center;">
          <h1>Template Preview Error</h1>
          <p>There was an error rendering the template preview.</p>
        </div>
      `}const I=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Template Preview - ${o.replace("_"," ").toUpperCase()}</title>
          <style>
            @media print {
              body { margin: 0; padding: 0; }
              .no-print { display: none !important; }
            }
            @page {
              size: A4;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: Arial, sans-serif;
            }
          </style>
        </head>
        <body>
          ${b}
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
              }, 500);
            };
          <\/script>
        </body>
      </html>
    `;v.document.write(I),v.document.close()},x=()=>{try{const v=localStorage.getItem("universalTemplate");v&&a(JSON.parse(v))}catch(v){console.error("Failed to load template settings:",v)}},w=async()=>{if(!(!e?.schoolCode&&!e?.schoolId))try{u(!0);const v=e?.schoolId||e?.schoolCode;if(v){const b=await yt.get(`/schools/${v}/info`),I=b?.data?.data||b?.data;if(I&&(I.name||I.schoolName)){let T="";if(I.logoUrl||I.logo){const A=I.logoUrl||I.logo;A.startsWith("/uploads")?T=`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${A}`:T=A,console.log("Logo URL from API:",{rawLogoUrl:A,finalLogoUrl:T,apiBase:"https://erp-backend-1jtx.onrender.com/api",schoolData:I})}else console.warn("No logo URL found in school data. Using empty string.");let P="123 School Street, City, State 12345";if(I.address){if(typeof I.address=="string")P=I.address;else if(typeof I.address=="object"){const A=I.address,k=[A.street||A.area,A.city,A.district||A.taluka,A.state,A.pinCode||A.zipCode].filter(Boolean);k.length>0&&(P=k.join(", "))}}a(A=>({...A,schoolName:I.name||I.schoolName||A.schoolName,schoolCode:I.code||I.schoolCode||A.schoolCode,address:P||A.address,phone:I.phone||I.contact?.phone||A.phone,email:I.email||I.contact?.email||A.email,website:I.website||I.contact?.website||A.website,logoUrl:T||A.logoUrl}))}}}catch(v){console.error("Failed to fetch school data:",v)}finally{u(!1)}};S.useEffect(()=>{x(),w()},[e?.schoolCode]);const j=()=>{const v=m();switch(o){case"invoice":return r.jsx("div",{className:"transform scale-75 origin-top-left",children:r.jsx(PP,{settings:t,invoiceData:v,mode:"preview"})});case"certificate":return r.jsx("div",{className:"transform scale-75 origin-top-left",children:r.jsx(EP,{settings:t,certificateData:v,mode:"preview"})});case"admit_card":return r.jsx("div",{className:"transform scale-75 origin-top-left",children:r.jsx(v1,{settings:t,student:v.student,subjects:v.subjects,testName:v.testName,enableRoomNumbers:v.enableRoomNumbers,instructions:["Bring this admit card to the examination hall","Arrive at least 30 minutes before the exam starts","Carry a valid ID proof along with this admit card","Mobile phones and electronic devices are not allowed","Follow all examination rules and regulations"],mode:"preview"})});case"id_card_landscape_front":return r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"ID Card Template - Landscape Front"}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-center",style:{minHeight:"400px"},children:r.jsx("img",{src:"https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/landscape-front_m59zcq.png",alt:"Landscape Front Template",className:"max-w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"},onLoad:()=>console.log(" Landscape Front template loaded successfully"),onError:b=>{console.error(" Failed to load Landscape Front template image"),b.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5UZW1wbGF0ZSBOb3QgRm91bmQ8L3RleHQ+PC9zdmc+"}})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:["Template: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Landscape Front (Horizontal)"})]}),r.jsx("p",{className:"text-xs text-blue-600 mt-2",children:' Tip: Click "Preview" button above and select this template from the dropdown to view it'})]});case"id_card_landscape_back":return r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"ID Card Template - Landscape Back"}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-center",style:{minHeight:"400px"},children:r.jsx("img",{src:"https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/landscape-back_fqroxh.png",alt:"Landscape Back Template",className:"max-w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"},onError:b=>{b.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5UZW1wbGF0ZSBOb3QgRm91bmQ8L3RleHQ+PC9zdmc+"}})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:["Template: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Landscape Back (Horizontal)"})]})]});case"id_card_portrait_front":return r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"ID Card Template - Portrait Front"}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-center",style:{minHeight:"400px"},children:r.jsx("img",{src:"https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/portrait-front_iqllye.png",alt:"Portrait Front Template",className:"max-w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"},onError:b=>{b.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5UZW1wbGF0ZSBOb3QgRm91bmQ8L3RleHQ+PC9zdmc+"}})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:["Template: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Portrait Front (Vertical)"})]})]});case"id_card_portrait_back":return r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"ID Card Template - Portrait Back"}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-center",style:{minHeight:"400px"},children:r.jsx("img",{src:"https://res.cloudinary.com/dbcutmb0z/image/upload/v1762088066/portrait-back_m5wxzh.png",alt:"Portrait Back Template",className:"max-w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"},onError:b=>{b.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5UZW1wbGF0ZSBOb3QgRm91bmQ8L3RleHQ+PC9zdmc+"}})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:["Template: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Portrait Back (Vertical)"})]})]});default:return r.jsx("div",{className:"transform scale-75 origin-top-left",children:r.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white shadow-lg flex flex-col",style:{fontFamily:"Arial, sans-serif",aspectRatio:"210/297",minHeight:"297mm",width:"210mm",padding:"20mm",boxSizing:"border-box"},children:[r.jsx("div",{className:"flex justify-between items-start mb-6 pb-4 border-b-2 border-gray-300",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[t.logoUrl?r.jsx("img",{src:t.logoUrl,alt:"Logo",className:"w-16 h-16 object-contain"}):r.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-lg flex items-center justify-center",children:r.jsx("div",{className:"w-10 h-10 border-2 border-white rounded transform rotate-45"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.schoolName}),r.jsxs("p",{className:"text-sm text-gray-600",children:["School Code: ",t.schoolCode]}),r.jsx("p",{className:"text-sm text-gray-600",children:t.address})]})]})}),r.jsx("div",{className:"text-center mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"CUSTOM DOCUMENT"})}),r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-lg font-medium",children:"Template Preview"}),r.jsx("p",{className:"text-sm",children:"Content will appear here when documents are generated"})]})})]})})}};return n?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Template Preview - ",o.replace("_"," ").toUpperCase()]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("select",{value:o,onChange:v=>l(v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"invoice",children:"Invoice"}),r.jsx("option",{value:"admit_card",children:"Admit Card"}),r.jsx("option",{value:"certificate",children:"Certificate"}),r.jsx("option",{value:"id_card_landscape_front",children:"ID Card - Landscape Front"}),r.jsx("option",{value:"id_card_landscape_back",children:"ID Card - Landscape Back"}),r.jsx("option",{value:"id_card_portrait_front",children:"ID Card - Portrait Front"}),r.jsx("option",{value:"id_card_portrait_back",children:"ID Card - Portrait Back"}),r.jsx("option",{value:"custom",children:"Custom Document"})]}),r.jsxs("button",{onClick:()=>s(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center",children:[r.jsx(rf,{className:"h-4 w-4 mr-2"}),"Edit Template"]}),r.jsxs("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:[r.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Print Template"]})]})]}),r.jsx("div",{className:"bg-gray-100 p-8 rounded-lg overflow-auto",children:r.jsx(j,{})})]}):r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Universal Template Settings"}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[r.jsxs("button",{onClick:()=>s(!0),className:"px-3 sm:px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center justify-center text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(oa,{className:"h-4 w-4 mr-2"}),"Preview"]}),r.jsxs("button",{onClick:p,className:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save Template"]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[r.jsx(fa,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Universal Template System"}),r.jsx("p",{className:"text-xs sm:text-sm text-blue-700 mt-1",children:"Configure your school's universal template for all documents including invoices, admit cards, certificates, and more. This template will be used across the entire system."})]})]})}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:[r.jsxs("h4",{className:"text-base sm:text-lg font-medium text-gray-900 mb-4",children:["School Information",d&&r.jsxs("span",{className:"ml-2 text-xs sm:text-sm text-blue-600",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Loading..."]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 mb-4",children:r.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," School information is automatically fetched from your database. Contact your administrator to update school details."]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name"}),r.jsx("input",{type:"text",value:t.schoolName,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Code"}),r.jsx("input",{type:"text",value:t.schoolCode,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Address"}),r.jsx("input",{type:"text",value:t.address,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{type:"text",value:t.phone,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",value:t.email,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),r.jsx("input",{type:"text",value:t.website,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600"})]})]})]}),r.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Template Usage"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" This universal template will be used for all PDF documents"}),r.jsx("li",{children:" Supports invoices, admit cards, certificates, and custom documents"}),r.jsx("li",{children:" Maintains consistent branding across all school documents"}),r.jsx("li",{children:" Preview different document types before finalizing"}),r.jsx("li",{children:" Template is automatically applied to new documents"})]})]})]})},TP=()=>{const[e,t]=S.useState("academic"),[a,n]=S.useState([]),[s,o]=S.useState([]),[l,d]=S.useState(!1),[u,m]=S.useState({}),[p,f]=S.useState(new Set),[x,w]=S.useState("2024-2025"),[j,v]=S.useState("2024-04-01"),[b,I]=S.useState("2025-03-31"),[T,P]=S.useState("bulk"),[A,k]=S.useState("2024-25"),[E,_]=S.useState(""),[R,$]=S.useState(""),[H,L]=S.useState(""),[Y,X]=S.useState(""),[me,K]=S.useState(""),oe=()=>{const te=localStorage.getItem("erp.auth");if(te){const se=JSON.parse(te),Q=se.user?.schoolCode||se.schoolCode||"SB",de=se.token;return console.log(" Admin Auth Data:",se),console.log(" Extracted School Code:",Q),console.log(" Token exists:",!!de),{schoolCode:Q,token:de}}return console.error(" No auth data found in localStorage"),{schoolCode:null,token:null}},G=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){console.error(" Cannot fetch tests: School code or token not found"),xe.error("Authentication error. Please login again.");return}try{d(!0);const Q=`/admin/classes/${te}/tests`;console.log(" Fetching tests from endpoint:",Q),console.log(" Using school code:",te);const de=await yt.get(Q);if(console.log(" Tests API Response:",de.data),de.data.success){const we=de.data.data?.tests||de.data.tests||[];we.length>0&&(console.log(" First test structure:",we[0]),console.log(" Test fields:",Object.keys(we[0]))),n(we),console.log(" Fetched tests:",we),xe.success(`Loaded ${we.length} tests`)}else console.error(" API returned success: false",de.data),xe.error(de.data.message||"Failed to fetch tests")}catch(Q){console.error(" Error fetching tests:",Q),console.error("Error details:",Q.response?.data||Q.message),xe.error(Q.response?.data?.message||"Failed to fetch tests")}finally{d(!1)}},B=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){console.error(" Cannot fetch classes: School code or token not found"),xe.error("Authentication error. Please login again.");return}try{d(!0);const Q=`/admin/classes/${te}/classes-sections`;console.log(" Fetching classes from endpoint:",Q),console.log(" Using school code:",te);const de=await yt.get(Q);if(console.log(" Classes API Response:",de.data),de.data.success){const we=de.data.data?.classes||de.data.classes||[];let ce=[];try{const at=`/school-users/${te}/users/role/student`,pe=await yt.get(at);pe.data.success&&(ce=pe.data.data||pe.data.users||[],console.log(` Fetched ${ce.length} total students`))}catch(at){console.error("Error fetching students:",at)}const Be=we.map(at=>{const pe=ce.filter(vt=>vt.studentDetails?.currentClass===at.className||vt.class===at.className),tt={};at.sections.forEach(vt=>{tt[vt]=pe.filter(Nt=>Nt.studentDetails?.currentSection===vt||Nt.section===vt).length});const ut=Object.values(tt).reduce((vt,Nt)=>vt+Nt,0);return{...at,studentCount:ut,sectionCounts:tt}}).sort((at,pe)=>{const tt=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],ut=tt.indexOf(at.className),vt=tt.indexOf(pe.className);return ut!==-1&&vt!==-1?ut-vt:ut!==-1?-1:vt!==-1?1:at.className.localeCompare(pe.className)});Be.forEach(at=>{at.sections&&at.sections.length>0&&at.sections.sort((pe,tt)=>pe.localeCompare(tt))}),o(Be),console.log(" Fetched classes with student counts (sorted):",Be),xe.success(`Loaded ${we.length} classes`)}else console.error(" API returned success: false",de.data),xe.error(de.data.message||"Failed to fetch classes")}catch(Q){console.error(" Error fetching classes:",Q),console.error("Error details:",Q.response?.data||Q.message),xe.error(Q.response?.data?.message||"Failed to fetch classes")}finally{d(!1)}},F=te=>{f(se=>{const Q=new Set(se);return Q.has(te)?Q.delete(te):Q.add(te),Q})},re=(te,se,Q)=>{m(de=>({...de,[te]:{...de[te],[se]:Q}}))},U=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){xe.error("Authentication error. Please login again.");return}const Q=a.filter(de=>u[de._id]?.maxMarks);if(Q.length===0){xe.error("Please configure at least one test before saving.");return}try{console.log("Saving scoring configuration:",u),console.log(`Saving ${Q.length} configured test(s)`);const de=Q.map(Ve=>({testId:Ve._id,testName:Ve.testName,className:Ve.className,maxMarks:u[Ve._id]?.maxMarks,weightage:u[Ve._id]?.weightage})),we=`/admin/classes/${te}/test-scoring`,ce=await yt.post(we,{scoring:de});if(ce.data.success){const Ve=a.length-Q.length,Be=Ve>0?`Saved ${Q.length} test(s). ${Ve} test(s) not configured yet.`:`All ${Q.length} test(s) configured successfully!`;xe.success(Be),console.log(" Saved scoring:",ce.data),await G()}else xe.error(ce.data.message||"Failed to save scoring")}catch(de){console.error(" Error saving scoring:",de),xe.error(de.response?.data?.message||"Failed to save scoring configuration")}},ae=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){xe.error("Authentication error. Please login again.");return}if(!R){xe.error("Please select an option for final-year students.");return}if(confirm(`Are you sure you want to promote all students from ${A} to ${E}?`))try{d(!0);const Q=`/admin/promotion/${te}/bulk`,de=await yt.post(Q,{fromYear:A,toYear:E,finalYearAction:R});de.data.success?(xe.success(de.data.message||"Students promoted successfully!"),console.log(" Bulk promotion result:",de.data),$(""),await B()):xe.error(de.data.message||"Failed to promote students")}catch(Q){console.error(" Error promoting students:",Q),xe.error(Q.response?.data?.message||"Failed to promote students")}finally{d(!1)}},W=async()=>{const{schoolCode:te,token:se}=oe();if(!(!te||!se))try{const Q=await yt.get(`/admin/academic-year/${te}`);if(Q.data.success){const{currentYear:de,startDate:we,endDate:ce}=Q.data.data;w(de||"2024-2025"),v(we?we.split("T")[0]:"2024-04-01"),I(ce?ce.split("T")[0]:"2025-03-31"),k(de||"2024-2025")}}catch(Q){console.error("Error fetching academic year:",Q)}},fe=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){xe.error("Authentication error");return}try{if(d(!0),(await yt.put(`/admin/academic-year/${te}`,{currentYear:x,startDate:j,endDate:b})).data.success){const de=await yt.post(`/admin/migration/${te}/students/academic-year`,{academicYear:x});if(de.data.success){const we=de.data.data?.updated||0;xe.success(`Academic year updated! ${we} student(s) updated.`),k(x)}else xe.success("Academic year updated successfully!"),k(x)}}catch(Q){console.error("Error saving academic year:",Q),xe.error("Failed to save academic year")}finally{d(!1)}},Se=async()=>{const{schoolCode:te,token:se}=oe();if(!te||!se){xe.error("Authentication error. Please login again.");return}if(!H||!Y){xe.error("Please select both class and section.");return}const Q=me.split(",").map(de=>de.trim()).filter(de=>de);if(confirm(`Promote Class ${H}-${Y} (except ${Q.length} student(s))?`))try{d(!0);const de=`/admin/promotion/${te}/section`,we=await yt.post(de,{fromYear:A,toYear:E,className:H,section:Y,holdBackSequenceIds:Q});we.data.success?(xe.success(we.data.message||"Section promoted successfully!"),console.log(" Manual promotion result:",we.data),L(""),X(""),K(""),await B()):xe.error(we.data.message||"Failed to promote section")}catch(de){console.error(" Error promoting section:",de),xe.error(de.response?.data?.message||"Failed to promote section")}finally{d(!1)}};S.useEffect(()=>{e==="academic"?W():e==="scoring"?G():e==="classes"?B():e==="promotion"&&(B(),W())},[e]),S.useEffect(()=>{if(A){const[te,se]=A.split("-").map(Number),Q=te+1,de=se+1;se<100?_(`${Q}-${de.toString().slice(-2)}`):_(`${Q}-${de}`)}},[A]),S.useEffect(()=>{if(a.length>0){const te={};a.forEach(se=>{console.log(` Checking test ${se.testName||se._id}:`,{maxMarks:se.maxMarks,weightage:se.weightage,hasMaxMarks:!!se.maxMarks,hasWeightage:!!se.weightage}),(se.maxMarks||se.weightage)&&(te[se._id]={maxMarks:se.maxMarks||0,weightage:se.weightage||0},console.log(" Added to initialScoring:",te[se._id]))}),m(te),console.log(" Initialized test scoring with existing values:",te)}},[a]);const Ie=[{id:"academic",name:"Academic Year",icon:la},{id:"promotion",name:"Promotion",icon:Ho},{id:"scoring",name:"Scoring System",icon:Ho},{id:"classes",name:"Class Structure",icon:ta},{id:"templates",name:"Templates",icon:fa}];return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"School Settings"}),e==="scoring"&&r.jsxs("button",{onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-4 py-2 rounded-lg flex items-center justify-center transition-colors text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save Scoring"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex flex-col sm:flex-row sm:space-x-8 px-4 sm:px-6 overflow-x-auto",children:Ie.map(te=>r.jsxs("button",{onClick:()=>t(te.id),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center justify-center sm:justify-start transition-colors w-full sm:w-auto ${e===te.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(te.icon,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"truncate",children:te.name})]},te.id))})}),r.jsxs("div",{className:`${e==="templates"?"p-0":"p-4 sm:p-6"}`,children:[e==="templates"&&r.jsx("div",{className:"h-[calc(100vh-300px)] overflow-y-auto",children:r.jsx(KX,{})}),e==="academic"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Academic Year Configuration"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Academic Year"}),r.jsx("input",{type:"text",value:x,onChange:te=>w(te.target.value),placeholder:"2024-2025",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year Start"}),r.jsx("input",{type:"date",value:j,onChange:te=>v(te.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year End"}),r.jsx("input",{type:"date",value:b,onChange:te=>I(te.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsx("button",{onClick:fe,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Save Academic Year"})]}),e==="promotion"&&r.jsx(HX,{promotionMode:T,setPromotionMode:P,fromYear:A,setFromYear:k,toYear:E,finalYearAction:R,setFinalYearAction:$,classes:s,selectedPromotionClass:H,setSelectedPromotionClass:L,selectedPromotionSection:Y,setSelectedPromotionSection:X,holdBackSeqIds:me,setHoldBackSeqIds:K,onBulkPromote:ae,onManualPromote:Se,loading:l}),e==="scoring"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Scoring System"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Configure max marks and weightage for tests"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," Tests are created by SuperAdmin. Here you can configure the scoring parameters (Max Marks and Weightage) for each test."]})}),l?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading tests..."})]}):a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Bb,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tests Found"}),r.jsx("p",{className:"text-gray-600",children:"Tests created by SuperAdmin will appear here."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ask your SuperAdmin to create tests in the Academics section."})]}):r.jsx("div",{className:"space-y-4",children:a.sort((te,se)=>{const Q=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],de=te.className,we=se.className,ce=Q.indexOf(de),Ve=Q.indexOf(we);return ce!==-1&&Ve!==-1?ce-Ve:ce!==-1?-1:Ve!==-1?1:de.localeCompare(we)}).map(te=>{const se=u[te._id]?.maxMarks||te.maxMarks,Q=p.has(te._id),de=te.testName||te.name||"Unnamed Test";return!te.testName&&!te.name&&console.warn(" Test missing name:",te),r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[r.jsxs("div",{onClick:()=>F(te._id),className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Q?r.jsx(Us,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}):r.jsx(zb,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-baseline gap-2",children:r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:de})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:["Class ",te.className]})]})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full flex-shrink-0 ${se?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:se?"Configured":"Not Configured"})]}),Q&&r.jsx("div",{className:"p-4 pt-0 border-t border-gray-100",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Marks"}),r.jsxs("select",{value:u[te._id]?.maxMarks||te.maxMarks||"",onChange:we=>re(te._id,"maxMarks",parseInt(we.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[r.jsx("option",{value:"",children:"Select max marks"}),r.jsx("option",{value:"20",children:"20"}),r.jsx("option",{value:"25",children:"25"}),r.jsx("option",{value:"30",children:"30"}),r.jsx("option",{value:"40",children:"40"}),r.jsx("option",{value:"50",children:"50"}),r.jsx("option",{value:"60",children:"60"}),r.jsx("option",{value:"70",children:"70"}),r.jsx("option",{value:"80",children:"80"}),r.jsx("option",{value:"90",children:"90"}),r.jsx("option",{value:"100",children:"100"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weightage (%)"}),r.jsxs("select",{value:u[te._id]?.weightage||te.weightage||"",onChange:we=>re(te._id,"weightage",parseInt(we.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[r.jsx("option",{value:"",children:"Select weightage"}),r.jsx("option",{value:"5",children:"5%"}),r.jsx("option",{value:"10",children:"10%"}),r.jsx("option",{value:"15",children:"15%"}),r.jsx("option",{value:"20",children:"20%"}),r.jsx("option",{value:"25",children:"25%"}),r.jsx("option",{value:"30",children:"30%"}),r.jsx("option",{value:"35",children:"35%"}),r.jsx("option",{value:"40",children:"40%"}),r.jsx("option",{value:"50",children:"50%"}),r.jsx("option",{value:"60",children:"60%"}),r.jsx("option",{value:"70",children:"70%"}),r.jsx("option",{value:"80",children:"80%"}),r.jsx("option",{value:"100",children:"100%"})]})]})]})})]},te._id)})}),r.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"How it works:"}),' SuperAdmin creates tests (e.g., "Maths for Class 1"). You configure the scoring parameters here. Tests will appear automatically when SuperAdmin adds them.']})})]}),e==="classes"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Class Structure"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," Classes and sections are managed by SuperAdmin. This is a read-only view."]})}),l?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading classes..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ss,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Found"}),r.jsx("p",{className:"text-gray-600",children:"Classes created by SuperAdmin will appear here."}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ask your SuperAdmin to create classes in the Academics section."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map(te=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:["Class ",te.className]}),r.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[te.sections.length," sections"]})]}),r.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded-md",children:r.jsxs("p",{className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(ta,{className:"h-4 w-4 mr-1"}),"Total Students: ",te.studentCount!==void 0?te.studentCount:"..."]})}),te.sections.length>0?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Sections"}),te.sections.map((se,Q)=>r.jsxs("div",{className:"flex items-center justify-between text-sm bg-white border border-gray-100 rounded-md p-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),r.jsxs("span",{className:"text-gray-700",children:["Section ",se]})]}),r.jsxs("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full font-medium",children:[te.sectionCounts?.[se]!==void 0?te.sectionCounts[se]:"..."," students"]})]},Q))]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No sections added"})]},te._id))})]})]})]})]})},YX=({selectedStudents:e,onClose:t,initialOrientation:a="landscape",lockOrientation:n=!1})=>{const[s,o]=S.useState(a),[l,d]=S.useState(!0),[u,m]=S.useState(!1),[p,f]=S.useState(!1),[x,w]=S.useState([]),[j,v]=S.useState(!1),[b,I]=S.useState(null),[T,P]=S.useState(!1),[A,k]=S.useState(n),E="https://erp-backend-1jtx.onrender.com/api",_=async()=>{if(e.length===0){pt.error("Please select at least one student");return}try{m(!0);const L=localStorage.getItem("erp.auth"),Y=L?JSON.parse(L).token:null,X=e.map(oe=>oe._id||oe.id),me=localStorage.getItem("erp.schoolCode")||"";console.log(" Generating ID cards for students:",{studentIds:X.map((oe,G)=>({id:oe,isValidObjectId:/^[0-9a-fA-F]{24}$/.test(oe),studentName:e[G]?.name})),students:e,orientation:s,orientationType:typeof s,orientationValue:`"${s}"`,includeBack:l,apiUrl:`${E}/id-card-templates/generate`,schoolCode:me,hasToken:!!Y}),console.log(" CRITICAL - ORIENTATION VALUE:",s),console.log(" IS PORTRAIT?",s==="portrait"),console.log(" IS LANDSCAPE?",s==="landscape");const K=await lr.post(`${E}/id-card-templates/generate`,{studentIds:X,orientation:s,includeBack:l},{headers:{Authorization:`Bearer ${Y}`,"X-School-Code":me}});if(console.log(" ID cards generated successfully:",K.data),K.data.success){const oe=e.slice(0,K.data.data.totalGenerated).map((G,B)=>({studentId:G._id||G.id,studentName:G.name,sequenceId:G.sequenceId||`STU${String(B+1).padStart(3,"0")}`,frontCard:null,backCard:null,success:!0}));w(oe),v(!0),k(!0),pt.success(K.data.message)}}catch(L){console.error(" Error generating ID cards:",L),console.error("Error details:",{message:L.message,response:L.response?.data,status:L.response?.status});const Y=L.response?.data?.message||"Failed to generate ID cards",X=L.response?.data?.debug?.hint;X?pt.error(`${Y}

${X}`,{duration:6e3}):pt.error(Y)}finally{m(!1)}},R=async()=>{if(e.length===0){pt.error("Please select at least one student");return}try{f(!0);const L=localStorage.getItem("erp.auth"),Y=L?JSON.parse(L).token:null,X=e.map(B=>B._id||B.id),me=localStorage.getItem("erp.schoolCode")||"";console.log(" Downloading ID cards (Bulk ZIP) for students:",{count:e.length,studentIds:X,orientation:s,includeBack:l,schoolCode:me});const K=await lr.post(`${E}/id-card-templates/download`,{studentIds:X,orientation:s,includeBack:l},{headers:{Authorization:`Bearer ${Y}`,"X-School-Code":me},responseType:"blob"}),oe=window.URL.createObjectURL(new Blob([K.data])),G=document.createElement("a");G.href=oe,G.setAttribute("download",`IDCards_Bulk_${Date.now()}.zip`),document.body.appendChild(G),G.click(),G.remove(),window.URL.revokeObjectURL(oe),pt.success(`ID cards downloaded successfully (${e.length} students in folders)`)}catch(L){console.error(" Error downloading ID cards:",L),console.error("Error details:",{message:L.message,response:L.response?.data,status:L.response?.status});const Y=L.response?.data?.message||"Failed to download ID cards",X=L.response?.data?.debug?.hint;X?pt.error(`${Y}

${X}`,{duration:6e3}):pt.error(Y)}finally{f(!1)}},$=async L=>{try{const Y=localStorage.getItem("erp.auth"),X=Y?JSON.parse(Y).token:null,me=localStorage.getItem("erp.schoolCode")||"";console.log(" Downloading ID card for individual student:",L.name);const K=await lr.post(`${E}/id-card-templates/download`,{studentIds:[L._id||L.id],orientation:s,includeBack:l},{headers:{Authorization:`Bearer ${X}`,"X-School-Code":me},responseType:"blob"}),oe=window.URL.createObjectURL(new Blob([K.data])),G=document.createElement("a");G.href=oe,G.setAttribute("download",`IDCard_${L.name.replace(/[^a-zA-Z0-9]/g,"_")}.zip`),document.body.appendChild(G),G.click(),G.remove(),window.URL.revokeObjectURL(oe),pt.success(`ID card downloaded for ${L.name}`)}catch(Y){console.error(" Error downloading individual ID card:",Y),pt.error(`Failed to download ID card for ${L.name}`)}},H=async(L,Y="front")=>{try{const X=localStorage.getItem("erp.auth"),me=X?JSON.parse(X).token:null,K=localStorage.getItem("erp.schoolCode")||"";console.log(" Previewing ID card:",{studentId:L,side:Y,orientation:s});const oe=`${E}/id-card-templates/preview?studentId=${L}&orientation=${s}&side=${Y}`,G=await fetch(oe,{headers:{Authorization:`Bearer ${me}`,"X-School-Code":K}});if(G.ok){const B=await G.blob(),F=URL.createObjectURL(B);I(F),P(!0)}else pt.error("Failed to load preview")}catch(X){console.error("Error loading preview:",X),pt.error("Failed to load preview")}};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Generate ID Cards (",e.length," students)"]}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:""})]}),r.jsx("div",{className:"p-6",children:j?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Hn,{className:"w-6 h-6 text-green-600"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ID Cards Generated Successfully!"})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-green-800",children:["Generated ",x.length," ID cards in ",r.jsx("strong",{children:s})," orientation. You can preview them below or download all as ZIP."]})}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:x.map((L,Y)=>{const X=e.find(me=>(me._id||me.id)===L.studentId);return r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:L.studentName}),r.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",L.studentId]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>H(L.studentId,"front"),className:"text-xs px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:"View Front"}),l&&r.jsx("button",{onClick:()=>H(L.studentId,"back"),className:"text-xs px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:"View Back"}),X&&r.jsxs("button",{onClick:()=>$(X),className:"text-xs px-3 py-1 bg-green-50 text-green-600 rounded hover:bg-green-100 flex items-center gap-1",children:[r.jsx(Ns,{className:"w-3 h-3"}),"Download"]})]})]},Y)})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{v(!1),w([]),k(!1)},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Generate Again"}),r.jsx("button",{onClick:R,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?r.jsxs(r.Fragment,{children:[r.jsx(Hm,{className:"w-5 h-5 animate-spin"}),"Downloading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ns,{className:"w-5 h-5"}),"Download All (Bulk ZIP with Folders)"]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4 flex gap-3",children:[r.jsx(Wa,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Template Setup Required"}),r.jsx("p",{children:"Make sure you have placed your ID card template PNG files in:"}),r.jsx("code",{className:"block mt-1 bg-blue-100 px-2 py-1 rounded text-xs",children:"backend/idcard-templates/"}),r.jsxs("p",{className:"mt-2",children:["Required files: ",s,"-front.png",l&&", "+s+"-back.png"]})]})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose ID Card Orientation"}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg transition-all ${s==="landscape"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${A?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[r.jsx("input",{type:"radio",value:"landscape",checked:s==="landscape",onChange:L=>o(L.target.value),disabled:A,className:"mr-3"}),r.jsx(n4,{className:"w-8 h-8 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Landscape"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Horizontal ID card (85.6mm  54mm) - Credit card style layout"})]})]}),r.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg transition-all ${s==="portrait"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${A?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[r.jsx("input",{type:"radio",value:"portrait",checked:s==="portrait",onChange:L=>o(L.target.value),disabled:A,className:"mr-3"}),r.jsx(s4,{className:"w-8 h-8 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Portrait"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Vertical ID card (54mm  85.6mm) - Vertical layout with larger photo"})]})]})]}),A&&r.jsx("p",{className:"text-xs text-blue-600 mt-2",children:" Orientation is locked as selected from the previous page"})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:l,onChange:L=>d(L.target.checked),className:"mr-2"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include back side"})]})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Students:"}),r.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:e.map(L=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsx("span",{className:"text-sm text-gray-900",children:L.name}),r.jsxs("span",{className:"text-xs text-gray-500",children:[L.className," - ",L.section]})]},L._id))})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:_,disabled:u,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?r.jsxs(r.Fragment,{children:[r.jsx(Hm,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(oa,{className:"w-5 h-5"}),"Generate & Preview"]})}),r.jsx("button",{onClick:R,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?r.jsxs(r.Fragment,{children:[r.jsx(Hm,{className:"w-5 h-5 animate-spin"}),"Downloading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ns,{className:"w-5 h-5"}),"Download ZIP"]})})]})]})})]})}),T&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:r.jsxs("div",{className:`bg-white rounded-lg w-full overflow-auto ${s==="portrait"?"max-w-2xl max-h-[95vh]":"max-w-5xl max-h-[90vh]"}`,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["ID Card Preview (",s==="portrait"?"Portrait":"Landscape",")"]}),r.jsx("button",{onClick:()=>{P(!1),b&&URL.revokeObjectURL(b),I(null)},className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:""})]}),r.jsx("div",{className:"p-6 flex justify-center bg-gray-50",children:r.jsx("img",{src:b,alt:"ID Card Preview",className:`${s==="portrait"?"w-auto h-auto max-h-[80vh]":"max-w-full h-auto"} shadow-lg`})})]})})]})},XX=()=>{const{token:e,user:t}=dr(),{classesData:a,loading:n,error:s,getSectionsByClass:o,hasClasses:l}=gn(),[d,u]=S.useState("subjects"),[m,p]=S.useState([]),[f,x]=S.useState(""),[w,j]=S.useState(""),[v,b]=S.useState([]),[I,T]=S.useState(""),[P,A]=S.useState(""),[k,E]=S.useState(!1),[_,R]=S.useState(""),[$,H]=S.useState(""),[L,Y]=S.useState(""),[X,me]=S.useState(""),[K,oe]=S.useState(!1),[G,B]=S.useState(["Bring this admit card to the examination hall","Report 30 minutes before the exam","Carry valid ID proof with this admit card","Mobile phones strictly prohibited","Follow all examination rules","Malpractice leads to disqualification"]),[F,re]=S.useState(""),[U,ae]=S.useState(""),[W,fe]=S.useState(""),[Se,Ie]=S.useState([]),te=[{id:"landscape",name:"Landscape",description:"Horizontal ID card (85.6mm  54mm)",preview:"Credit card style layout"},{id:"portrait",name:"Portrait",description:"Vertical ID card (54mm  85.6mm)",preview:"Vertical layout with larger photo"}],[se,Q]=S.useState(""),[de,we]=S.useState(!1),[ce,Ve]=S.useState([]),[Be,at]=S.useState([]),[pe,tt]=S.useState([]),[ut,vt]=S.useState({}),[Nt,tr]=S.useState([]),[ar,jt]=S.useState(!1);S.useEffect(()=>{if(f&&a){const ee=o(f);b(ee),ee.length>0?j(ee[0].value):j("")}else b([]),j("")},[f,a]),S.useEffect(()=>{if($&&a){const ee=o($);tr(ee),ee.length>0?Y(ee[0].value):Y("")}else tr([]),Y("")},[$,a]),S.useEffect(()=>{$&&L&&a?Rt():Ve([])},[$,L,a]);const Kt=(a?.classes?.map(ee=>ee.className)||[]).sort((ee,Ce)=>{const Fe=parseInt(ee),ke=parseInt(Ce);return!isNaN(Fe)&&!isNaN(ke)?Fe-ke:ee.localeCompare(Ce)});console.log(" Classes sorted in ascending order:",Kt);const De=async()=>{E(!0);try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"";console.log("Fetching subjects with school code:",ee);const Fe=(await bt.get("/class-subjects/classes")).data;p(Fe.data.classes||[])}catch(ee){console.error("Error fetching class subjects:",ee),pt.error("Error connecting to server, trying fallback..."),await et()}finally{E(!1)}},et=async()=>{try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"";if(!ee){pt.error("School code not available");return}console.log("Trying direct endpoints with school code:",ee);const Fe=(await Promise.all(Kt.map(async ke=>{try{return(await bt.get(`/direct-test/class-subjects/${ke}?schoolCode=${ee}`)).data.data}catch(Ue){return console.error(`Error fetching class ${ke}:`,Ue),null}}))).filter(Boolean);p(Fe),Fe.length>0?pt.success(`Found ${Fe.length} classes using fallback method`):pt.error("No class data available")}catch(ee){console.error("Error in fallback method:",ee),pt.error("Failed to fetch class data")}};S.useEffect(()=>{De()},[]);const Ae=async()=>{if(!f){pt.error("Please select a class first");return}if(!w){pt.error("Please select a section first");return}if(!_.trim()){pt.error("Please enter a subject name");return}try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"";console.log("Adding subject with school code:",ee,"class:",f,"section:",w);const Fe=(await bt.post("/class-subjects/add-subject",{className:f,grade:f,section:w,subjectName:_.trim()})).data;pt.success(Fe.message),R(""),De()}catch(ee){console.error("Error adding subject:",ee),pt.error("Network error while adding subject")}},Xe=async(ee,Ce,Fe)=>{if(confirm(`Remove "${Fe}" from Class ${ee} Section ${Ce}?`))try{const Ue=(await bt.delete("/class-subjects/remove-subject",{data:{className:ee,section:Ce,subjectName:Fe}})).data;pt.success(Ue.message),De()}catch(ke){console.error("Error removing subject:",ke),pt.error("Error removing subject")}},ot=ee=>{ee.key==="Enter"&&Ae()},Ot=async()=>{if(!f||!w){pt.error("Please select a class and section first");return}if(confirm(`Initialize Class ${f} Section ${w} with basic subjects?`)){E(!0);try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"",Fe=(await bt.post("/class-subjects/initialize",{className:f,grade:f,section:w})).data;pt.success(Fe.message),De()}catch(ee){console.error("Error initializing basic subjects:",ee),pt.error("Error initializing basic subjects")}finally{E(!1)}}},Lt=(ee,Ce)=>m.find(ke=>ke.className===ee&&ke.section===Ce)?.subjects||[],gt=ee=>{T(I===ee?"":ee)},nr=(ee,Ce)=>{const Fe=`${ee}-${Ce}`;A(P===Fe?"":Fe)},Rt=async()=>{try{if(!a){console.log(" Classes data not loaded yet, waiting...");return}console.log(" Using tests from useSchoolClasses hook"),console.log(" Available tests data:",a.tests),console.log(" Tests by class:",a.testsByClass),console.log(" Looking for tests in class:",$);let ee=a.testsByClass[$]||[];if(console.log(" Raw class tests for class",$,":",ee),console.log(" Available class keys:",Object.keys(a.testsByClass)),ee.length===0){const Fe=String($);ee=a.testsByClass[Fe]||[],console.log(" Trying alternative key format:",Fe,"Result:",ee),ee.length===0&&(ee=(a.tests||[]).filter(Ue=>Ue.className===$||Ue.className===String($)||String(Ue.className)===String($)),console.log(" Trying direct filter from all tests:",ee))}const Ce=ee.map(Fe=>({id:Fe._id||Fe.testId,name:Fe.testName||Fe.displayName||Fe.name,className:Fe.className,section:L,subjects:[]}));Ve(Ce),console.log(" Fetched tests for class from hook:",Ce),console.log(" Transformed tests count:",Ce.length),Ce.length===0?(console.log(` No tests configured for Class ${$}`),pt.success(`No tests configured for Class ${$}. Please configure tests in the scoring system first.`)):pt.success(`Found ${Ce.length} test(s) for Class ${$}`)}catch(ee){console.error("Error fetching tests:",ee),pt.error("Failed to fetch available tests"),Ve([{id:"mock-1",name:"Unit Test 1",className:$,section:L,subjects:[]},{id:"mock-2",name:"Mid Term Exam",className:$,section:L,subjects:[]}])}},Pr=async()=>{if(!$||!L||!X){pt.error("Please select class, section, and test");return}jt(!0);try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"";try{const Fe=(await bt.get("/class-subjects/classes",{headers:{"x-school-code":ee.toUpperCase()}})).data;console.log(" Class-subjects API response:",Fe);const ke=Fe?.data?.classes?.find(Ue=>Ue.className===$&&Ue.section===L);if(ke&&ke.subjects){const Ue=ke.subjects.filter(Mt=>Mt.isActive!==!1);console.log(" Total subjects:",ke.subjects.length,"Active subjects:",Ue.length);const We=Ue.map(Mt=>({id:`${$}-${L}-${Mt.name}-${X}`,name:Mt.name,className:$,section:L,testName:ce.find(rr=>rr.id===X)?.name||"Test"}));tt(We);const ft={};We.forEach(Mt=>{ft[Mt.id]={subjectId:Mt.id,examDate:"",examTime:"",examHour:"00",examMinute:"00",examAmPm:"AM",roomNumber:""}}),vt(ft),await N(),pt.success(`Found ${We.length} subjects`);return}else console.log(" No subjects found for class-section combination in primary API")}catch(Ce){console.log(" Primary API failed, using fallback method...",Ce)}try{console.log(" Trying fallback endpoint for subjects...");const Fe=(await bt.get(`/direct-test/class-subjects/${$}?schoolCode=${ee}`,{headers:{"x-school-code":ee}})).data;if(console.log(" Fallback API response:",Fe),Fe.data&&Fe.data.subjects&&Fe.data.subjects.length>0){const ke=Fe.data.subjects.map(We=>({id:`${$}-${L}-${We.name}-${X}`,name:We.name,className:$,section:L,testName:ce.find(ft=>ft.id===X)?.name||"Test"}));tt(ke);const Ue={};ke.forEach(We=>{Ue[We.id]={subjectId:We.id,examDate:"",examTime:"",examHour:"00",examMinute:"00",examAmPm:"AM",roomNumber:""}}),vt(Ue),await N(),pt.success(`Found ${ke.length} subjects via fallback`);return}else console.log(" Fallback API returned no subjects")}catch(Ce){console.error(" Fallback API also failed:",Ce)}console.log(" No subjects found for class-section combination"),pt.error(`No subjects configured for Class ${$} Section ${L}. Please add subjects first in the "Class Subjects Management" tab.`),tt([]),vt({})}catch(ee){console.error("Error fetching subjects:",ee),pt.error("Failed to fetch subjects")}finally{jt(!1)}},N=async()=>{if(!$||!L){pt.error("Please select class and section first");return}try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"",Ce=e||localStorage.getItem("erp.authToken");if(!ee||!Ce){pt.error("Authentication required. Please login again."),console.error(" Missing credentials:",{schoolCode:!!ee,token:!!Ce});return}console.log(` Fetching students for Hall Tickets - Class ${$} Section ${L}`);try{const ke=(await bt.get("/users/role/student",{headers:{"X-School-Code":ee.toUpperCase()}})).data;if(ke.success&&ke.data&&ke.data.length>0){const Ue=ke.data.filter(We=>{const ft=We.studentDetails?.currentClass||We.currentclass||We.class||We.className,Mt=We.studentDetails?.currentSection||We.currentsection||We.section;return String(ft)===String($)&&String(Mt).toUpperCase()===String(L).toUpperCase()});if(Ue.length>0){const We=Ue.map((ft,Mt)=>({id:ft._id||ft.id,name:ft.name?.displayName||`${ft.name?.firstName||""} ${ft.name?.lastName||""}`.trim()||ft.firstname+" "+ft.lastname||"Unknown Student",rollNumber:ft.studentDetails?.rollNumber||ft.rollNumber||ft.sequenceId||`${ee}-${L}-${String(Mt+1).padStart(4,"0")}`,sequenceId:ft.userId||ft.studentDetails?.admissionNumber||ft.sequenceId||`${ee}-${L}-${String(Mt+1).padStart(4,"0")}`,className:$,section:L,profileImage:(()=>{const rr=ft.profileImage||ft.profilePicture;return rr?rr.startsWith("/uploads")?`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${rr}`:rr:null})()}));at(We),pt.success(`Loaded ${We.length} students for Class ${$} Section ${L}`),console.log(" Real students loaded:",We);return}else{console.log(` No students found for Class ${$} Section ${L} in ${ke.data.length} total students`),at([]),pt.error(`No students found for Class ${$} Section ${L}`);return}}}catch(Fe){console.log(" Students API failed:",Fe)}try{console.log(" Trying school-users endpoint pattern...");const ke=(await bt.get(`/school-users/${ee}/users`)).data;if(console.log(" School-users API Response:",ke),ke.success&&ke.data&&ke.data.length>0){const Ue=ke.data.filter(We=>{const ft=We.role==="student",Mt=We.studentDetails?.currentClass||We.currentclass||We.class||We.className,rr=We.studentDetails?.currentSection||We.currentsection||We.section,Vr=`${We.name?.firstName||We.firstname||""} ${We.name?.lastName||We.lastname||""}`.trim();return console.log(` School-user: ${Vr}, Role: ${We.role}, Class: ${Mt}, Section: ${rr}`),ft&&String(Mt)===String($)&&String(rr).toUpperCase()===String(L).toUpperCase()});if(console.log(` Filtered students from school-users for Class ${$} Section ${L}:`,Ue),Ue.length>0){const We=Ue.map((ft,Mt)=>({id:ft._id||ft.id,name:ft.name?.displayName||`${ft.name?.firstName||""} ${ft.name?.lastName||""}`.trim()||ft.firstname+" "+ft.lastname||"Unknown Student",rollNumber:ft.studentDetails?.rollNumber||ft.rollNumber||ft.sequenceId||`${ee}-${L}-${String(Mt+1).padStart(4,"0")}`,sequenceId:ft.userId||ft.studentDetails?.admissionNumber||ft.sequenceId||`${ee}-${L}-${String(Mt+1).padStart(4,"0")}`,className:$,section:L,profileImage:(()=>{const rr=ft.profileImage||ft.profilePicture;return rr?rr.startsWith("/uploads")?`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${rr}`:rr:null})()}));at(We),pt.success(`Loaded ${We.length} students for Class ${$} Section ${L}`),console.log(" Real students loaded from school-users endpoint:",We);return}else{console.log(` No students found in school-users endpoint for Class ${$} Section ${L}`),at([]),pt.error(`No students found for Class ${$} Section ${L}`);return}}}catch(Fe){console.log(" School-users API also failed:",Fe)}console.log(" No students found for the selected class and section"),at([]),pt.error(`No students found for Class ${$} Section ${L}. Please add students to this class first.`)}catch(ee){console.error("Error in fetchStudentsForClass:",ee),at([])}},Ne=async()=>{try{const ee=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"";if(!ee||!e){pt.error("Authentication error. Please login again.");return}console.log(` Fetching students for ID Cards - Class ${U} Section ${W}`);try{const Fe=(await bt.get("/users/role/student",{headers:{"X-School-Code":ee.toUpperCase()}})).data;if(Fe.success&&Fe.data&&Fe.data.length>0){const ke=Fe.data.filter(Ue=>{const We=Ue.studentDetails?.currentClass||Ue.currentclass||Ue.class||Ue.className,ft=Ue.studentDetails?.currentSection||Ue.currentsection||Ue.section;return String(We)===String(U)&&String(ft).toUpperCase()===String(W).toUpperCase()});if(ke.length>0){const Ue=ke.map((We,ft)=>({_id:We._id||We.id,id:We._id||We.id,name:We.name?.displayName||`${We.name?.firstName||""} ${We.name?.lastName||""}`.trim()||"Unknown Student",rollNumber:We.studentDetails?.rollNumber||We.rollNumber||`${ee}-${W}-${String(ft+1).padStart(4,"0")}`,sequenceId:We.userId||We.studentDetails?.admissionNumber||`${ee}-${W}-${String(ft+1).padStart(4,"0")}`,className:U,section:W,profileImage:We.profileImage||We.profilePicture||null,fatherName:We.parentDetails?.fatherName||We.fatherName||We.parent?.father?.name||"Not Available",motherName:We.parentDetails?.motherName||We.motherName||We.parent?.mother?.name||"Not Available",dateOfBirth:We.personalDetails?.dateOfBirth||We.dateOfBirth||We.dob||We.personal?.dateOfBirth||"Not Available",bloodGroup:We.personalDetails?.bloodGroup||We.bloodGroup||We.personal?.bloodGroup||We.medicalInfo?.bloodGroup||"Not Available",address:We.address?.permanent?.street||We.address?.street||We.personalDetails?.address||We.address||"Not Available",phone:We.contact?.primaryPhone||We.contact?.phone||We.phone||We.personalDetails?.phone||"Not Available"}));Ie(Ue),pt.success(`Loaded ${Ue.length} students for ID card generation`),console.log(" ID Card students loaded:",Ue);return}else{console.log(` No students found for Class ${U} Section ${W}`),Ie([]),pt.error(`No students found for Class ${U} Section ${W}`);return}}}catch(Ce){console.log(" ID Card Students API failed:",Ce)}console.log(" No students found for the selected class and section"),Ie([]),pt.error(`No students found for Class ${U} Section ${W}. Please add students to this class first.`)}catch(ee){console.error("Error in fetchStudentsForIdCards:",ee),Ie([])}},Br=()=>{F.trim()&&!G.includes(F.trim())?(B(ee=>[...ee,F.trim()]),re(""),pt.success("Instruction added successfully")):G.includes(F.trim())&&pt.error("This instruction already exists")},Zt=ee=>{B(Ce=>Ce.filter((Fe,ke)=>ke!==ee)),pt.success("Instruction removed successfully")},Pe=()=>{B(["Bring this admit card to the examination hall","Report 30 minutes before the exam","Carry valid ID proof with this admit card","Mobile phones strictly prohibited","Follow all examination rules","Malpractice leads to disqualification"]),pt.success("Instructions reset to default")},st=(ee,Ce,Fe)=>{vt(ke=>{const Ue=ke[ee]||{subjectId:ee,examDate:"",examTime:"",examHour:"00",examMinute:"00",examAmPm:"AM",roomNumber:""},We={...Ue,[Ce]:Fe};if(Ce==="examHour"||Ce==="examMinute"||Ce==="examAmPm"){const ft=Ce==="examHour"?Fe:Ue.examHour||"00",Mt=Ce==="examMinute"?Fe:Ue.examMinute||"00",rr=Ce==="examAmPm"?Fe:Ue.examAmPm||"AM";let Vr=parseInt(ft);ft==="00"&&(Vr=12),rr==="AM"&&Vr===12&&(Vr=0),rr==="PM"&&Vr!==12&&(Vr+=12),We.examTime=`${Vr.toString().padStart(2,"0")}:${Mt}`,console.log(` Auto-updating examTime: ${ft}:${Mt} ${rr}  ${We.examTime}`)}return{...ke,[ee]:We}})},qe=ee=>new Promise((Ce,Fe)=>{console.log(" Starting image conversion for URL:",ee);const ke=new Image;ke.crossOrigin="anonymous",ke.onload=()=>{console.log(" Image loaded successfully, converting to base64...");try{const Ue=document.createElement("canvas"),We=Ue.getContext("2d");if(!We){Fe(new Error("Failed to get canvas context"));return}Ue.width=ke.width,Ue.height=ke.height,We.drawImage(ke,0,0);const ft=Ue.toDataURL("image/png");console.log(" Base64 conversion successful, length:",ft.length),Ce(ft)}catch(Ue){console.error(" Canvas conversion error:",Ue),Fe(Ue)}},ke.onerror=Ue=>{console.error(" Image load error:",Ue),console.error(" Failed URL:",ee),Fe(new Error("Failed to load image from URL"))},ke.src=ee,console.log(" Image src set, waiting for load...")}),lt=async()=>{const ee=pe.filter(Fe=>{const ke=ut[Fe.id],Ue=ke?.examDate&&ke?.examHour&&ke?.examMinute&&ke?.examAmPm;return console.log(` Checking subject ${Fe.name}:`,{examDate:ke?.examDate,examHour:ke?.examHour,examMinute:ke?.examMinute,examAmPm:ke?.examAmPm,roomNumber:ke?.roomNumber,hasRequiredFields:Ue}),K?Ue&&ke?.roomNumber:Ue});if(ee.length===0){const Fe=K?"exam date, time, and room number":"exam date and time";pt.error(`Please fill ${Fe} for at least one subject`);return}if(Be.length===0){pt.error("No students found for hall ticket generation");return}const Ce=pt.loading("Preparing admit cards with school information...");try{const Fe=ce.find(Yt=>Yt.id===X)?.name||"Exam";let ke={schoolName:t?.schoolName||"School Name",schoolCode:t?.schoolCode||"SCH001",website:"www.edulogix.com",logoUrl:"",headerColor:"#1f2937",accentColor:"#3b82f6",address:"123 School Street, City, State 12345",phone:"+91-XXXXXXXXXX",email:"info@school.com"};const Ue=localStorage.getItem("universalTemplate");if(console.log(" Raw localStorage data:",Ue),Ue)try{const Yt=JSON.parse(Ue);console.log(" Parsed template data:",Yt),ke={...ke,...Yt},console.log(" Using saved UniversalTemplate settings:",ke)}catch(Yt){console.log(" Failed to parse saved template data:",Yt)}else console.log(" No universalTemplate found in localStorage"),console.log(" Available localStorage keys:",Object.keys(localStorage));const We=ke.schoolCode==="SCH001"||ke.schoolName==="School Name";if((!Ue||We)&&(t?.schoolCode||t?.schoolId)){console.log("No saved template, fetching school data using UniversalTemplate logic...");let Yt=null;try{console.log("Fetching school info using school API...");let Ur;const ur=t?.schoolId||t?.schoolCode;if(ur)try{Ur=await bt.get(`/schools/${ur}/info`),console.log("Success with school info endpoint:",Ur?.data)}catch{console.log("School info endpoint failed, trying original endpoint..."),Ur=await Ha.getSchoolById(ur),console.log("Success with original endpoint:",Ur?.data)}const _t=Ur?.data?.data||Ur?.data;if(_t&&(_t.name||_t.schoolName)){console.log("School data found:",_t);let ra="123 School Street, City, State 12345";if(_t.address){const Cr=_t.address;ra=[Cr.area||Cr.street?.substring(0,30),Cr.city,Cr.state,Cr.pinCode||Cr.zipCode].filter(Boolean).join(", "),ra.length>60&&(ra=ra.substring(0,57)+"...")}let pr=_t.contact?.website||_t.website||"www.edulogix.com";pr.length>25&&(pr=pr.replace(/^https?:\/\//,"").replace(/^www\./,""),pr.length>25&&(pr=pr.substring(0,22)+"..."));let Or="";_t.logoUrl&&(_t.logoUrl.startsWith("/uploads")?(Or=`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${_t.logoUrl}`,console.log(" Constructed logo URL:",Or)):(Or=_t.logoUrl,console.log(" Using direct logo URL:",Or))),Yt={schoolName:_t.name||_t.schoolName||t?.schoolName,schoolCode:_t.code||_t.schoolCode||t?.schoolCode,address:ra,phone:_t.contact?.phone||_t.phone||_t.contactNumber||ke.phone,email:_t.contact?.email||_t.email||_t.contactEmail||_t.principalEmail||ke.email,website:pr,logoUrl:Or}}Yt?ke={...ke,schoolName:Yt.schoolName||ke.schoolName,schoolCode:Yt.schoolCode||ke.schoolCode,address:Yt.address||ke.address,phone:Yt.phone||ke.phone,email:Yt.email||ke.email,website:Yt.website||ke.website,logoUrl:Yt.logoUrl||ke.logoUrl}:(console.log("Using fallback data from user context"),ke={...ke,schoolName:t?.schoolName||ke.schoolName,schoolCode:t?.schoolCode||ke.schoolCode})}catch(Ur){console.log("Failed to fetch from school API:",Ur.response?.status||Ur.message)}}(ke.schoolCode==="SCH001"||ke.schoolName==="School Name")&&(console.log(" Still have default values, trying user context..."),console.log(" User context:",t),t?.schoolCode&&t.schoolCode!=="SCH001"&&(ke.schoolCode=t.schoolCode),t?.schoolName&&t.schoolName!=="School Name"&&(ke.schoolName=t.schoolName),t?.schoolCode==="SB"&&(ke={...ke,schoolName:"South Bridge School",schoolCode:"SB",address:"Vijayanagar, Bengaluru, Karnataka, 560040",phone:"+91-1234567890",email:"revathi.sb@gmail.com",website:"www.southbridgeschool.com"},console.log(" Applied SB school data override")),console.log(" Updated templateSettings from user context:",ke)),console.log(" Final templateSettings for admit cards:",ke),console.log(" Logo URL being used:",ke.logoUrl||"No logo URL found");let ft="";if(ke.logoUrl)try{console.log(" Converting logo to base64 for print compatibility..."),ft=await qe(ke.logoUrl),console.log(" Logo converted to base64 successfully"),ft&&(ke.logoUrl=ft,console.log(" Using base64 logo for hall tickets"))}catch(Yt){console.log(" Failed to convert logo to base64:",Yt),console.log(" Will use original URL as fallback")}pt.dismiss(Ce);const Mt=window.open("","_blank","width=800,height=600");if(!Mt){pt.error("Please allow popups to generate hall tickets");return}console.log(" School data being used in admit cards:",{source:Ue?"localStorage (UniversalTemplate)":"API or defaults",data:ke});const rr=[...ee].sort((Yt,Ur)=>{const ur=ut[Yt.id],_t=ut[Ur.id];console.log(` Sorting: ${Yt.name} (${ur.examDate} ${ur.examTime}) vs ${Ur.name} (${_t.examDate} ${_t.examTime})`);const ra=new Date(ur.examDate),pr=new Date(_t.examDate);if(ra.getTime()!==pr.getTime()){const Aa=ra.getTime()-pr.getTime();return console.log(` Date comparison: ${ur.examDate} vs ${_t.examDate} = ${Aa}`),Aa}const Or=(Aa,Va,Ga)=>{if(!Aa||!Va||!Ga)return 0;let Pa=parseInt(Aa);const Is=parseInt(Va);return Pa===0&&(Pa=12),Ga==="AM"&&Pa===12&&(Pa=0),Ga==="PM"&&Pa!==12&&(Pa+=12),Pa*60+Is},Cr=Or(ur.examHour,ur.examMinute,ur.examAmPm),La=Or(_t.examHour,_t.examMinute,_t.examAmPm),xn=Cr-La;return console.log(` Time comparison: ${ur.examHour}:${ur.examMinute} ${ur.examAmPm} (${Cr}min) vs ${_t.examHour}:${_t.examMinute} ${_t.examAmPm} (${La}min) = ${xn}`),xn});console.log(" Final sorted subjects:",rr.map(Yt=>({name:Yt.name,date:ut[Yt.id].examDate,time:ut[Yt.id].examTime})));const Vr=Be.map(Yt=>{const Ur=rr.map(ur=>{const _t=ut[ur.id];return{id:ur.id,name:ur.name,examDate:_t.examDate,examTime:_t.examTime,examHour:_t.examHour,examMinute:_t.examMinute,examAmPm:_t.examAmPm,roomNumber:_t.roomNumber}});try{return Jm.renderToString(ge.createElement(v1,{settings:ke,student:Yt,subjects:Ur,testName:Fe,enableRoomNumbers:K,instructions:G.length>0?G:void 0,mode:"print"}))}catch(ur){return console.error("Error rendering AdmitCardTemplate:",ur),`
            <div style="page-break-after: always; padding: 20px; font-family: Arial, sans-serif;">
              <h1>${ke.schoolName}</h1>
              <h2>ADMIT CARD</h2>
              <p><strong>Student:</strong> ${Yt.name}</p>
              <p><strong>Class:</strong> ${Yt.className} - Section ${Yt.section}</p>
              <p><strong>Roll Number:</strong> ${Yt.rollNumber}</p>
              <p>Error rendering template. Please try again.</p>
            </div>
          `}}).join(""),Gr=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Hall Tickets - ${Fe}</title>
            <style>
              @media print {
                body { margin: 0; padding: 0; }
                .no-print { display: none !important; }
              }
              @page {
                size: A4;
                margin: 0;
              }
              body {
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                line-height: 1.3;
                font-size: 12px;
              }
            </style>
          </head>
          <body>
            ${Vr}
            <script>
              window.onload = function() {
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;Mt.document.write(Gr),Mt.document.close(),pt.success(`Admit cards generated for ${Be.length} students with ${ee.length} subjects`),console.log("Admit cards generated successfully:",{students:Be.length,subjects:ee.length,testName:Fe})}catch(Fe){console.error("Error generating admit cards:",Fe),pt.dismiss(Ce),pt.error("Failed to generate admit cards")}};return de&&Se.length>0?r.jsx(YX,{selectedStudents:Se.map(ee=>({id:ee.id,_id:ee.id,name:ee.name,sequenceId:ee.sequenceId||ee.rollNumber||`STU${ee.id}`,rollNumber:ee.rollNumber,className:ee.className,section:ee.section,profileImage:ee.profileImage,dateOfBirth:ee.dateOfBirth,bloodGroup:ee.bloodGroup,fatherName:ee.fatherName,motherName:ee.motherName,address:ee.address,phone:ee.phone,email:ee.email})),onClose:()=>we(!1),initialOrientation:se,lockOrientation:!0}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-4 lg:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 lg:p-6 mb-3 sm:mb-4 lg:mb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[r.jsx(ss,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"}),r.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800",children:"Academic Management"})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage subjects and generate hall tickets for your school"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md mb-4 sm:mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex flex-col sm:flex-row sm:space-x-8 px-3 sm:px-6 overflow-x-auto",children:[r.jsx("button",{onClick:()=>u("subjects"),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm w-full sm:w-auto ${d==="subjects"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[r.jsx(ss,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:"Class Subjects Management"})]})}),r.jsx("button",{onClick:()=>u("hallticket"),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm w-full sm:w-auto ${d==="hallticket"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[r.jsx(fa,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:"Hall Ticket Generation"})]})}),r.jsx("button",{onClick:()=>u("idcard"),className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm w-full sm:w-auto ${d==="idcard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[r.jsx(Ul,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:"School ID Card Generation"})]})})]})})}),s&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("p",{className:"text-red-800 text-sm",children:["Error loading classes: ",s]})}),!n&&!l()&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-yellow-800 text-sm",children:"No classes have been configured for your school yet. Please contact your super admin to add classes."})}),d==="subjects"&&r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Add New Subject"}),r.jsx("button",{onClick:Ot,disabled:k||!f||!w,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm",children:"Initialize Basic Subjects"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Class ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:f,onChange:ee=>x(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Choose a class..."}),Kt.map(ee=>r.jsxs("option",{value:ee,children:["Class ",ee]},ee))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Section ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:w,onChange:ee=>j(ee.target.value),disabled:!f||v.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Choose section..."}),v.map(ee=>r.jsxs("option",{value:ee.value,children:["Section ",ee.section]},ee.value))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:_,onChange:ee=>R(ee.target.value),onKeyPress:ot,placeholder:"Enter subject name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("button",{onClick:Ae,disabled:!f||!w||!_.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r.jsx(is,{className:"h-4 w-4"}),"Add Subject"]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Classes & Subjects"}),k||n?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading classes..."})]}):Kt.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"No classes configured. Please contact your super admin."})}):r.jsx("div",{className:"space-y-3",children:Kt.map(ee=>{const Ce=I===ee,Fe=a?.sectionsByClass?.[ee]||[];return r.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[r.jsx("div",{onClick:()=>gt(ee),className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[Ce?r.jsx(Us,{className:"h-4 w-4 text-gray-600"}):r.jsx(zb,{className:"h-4 w-4 text-gray-600"}),r.jsxs("h3",{className:"text-lg font-medium text-gray-800",children:["Class ",ee]}),r.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:[Fe.length," section",Fe.length!==1?"s":""]})]})}),Ce&&r.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:Fe.length===0?r.jsxs("p",{className:"text-gray-500 text-center py-4",children:["No sections configured for Class ",ee]}):r.jsx("div",{className:"space-y-2 p-4",children:Fe.map(ke=>{const Ue=ke.section,We=`${ee}-${Ue}`,ft=P===We,Mt=Lt(ee,Ue);return r.jsxs("div",{className:"border border-gray-300 rounded-lg bg-white",children:[r.jsx("div",{onClick:()=>nr(ee,Ue),className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-2",children:[ft?r.jsx(Us,{className:"h-3 w-3 text-gray-600"}):r.jsx(zb,{className:"h-3 w-3 text-gray-600"}),r.jsxs("h4",{className:"text-base font-medium text-gray-700",children:["Section ",Ue]}),r.jsxs("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full",children:[Mt.length," subject",Mt.length!==1?"s":""]})]})}),ft&&r.jsx("div",{className:"border-t border-gray-200 p-3",children:Mt.length===0?r.jsxs("p",{className:"text-gray-500 text-center py-3 text-sm",children:["No subjects added yet for Class ",ee," Section ",Ue]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Mt.map((rr,Vr)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("span",{className:"text-gray-800 font-medium text-sm",children:rr.name}),r.jsx("button",{onClick:Gr=>{Gr.stopPropagation(),Xe(ee,Ue,rr.name)},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Remove subject",children:r.jsx(pn,{className:"h-3 w-3"})})]},Vr))})})]},We)})})})]},ee)})})]})]}),d==="hallticket"&&r.jsxs("div",{children:[a&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Debug Info:"}),r.jsxs("div",{className:"text-xs text-yellow-700 space-y-1",children:[r.jsx("p",{children:"Classes Data Loaded: "}),r.jsxs("p",{children:["Total Tests: ",a.tests?.length||0]}),r.jsxs("p",{children:["Tests by Class Keys: ",Object.keys(a.testsByClass||{}).join(", ")]}),r.jsxs("p",{children:["Selected Class: ",$]}),r.jsxs("p",{children:["Selected Section: ",L]}),r.jsxs("p",{children:["Available Tests: ",ce.length]}),r.jsxs("p",{children:["Selected Test: ",X]}),r.jsxs("p",{children:["Subjects Found: ",pe.length]})]}),$&&L&&pe.length===0&&r.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded",children:[r.jsxs("p",{className:"text-xs text-red-700",children:["No subjects found for Class ",$," Section ",L,'. Please add subjects in the "Class Subjects Management" tab first.']}),r.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Available classes in database: Check console for details"})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Generate Hall Tickets"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Class ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:$,onChange:ee=>H(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Choose a class..."}),Kt.map(ee=>r.jsxs("option",{value:ee,children:["Class ",ee]},ee))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Section ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:L,onChange:ee=>Y(ee.target.value),disabled:!$||Nt.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Choose section..."}),Nt.map(ee=>r.jsxs("option",{value:ee.value,children:["Section ",ee.section]},ee.value))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Test Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:X,onChange:ee=>me(ee.target.value),disabled:!$||!L||ce.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Choose test..."}),ce.map(ee=>r.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"enableRoomNumbers",checked:K,onChange:ee=>oe(ee.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"enableRoomNumbers",className:"text-sm font-medium text-gray-700",children:"Include Room Numbers in Hall Tickets"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-7",children:K?"Room numbers will be required and displayed in the hall tickets":"Room numbers will be optional and not displayed in the hall tickets"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Manage Hall Ticket Instructions"}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:F,onChange:ee=>re(ee.target.value),placeholder:"Enter new instruction...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:ee=>ee.key==="Enter"&&Br()}),r.jsx("button",{onClick:Br,disabled:!F.trim(),className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Add"})]}),r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Current Instructions:"}),G.map((ee,Ce)=>r.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border",children:[r.jsx("span",{className:"text-xs text-gray-700 flex-1",children:ee}),r.jsx("button",{onClick:()=>Zt(Ce),className:"ml-2 px-2 py-1 bg-red-100 text-red-600 text-xs rounded hover:bg-red-200",children:"Remove"})]},Ce))]}),r.jsx("button",{onClick:Pe,className:"px-3 py-1 bg-gray-600 text-white text-xs rounded-md hover:bg-gray-700",children:"Reset to Default Instructions"})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.jsx("div",{className:"flex items-end",children:r.jsxs("button",{onClick:Pr,disabled:!$||!L||!X,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r.jsx(Tn,{className:"h-4 w-4"}),"Search Subjects"]})})})]})}),pe.length>0&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Subjects for ",ce.find(ee=>ee.id===X)?.name," - Class ",$," Section ",L]}),r.jsxs("button",{onClick:lt,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2",children:[r.jsx(fa,{className:"h-4 w-4"}),"Generate Hall Tickets"]})]}),ar?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading subjects..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam Time"}),K&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room Number"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(ee=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ee.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(la,{className:"h-4 w-4 text-gray-400"}),r.jsx("input",{type:"date",value:ut[ee.id]?.examDate||"",onChange:Ce=>st(ee.id,"examDate",Ce.target.value),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("select",{value:ut[ee.id]?.examHour||"00",onChange:Ce=>st(ee.id,"examHour",Ce.target.value),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"60px"},children:[r.jsx("option",{value:"00",children:"00"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(Ce=>r.jsx("option",{value:Ce.toString(),children:Ce},Ce))]}),r.jsx("span",{className:"text-gray-500",children:":"}),r.jsx("select",{value:ut[ee.id]?.examMinute||"00",onChange:Ce=>st(ee.id,"examMinute",Ce.target.value),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"60px"},children:Array.from({length:60},(Ce,Fe)=>Fe.toString().padStart(2,"0")).map(Ce=>r.jsx("option",{value:Ce,children:Ce},Ce))}),r.jsxs("select",{value:ut[ee.id]?.examAmPm||"AM",onChange:Ce=>st(ee.id,"examAmPm",Ce.target.value),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:"60px"},children:[r.jsx("option",{value:"AM",children:"AM"}),r.jsx("option",{value:"PM",children:"PM"})]})]})}),K&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(r4,{className:"h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:ut[ee.id]?.roomNumber||"",onChange:Ce=>st(ee.id,"roomNumber",Ce.target.value),placeholder:"Room No.",className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})]},ee.id))})]})})]}),Be.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Eligible Students (",Be.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Be.map(ee=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ee.name}),r.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["Sequence ID: ",ee.sequenceId||ee.rollNumber]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Class ",ee.className," - Section ",ee.section]})]}),r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-bold text-xs",children:(ee.sequenceId||ee.rollNumber).split("-").pop()})})]})},ee.id))})]})]})]}),d==="idcard"&&r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Generate School ID Cards"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Class ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:U,onChange:ee=>{ae(ee.target.value),fe(""),Ie([])},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Choose a class..."}),Kt.map(ee=>r.jsxs("option",{value:ee,children:["Class ",ee]},ee))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Section ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:W,onChange:ee=>{fe(ee.target.value),Ie([])},disabled:!U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Choose section..."}),U&&o(U).map(ee=>r.jsxs("option",{value:ee.value,children:["Section ",ee.section]},ee.value))]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:Ne,disabled:!U||!W,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[r.jsx(Tn,{className:"h-4 w-4"}),"Load Students"]})}),Se.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Choose ID Card Orientation"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:te.map(ee=>r.jsx("div",{onClick:()=>{Q(ee.id)},className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${se===ee.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-full h-24 rounded-lg mb-3 flex items-center justify-center ${ee.id==="landscape"?"bg-blue-100":"bg-green-100"}`,children:ee.id==="landscape"?r.jsx(n4,{className:"h-12 w-12 text-blue-600"}):r.jsx(s4,{className:"h-12 w-12 text-green-600"})}),r.jsx("h4",{className:"font-semibold text-sm text-gray-800 mb-1",children:ee.name}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:ee.description}),r.jsx("p",{className:"text-xs text-gray-500",children:ee.preview})]})},ee.id))})]}),Se.length>0&&se&&r.jsxs("div",{className:"text-center",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Ready to Generate ID Cards"}),r.jsx("div",{className:"flex gap-4 justify-center",children:r.jsxs("button",{onClick:()=>we(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(Ul,{className:"h-5 w-5"}),"Preview & Generate ID Cards (",Se.length," students)"]})}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Preview individual cards and download as PNG images organized in folders"})]})]}),Se.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Eligible Students (",Se.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Se.map(ee=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:ee.name}),r.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["Sequence ID: ",ee.sequenceId||ee.rollNumber]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Class ",ee.className," - Section ",ee.section]})]}),r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-bold text-xs",children:(ee.sequenceId||ee.rollNumber).split("-").pop()})})]})},ee.id))})]})]})]})})},JX=()=>{const[e,t]=S.useState({"landscape-front":null,"landscape-back":null,"portrait-front":null,"portrait-back":null}),[a,n]=S.useState(!1),[s,o]=S.useState("landscape-front"),[l,d]=S.useState(!1),u="https://erp-backend-1jtx.onrender.com/api",m=async()=>{n(!0);const x={};for(const w of Object.keys(e))try{const j=`/idcard-templates/${w}.png`;(await fetch(`${u.replace("/api","")}${j}`)).ok?x[w]=j:x[w]=null}catch{x[w]=null}t(x),n(!1)};S.useEffect(()=>{m()},[]);const f=[{key:"landscape-front",name:"Landscape Front",description:"Front side of landscape ID card (85.6mm  54mm)",size:"1020  648 pixels"},{key:"landscape-back",name:"Landscape Back",description:"Back side of landscape ID card (85.6mm  54mm)",size:"1020  648 pixels"},{key:"portrait-front",name:"Portrait Front",description:"Front side of portrait ID card (54mm  85.6mm)",size:"648  1020 pixels"},{key:"portrait-back",name:"Portrait Back",description:"Back side of portrait ID card (54mm  85.6mm)",size:"648  1020 pixels"}].find(x=>x.key===s);return r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Template Preview"}),r.jsxs("button",{onClick:m,disabled:a,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[r.jsx(tf,{className:`w-4 h-4 ${a?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template to Preview"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s,onChange:x=>o(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[r.jsx("option",{value:"landscape-front",children:"Landscape - Front Side"}),r.jsx("option",{value:"landscape-back",children:"Landscape - Back Side"}),r.jsx("option",{value:"portrait-front",children:"Portrait - Front Side"}),r.jsx("option",{value:"portrait-back",children:"Portrait - Back Side"})]}),r.jsx(Us,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),r.jsx("div",{className:"border border-gray-200 rounded-lg p-6 bg-white",children:f&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.description}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Recommended size: ",f.size]})]}),e[f.key]?r.jsx(Hn,{className:"w-6 h-6 text-green-600 flex-shrink-0"}):r.jsx(Wa,{className:"w-6 h-6 text-red-600 flex-shrink-0"})]}),e[f.key]?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-4 bg-gray-50 rounded-lg overflow-hidden border border-gray-200 flex items-center justify-center",style:{minHeight:"400px"},children:r.jsx("img",{src:`${u.replace("/api","")}${e[f.key]}`,alt:f.name,className:"max-w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"}})}),r.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r.jsx(oa,{className:"w-4 h-4"}),"View Full Size"]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Wa,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),r.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Template Not Found"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Please add ",r.jsxs("code",{className:"bg-red-100 px-2 py-1 rounded font-mono text-xs",children:[f.key,".png"]})," to:"]}),r.jsx("code",{className:"block bg-gray-100 px-3 py-2 rounded text-xs font-mono text-gray-700",children:"backend/idcard-templates/"})]})]})}),l&&e[s]&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Template Preview"}),r.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-2xl leading-none",children:""})]}),r.jsx("div",{className:"p-6 flex justify-center bg-gray-100",children:r.jsx("img",{src:`${u.replace("/api","")}${e[s]}`,alt:"Template Preview",className:"max-w-full h-auto shadow-lg"})})]})}),a&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:r.jsxs("div",{className:"bg-white rounded-lg p-6",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-700",children:"Checking templates..."})]})})]})};async function sO(e){console.log(" Marking session attendance:",e);const t=await bt.post("/attendance/mark-session",e);return console.log(" Session attendance marked:",t.data),t.data}async function Yf(e){console.log(" Getting attendance with params:",e);const t=await bt.get("/attendance",{params:e});return console.log(" Attendance retrieved:",t.data),t.data}async function j1(e){console.log(" Checking session status with params:",e);const t=await bt.get("/attendance/session-status",{params:e});return console.log(" Session status checked:",t.data),t.data}const ZX=()=>{const{token:e,user:t}=dr(),{classesData:a,loading:n,getSectionsByClass:s,hasClasses:o}=gn(),[l,d]=S.useState(new Date().toISOString().split("T")[0]),[u,m]=S.useState(""),[p,f]=S.useState(""),[x,w]=S.useState([]),[j,v]=S.useState("morning"),[b,I]=S.useState([]),[T,P]=S.useState([]),[A,k]=S.useState(""),[E,_]=S.useState(!1),[R,$]=S.useState(""),[H,L]=S.useState(""),[Y,X]=S.useState({morning:{isMarked:!1,isFrozen:!1,canModify:!0},afternoon:{isMarked:!1,isFrozen:!1,canModify:!0}}),me=a?.classes?.map(Q=>Q.className)||[];S.useEffect(()=>{if(u&&a){const Q=s(u);w(Q),Q.length>0?f(Q[0].value):f("")}else w([]),f("")},[u,a]),S.useEffect(()=>{u&&p&&e&&t?.schoolCode?oe():I([])},[u,p,e,t?.schoolCode]),S.useEffect(()=>{u&&p&&l&&K()},[u,p,l,j]),S.useEffect(()=>{b.length>0&&l&&B()},[b.length,l,j]),S.useEffect(()=>{G()},[b,A]);const K=async()=>{if(!(!u||!p||!l))try{const Q=await j1({class:u,section:p,date:l,session:"morning"}),de=await j1({class:u,section:p,date:l,session:"afternoon"});X({morning:{isMarked:Q.isMarked||!1,isFrozen:Q.isFrozen||!1,canModify:Q.canModify!==!1,data:Q.data},afternoon:{isMarked:de.isMarked||!1,isFrozen:de.isFrozen||!1,canModify:de.canModify!==!1,data:de.data}})}catch(Q){console.warn("Could not check session status:",Q),X({morning:{isMarked:!1,isFrozen:!1,canModify:!0},afternoon:{isMarked:!1,isFrozen:!1,canModify:!0}})}},oe=async()=>{if(!u||!p){I([]);return}if(!e||!t?.schoolCode){$("Authentication required");return}try{_(!0),$(""),console.log(" Fetching students for:",{class:u,section:p,schoolCode:t.schoolCode});const de=(await bt.get(`/users/role/student?class=${u}&section=${p}`,{headers:{"x-school-code":t.schoolCode}})).data;console.log(" API Response:",de);const we=de.data||de||[];console.log(` Total users received: ${we.length}`);const ce=we.filter(Be=>{const at=Be.role==="student",pe=Be.academicInfo?.class===u||Be.studentDetails?.class===u||Be.studentDetails?.currentClass===u||Be.class===u,tt=Be.academicInfo?.section===p||Be.studentDetails?.section===p||Be.studentDetails?.currentSection===p||Be.section===p;return at&&pe&&tt});console.log(` Filtered students: ${ce.length}`);const Ve=ce.map(Be=>({_id:Be._id,userId:Be.userId,name:Be.name?.displayName||Be.name||"Unknown",class:Be.academicInfo?.class||Be.studentDetails?.class||Be.studentDetails?.currentClass||Be.class||u,section:Be.academicInfo?.section||Be.studentDetails?.section||Be.studentDetails?.currentSection||Be.section||p,morningStatus:null,afternoonStatus:null}));I(Ve),Ve.length===0&&$(`No students found for Class ${u} Section ${p}`)}catch(Q){$("Failed to fetch students"),console.error(" Error fetching students:",Q)}finally{_(!1)}},G=()=>{if(!A){P(b);return}const Q=b.filter(de=>de.name.toLowerCase().includes(A.toLowerCase())||de.userId.toLowerCase().includes(A.toLowerCase()));P(Q)},B=async()=>{if(!(!u||!p||!l))try{const Q=await Yf({class:u,section:p,date:l,session:j});if(Q.success&&Q.data&&Q.data.length>0){const de=Q.data.find(we=>we.session===j&&we.dateString===l);de&&de.students&&I(we=>we.map(ce=>{const Ve=de.students.find(Be=>Be.studentId===ce.userId);return Ve?{...ce,[j==="morning"?"morningStatus":"afternoonStatus"]:Ve.status}:ce}))}}catch(Q){console.warn("Could not load existing attendance:",Q)}},F=Q=>{m(Q.target.value),f(""),I([])},re=Q=>{f(Q.target.value)},U=Q=>Q==="LKG"||Q==="UKG"?Q:`Class ${Q}`,ae=(Q,de)=>{I(we=>we.map(ce=>ce._id===Q?{...ce,[j==="morning"?"morningStatus":"afternoonStatus"]:de}:ce))},W=()=>{const Q=j==="morning"?"morningStatus":"afternoonStatus";I(de=>de.map(we=>({...we,[Q]:"present"})))},fe=()=>{const Q=j==="morning"?"morningStatus":"afternoonStatus";I(de=>de.map(we=>({...we,[Q]:"absent"})))},Se=Q=>j==="morning"?Q.morningStatus:Q.afternoonStatus,te=(()=>{const Q=j==="morning"?"morningStatus":"afternoonStatus",de=b.filter(Ve=>Ve[Q]==="present").length,we=b.filter(Ve=>Ve[Q]==="absent").length,ce=b.filter(Ve=>Ve[Q]===null).length;return{present:de,absent:we,unmarked:ce,total:b.length}})(),se=async()=>{try{if(_(!0),$(""),L(""),Y[j].isFrozen){$(`${j.charAt(0).toUpperCase()+j.slice(1)} attendance has already been marked and is frozen. Cannot modify existing attendance.`),_(!1);return}const de=b.map(Ve=>({studentId:Ve.userId,userId:Ve.userId,status:Se(Ve)})).filter(Ve=>Ve.status!==null);if(de.length===0){$("Please mark attendance for at least one student");return}const we={date:l,class:u,section:p,session:j,students:de};console.log("Saving attendance data:",we);const ce=await sO(we);ce.success?(L(` ${j.charAt(0).toUpperCase()+j.slice(1)} attendance saved successfully! ${ce.data.successCount} students marked.`),await K(),setTimeout(()=>L(""),5e3)):$(ce.message||"Failed to save attendance")}catch(Q){console.error("Error saving attendance:",Q),$(Q.response?.data?.message||Q.message||"Failed to save attendance. Please try again.")}finally{_(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mark Attendance"}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:W,disabled:Y[j].isFrozen,className:`bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors ${Y[j].isFrozen?"opacity-50 cursor-not-allowed":""}`,title:Y[j].isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(as,{className:"h-4 w-4 mr-2"}),"Mark All Present"]}),r.jsxs("button",{onClick:fe,disabled:Y[j].isFrozen,className:`bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors ${Y[j].isFrozen?"opacity-50 cursor-not-allowed":""}`,title:Y[j].isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(Wm,{className:"h-4 w-4 mr-2"}),"Mark All Absent"]}),r.jsxs("button",{onClick:se,disabled:E||!u||!p||Y[j].isFrozen,className:`bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center transition-colors ${Y[j].isFrozen?"opacity-50 cursor-not-allowed":""}`,title:Y[j].isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),Y[j].isFrozen?"Attendance Frozen":E?"Saving...":"Save Attendance"]})]})]}),H&&r.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:H}),R&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:R}),r.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsxs("div",{className:"relative",children:[r.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"date",value:l,onChange:Q=>d(Q.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),r.jsxs("select",{value:u,onChange:F,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:n||!o(),children:[r.jsx("option",{value:"",children:n?"Loading...":"Select Class"}),me.map(Q=>r.jsx("option",{value:Q,children:U(Q)},Q))]}),!n&&!o()&&r.jsx("span",{className:"text-xs text-red-500 mt-1",children:"No classes configured"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),r.jsxs("select",{value:p,onChange:re,disabled:!u||x.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:u?"Select Section":"Select Class First"}),x.map(Q=>r.jsxs("option",{value:Q.value,children:["Section ",Q.section]},Q.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session"}),r.jsxs("div",{className:"flex rounded-lg border border-gray-300",children:[r.jsxs("button",{type:"button",onClick:()=>v("morning"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-l-lg flex items-center justify-center relative ${j==="morning"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} ${Y.morning.isFrozen?"opacity-75":""}`,children:[r.jsx(af,{className:"h-4 w-4 mr-1"}),"Morning",Y.morning.isFrozen&&r.jsx("div",{className:"absolute top-0 right-0 -mt-1 -mr-1",children:r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border border-white",title:"Attendance marked and frozen"})})]}),r.jsxs("button",{type:"button",onClick:()=>v("afternoon"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-r-lg flex items-center justify-center relative ${j==="afternoon"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} ${Y.afternoon.isFrozen?"opacity-75":""}`,children:[r.jsx(ef,{className:"h-4 w-4 mr-1"}),"Afternoon",Y.afternoon.isFrozen&&r.jsx("div",{className:"absolute top-0 right-0 -mt-1 -mr-1",children:r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border border-white",title:"Attendance marked and frozen"})})]})]}),u&&p&&r.jsx("div",{className:"mt-2 text-sm",children:Y[j].isFrozen?r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(Hn,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[j.charAt(0).toUpperCase()+j.slice(1)," attendance is marked and frozen",Y[j].data?.markedAt&&r.jsxs("span",{className:"text-gray-500 ml-1",children:["(marked on ",new Date(Y[j].data.markedAt).toLocaleString(),")"]})]})]}):r.jsxs("div",{className:"flex items-center text-blue-600",children:[r.jsx(Wa,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[j.charAt(0).toUpperCase()+j.slice(1)," attendance can be marked"]})]})})]})]})}),u&&p&&r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or user ID...",value:A,onChange:Q=>k(Q.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u&&p&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Present"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.present})]}),r.jsx(Hn,{className:"h-8 w-8 text-green-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Absent"}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:te.absent})]}),r.jsx(yi,{className:"h-8 w-8 text-red-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Unmarked"}),r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:te.unmarked})]}),r.jsx(ls,{className:"h-8 w-8 text-gray-600"})]})})]}),u&&p&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[j.charAt(0).toUpperCase()+j.slice(1)," Attendance - ",U(u)," Section ",p]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Progress: ",te.present+te.absent,"/",te.total," marked"]})]}),E?r.jsx("div",{className:"text-center py-4",children:"Loading students..."}):T.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500",children:b.length===0?"No students found in this class and section":"No students match your search criteria"}):r.jsx("div",{className:"space-y-3",children:T.map(Q=>r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(ta,{className:"h-5 w-5 text-blue-600"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:Q.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["User ID: ",Q.userId]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[Q.class," - Section ",Q.section]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>ae(Q._id,"present"),disabled:Y[j].isFrozen,className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors flex items-center space-x-1 ${Se(Q)==="present"?"bg-green-100 text-green-800 border-green-200":"bg-white text-gray-700 border-gray-300 hover:bg-green-50"} ${Y[j].isFrozen?"opacity-50 cursor-not-allowed":""}`,title:Y[j].isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(Hn,{className:"h-4 w-4"}),r.jsx("span",{children:"Present"})]}),r.jsxs("button",{onClick:()=>ae(Q._id,"absent"),disabled:Y[j].isFrozen,className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors flex items-center space-x-1 ${Se(Q)==="absent"?"bg-red-100 text-red-800 border-red-200":"bg-white text-gray-700 border-gray-300 hover:bg-red-50"} ${Y[j].isFrozen?"opacity-50 cursor-not-allowed":""}`,title:Y[j].isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(yi,{className:"h-4 w-4"}),r.jsx("span",{children:"Absent"})]})]})]},Q._id))})]})}),!u||!p?r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ta,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Get Started"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[r.jsx("li",{children:"Select a date for attendance"}),r.jsx("li",{children:"Choose a class from the dropdown"}),r.jsx("li",{children:"Select a section to view students"}),r.jsx("li",{children:"Choose morning or afternoon session"}),r.jsx("li",{children:"Mark attendance for each student"}),r.jsx("li",{children:"Save the attendance record"})]})})]})]})}):null]})},QX=()=>{const{token:e,user:t}=dr(),{classesData:a,loading:n,getSectionsByClass:s,hasClasses:o}=gn(),[l,d]=S.useState(new Date().toISOString().split("T")[0]),[u,m]=S.useState(""),[p,f]=S.useState(""),[x,w]=S.useState([]),[j,v]=S.useState("morning"),[b,I]=S.useState([]),[T,P]=S.useState([]),[A,k]=S.useState(""),[E,_]=S.useState(!1),[R,$]=S.useState(""),H=a?.classes?.map(F=>F.className)||[];S.useEffect(()=>{if(u&&a){const F=s(u);w(F),F.length>0?f(F[0].value):f("")}else w([]),f("")},[u,a]),S.useEffect(()=>{u&&p&&L()},[u,p,l,j]),S.useEffect(()=>{Y()},[b,A]);const L=async()=>{if(!u||!p){I([]);return}if(!e||!t?.schoolCode){$("Authentication required");return}try{_(!0),$(""),console.log(" Fetching students for:",{class:u,section:p,schoolCode:t.schoolCode});const re=(await bt.get(`/users/role/student?class=${u}&section=${p}`,{headers:{"x-school-code":t.schoolCode}})).data;console.log(" API Response:",re);const U=re.data||re||[];console.log(` Total users received: ${U.length}`);const ae=U.filter(fe=>{const Se=fe.role==="student",Ie=fe.academicInfo?.class===u||fe.studentDetails?.class===u||fe.studentDetails?.currentClass===u||fe.class===u,te=fe.academicInfo?.section===p||fe.studentDetails?.section===p||fe.studentDetails?.currentSection===p||fe.section===p;return Se&&Ie&&te});console.log(` Filtered students: ${ae.length}`);let W=ae.map(fe=>({_id:fe._id,userId:fe.userId,name:fe.name?.displayName||fe.name||"Unknown",class:fe.academicInfo?.class||fe.studentDetails?.class||fe.studentDetails?.currentClass||fe.class||u,section:fe.academicInfo?.section||fe.studentDetails?.section||fe.studentDetails?.currentSection||fe.section||p,morningStatus:null,afternoonStatus:null}));if(l)try{const fe=await Yf({class:u,section:p,date:l,session:j});if(fe.success&&fe.data&&fe.data.length>0){const Se=fe.data.find(Ie=>Ie.session===j&&Ie.dateString===l);Se&&Se.students&&(W=W.map(Ie=>{const te=Se.students.find(se=>se.studentId===Ie.userId);return te?{...Ie,[j==="morning"?"morningStatus":"afternoonStatus"]:te.status}:Ie}))}}catch(fe){console.warn("Could not load existing attendance:",fe)}I(W),W.length===0&&$(`No students found for Class ${u} Section ${p}`)}catch(F){$("Failed to fetch students"),console.error(" Error fetching students:",F)}finally{_(!1)}},Y=()=>{if(!A){P(b);return}const F=b.filter(re=>re.name.toLowerCase().includes(A.toLowerCase())||re.userId.toLowerCase().includes(A.toLowerCase()));P(F)},X=F=>{m(F.target.value),f(""),I([])},me=F=>{f(F.target.value)},K=F=>F==="LKG"||F==="UKG"?F:`Class ${F}`,oe=F=>j==="morning"?F.morningStatus:F.afternoonStatus,B=(()=>{const F=j==="morning"?"morningStatus":"afternoonStatus",re=T.filter(W=>W[F]==="present").length,U=T.filter(W=>W[F]==="absent").length,ae=T.filter(W=>W[F]===null).length;return{present:re,absent:U,unmarked:ae,total:T.length}})();return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"View Attendance Records"})}),R&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:R}),r.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsxs("div",{className:"relative",children:[r.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"date",value:l,onChange:F=>d(F.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),r.jsxs("select",{value:u,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:n||!o(),children:[r.jsx("option",{value:"",children:n?"Loading...":"Select Class"}),H.map(F=>r.jsx("option",{value:F,children:K(F)},F))]}),!n&&!o()&&r.jsx("span",{className:"text-xs text-red-500 mt-1",children:"No classes configured"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),r.jsxs("select",{value:p,onChange:me,disabled:!u||x.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:u?"Select Section":"Select Class First"}),x.map(F=>r.jsxs("option",{value:F.value,children:["Section ",F.section]},F.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session"}),r.jsxs("div",{className:"flex rounded-lg border border-gray-300",children:[r.jsxs("button",{type:"button",onClick:()=>v("morning"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-l-lg flex items-center justify-center ${j==="morning"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(af,{className:"h-4 w-4 mr-1"}),"Morning"]}),r.jsxs("button",{type:"button",onClick:()=>v("afternoon"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-r-lg flex items-center justify-center ${j==="afternoon"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(ef,{className:"h-4 w-4 mr-1"}),"Afternoon"]})]})]})]})}),u&&p&&r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or user ID...",value:A,onChange:F=>k(F.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u&&p&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Present"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:B.present})]}),r.jsx(Hn,{className:"h-8 w-8 text-green-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Absent"}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:B.absent})]}),r.jsx(yi,{className:"h-8 w-8 text-red-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Not Marked"}),r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:B.unmarked})]}),r.jsx(ls,{className:"h-8 w-8 text-gray-600"})]})})]}),u&&p&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[j.charAt(0).toUpperCase()+j.slice(1)," Attendance - ",K(u)," Section ",p]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",B.total," students"]})]}),E?r.jsx("div",{className:"text-center py-4",children:"Loading students..."}):T.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500",children:b.length===0?"No students found in this class and section":"No students match your search criteria"}):r.jsx("div",{className:"space-y-3",children:T.map(F=>{const re=oe(F);return r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(ta,{className:"h-5 w-5 text-blue-600"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:F.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["User ID: ",F.userId]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[F.class," - Section ",F.section]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[re==="present"&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-green-100 text-green-800 border border-green-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(Hn,{className:"h-4 w-4"}),r.jsx("span",{children:"Present"})]}),re==="absent"&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-red-100 text-red-800 border border-red-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(yi,{className:"h-4 w-4"}),r.jsx("span",{children:"Absent"})]}),re===null&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-600 border border-gray-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(ls,{className:"h-4 w-4"}),r.jsx("span",{children:"Not Marked"})]})]})]},F._id)})})]})}),!u||!p?r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ta,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Get Started"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[r.jsx("li",{children:"Select a date to view attendance"}),r.jsx("li",{children:"Choose a class from the dropdown"}),r.jsx("li",{children:"Select a section to view students"}),r.jsx("li",{children:"Choose morning or afternoon session"}),r.jsx("li",{children:"View the attendance records for that day"})]})})]})]})}):null]})},Db=()=>{const e=Gs(),t=()=>e.pathname.includes("/attendance/mark")?"mark":e.pathname.includes("/attendance/view")?"view":"mark",[a,n]=S.useState(t()),s=[{id:"mark",name:"Mark Attendance",icon:as,href:"/admin/attendance/mark",description:"Mark daily attendance for students"},{id:"view",name:"View Attendance",icon:oa,href:"/admin/attendance/view",description:"View and analyze attendance records"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(la,{className:"h-8 w-8 text-blue-600"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Management"})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:s.map(o=>{const l=o.icon,d=a===o.id;return r.jsx("button",{onClick:()=>{n(o.id),window.history.pushState({},"",o.href)},className:`py-4 px-1 border-b-2 font-medium text-sm ${d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(l,{className:"h-5 w-5"}),r.jsx("span",{children:o.name})]})},o.id)})})}),r.jsxs("div",{className:"p-6",children:[a==="mark"&&r.jsx(ZX,{}),a==="view"&&r.jsx(QX,{})]})]})]})};async function iO(e){return(await bt.get("/assignments",{params:e})).data}async function oO(e){return(await bt.post("/assignments",e,{headers:{"Content-Type":"multipart/form-data"}})).data}async function eJ(e){return(await bt.get(`/assignments/${e}`)).data}async function lO(e,t){const a=t instanceof FormData?{"Content-Type":"multipart/form-data"}:{};return(await bt.put(`/assignments/${e}`,t,{headers:a})).data}async function cO(e){return(await bt.delete(`/assignments/${e}`)).data}const tJ=({isOpen:e,onClose:t,onSuccess:a})=>{const{token:n,user:s}=dr(),{getClassOptions:o,getSectionsByClass:l}=gn(),[d,u]=S.useState({title:"",subject:"",class:"",section:"",startDate:"",dueDate:"",instructions:"",attachments:[]}),[m,p]=S.useState({}),[f,x]=S.useState(!1),[w,j]=S.useState(""),[v,b]=S.useState([]);S.useEffect(()=>{e&&d.class&&I(d.class)},[e,d.class]);const I=async E=>{try{console.log(` Fetching subjects for class: ${E}`),console.log(` Request URL: /api/class-subjects/class/${encodeURIComponent(E)}`),console.log(` Auth token available: ${!!n}`);try{const _=await bt.get(`/class-subjects/class/${encodeURIComponent(E)}`);console.log(` Response status: ${_.status}`);const R=_.data;if(R.success&&R.data&&R.data.subjects){const $=R.data.subjects.filter(H=>H.isActive!==!1).map(H=>H.name).filter(Boolean);b($);return}}catch{console.log(" Regular endpoint failed, trying direct endpoint...");try{const R=s?.schoolCode||"",H=(await bt.get(`/direct-test/class-subjects/${encodeURIComponent(E)}?schoolCode=${R}`)).data;if(H.success&&H.data&&H.data.subjects){const L=H.data.subjects.filter(Y=>Y.isActive!==!1).map(Y=>Y.name).filter(Boolean);b(L);return}}catch(R){console.error(" Both endpoints failed:",R)}}b([])}catch(_){console.error(" Error fetching subjects:",_),b([])}},T=()=>{const E={};if(d.title.trim()||(E.title="Please enter assignment title"),d.subject||(E.subject="Please select a subject"),d.class||(E.class="Please select a class"),d.section||(E.section="Please select a section"),d.startDate||(E.startDate="Please set a start date"),d.dueDate||(E.dueDate="Please set a due date"),d.instructions.trim()||(E.instructions="Please write assignment instructions"),d.startDate&&d.dueDate){const _=new Date(d.startDate);new Date(d.dueDate)<=_&&(E.dueDate="Due date must be after start date")}return p(E),Object.keys(E).length===0},P=E=>{const _=Array.from(E.target.files||[]);u({...d,attachments:[...d.attachments,..._]})},A=E=>{const _=d.attachments.filter((R,$)=>$!==E);u({...d,attachments:_})},k=async E=>{if(E.preventDefault(),!!T()){x(!0);try{const _=new FormData;_.append("title",d.title),_.append("subject",d.subject),_.append("class",d.class),_.append("section",d.section),_.append("startDate",d.startDate),_.append("dueDate",d.dueDate),_.append("instructions",d.instructions),console.log(" Sending assignment data:",{title:d.title,subject:d.subject,class:d.class,section:d.section,startDate:d.startDate,dueDate:d.dueDate,hasInstructions:!!d.instructions,attachmentsCount:d.attachments.length}),d.attachments.forEach(H=>{_.append("attachments",H)});let R="";try{const H=localStorage.getItem("erp.auth");H&&(R=JSON.parse(H).user?.schoolCode||"",console.log(` Using school code for assignment: "${R}"`))}catch(H){console.error("Error parsing auth data:",H)}R?(_.append("schoolCode",R),console.log(" Added schoolCode to request:",R)):console.warn(" No school code found in auth context");const $=await oO(_);console.log(" Assignment created successfully:",$),j($.message||`Assignment created for ${d.class}  Section ${d.section}`),setTimeout(()=>{a(),t(),j(""),u({title:"",subject:"",class:"",section:"",startDate:"",dueDate:"",instructions:"",attachments:[]})},2e3)}catch(_){console.error(" Error creating assignment:",_),console.error("Error response:",_.response?.data||_.message),p({submit:_.response?.data?.message||"Failed to create assignment"})}finally{x(!1)}}};return e?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),r.jsxs("div",{className:"relative w-full max-w-4xl mx-auto bg-white rounded-lg shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Assignment"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ar,{className:"w-6 h-6"})})]}),w&&r.jsx("div",{className:"p-4 bg-green-50 border-l-4 border-green-400",children:r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" ",w]})}),r.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Title *"}),r.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.title?"border-red-300":"border-gray-300"}`,value:d.title,onChange:E=>u({...d,title:E.target.value}),placeholder:"Enter assignment title"}),m.title&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.title})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.class?"border-red-300":"border-gray-300"}`,value:d.class,onChange:E=>{const _=E.target.value;u({...d,class:_,subject:""}),_?I(_):b([])},children:[r.jsx("option",{value:"",children:"Select Class"}),o().map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))]}),m.class&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.class})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.section?"border-red-300":"border-gray-300"}`,value:d.section,onChange:E=>u({...d,section:E.target.value}),children:[r.jsx("option",{value:"",children:"Select Section"}),(d.class?l(d.class):[]).map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))]}),m.section&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.section})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.subject?"border-red-300":"border-gray-300"}`,value:d.subject,onChange:E=>u({...d,subject:E.target.value}),disabled:!d.class,children:[r.jsx("option",{value:"",children:d.class?"Select Subject":"Select Class First"}),v.map(E=>r.jsx("option",{value:E,children:E},E))]}),m.subject&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.subject})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(la,{className:"w-4 h-4 inline mr-1"}),"Start Date *"]}),r.jsx("input",{type:"date",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.startDate?"border-red-300":"border-gray-300"}`,value:d.startDate,onChange:E=>u({...d,startDate:E.target.value}),min:new Date().toISOString().split("T")[0]}),m.startDate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.startDate})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(la,{className:"w-4 h-4 inline mr-1"}),"Due Date *"]}),r.jsx("input",{type:"date",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.dueDate?"border-red-300":"border-gray-300"}`,value:d.dueDate,onChange:E=>u({...d,dueDate:E.target.value}),min:d.startDate||new Date().toISOString().split("T")[0]}),m.dueDate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.dueDate})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(fa,{className:"w-4 h-4 inline mr-1"}),"Assignment Instructions *"]}),r.jsx("textarea",{rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.instructions?"border-red-300":"border-gray-300"}`,value:d.instructions,onChange:E=>u({...d,instructions:E.target.value}),placeholder:"Write detailed instructions for the assignment..."}),m.instructions&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.instructions})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Bo,{className:"w-4 h-4 inline mr-1"}),"Attachments (Optional)"]}),r.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif",onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),d.attachments.length>0&&r.jsx("div",{className:"mt-2 space-y-2",children:d.attachments.map((E,_)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsx("span",{className:"text-sm text-gray-700",children:E.name}),r.jsx("button",{type:"button",onClick:()=>A(_),className:"text-red-600 hover:text-red-700",children:r.jsx(Ar,{className:"w-4 h-4"})})]},_))})]}),m.submit&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm",children:m.submit})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:f,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[r.jsx(ta,{className:"w-4 h-4"}),r.jsx("span",{children:f?"Creating...":"Create Assignment"})]})]})]})]})]})}):null},rJ=({isOpen:e,onClose:t,onSuccess:a,assignmentId:n})=>{const{token:s}=dr(),{getClassOptions:o,getSectionsByClass:l}=gn(),[d,u]=S.useState({title:"",subject:"",class:"",section:"",startDate:"",dueDate:"",instructions:"",attachments:[],existingAttachments:[]}),[m,p]=S.useState({}),[f,x]=S.useState(!1),[w,j]=S.useState(!1),[v,b]=S.useState(""),[I,T]=S.useState([]);S.useEffect(()=>{e&&n&&P()},[e,n]),S.useEffect(()=>{e&&d.class&&A(d.class)},[e,d.class]);const P=async()=>{j(!0),p({});try{console.log(" Fetching assignment data for:",n);const $=await eJ(n);console.log(" Assignment data loaded:",$);const H=L=>L?new Date(L).toISOString().split("T")[0]:"";u({title:$.title||"",subject:$.subject||"",class:$.class||"",section:$.section||"",startDate:H($.startDate),dueDate:H($.dueDate),instructions:$.instructions||$.description||"",attachments:[],existingAttachments:$.attachments||[]}),$.class&&await A($.class)}catch($){console.error(" Error fetching assignment:",$),console.error("Error details:",$.response?.data||$.message);const H=$.response?.data?.message||$.message||"Failed to load assignment data";p({submit:H}),alert(`Error loading assignment: ${H}`)}finally{j(!1)}},A=async $=>{try{console.log(` Fetching subjects for class: ${$}`);const H=localStorage.getItem("erp.schoolCode")||"",L=localStorage.getItem("erp.auth");let Y="";L&&(Y=JSON.parse(L).token||"");const X=await fetch(`/api/class-subjects/class/${encodeURIComponent($)}`,{headers:{Authorization:`Bearer ${Y}`,"x-school-code":H.toUpperCase(),"Content-Type":"application/json"}});if(X.ok){const K=((await X.json())?.data?.subjects||[]).filter(oe=>oe.isActive!==!1).map(oe=>oe.name).filter(Boolean);T(K),console.log(" Subjects loaded:",K)}else console.warn("Failed to fetch subjects:",X.status),T([])}catch(H){console.error("Error fetching subjects:",H),T([])}},k=()=>{const $={};if(d.title.trim()||($.title="Title is required"),d.subject||($.subject="Subject is required"),d.class||($.class="Class is required"),d.section||($.section="Section is required"),d.startDate||($.startDate="Start date is required"),d.dueDate||($.dueDate="Due date is required"),d.startDate&&d.dueDate){const H=new Date(d.startDate);new Date(d.dueDate)<=H&&($.dueDate="Due date must be after start date")}return p($),Object.keys($).length===0},E=$=>{if($.target.files){const H=Array.from($.target.files);u({...d,attachments:H})}},_=$=>{const H=[...d.existingAttachments];H.splice($,1),u({...d,existingAttachments:H})},R=async $=>{if($.preventDefault(),!!k()){x(!0);try{const H=new FormData;H.append("title",d.title),H.append("subject",d.subject),H.append("class",d.class),H.append("section",d.section),H.append("startDate",d.startDate),H.append("dueDate",d.dueDate),H.append("instructions",d.instructions),console.log(" Updating assignment:",{id:n,title:d.title,subject:d.subject,class:d.class,section:d.section}),d.attachments.forEach(X=>{H.append("attachments",X)}),H.append("existingAttachments",JSON.stringify(d.existingAttachments));let L="";try{const X=localStorage.getItem("erp.auth");X&&(L=JSON.parse(X).user?.schoolCode||"")}catch(X){console.error("Error parsing auth data:",X)}L&&H.append("schoolCode",L);const Y=await lO(n,H);console.log(" Assignment updated successfully:",Y),b("Assignment updated successfully!"),setTimeout(()=>{a(),t(),b("")},2e3)}catch(H){console.error(" Error updating assignment:",H),console.error("Error response:",H.response?.data),console.error("Error status:",H.response?.status);const L=H.response?.data?.message||H.message||"Failed to update assignment";p({submit:L}),alert(`Failed to update assignment:
${L}

Please check the console for more details.`)}finally{x(!1)}}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Assignment"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ar,{className:"h-6 w-6"})})]}),w?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading assignment data..."})]}):r.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[v&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:v}),m.submit&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:m.submit}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(fa,{className:"w-4 h-4 inline mr-1"}),"Assignment Title *"]}),r.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.title?"border-red-300":"border-gray-300"}`,value:d.title,onChange:$=>u({...d,title:$.target.value}),placeholder:"e.g., Math Homework - Chapter 5"}),m.title&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.title})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.class?"border-red-300":"border-gray-300"}`,value:d.class,onChange:$=>{const H=$.target.value;u({...d,class:H,subject:""}),H?A(H):T([])},children:[r.jsx("option",{value:"",children:"Select Class"}),o().map($=>r.jsx("option",{value:$.value,children:$.label},$.value))]}),m.class&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.class})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.section?"border-red-300":"border-gray-300"}`,value:d.section,onChange:$=>u({...d,section:$.target.value}),children:[r.jsx("option",{value:"",children:"Select Section"}),(d.class?l(d.class):[]).map($=>r.jsx("option",{value:$.value,children:$.label},$.value))]}),m.section&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.section})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.subject?"border-red-300":"border-gray-300"}`,value:d.subject,onChange:$=>u({...d,subject:$.target.value}),disabled:!d.class,children:[r.jsx("option",{value:"",children:d.class?"Select Subject":"Select Class First"}),I.map($=>r.jsx("option",{value:$,children:$},$))]}),m.subject&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.subject})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(la,{className:"w-4 h-4 inline mr-1"}),"Start Date *"]}),r.jsx("input",{type:"date",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.startDate?"border-red-300":"border-gray-300"}`,value:d.startDate,onChange:$=>u({...d,startDate:$.target.value})}),m.startDate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.startDate})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(la,{className:"w-4 h-4 inline mr-1"}),"Due Date *"]}),r.jsx("input",{type:"date",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${m.dueDate?"border-red-300":"border-gray-300"}`,value:d.dueDate,onChange:$=>u({...d,dueDate:$.target.value})}),m.dueDate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.dueDate})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions"}),r.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:4,value:d.instructions,onChange:$=>u({...d,instructions:$.target.value}),placeholder:"Enter assignment instructions..."})]}),d.existingAttachments.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Attachments"}),r.jsx("div",{className:"space-y-2",children:d.existingAttachments.map(($,H)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{className:"text-sm text-gray-700",children:$.originalName||$.filename}),r.jsx("button",{type:"button",onClick:()=>_(H),className:"text-red-600 hover:text-red-800",children:r.jsx(pn,{className:"h-4 w-4"})})]},H))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Bo,{className:"w-4 h-4 inline mr-1"}),"Add New Attachments"]}),r.jsx("input",{type:"file",multiple:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onChange:E,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.jpg,.jpeg,.png"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5 files, 10MB each. Supported: PDF, DOC, XLS, PPT, TXT, ZIP, Images"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Updating...":"Update Assignment"})]})]})]})}):null},aJ=()=>{const{user:e}=dr(),{getClassOptions:t,getSectionsByClass:a}=gn(),[n,s]=S.useState(""),[o,l]=S.useState(""),[d,u]=S.useState(""),[m,p]=S.useState(""),[f,x]=S.useState(!1),[w,j]=S.useState(!1),[v,b]=S.useState(""),[I,T]=S.useState([]),[P,A]=S.useState(!1),[k,E]=S.useState(""),[_,R]=S.useState([]),[$,H]=S.useState({total:0,active:0,completed:0,overdue:0,dueThisWeek:0});S.useEffect(()=>{L()},[]),S.useEffect(()=>{I.length>0&&Y()},[I]),S.useEffect(()=>{o?X(o):(R([]),p(""),u(""))},[o]);const L=async()=>{try{A(!0),E(""),console.log(" Admin fetching assignments...");let W,fe=[];try{const Ie={};if(o&&(Ie.class=o),d&&(Ie.section=d),m&&(Ie.subject=m),n&&(Ie.search=n),console.log(" Admin applying filters:",Ie),W=await iO(Ie),console.log(" Raw API response:",W),console.log(" API response structure:",{hasData:!!W.data,hasAssignments:!!W.assignments,isArray:Array.isArray(W),keys:Object.keys(W||{}),dataLength:Array.isArray(W.data)?W.data.length:"not array",assignmentsLength:Array.isArray(W.assignments)?W.assignments.length:"not array"}),W.data&&Array.isArray(W.data))fe=W.data,console.log(" Using data.data:",fe.length);else if(W.assignments&&Array.isArray(W.assignments))fe=W.assignments,console.log(" Using data.assignments:",fe.length);else if(Array.isArray(W))fe=W,console.log(" Using direct array:",fe.length);else if(W&&typeof W=="object"){const te=Object.keys(W).filter(se=>Array.isArray(W[se]));te.length>0&&(fe=W[te[0]],console.log(` Using ${te[0]}:`,fe.length))}console.log(" Extracted assignments array:",fe)}catch(Ie){console.error(" Error with regular endpoint:",Ie);const te=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";console.log(" Trying direct endpoint with schoolCode:",te),W=(await bt.get(`/direct-test/assignments?schoolCode=${te}`)).data,console.log(" Direct endpoint response:",W),W.data&&Array.isArray(W.data)?fe=W.data:W.assignments&&Array.isArray(W.assignments)?fe=W.assignments:Array.isArray(W)&&(fe=W)}console.log(` Total assignments before filtering: ${fe.length}`),console.log(" Raw assignments data:",fe);const Se=fe.filter(Ie=>!Ie||typeof Ie!="object"?(console.log(" Invalid assignment (not an object):",Ie),!1):Ie._id||Ie.id?Ie._placeholder===!0?(console.log(" Skipping placeholder assignment:",Ie._id),!1):!Ie.title&&!Ie.subject&&!Ie.class?(console.log(" Skipping assignment with missing essential fields:",Ie._id),!1):(console.log(" Valid assignment found:",{_id:Ie._id,title:Ie.title,subject:Ie.subject,class:Ie.class,section:Ie.section,dueDate:Ie.dueDate,isPlaceholder:Ie._placeholder,allFields:Object.keys(Ie)}),!0):(console.log(" Invalid assignment (missing ID):",Ie),!1));console.log(` Loaded ${Se.length} valid assignments out of ${fe.length} total`),console.log(" Valid assignments:",Se),fe.length>0&&Se.length===0&&console.log(" INFO: All assignments are placeholders - no real assignments found"),T(Se)}catch(W){console.error(" Error fetching assignments:",W),console.error("Error details:",W.message,W.response),E(W.response?.data?.message||W.message||"Failed to fetch assignments"),T([])}finally{A(!1)}},Y=()=>{if(!I||I.length===0){H({total:0,active:0,completed:0,overdue:0,dueThisWeek:0});return}const W=new Date,fe=new Date;fe.setDate(fe.getDate()+7);const Se={total:I.length,active:0,completed:0,overdue:0,dueThisWeek:0};I.forEach(Ie=>{const te=new Date(Ie.dueDate);Ie.status==="active"&&Se.active++,Ie.status==="completed"&&Se.completed++,Ie.status==="overdue"&&Se.overdue++,te>=W&&te<=fe&&Se.dueThisWeek++}),H(Se)},X=async W=>{try{console.log(` Fetching subjects for class: ${W}`);const Ie=(await bt.get("/class-subjects/classes")).data?.data?.classes?.filter(Q=>Q.className===W)||[],te=new Set;Ie.forEach(Q=>{(Q?.subjects||[]).filter(we=>we.isActive!==!1).forEach(we=>{we.name&&te.add(we.name)})});const se=Array.from(te);R(se),console.log(" Subjects loaded:",se)}catch(fe){console.error("Error fetching subjects:",fe),R([])}},me=()=>{x(!0)},K=()=>{L()},oe=W=>{console.log(" Edit assignment:",W),b(W),j(!0)},G=()=>{L(),j(!1),b("")},B=W=>{if(!W)return{text:"No due date",color:"text-gray-700",bgColor:"bg-gray-100",priority:"low"};const fe=new Date(W),Se=new Date;if(isNaN(fe.getTime()))return{text:"Invalid date",color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"};Se.setHours(0,0,0,0),fe.setHours(23,59,59,999);const Ie=fe.getTime()-Se.getTime(),te=Math.ceil(Ie/(1e3*60*60*24));if(te<0){const se=Math.abs(te);return{text:`${se} day${se>1?"s":""} overdue`,color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"}}return te===0?{text:"Due Today",color:"text-orange-700",bgColor:"bg-orange-100",priority:"high"}:te===1?{text:"Due Tomorrow",color:"text-yellow-700",bgColor:"bg-yellow-100",priority:"medium"}:te<=3?{text:`${te} days left`,color:"text-amber-700",bgColor:"bg-amber-50",priority:"medium"}:te<=7?{text:`${te} days left`,color:"text-blue-700",bgColor:"bg-blue-50",priority:"normal"}:{text:`${te} days left`,color:"text-green-700",bgColor:"bg-green-50",priority:"low"}},F=async(W,fe)=>{if(window.confirm(`Are you sure you want to delete "${fe}"?

This action cannot be undone.`))try{console.log(" Deleting assignment:",W),await cO(W),console.log(" Assignment deleted successfully"),alert("Assignment deleted successfully!"),L()}catch(Ie){console.error(" Error deleting assignment:",Ie),alert(Ie.response?.data?.message||"Failed to delete assignment")}},re=I.filter(W=>{if(!W||typeof W!="object")return!1;const fe=(W?.title||"").toString().trim(),Se=(W?.subject||"").toString().trim(),Ie=(W?.class||"").toString().trim(),te=(W?.section||"").toString().trim(),se=!n||n.trim()===""||fe.toLowerCase().includes(n.toLowerCase())||Se.toLowerCase().includes(n.toLowerCase()),Q=!o||o===""||Ie===o||Ie===""&&(!o||o===""),de=!d||d===""||te===d||te===""&&(!d||d===""),we=!m||m===""||Se===m||Se===""&&(!m||m===""),ce=se&&Q&&de&&we;return W._id==="6905a0b614065ebef374bfdd"&&console.log(" ASSIGNMENT FILTER DEBUG:",{assignmentId:W._id,title:W.title,class:W.class,section:W.section,subject:W.subject,_placeholder:W._placeholder,filters:{searchTerm:n,selectedClass:o,selectedSection:d,selectedSubject:m},matches:{matchesSearch:se,matchesClass:Q,matchesSection:de,matchesSubject:we},finalResult:ce}),ce}),ae=(()=>{if(!re||re.length===0)return{total:0,active:0,completed:0,overdue:0,dueThisWeek:0};const W=new Date,fe=new Date;fe.setDate(fe.getDate()+7);const Se={total:re.length,active:0,completed:0,overdue:0,dueThisWeek:0};return re.forEach(Ie=>{const te=new Date(Ie.dueDate);Ie.status==="active"&&Se.active++,Ie.status==="completed"&&Se.completed++,Ie.status==="overdue"&&Se.overdue++,te>=W&&te<=fe&&Se.dueThisWeek++}),Se})();return console.log(` Total assignments: ${I.length}, Filtered: ${re.length}`),re.length===0&&I.length>0&&console.log(" No assignments match current filters:",{selectedClass:o,selectedSection:d,selectedSubject:m,searchTerm:n}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Assignments"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[r.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-2 rounded-lg flex items-center justify-center transition-colors text-sm",children:[r.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Export Data"]}),r.jsxs("button",{onClick:me,className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 text-sm",children:[r.jsx(is,{className:"h-4 w-4 mr-2"}),"Add Assignment"]})]})]}),k&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:k}),P&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading assignments..."})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-blue-500 p-3 rounded-lg",children:r.jsx(fa,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Assignments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ae.total})]})]})}),r.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-purple-500 p-3 rounded-lg",children:r.jsx(la,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due This Week"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ae.dueThisWeek})]})]})})]}),r.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"relative w-full",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx("input",{type:"text",placeholder:"Search assignments...",value:n,onChange:W=>s(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("select",{value:o,onChange:W=>{l(W.target.value),u(""),p("")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"",children:"All Classes"}),t().map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))]}),r.jsxs("select",{value:d,onChange:W=>{u(W.target.value),W.target.value!==d&&p("")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"",children:"All Sections"}),(o?a(o):[]).map(W=>r.jsx("option",{value:W.value,children:W.label},W.value))]}),r.jsxs("select",{value:m,onChange:W=>p(W.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"",children:"All Subjects"}),_.map(W=>r.jsx("option",{value:W,children:W},W))]})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Assignments"}),r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 text-xs sm:text-sm text-gray-600",children:[r.jsxs("span",{children:["Total: ",r.jsx("span",{className:"font-semibold text-gray-900",children:I.length})]}),(n||o||d||m)&&r.jsxs("span",{children:["Filtered: ",r.jsx("span",{className:"font-semibold text-blue-600",children:re.length})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Class"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Section"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Subject"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 sm:px-6 py-8 sm:py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsx(fa,{className:"h-8 sm:h-12 w-8 sm:w-12 text-gray-400 mb-3"}),r.jsx("p",{className:"text-gray-500 text-base sm:text-lg font-medium",children:"No assignments found"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:I.length===0?"No assignments created yet. Create your first assignment to get started!":"No assignments match your current filters. Try adjusting your search criteria."})]})})}):re.map(W=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-3 sm:px-6 py-4",children:[r.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:W.title||W.subject||"Untitled Assignment"}),r.jsxs("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:[W.class&&`Class ${W.class}`,W.section&&`  Section ${W.section}`,W.subject&&`  ${W.subject}`]})]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden sm:table-cell",children:W.class||"N/A"}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden md:table-cell",children:W.section||"N/A"}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden lg:table-cell",children:W.subject||"N/A"}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(la,{className:"h-3 sm:h-4 w-3 sm:w-4 mr-1 text-gray-400"}),r.jsx("span",{className:"truncate",children:W.dueDate?new Date(W.dueDate).toLocaleDateString():"No due date"})]}),W.dueDate&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B(W.dueDate).bgColor} ${B(W.dueDate).color}`,children:B(W.dueDate).text})]})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[r.jsx("button",{onClick:()=>oe(W._id),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit assignment",children:r.jsx(Y6,{className:"h-3 sm:h-4 w-3 sm:w-4"})}),r.jsx("button",{onClick:()=>F(W._id,W.title),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete assignment",children:r.jsx(pn,{className:"h-3 sm:h-4 w-3 sm:w-4"})})]})})]},W._id))})]})})]}),r.jsx(tJ,{isOpen:f,onClose:()=>x(!1),onSuccess:K}),v&&r.jsx(rJ,{isOpen:w,onClose:()=>{j(!1),b("")},onSuccess:G,assignmentId:v})]})},nJ=()=>{const{user:e,token:t}=dr(),{classesData:a,loading:n,getSectionsByClass:s,hasClasses:o}=gn(),[l,d]=S.useState(""),[u,m]=S.useState(""),[p,f]=S.useState([]),[x,w]=S.useState(!1),[j,v]=S.useState(""),[b,I]=S.useState(null),[T,P]=S.useState([]),[A,k]=S.useState(""),[E,_]=S.useState(100),[R,$]=S.useState(!1),[H,L]=S.useState(!1),[Y,X]=S.useState(null),[me,K]=S.useState([]),[oe,G]=S.useState(!1),[B,F]=S.useState({}),[re,U]=S.useState([]),[ae,W]=S.useState([]),[fe,Se]=S.useState(!1),[Ie,te]=S.useState([]),[se,Q]=S.useState(!1),[de,we]=S.useState(!1),[ce,Ve]=S.useState(null),[Be,at]=S.useState(null),[pe,tt]=S.useState(null),[ut,vt]=S.useState(!1),[Nt,tr]=S.useState(!1);S.useEffect(()=>{vt(!1),we(!1),$(!1)},[l,u,A,j]);const ar=S.useCallback(Pe=>{const st=lt=>new Date(lt.updatedAt||lt.createdAt||0).getTime(),qe=new Map;for(const lt of Pe||[]){const ee=String(lt.studentId||lt.student_id||lt.id||"");if(!ee)continue;const Ce=String(lt.subject||A||""),Fe=String(lt.testType||j||""),ke=String(lt.className||lt.class||l||""),Ue=String(lt.section||u||""),We=`${ee}::${ke}::${Ue}::${Ce}::${Fe}`,ft=qe.get(We);(!ft||st(lt)>=st(ft))&&qe.set(We,lt)}return Array.from(qe.values())},[A,j,l,u]),jt=S.useCallback((Pe,st)=>{const qe=ke=>String(ke||"").toUpperCase().trim(),lt=ke=>{const Ue=qe(ke),We=Ue.match(/^(.*?)(\d+)$/);return We?{p:We[1],n:parseInt(We[2],10)}:{p:Ue,n:Number.MAX_SAFE_INTEGER}},ee=lt(Pe),Ce=lt(st),Fe=ee.p.localeCompare(Ce.p);return Fe!==0?Fe:ee.n-Ce.n},[]),Kt=S.useCallback(Pe=>[...Pe].sort((st,qe)=>jt(st.userId,qe.userId)),[jt]),De=S.useCallback(Pe=>[...Pe].sort((st,qe)=>jt(st?.userId,qe?.userId)),[jt]),et=S.useCallback(async Pe=>{try{const qe=(localStorage.getItem("erp.schoolCode")||e?.schoolCode||"").toUpperCase();if(!qe||!l||!u)return Pe;const ee=(await $s.getStudents(qe,{class:l,section:u}))?.data?.data||[],Ce=new Map,Fe=new Map,ke=new Map;for(const We of ee){const ft=String(We._id||We.id||""),Mt=String(We.userId||We.user_id||""),rr=String(We.name?.displayName||`${We.name?.firstName||""} ${We.name?.lastName||""}`.trim()||We.fullName||"").toLowerCase();ft&&Ce.set(ft,We),Mt&&Fe.set(Mt,We),rr&&ke.set(rr,We)}return Pe.map(We=>{if(We.rollNumber&&We.rollNumber!=="-")return We;const ft=String(We.name||"").toLowerCase(),Mt=Ce.get(String(We.id))||Fe.get(String(We.userId))||ke.get(ft),rr=Mt?.studentDetails?.rollNumber||Mt?.studentDetails?.currentRollNumber||Mt?.studentDetails?.rollNo||Mt?.rollNumber||Mt?.sequenceId||We.rollNumber||"";return{...We,rollNumber:rr}})}catch{return Pe}},[l,u,e?.schoolCode]),Ae=a?.classes?.map(Pe=>Pe.className)||[],Xe=S.useCallback(async Pe=>{if(!Pe){U([]);return}Se(!0);try{if(a&&a.testsByClass){let qe=a.testsByClass[Pe]||a.testsByClass[String(Pe)]||[];qe.length===0&&a.tests&&(qe=a.tests.filter(ee=>String(ee.className)===String(Pe)));const lt=(qe||[]).filter(ee=>typeof ee?.maxMarks=="number"&&ee.maxMarks>0);if(lt.length>0){const ee=lt.map(Fe=>Fe.testName||Fe.displayName||Fe.name||Fe.testType).filter(Boolean),Ce=[...new Set(ee)];U(Ce),Se(!1);return}}if(!(localStorage.getItem("erp.schoolCode")||e?.schoolCode||"")){xe.error("School code not available");return}U([])}catch(st){console.error("Error fetching test types:",st),xe.error("Failed to load test types"),U([])}finally{Se(!1)}},[e?.schoolCode,a]);S.useEffect(()=>{if(l&&a){const Pe=s(l);f(Pe),Pe.length>0?m(Pe[0].value):m(""),k(""),P([])}else f([]),m(""),k(""),P([])},[l,a]),S.useEffect(()=>{(async()=>{if(P([]),k(""),!(!l||!u))try{const st=await bt.get(`/class-subjects/grade/${encodeURIComponent(l)}/section/${encodeURIComponent(u)}`),lt=(st.data?.subjects||st.data?.data||[]).map(ee=>({label:ee.subjectName||ee.name||ee.subject||ee,value:ee.subjectCode||ee.code||ee.subjectName||ee.name||ee})).filter(ee=>ee.label&&ee.value);P(lt),lt.length>0&&k(lt[0].value)}catch(st){console.error("Error fetching subjects for class/section:",st),xe.error("Failed to load subjects for selected class/section")}})()},[l,u]),S.useEffect(()=>{l?(Xe(l),v(""),I(null),_("")):U([])},[l,Xe]),S.useEffect(()=>{if(!l||!j||!a){I(null);return}const st=(a.testsByClass?.[l]||a.tests||[]).find(lt=>(lt.testName||lt.displayName||lt.name||lt.testType)===j),qe=typeof st?.maxMarks=="number"?st.maxMarks:null;I(qe),qe!==null&&_(qe)},[l,j,a]),S.useEffect(()=>{(async()=>{if(!l||!u){P([]),k("");return}w(!0);try{const st=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!st){xe.error("School code not available");return}try{const Fe=((await bt.get("/class-subjects/classes",{headers:{"x-school-code":st.toUpperCase()}})).data?.data?.classes?.find(ke=>ke.className===l&&ke.section===u)?.subjects||[]).filter(ke=>ke.isActive!==!1).map(ke=>({label:ke.name,value:ke.name})).filter(Boolean);P(Fe),k(Fe[0]?.value||"");return}catch{}try{const ee=((await bt.get(`/direct-test/class-subjects/${l}?schoolCode=${st}`,{headers:{"x-school-code":st.toUpperCase()}})).data?.data?.subjects||[]).map(Ce=>({label:Ce.name,value:Ce.name})).filter(Boolean);P(ee),k(ee[0]?.value||"");return}catch{}P([]),k(""),xe.error("No subjects found for selected class and section")}catch(st){console.error("Error fetching subjects:",st),xe.error("Failed to load subjects"),P([]),k("")}finally{w(!1)}})()},[l,u,t,e?.schoolCode]);const ot=S.useCallback(async()=>{L(!0),X(null);try{const st=(localStorage.getItem("erp.schoolCode")||e?.schoolCode||"").toUpperCase();if(!st){xe.error("School code not available");return}const qe=await $s.getStudents(st,{class:l,section:u});if(qe.data.success&&qe.data.data){const Ce=qe.data.data.filter(Fe=>{const ke=Fe.studentDetails?.currentClass||Fe.currentclass||Fe.class||Fe.className,Ue=Fe.studentDetails?.currentSection||Fe.currentsection||Fe.section;return String(ke)===String(l)&&String(Ue).toUpperCase()===String(u).toUpperCase()}).map((Fe,ke)=>({id:Fe._id||Fe.id,name:Fe.name?.displayName||`${Fe.name?.firstName||""} ${Fe.name?.lastName||""}`.trim()||Fe.fullName||"Unknown",userId:Fe.userId||Fe.user_id||"N/A",rollNumber:Fe.studentDetails?.rollNumber||Fe.studentDetails?.currentRollNumber||Fe.rollNumber||Fe.sequenceId||`${st}-${u}-${String(ke+1).padStart(4,"0")}`,class:l,section:u,totalMarks:b,obtainedMarks:null,grade:null}));if(Ce.length>0){K(Kt(Ce)),$(!0);const Fe={};Ce.forEach(ke=>{Fe[ke.id]=!1}),F(Fe),xe.success(`Found ${Ce.length} students in ${l}-${u}`);return}}else console.warn("Primary students API did not return data or success=false",qe.data);try{const ke=((await bt.get(`/school-users/${st}/users`)).data?.data||[]).filter(Ue=>{const We=Ue.role==="student",ft=Ue.studentDetails?.currentClass||Ue.currentclass||Ue.class||Ue.className,Mt=Ue.studentDetails?.currentSection||Ue.currentsection||Ue.section;return We&&String(ft)===String(l)&&String(Mt).toUpperCase()===String(u).toUpperCase()}).map((Ue,We)=>({id:Ue._id||Ue.id,name:Ue.name?.displayName||`${Ue.name?.firstName||""} ${Ue.name?.lastName||""}`.trim()||Ue.fullName||"Unknown",userId:Ue.userId||Ue.user_id||"N/A",rollNumber:Ue.studentDetails?.rollNumber||Ue.studentDetails?.currentRollNumber||Ue.rollNumber||Ue.sequenceId||`${st}-${u}-${String(We+1).padStart(4,"0")}`,class:l,section:u,totalMarks:b,obtainedMarks:null,grade:null}));if(ke.length>0){K(Kt(ke)),$(!0);const Ue={};ke.forEach(We=>{Ue[We.id]=!1}),F(Ue),xe.success(`Loaded ${ke.length} students via fallback API`);return}}catch(lt){console.error("Fallback school-users API error:",lt)}X("No students found for the selected class and section"),K([]),$(!1)}catch(Pe){console.error("Error fetching students:",Pe),X("Failed to load students. Please try again."),K([]),$(!1)}finally{L(!1)}},[l,u,b,e?.schoolCode]),Ot=S.useCallback(async()=>{L(!0),X(null);try{const Pe=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!Pe){xe.error("School code not available");return}const st=await $s.getResults({schoolCode:Pe,class:l,section:u,subject:A,testType:j});if(st.data?.success&&Array.isArray(st.data?.data)&&st.data.data.length>0){const qe=ar(st.data.data),ee=qe[0]?.frozen||!1;vt(ee);let Ce=qe.map(ke=>({id:ke.studentId,name:ke.studentName,userId:ke.userId,rollNumber:ke.rollNumber||ke.sequenceId||"",class:ke.className||l,section:ke.section||u,totalMarks:typeof ke.totalMarks=="number"?ke.totalMarks:b,obtainedMarks:ke.obtainedMarks??null,grade:Zt(ke.obtainedMarks,typeof ke.totalMarks=="number"?ke.totalMarks:b),resultId:ke._id||ke.id}));Ce=await et(Ce),K(Kt(Ce)),$(!0);const Fe={};Ce.forEach(ke=>{Fe[ke.id]=!0}),F(Fe),ee?xe.error(` Results are FROZEN and cannot be edited. Loaded ${Ce.length} result(s).`,{duration:5e3}):xe.success(`Loaded ${Ce.length} saved result(s)`);return}await ot()}catch(Pe){console.error("Error fetching results/students:",Pe),X("Failed to load results/students. Please try again."),K([]),$(!1)}finally{L(!1)}},[l,u,A,j,b,e?.schoolCode,ot]),Lt=S.useCallback(async()=>{if(!l||!u){xe.error("Please select class and section first");return}if(!A){xe.error("Please select a subject first");return}if(!j){xe.error("Please select a test type first");return}Q(!0);try{const Pe=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!Pe){xe.error("School code not available");return}const st=await $s.getResults({schoolCode:Pe,class:l,section:u,subject:A,testType:j});if(st.data.success&&st.data.data){const qe=ar(st.data.data),ee=qe[0]?.frozen||!1;vt(ee);const Ce=await et(qe.map(Ue=>({id:Ue.studentId,name:Ue.studentName,userId:Ue.userId,rollNumber:Ue.rollNumber||Ue.sequenceId||"",class:Ue.className||l,section:Ue.section||u,totalMarks:Ue.totalMarks??b,obtainedMarks:Ue.obtainedMarks??null,grade:Ue.grade??null,resultId:Ue._id||Ue.id}))),Fe=new Map(Ce.map(Ue=>[String(Ue.id),Ue.rollNumber])),ke=qe.map(Ue=>({...Ue,rollNumber:Ue.rollNumber||Fe.get(String(Ue.studentId))||Ue.sequenceId||"",grade:Zt(Ue.obtainedMarks,Ue.totalMarks),frozen:Ue.frozen||!1}));te(De(ke)),we(!0),$(!1),xe.success(`Found ${ke.length} existing results for ${l}-${u}`)}else te([]),we(!1),await ot(),G(!0),xe.success("No existing results found. Loaded students for entering marks.")}catch(Pe){console.error("Error fetching existing results:",Pe),xe.error("Failed to load existing results"),te([]),we(!1)}finally{Q(!1)}},[l,u,A,j,b,e?.schoolCode,et,De,ar,ot]),gt=Pe=>{Ve(Pe._id),at(Pe.obtainedMarks)},nr=()=>{Ve(null),at(null)},Rt=async Pe=>{if(Be==null){xe.error("Please enter valid marks");return}tt(Pe._id);try{const st=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";await $s.updateResult(Pe._id,{schoolCode:st,class:Pe.className,section:Pe.section,subject:Pe.subject,testType:Pe.testType,maxMarks:Pe.maxMarks||Pe.totalMarks,obtainedMarks:Be,totalMarks:Pe.totalMarks,studentId:Pe.studentId,studentName:Pe.studentName,userId:Pe.userId});const qe=Zt(Be,Pe.totalMarks);te(lt=>lt.map(ee=>ee._id===Pe._id?{...ee,obtainedMarks:Be,grade:qe}:ee)),Ve(null),at(null),xe.success("Result updated successfully!")}catch(st){console.error("Error updating result:",st),xe.error("Failed to update result")}finally{tt(null)}},Pr=async()=>{if(!l||!u||!A||!j){xe.error("Please ensure all filters are selected");return}if(window.confirm(`Are you sure you want to FREEZE results for ${l}-${u}, ${A} (${j})?

Once frozen, marks CANNOT be edited anymore!`)){tr(!0);try{const st=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";await $s.freezeResults({schoolCode:st,class:l,section:u,subject:A,testType:j,academicYear:"2024-25"}),te(qe=>qe.map(lt=>({...lt,frozen:!0}))),vt(!0),xe.success("Results frozen successfully! Marks can no longer be edited.")}catch(st){console.error("Error freezing results:",st),xe.error("Failed to freeze results")}finally{tr(!1)}}},N=()=>{if(!l){xe.error("Please select a class");return}if(!u){xe.error("Please select a section");return}if(!A){xe.error("Please select a subject");return}if(!j){xe.error("Please select a test type");return}if(!b||b<=0){xe.error("Configured max marks not found for this test. Please configure in Admin > Settings.");return}we(!1),G(!0),Ot()},Ne=async()=>{try{const Pe=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(console.log(" Starting save process...",{schoolCode:Pe,selectedClass:l,selectedSection:u,selectedSubject:A,selectedTestType:j,configuredMaxMarks:b,totalStudents:me.length}),!Pe){xe.error("School code not available");return}const st=me.filter(Ce=>Ce.obtainedMarks!==null&&Ce.obtainedMarks!==void 0);if(console.log(" Valid results to save:",st.length,st),st.length===0){xe.error("Please enter obtained marks for at least one student");return}const qe=st.filter(Ce=>!!Ce.resultId),lt=st.filter(Ce=>!Ce.resultId);if(console.log(" Split results:",{toUpdate:qe.length,toCreate:lt.length}),qe.length>0&&(console.log(" Updating existing results:",qe),await Promise.all(qe.map(async Ce=>{const Fe={schoolCode:Pe,class:l,section:u,subject:A,testType:j,maxMarks:b,totalMarks:Ce.totalMarks??b,obtainedMarks:Ce.obtainedMarks,studentId:Ce.id,studentName:Ce.name,userId:Ce.userId};try{await $s.updateResult(Ce.resultId,Fe)}catch(ke){console.warn("Update failed for result, attempting upsert via saveResults",Ce.resultId,ke);const Ue={schoolCode:Pe,class:l,section:u,testType:j,subject:A,maxMarks:b,academicYear:"2024-25",results:[{studentId:Ce.id,studentName:Ce.name,userId:Ce.userId,obtainedMarks:Ce.obtainedMarks,totalMarks:Ce.totalMarks??b,grade:Ce.grade}]};try{await $s.saveResults(Ue)}catch(We){console.error("Upsert via saveResults also failed for student",Ce.id,We)}}}))),lt.length>0){const Ce={schoolCode:Pe,class:l,section:u,testType:j,subject:A,maxMarks:b,academicYear:"2024-25",results:lt.map(ke=>({studentId:ke.id,studentName:ke.name,userId:ke.userId,obtainedMarks:ke.obtainedMarks,totalMarks:ke.totalMarks??b,grade:ke.grade}))};console.log(" Creating new results:",Ce);const Fe=await $s.saveResults(Ce);if(console.log(" Create response:",Fe.data),!Fe.data?.success){xe.error(Fe.data?.message||"Failed to create new results");return}}console.log(" Save completed successfully!"),xe.success(`Saved ${qe.length} update(s)${lt.length?` and created ${lt.length}`:""}`);const ee={};me.forEach(Ce=>{ee[Ce.id]=!0}),F(ee),G(!1),console.log(" Refreshing results..."),await Ot()}catch(Pe){console.error("Error saving results:",Pe),xe.error("Failed to save results. Please try again.")}},Br=(Pe,st,qe)=>{K(lt=>lt.map(ee=>{if(ee.id===Pe){const Ce={...ee,[st]:qe};return Ce.grade=Zt(qe,ee.totalMarks),Ce}return ee})),F(lt=>({...lt,[Pe]:!1}))},Zt=(Pe,st)=>{if(Pe==null||!st||st===0)return"N/A";const qe=Pe/st*100;return qe>=91?"A1":qe>=81?"A2":qe>=71?"B1":qe>=61?"B2":qe>=51?"C1":qe>=41?"C2":qe>=33?"D":qe>=21?"E1":"E2"};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Academic Results"}),R&&!ut&&r.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:r.jsxs("button",{onClick:Ne,className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-2 rounded-lg flex items-center justify-center transition-colors text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save All Changes"]})})]}),r.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"class-select",className:"text-sm font-medium text-gray-700",children:"Class"}),r.jsxs("select",{id:"class-select",value:l,onChange:Pe=>d(Pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",disabled:n||!o(),children:[r.jsx("option",{value:"",children:n?"Loading...":"Select Class"}),Ae.map(Pe=>r.jsxs("option",{value:Pe,children:["Class ",Pe]},Pe))]}),!n&&!o()&&r.jsx("span",{className:"text-xs text-red-500 mt-1",children:"No classes configured"})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"section-select",className:"text-sm font-medium text-gray-700",children:"Section"}),r.jsxs("select",{id:"section-select",value:u,onChange:Pe=>m(Pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",disabled:!l||p.length===0,children:[r.jsx("option",{value:"",children:l?"Select Section":"Select Class First"}),p.map(Pe=>r.jsxs("option",{value:Pe.value,children:["Section ",Pe.section]},Pe.value))]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"subject-select",className:"text-sm font-medium text-gray-700",children:"Subject"}),r.jsxs("select",{id:"subject-select",value:A,onChange:Pe=>k(Pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[180px]",disabled:!l||!u||x,children:[r.jsx("option",{value:"",children:!l||!u?"Select Class & Section":x?"Loading...":T.length===0?"No Subjects":"Select Subject"}),T.map(Pe=>r.jsx("option",{value:Pe.value,children:Pe.label},Pe.value))]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"test-type-select",className:"text-sm font-medium text-gray-700",children:"Test Type"}),r.jsxs("select",{id:"test-type-select",value:j,onChange:Pe=>v(Pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",disabled:!l||fe,children:[r.jsx("option",{value:"",children:l?fe?"Loading...":"Select Test":"Select Class First"}),re.map((Pe,st)=>r.jsx("option",{value:Pe,children:Pe},`${Pe}-${st}`))]}),!l&&r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Select a class to see available tests"})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Marks"}),r.jsx("input",{type:"number",value:b??"",readOnly:!0,className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700 min-w-[120px]",placeholder:"Configured"})]}),r.jsxs("button",{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors self-end",disabled:H,children:[H?r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Search"]}),r.jsxs("button",{onClick:Lt,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors self-end disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:se||!l||!u||!A||!j,children:[se?r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Existing Results"]})]})}),Y&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-700",children:Y})}),de&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:["Existing Results for ",l,"-",u,A&&` - ${A}`,j&&` (${j})`,ut&&r.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-full flex items-center gap-1",children:[r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"FROZEN"]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Found ",Ie.length," results. ",ut?"Results are frozen and cannot be edited.":"Click on a result to edit it."]})]}),!ut&&Ie.length>0&&r.jsx("button",{onClick:Pr,disabled:Nt,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:Nt?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Freezing..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Freeze Results"]})})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obtained Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ie.map((Pe,st)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Pe.userId||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Pe.studentName}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-xs font-medium",children:Pe.subject||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:r.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-md text-xs font-medium",children:Pe.testType})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:ce===Pe._id?r.jsx("input",{type:"number",value:Be||"",onChange:qe=>{const lt=qe.target.value;(lt===""||lt.length<=3&&parseInt(lt)<=Pe.totalMarks)&&at(lt===""?null:parseInt(lt))},className:"w-20 px-2 py-1 border border-blue-500 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Marks",min:"0",max:Pe.totalMarks,maxLength:3,autoFocus:!0}):Pe.obtainedMarks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Pe.totalMarks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${["A1","A2"].includes(ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade)?"bg-green-100 text-green-800":["B1","B2"].includes(ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade)?"bg-blue-100 text-blue-800":["C1","C2"].includes(ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade)?"bg-yellow-100 text-yellow-800":(ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade)==="D"?"bg-orange-100 text-orange-800":["E1","E2"].includes(ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:ce===Pe._id?Zt(Be,Pe.totalMarks):Pe.grade||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(Pe.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ce===Pe._id?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>Rt(Pe),disabled:pe===Pe._id,className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Save",children:pe===Pe._id?r.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx(cs,{className:"h-5 w-5"})}),r.jsx("button",{onClick:nr,disabled:pe===Pe._id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Cancel",children:r.jsx(Ar,{className:"h-5 w-5"})})]}):r.jsx("button",{onClick:()=>gt(Pe),disabled:ut||Pe.frozen,className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400 disabled:cursor-not-allowed",title:ut||Pe.frozen?"Results are frozen":"Edit",children:ut||Pe.frozen?r.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):r.jsx(zs,{className:"h-5 w-5"})})})]},Pe._id||st))})]})})]}),R&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[ut&&r.jsxs("div",{className:"px-6 py-3 bg-red-50 border-b border-red-200 flex items-center gap-2",children:[r.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-red-700 font-semibold",children:"Results are FROZEN - Editing is disabled"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obtained Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map(Pe=>r.jsxs("tr",{className:ut?"bg-gray-50":"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Pe.userId||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Pe.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Pe.totalMarks??b??"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("input",{type:"number",value:Pe.obtainedMarks||"",onChange:st=>{const qe=st.target.value,lt=Pe.totalMarks??b??100;(qe===""||qe.length<=3&&parseInt(qe)<=lt)&&Br(Pe.id,"obtainedMarks",qe===""?null:parseInt(qe))},disabled:ut,className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter marks",min:"0",max:Pe.totalMarks??b??100,maxLength:3})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:`px-3 py-1 rounded-md text-sm font-semibold ${Pe.grade&&["A1","A2"].includes(Pe.grade)?"bg-green-100 text-green-800":Pe.grade&&["B1","B2"].includes(Pe.grade)?"bg-blue-100 text-blue-800":Pe.grade&&["C1","C2"].includes(Pe.grade)?"bg-yellow-100 text-yellow-800":Pe.grade==="D"?"bg-orange-100 text-orange-800":Pe.grade&&["E1","E2"].includes(Pe.grade)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:Pe.grade||"N/A"})})]},Pe.id))})]})})]})]})},Gi={getBySchoolCode:()=>"/test-details/",updateSchoolTestDetails:()=>"/test-details/",addTestType:e=>`/test-details/class/${e}/test-type`,removeTestType:(e,t)=>`/test-details/class/${e}/test-type/${t}`,getBySchoolCodeSuperadmin:e=>`/test-details/school/${e}`,updateSchoolTestDetailsSuperadmin:e=>`/test-details/school/${e}`,addTestTypeSuperadmin:(e,t)=>`/test-details/school/${e}/class/${t}/test-type`,removeTestTypeSuperadmin:(e,t,a)=>`/test-details/school/${e}/class/${t}/test-type/${a}`,getBySchoolId:e=>`/test-details/${e}`},di={defaultAcademicYear:"2024-25"},sJ={async getTestDetailsBySchoolCode(e){console.log("[DEBUG] getTestDetailsBySchoolCode called with academicYear:",e),console.log("[DEBUG] TEST_DETAILS_CONFIG.defaultAcademicYear:",di.defaultAcademicYear);const t=e?{academicYear:e}:{academicYear:di.defaultAcademicYear};return console.log("[DEBUG] Final params:",t),(await bt.get(Gi.getBySchoolCode(),{params:t})).data},async addTestTypeToClass(e,t,a){const n={testType:t,academicYear:a||di.defaultAcademicYear};return(await bt.post(Gi.addTestType(e),n)).data},async removeTestTypeFromClass(e,t,a){const n=a?{academicYear:a}:{academicYear:di.defaultAcademicYear};return(await bt.delete(Gi.removeTestType(e,t),{params:n})).data},async updateSchoolTestDetails(e,t){const a={classTestTypes:e,academicYear:t||di.defaultAcademicYear};return(await bt.put(Gi.updateSchoolTestDetails(),a)).data},async getTestDetailsBySchoolCodeSuperadmin(e,t){const a=t?{academicYear:t}:{academicYear:di.defaultAcademicYear};return(await bt.get(Gi.getBySchoolCodeSuperadmin(e),{params:a})).data},async addTestTypeToClassSuperadmin(e,t,a,n){const s={testType:a,academicYear:n||di.defaultAcademicYear};return(await bt.post(Gi.addTestTypeSuperadmin(e,t),s)).data},async removeTestTypeFromClassSuperadmin(e,t,a,n){const s=n?{academicYear:n}:{academicYear:di.defaultAcademicYear};return(await bt.delete(Gi.removeTestTypeSuperadmin(e,t,a),{params:s})).data},async updateSchoolTestDetailsSuperadmin(e,t,a){const n={classTestTypes:t,academicYear:a||di.defaultAcademicYear};return(await bt.put(Gi.updateSchoolTestDetailsSuperadmin(e),n)).data}},iJ=()=>{const{user:e,token:t}=dr(),[a,n]=S.useState(""),[s,o]=S.useState(""),[l,d]=S.useState(""),[u,m]=S.useState(!1),[p,f]=S.useState(!1),[x,w]=S.useState(null),[j,v]=S.useState([]),[b,I]=S.useState(!1),[T,P]=S.useState({}),[A,k]=S.useState([]),[E,_]=S.useState([]),[R,$]=S.useState(!1),H=["A","B","C","D","E","F","G","H","I","J","K","L","M"],L=S.useCallback(async B=>{if(!B){k([]);return}$(!0);try{const F=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!F){xe.error("School code not available");return}console.log("Fetching test types for school code:",F,"class:",B);const re=await sJ.getTestDetailsBySchoolCode();if(re.success&&re.data?.classTestTypes){const U=re.data.classTestTypes,ae=U[B];if(ae&&Array.isArray(ae)){const fe=ae.map(Se=>Se.name).filter(Boolean);k(fe),console.log("Test types loaded for class",B,":",fe)}else k([]),console.log("No test types found for class:",B);const W=Object.keys(U);_(W)}else k([]),console.log("No test data found for school")}catch(F){console.error("Error fetching test types:",F),xe.error("Failed to load test types"),k([])}finally{$(!1)}},[e?.schoolCode]);S.useEffect(()=>{a?(L(a),d("")):k([])},[a,L]);const Y=S.useCallback(async()=>{f(!0),w(null);try{const B=[{id:"1",name:"John Doe",rollNumber:"001",class:a,section:s,totalMarks:null,obtainedMarks:null,grade:null},{id:"2",name:"Jane Smith",rollNumber:"002",class:a,section:s,totalMarks:null,obtainedMarks:null,grade:null}];v(B),m(!0);const F={};B.forEach(re=>{F[re.id]=!1}),P(F)}catch(B){console.error("Error fetching students:",B),w("Failed to load students. Please try again.")}finally{f(!1)}},[a,s]),X=()=>{if(!a){xe.error("Please select a class");return}if(!s){xe.error("Please select a section");return}if(!l){xe.error("Please select a test type");return}Y()},me=()=>{I(!0);const B={};j.forEach(F=>{B[F.id]=!1}),P(B)},K=async()=>{try{console.log("Saving all results:",j),xe.success("All results saved successfully");const B={};j.forEach(F=>{B[F.id]=!0}),P(B),I(!1)}catch(B){console.error("Error saving results:",B),xe.error("Failed to save results")}},oe=(B,F,re)=>{v(U=>U.map(ae=>ae.id===B?{...ae,[F]:re}:ae)),P(U=>({...U,[B]:!1}))},G=(B,F)=>{if(!B||!F||F===0)return"N/A";const re=B/F*100;return re>=90?"A+":re>=80?"A":re>=70?"B":re>=60?"C":re>=50?"D":"F"};return S.useEffect(()=>{v(B=>B.map(F=>({...F,grade:G(F.obtainedMarks,F.totalMarks)})))},[j.map(B=>`${B.obtainedMarks}-${B.totalMarks}`).join(",")]),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Results Entry"}),u&&r.jsx("div",{className:"flex space-x-3",children:b?r.jsxs("button",{onClick:K,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save All Changes"]}):r.jsxs("button",{onClick:me,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[r.jsx(zs,{className:"h-4 w-4 mr-2"}),"Edit All"]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"class-select",className:"text-sm font-medium text-gray-700",children:"Class"}),r.jsxs("select",{id:"class-select",value:a,onChange:B=>n(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",children:[r.jsx("option",{value:"",children:"Select Class"}),E.length>0?E.map(B=>r.jsx("option",{value:B,children:B},B)):r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"LKG",children:"LKG"}),r.jsx("option",{value:"UKG",children:"UKG"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"6",children:"6"}),r.jsx("option",{value:"7",children:"7"}),r.jsx("option",{value:"8",children:"8"}),r.jsx("option",{value:"9",children:"9"}),r.jsx("option",{value:"10",children:"10"}),r.jsx("option",{value:"11",children:"11"}),r.jsx("option",{value:"12",children:"12"})]})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"section-select",className:"text-sm font-medium text-gray-700",children:"Section"}),r.jsxs("select",{id:"section-select",value:s,onChange:B=>o(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",children:[r.jsx("option",{value:"",children:"Select Section"}),H.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"test-type-select",className:"text-sm font-medium text-gray-700",children:"Test Type"}),r.jsxs("select",{id:"test-type-select",value:l,onChange:B=>d(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[150px]",disabled:!a||R,children:[r.jsx("option",{value:"",children:a?R?"Loading...":"Select Test":"Select Class First"}),A.map(B=>r.jsx("option",{value:B,children:B},B))]}),!a&&r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Select a class to see available tests"})]}),r.jsxs("button",{onClick:X,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors self-end",disabled:p,children:[p?r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),x&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-700",children:x})}),u&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll Number"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obtained Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(B=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:B.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B.rollNumber}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b?r.jsx("input",{type:"number",value:B.totalMarks||"",onChange:F=>oe(B.id,"totalMarks",parseInt(F.target.value)||null),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Total"}):B.totalMarks||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b?r.jsx("input",{type:"number",value:B.obtainedMarks||"",onChange:F=>oe(B.id,"obtainedMarks",parseInt(F.target.value)||null),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Obtained"}):B.obtainedMarks||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${B.grade==="A+"?"bg-green-100 text-green-800":B.grade==="A"?"bg-blue-100 text-blue-800":B.grade==="B"?"bg-yellow-100 text-yellow-800":B.grade==="C"?"bg-orange-100 text-orange-800":B.grade==="D"?"bg-red-100 text-red-800":B.grade==="F"?"bg-red-200 text-red-900":"bg-gray-100 text-gray-800"}`,children:B.grade||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T[B.id]?r.jsxs("span",{className:"inline-flex items-center text-green-600",children:[r.jsx(Id,{className:"h-4 w-4 mr-1"}),"Saved"]}):b?r.jsxs("span",{className:"inline-flex items-center text-orange-600",children:[r.jsx(Ar,{className:"h-4 w-4 mr-1"}),"Unsaved"]}):r.jsx("span",{className:"text-gray-400",children:"-"})})]},B.id))})]})})})]})};async function oJ(e){return(await bt.get("/messages",{params:e})).data}async function lJ(e){return(await bt.post("/messages/send",e)).data}async function cJ(e){return(await bt.post("/messages/preview",e)).data}async function dJ(e){return(await bt.delete(`/messages/${e}`)).data}const uJ=()=>{const{user:e}=dr(),{classesData:t,loading:a,error:n,hasClasses:s}=gn(),[o,l]=S.useState(""),[d,u]=S.useState(""),[m,p]=S.useState(""),[f,x]=S.useState(""),[w,j]=S.useState(""),[v,b]=S.useState([]),[I,T]=S.useState(0),[P,A]=S.useState("ALL"),[k,E]=S.useState("ALL"),[_,R]=S.useState([]),[$,H]=S.useState(!0),[L,Y]=S.useState(null),[X,me]=S.useState(1),[K,oe]=S.useState(1),G=5,[B,F]=S.useState(!1),[re,U]=S.useState(null),[ae,W]=S.useState(null),[fe,Se]=S.useState(!1),[Ie,te]=S.useState(null),[se,Q]=S.useState(null),[de,we]=S.useState(null),ce=t?.classes?.map(Ae=>Ae.className)||[],Ve=Ae=>{if(!Ae)return"N/A";try{const Xe=new Date(Ae);return Xe.toLocaleDateString()+" "+Xe.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},Be=S.useCallback(async(Ae,Xe,ot)=>{H(!0),Y(null);try{const Lt=await oJ({page:Ae,limit:G,class:Xe==="ALL"?void 0:Xe,section:ot==="ALL"?void 0:ot});R(Lt.data.messages||[]),me(Lt.data.pagination?.page||1),oe(Lt.data.pagination?.pages||1)}catch(Ot){console.error("Error fetching messages:",Ot),Y("Failed to load sent messages."),xe.error("Failed to load sent messages.")}finally{H(!1)}},[]);S.useEffect(()=>{Be(1,P,k)},[Be,P,k]),S.useEffect(()=>{if(!f||f==="ALL"){b([]),j("");return}if(t){const Ae=t.classes.find(Xe=>Xe.className===f);if(Ae){const ot=(Ae.sections||[]).map(Lt=>{const gt=Lt.sectionName||Lt;return{value:gt,section:gt}});b(ot);const Ot=ot.map(Lt=>Lt.value);w&&!Ot.includes(w)&&j("")}else b([]),j("")}},[f,t]),S.useEffect(()=>{f&&w&&f!=="ALL"&&w!=="ALL"?at(f,w):T(0)},[f,w]);const at=async(Ae,Xe)=>{try{const ot=await cJ({class:Ae,section:Xe});T(ot.data?.estimatedRecipients||0)}catch(ot){console.error("Error previewing recipients:",ot),T(0)}},pe=()=>{if(!o.trim()||!d.trim()||!m.trim()){U("Please fill in all fields");return}if(!f||f==="ALL"){U("Please select a specific Class to send a message");return}if(!w||w==="ALL"){U("Please select a specific Section to send a message");return}U(null),Se(!0)},tt=async()=>{try{if(F(!0),U(null),W(null),Se(!1),!f||f==="ALL"||!w||w==="ALL")throw new Error("Please select a specific Class and Section to send a message.");const Xe=await lJ({class:f,section:w,title:o,subject:d,message:m});if(Xe.success)W("Message sent successfully!"),l(""),u(""),p(""),x(""),j(""),T(0),Be(1,P,k),xe.success("Message sent successfully!");else throw new Error(Xe.message||"Failed to send message")}catch(Ae){U(Ae.message||"Failed to send message"),xe.error(Ae.message||"Failed to send message")}finally{F(!1)}},ut=async Ae=>{try{const Xe=Ae._id||Ae.id;te(Xe);const ot=await dJ(Xe);if(ot.success)xe.success("Message deleted successfully!"),Be(X,P,k);else throw new Error(ot.message||"Failed to delete message")}catch(Xe){console.error("Error deleting message:",Xe),xe.error(Xe.message||"Failed to delete message")}finally{te(null),Q(null)}},vt=Ae=>{Q(Ae)},Nt=()=>{Q(null),te(null)},tr=Ae=>{const Xe={...Ae,title:Ae.title||"No Title",subject:Ae.subject||"No Subject",message:Ae.message||"No Message Content",class:Ae.class||"N/A",section:Ae.section||"N/A",createdAt:Ae.createdAt||"",messageAge:Ae.messageAge||"Unknown",urgencyIndicator:Ae.urgencyIndicator||"normal"};we(Xe)},ar=()=>{we(null)},jt=Ae=>{Ae>0&&Ae<=K&&(me(Ae),Be(Ae,P,k))},Kt=(Ae,Xe)=>!Ae||typeof Ae!="string"?"":Ae.length<=Xe?Ae:Ae.substring(0,Xe)+"...",De=()=>{if(a)return r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-center py-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading classes..."})]})});if(n)return r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 text-red-500 mr-2"}),r.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Classes"})]}),r.jsx("p",{className:"text-red-700 mt-1 text-sm",children:n})]});if(!s()||ce.length===0)return r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 text-yellow-500 mr-2"}),r.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Classes Configured"})]}),r.jsx("p",{className:"text-yellow-700 mt-1 text-sm",children:"No classes have been defined for this school. Please contact the Super Admin to add classes and sections."})]});const Ae=()=>f?v.length===0?"No Sections Available":"Select Section":"Select Class First";return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"class-select",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:["Class ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"class-select",value:f,onChange:Xe=>x(Xe.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Class"}),ce.map(Xe=>r.jsxs("option",{value:Xe,children:["Class ",Xe]},Xe))]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"section-select",className:"block text-sm font-medium text-gray-700 mb-2",children:["Section ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"section-select",value:w,onChange:Xe=>j(Xe.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!f,children:[r.jsx("option",{value:"",children:Ae()}),f&&v.map(Xe=>r.jsxs("option",{value:Xe.value,children:["Section ",Xe.section]},Xe.value))]})]})]}),I>0&&f&&w&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center",children:[r.jsx(ta,{className:"h-5 w-5 text-blue-600 mr-2"}),r.jsxs("span",{className:"text-sm text-blue-800",children:["This message will be sent to ",r.jsx("strong",{children:I})," student",I!==1?"s":""," in Class ",f," - Section ",w]})]}),I===0&&f&&w&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 text-yellow-600 mr-2"}),r.jsxs("span",{className:"text-sm text-yellow-800",children:["No students found matching Class ",r.jsx("strong",{children:f})," - Section ",r.jsx("strong",{children:w}),"."]})]})]})},et=()=>{const Ae=[{name:"ALL Classes",value:"ALL"},...ce.map(ot=>({name:`Class ${ot}`,value:ot}))];let Xe=[{name:"ALL Sections",value:"ALL"}];if(P!=="ALL"&&t){const ot=t.classes.find(Ot=>Ot.className===P);if(ot){const Lt=(ot.sections||[]).map(gt=>{const nr=gt.sectionName||gt;return{name:`Section ${nr}`,value:nr}});Xe=[...Xe,...Lt]}}return r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1 sm:w-1/3",children:[r.jsx("label",{htmlFor:"filter-class",className:"block text-xs font-medium text-gray-500 mb-1",children:"Filter by Class"}),r.jsx("select",{id:"filter-class",value:P,onChange:ot=>{A(ot.target.value),E("ALL")},className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Ae.map(ot=>r.jsx("option",{value:ot.value,children:ot.name},`filter-class-${ot.value}`))})]}),r.jsxs("div",{className:"flex-1 sm:w-1/3",children:[r.jsx("label",{htmlFor:"filter-section",className:"block text-xs font-medium text-gray-500 mb-1",children:"Filter by Section"}),r.jsx("select",{id:"filter-section",value:k,onChange:ot=>E(ot.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:P==="ALL"&&Xe.length===1,children:Xe.map(ot=>r.jsx("option",{value:ot.value,children:ot.name},`filter-section-${ot.value}`))})]})]})};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 bg-white rounded-lg shadow",children:[r.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center",children:[r.jsx(Qh,{className:"mr-2 sm:mr-3 h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})," Messages"]}),re&&r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-3 sm:px-4 py-3 rounded relative",role:"alert",children:[r.jsx("strong",{className:"font-bold text-sm sm:text-base",children:"Error!"}),r.jsxs("span",{className:"block sm:inline text-sm sm:text-base",children:[" ",re]})]}),ae&&r.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-3 sm:px-4 py-3 rounded relative",role:"alert",children:[r.jsx("strong",{className:"font-bold text-sm sm:text-base",children:"Success!"}),r.jsxs("span",{className:"block sm:inline text-sm sm:text-base",children:[" ",ae]})]}),r.jsxs("div",{className:"border-b pb-4 mb-4",children:[r.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-800 mb-4",children:"Send New Message"}),r.jsx("div",{className:"mb-6",children:De()}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:o,onChange:Ae=>l(Ae.target.value),placeholder:"Enter message title",disabled:!s()||ce.length===0})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700",children:["Subject ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"subject",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:d,onChange:Ae=>u(Ae.target.value),placeholder:"Enter message subject",disabled:!s()||ce.length===0})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:["Message Body ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"message",rows:5,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:m,onChange:Ae=>p(Ae.target.value),placeholder:"Type your message here...",disabled:!s()||ce.length===0})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:space-x-3",children:[r.jsxs("button",{onClick:pe,disabled:!s()||ce.length===0||!o||!m||!f||!w,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-xs sm:text-sm font-medium rounded-md shadow-sm text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(oa,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"})," Preview"]}),r.jsx("button",{onClick:tt,disabled:B||!s()||ce.length===0||!o||!m||!f||!w,className:`w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-xs sm:text-sm font-medium rounded-md shadow-sm text-white ${B||!s()||ce.length===0||!o||!m||!f||!w?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors`,children:B?"Sending...":r.jsxs(r.Fragment,{children:[r.jsx(i4,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),"Send Message"]})})]})]}),fe&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex justify-center items-center p-4",children:r.jsxs("div",{className:"relative p-4 sm:p-6 lg:p-8 border w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl shadow-lg rounded-md bg-white",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Message Preview"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Title:"}),r.jsx("p",{className:"text-gray-900 font-semibold",children:o})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),r.jsx("p",{className:"text-gray-900 font-semibold",children:d})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Message Body:"}),r.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:m})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Target Audience:"}),r.jsxs("p",{className:"text-gray-800",children:["Class ",f," - Section ",w,I>0&&r.jsxs("span",{className:"text-blue-600 font-semibold",children:[" (",I," students)"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>Se(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:tt,disabled:B,className:`px-4 py-2 text-white rounded-md ${B?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} transition-colors`,children:B?"Sending...":"Confirm & Send"})]})]})}),r.jsx("hr",{className:"my-6"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx(W6,{className:"h-6 w-6 mr-2 text-blue-600"})," Sent Messages"]}),et(),L&&r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[r.jsx("strong",{className:"font-bold",children:"Error!"}),r.jsxs("span",{className:"block sm:inline",children:[" ",L]}),r.jsx("button",{onClick:()=>Be(X,P,k),className:"ml-4 text-sm font-semibold underline",children:"Retry"})]}),$?r.jsxs("div",{className:"flex justify-center items-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading messages..."})]}):_.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No sent messages found matching the selected filters."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto shadow-sm border border-gray-200 rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Title & Subject"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Class & Section"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Sent"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Message"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Age"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(Ae=>{const Xe=Ae.title||"",ot=Ae.subject||"",Ot=Ae.message||"",Lt=Ae.class||"",gt=Ae.section||"",nr=Ae.createdAt||"",Rt=Ae.messageAge||"",Pr=Ae.urgencyIndicator||"normal";Xe.length,ot.length;const N=Ot.length;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-3 sm:px-6 py-4",children:[r.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:Kt(Xe,20)}),r.jsx("div",{className:"text-xs text-gray-500",children:Kt(ot,20)})]}),r.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:[r.jsxs("div",{className:"font-semibold text-gray-700",children:["Class ",Lt]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Section ",gt]})]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:r.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[r.jsx(ls,{className:"h-3 w-3 mr-1"})," ",Ve(nr)]})}),r.jsxs("td",{className:"px-3 sm:px-6 py-4",children:[r.jsx("div",{className:"text-xs sm:text-sm text-gray-700 max-w-xs truncate",children:Kt(Ot,20)}),N>30&&r.jsxs("button",{onClick:()=>tr(Ae),className:"mt-1 text-blue-600 hover:text-blue-800 text-xs flex items-center gap-1",title:"View full message",children:[r.jsx(V6,{className:"h-3 w-3"}),"View full"]})]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Pr==="urgent"?"bg-red-100 text-red-800":Pr==="high"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:Rt})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[r.jsx("button",{onClick:()=>tr(Ae),className:"text-blue-600 hover:text-blue-900 transition-colors p-1 rounded hover:bg-blue-50",title:"Preview message",children:r.jsx(oa,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),r.jsx("button",{onClick:()=>vt(Ae),disabled:Ie===Ae.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors p-1 rounded hover:bg-red-50",title:"Delete message",children:Ie===Ae.id?r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-red-600"}):r.jsx(pn,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},Ae.id)})})]})}),K>1&&r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 gap-3 sm:gap-0",children:[r.jsx("button",{onClick:()=>jt(X-1),disabled:X===1,className:"w-full sm:w-auto px-4 py-2 border rounded-md text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-700",children:["Page ",X," of ",K]}),r.jsx("button",{onClick:()=>jt(X+1),disabled:X===K,className:"w-full sm:w-auto px-4 py-2 border rounded-md text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),se&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:r.jsxs("div",{className:"relative p-6 border w-full max-w-md shadow-lg rounded-md bg-white mx-4",children:[r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4 rounded",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 text-red-400 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-red-800",children:"Confirm Delete"})]})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-700",children:"Are you sure you want to delete this message?"}),r.jsxs("div",{className:"mt-2 p-3 bg-red-50 rounded-md border border-red-200",children:[r.jsx("p",{className:"font-semibold text-gray-900 break-words",children:se.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Class ",se.class," - Section ",se.section]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:se.message})]}),r.jsx("p",{className:"text-xs text-red-600 mt-2",children:"This action cannot be undone."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:Nt,disabled:Ie===(se._id||se.id),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:()=>ut(se),disabled:Ie===(se._id||se.id),className:`px-4 py-2 text-white rounded-md ${Ie===(se._id||se.id)?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"} transition-colors`,children:Ie===(se._id||se.id)?"Deleting...":"Delete"})]})]})}),de&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50 flex justify-center items-center",children:r.jsxs("div",{className:"relative p-8 border w-full max-w-2xl shadow-lg rounded-md bg-white mx-4",children:[r.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-4 rounded",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(oa,{className:"h-5 w-5 text-green-400 mr-2"}),r.jsx("h3",{className:"text-xl font-bold text-green-800",children:"Message Details"})]})}),r.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Title:"}),r.jsx("p",{className:"text-gray-900 font-semibold break-words",children:de.title})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Subject:"}),r.jsx("p",{className:"text-gray-900 font-semibold break-words",children:de.subject})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Class & Section:"}),r.jsxs("p",{className:"text-gray-800",children:["Class ",de.class," - Section ",de.section]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sent:"}),r.jsx("p",{className:"text-gray-800",children:Ve(de.createdAt)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Message Body:"}),r.jsx("div",{className:"mt-1 p-3 bg-green-50 rounded-md border border-green-200",children:r.jsx("p",{className:"text-gray-800 whitespace-pre-wrap break-words",children:de.message})})]})]}),r.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:r.jsx("button",{onClick:ar,className:"px-4 py-2 bg-green-100 text-green-800 border border-green-300 rounded-md hover:bg-green-200 transition-colors",children:"Close"})})]})})]})},zj=({schoolCode:e,valueClass:t,valueSection:a,onClassChange:n,onSectionChange:s,includeAllOptions:o=!0,disabled:l=!1,showSection:d=!0})=>{const{user:u}=dr(),[m,p]=S.useState(!1),[f,x]=S.useState(!1),[w,j]=S.useState([]),[v,b]=S.useState(!1),[I,T]=S.useState(null),P=e||u?.schoolCode,A=async()=>{if(!P){T("No school code available");return}try{b(!0),T(null),console.log(" Fetching classes for school code:",P);const $=await DM.getSchoolClasses(P);console.log(" Classes API Response:",$);let H=[];if($?.data?.success&&$.data?.data){const L=$.data.data;L.classes&&Array.isArray(L.classes)?H=L.classes:Array.isArray(L)&&(H=L)}else if($?.data?.success&&$.data?.classes)H=$.data.classes;else if($?.success&&$?.data){const L=$.data;L.classes&&Array.isArray(L.classes)?H=L.classes:Array.isArray(L)&&(H=L)}else $?.success&&$?.classes?H=$.classes:$?.data?.classes&&Array.isArray($.data.classes)?H=$.data.classes:Array.isArray($?.data)?H=$.data:Array.isArray($)&&(H=$);if(console.log(" Processed payload:",H),H&&Array.isArray(H)&&H.length>0){j(H);const L=H.map(Y=>Y.className);t!=="ALL"&&!L.includes(t)&&(n("ALL"),s("ALL"))}else console.warn(" No classes found in response"),j([])}catch($){console.error("Error fetching classes:",$),T("Failed to load classes and sections"),j([])}finally{b(!1)}};S.useEffect(()=>{A()},[P]);const k=$=>{if(n($),$==="ALL")s("ALL");else{const H=w.find(L=>L.className===$);if(H){const L=H.sections.map(Y=>Y.sectionName);a!=="ALL"&&!L.includes(a)&&s("ALL")}else s("ALL")}p(!1)},E=$=>{s($),x(!1)},_=()=>{if(t==="ALL")return[{sectionId:"ALL",sectionName:"ALL"}];const $=w.find(H=>H.className===t);return $?$.sections:[]},R=()=>{if(a==="ALL")return"All Sections";const $=_().find(H=>H.sectionName===a);return $?`Section ${$.sectionName}`:"Select Section"};return v?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(tf,{className:"h-5 w-5 animate-spin text-blue-600 mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Loading classes..."})]})}):I?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{className:"col-span-2 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 mr-2"}),r.jsx("span",{className:"text-sm",children:I}),r.jsx("button",{onClick:A,className:"ml-auto text-red-600 hover:text-red-800 underline text-sm",children:"Retry"})]})}):w.length===0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{className:"col-span-2 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 mr-2"}),r.jsx("span",{className:"text-sm",children:"No classes defined for this school. Ask Super Admin to add classes/sections."}),r.jsx("button",{onClick:A,className:"ml-auto text-yellow-600 hover:text-yellow-800 underline text-sm",children:"Refresh"})]})},"no-data-state"):r.jsxs("div",{className:`grid grid-cols-1 ${d?"md:grid-cols-2":"md:grid-cols-1"} gap-4`,children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>p(!m),disabled:l,className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"block truncate",children:t==="ALL"?"All Classes":`Class ${t}`}),r.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:r.jsx(Us,{className:"h-5 w-5 text-gray-400"})})]}),m&&r.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none",children:[o&&r.jsx("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-blue-50",onClick:()=>k("ALL"),children:r.jsx("span",{className:"font-normal block truncate",children:"All Classes"})},"all-classes"),w.map($=>r.jsxs("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-blue-50",onClick:()=>k($.className),children:[r.jsxs("span",{className:"font-normal block truncate",children:["Class ",$.className]}),r.jsxs("span",{className:"text-xs text-gray-500 block",children:[$.sections.length," section",$.sections.length!==1?"s":""]})]},`class-${$.className||$._id}`))]},"class-dropdown")]})]},"class-selector"),d?r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>x(!f),disabled:l||t==="ALL",className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"block truncate",children:R()}),r.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:r.jsx(Us,{className:"h-5 w-5 text-gray-400"})})]}),f&&r.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none",children:[o&&r.jsx("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-blue-50",onClick:()=>E("ALL"),children:r.jsx("span",{className:"font-normal block truncate",children:"All Sections"})},"all-sections"),_().filter($=>$.sectionId!=="ALL").map($=>r.jsx("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-blue-50",onClick:()=>E($.sectionName),children:r.jsxs("span",{className:"font-normal block truncate",children:["Section ",$.sectionName]})},`section-${$.sectionId}`))]},"section-dropdown")]})]},"section-selector"):null]},"class-section-select")},mJ=()=>{const{user:e}=dr(),[t,a]=S.useState("ALL"),[n,s]=S.useState("ALL"),[o,l]=S.useState(""),[d,u]=S.useState(""),[m,p]=S.useState(""),[f,x]=S.useState("2024-25"),[w,j]=S.useState([{name:"",amount:0,dueDate:"",description:""}]),[v,b]=S.useState(1),[I,T]=S.useState(!0),[P,A]=S.useState(!1),[k,E]=S.useState([]),[_,R]=S.useState(!1),[$,H]=S.useState(null),[L,Y]=S.useState(null);console.log("FeeStructureTab render"),ge.useEffect(()=>{(async()=>{try{const F=await Xi.getFeeStructures({class:t,section:n});F.data?.success?E(F.data.data||[]):Array.isArray(F)?E(F||[]):E([])}catch{E([])}})()},[t,n]);const X=B=>{w.length>1&&j(w.filter((F,re)=>re!==B))},me=(B,F,re)=>{const U=[...w];U[B]={...U[B],[F]:re},j(U)},K=w.reduce((B,F)=>B+(F.amount||0),0),oe=()=>{const B=Number(m||0),F=Math.max(1,Math.min(12,Number(v)||1));if(!B||B<=0)return;if(I&&F>1){if(B<100*(F-1)){H(`Total amount must be at least ${100*(F-1)} to split ${F} installments with first ${F-1} multiples of 100.`);return}const fe=Math.floor(B/F/100)*100,Se=Array.from({length:F-1}).map(()=>({name:"",amount:fe,dueDate:"",description:""})),Ie=fe*(F-1),te=B-Ie,se=[...Se,{name:"",amount:te,dueDate:"",description:""}].map((Q,de)=>({...Q,name:`Installment ${de+1}`}));j(se);return}const re=Math.floor(B/F),U=B-re*F,ae=Array.from({length:F}).map((W,fe)=>({name:`Installment ${fe+1}`,amount:fe<U?re+1:re,dueDate:"",description:""}));j(ae)},G=async()=>{if(H(null),Y(null),!o||!m||w.some(B=>!B.name||!B.amount||!B.dueDate)){H("Please fill all required fields");return}if(K!==Number(m)){H("Sum of installment amounts must match total amount");return}try{R(!0);const B={name:o,description:d,class:t,section:n,totalAmount:Number(m),installments:w.map(U=>({name:U.name,amount:Number(U.amount||0),dueDate:U.dueDate,description:U.description})),applyToStudents:P},re=(await Xi.createFeeStructure(B)).data?.data?.appliedToStudents;Y(re!==void 0?`Fee structure saved successfully. Applied to ${re} students.`:"Fee structure saved successfully.");try{const U=await Xi.getFeeStructures({});U.data?.success&&E(U.data.data||[])}catch{}l(""),u(""),p(""),a("ALL"),s("ALL"),j([{name:"",amount:0,dueDate:"",description:""}]),A(!1)}catch(B){H(B?.response?.data?.message||"Failed to save fee structure")}finally{R(!1)}};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-full overflow-x-hidden",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6 overflow-hidden",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4 sm:mb-6",children:"Create Fee Structure"}),$&&r.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-3 sm:px-4 py-3 rounded flex items-center text-sm",children:[r.jsx(Wa,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 flex-shrink-0"}),r.jsx("span",{className:"break-words",children:$})]}),L&&r.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 px-3 sm:px-4 py-3 rounded text-sm",children:r.jsx("span",{className:"break-words",children:L})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee Structure Name *"}),r.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Annual Fee 2024-25"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:d,onChange:B=>u(B.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional description"})]}),r.jsx(zj,{schoolCode:e?.schoolCode,valueClass:t,valueSection:n,onClassChange:a,onSectionChange:s,showSection:!1}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),r.jsx("input",{type:"text",value:f,readOnly:!0,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount *"}),r.jsx("input",{type:"number",value:m,onChange:B=>p(B.target.value),inputMode:"numeric",pattern:"[0-9]*",onKeyDown:B=>{["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(B.key)||(B.ctrlKey||B.metaKey)&&["a","c","v","x"].includes(B.key.toLowerCase())||/^[0-9]$/.test(B.key)||B.preventDefault()},onPaste:B=>{const re=(B.clipboardData||window.clipboardData).getData("text").replace(/\D+/g,"");B.preventDefault(),p(U=>(window.getSelection?.(),re))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter total amount"})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Installments"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"number",min:1,max:12,value:v,onChange:B=>b(Number(B.target.value)),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),r.jsx("button",{type:"button",onClick:oe,className:"flex items-center px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Generate"})]})]}),r.jsx("div",{className:"space-y-3",children:w.map((B,F)=>r.jsxs("div",{className:"bg-white p-3 rounded border",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Installment ",F+1]}),w.length>1&&r.jsx("button",{type:"button",onClick:()=>X(F),className:"text-red-600 hover:text-red-800",children:r.jsx(pn,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",placeholder:"Name",value:B.name,onChange:re=>me(F,"name",re.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),r.jsx("input",{type:"number",placeholder:"Amount",value:B.amount||"",onChange:re=>me(F,"amount",Number(re.target.value)),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),r.jsx("input",{type:"date",value:B.dueDate,onChange:re=>me(F,"dueDate",re.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),r.jsx("input",{type:"text",placeholder:"Description",value:B.description,onChange:re=>me(F,"description",re.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},F))}),r.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:"Calculated Total:"}),r.jsxs("span",{className:"font-bold",children:["",K.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:"Expected Total:"}),r.jsxs("span",{className:"font-bold",children:["",m?Number(m).toLocaleString():"0"]})]})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"applyToStudents",checked:P,onChange:B=>A(B.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"applyToStudents",className:"ml-2 block text-sm text-gray-900",children:"Apply this fee structure to all students in the selected class"})]}),r.jsx("button",{onClick:G,disabled:_,className:`w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${_?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:_?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save Fee Structure"]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Existing Fee Structures"}),k.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No fee structures found."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Name"}),r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Class"}),r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Section"}),r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Total Amount"}),r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Academic Year"}),r.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((B,F)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:B.name}),r.jsx("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:B.class}),r.jsx("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:B.section}),r.jsxs("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:["",(B.totalAmount||0).toLocaleString()]}),r.jsx("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:B.academicYear}),r.jsx("td",{className:"px-3 sm:px-4 py-2 text-sm text-gray-900",children:r.jsx("button",{className:"text-red-600 hover:text-red-800",children:r.jsx(pn,{className:"h-4 w-4"})})})]},F))})]})})]})]})},hJ=({schoolData:e,studentData:t,paymentData:a,installments:n,totalAmount:s,totalPaid:o,totalRemaining:l})=>{const d=f=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(f),u=f=>{if(!f)return"-";try{const x=new Date(f);if(isNaN(x.getTime()))return"-";const w=x.toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),j=x.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} at ${j}`}catch(x){return console.error("DateTime formatting error:",x),"-"}},m=()=>{const f=p(),x=window.open("","_blank");x&&(x.document.write(f),x.document.close(),setTimeout(()=>{x.focus(),x.print()},500))},p=()=>`
      <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Payment Receipt - ${a.receiptNumber}</title>
    <style>
        /* Base styles matching the component's 'print' mode and image aesthetics */
        @page {
            size: A4 landscape;
            margin: 8mm;
        }
        body {
            font-family: Arial, sans-serif; /* Changed font to match reference */
            font-size: 10px; /* Base font size */
            margin: 0;
            padding: 0;
            background: white;
            color: #000; /* Primary text color */
        }
        .receipt-container {
            display: flex;
            flex-direction: row;
            gap: 16px; /* Space between the two copies - matched reference */
            width: 100%;
            min-height: 200mm; /* A bit less than A4 height for safety */
            box-sizing: border-box;
            padding: 10mm; /* Padding around the container, adjusting for margin */
        }
        .receipt-copy {
            flex: 1;
            border: 1px solid #d1d5db; /* Light grey border - matched reference */
            padding: 12px; /* Increased internal padding - matched reference */
            display: flex;
            flex-direction: column;
            border-radius: 0; /* Removing border-radius for cleaner print look */
        }

        /* --- Header Section (Refactored to match Invoice structure) --- */

        .copy-type-section {
            text-align: center;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #9ca3af; /* Darker border for section break */
        }
        .copy-header-title {
            font-size: 12px;
            font-weight: bold;
            color: #1f2937;
            margin: 0;
        }
        
        /* School Info (Refactored to match Invoice logo/address section) */
        .school-logo-section {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #d1d5db;
        }
        .school-logo-placeholder { /* For dynamic logo or simple text */
            width: 32px;
            height: 32px;
            background: #c53030; /* Example red for placeholder/accent */
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .school-logo-placeholder > div {
            width: 16px;
            height: 16px;
            border: 1px solid white;
            border-radius: 2px;
            transform: rotate(45deg);
        }
        .school-logo-actual {
            max-width: 40px; 
            max-height: 40px; 
            object-fit: contain;
        }

        .school-name-title {
            font-size: 14px; /* Slightly larger for prominence */
            font-weight: 900; /* Ultra bold */
            color: #000; /* Dark black */
            margin: 0;
        }
        .school-address {
            font-size: 8px;
            color: #4b5563;
            margin: 1px 0;
        }
        
        /* Document Title (RECEIPT) */
        .doc-title-section {
            text-align: center;
            margin-bottom: 24px; /* Increased space before details */
        }
        .doc-title {
            font-size: 14px;
            font-weight: bold;
            color: #2563eb; /* Blue color for RECEIPT/INVOICE */
            margin: 0;
        }
        .receipt-number {
            font-size: 10px;
            color: #4b5563;
            margin-top: 2px;
        }

        /* --- Details Section (Matching Invoice Details Grid) --- */
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 32px;
            font-size: 10px;
            color: #374151;
        }
        .details-box-title {
            font-size: 12px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 4px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 10px;
        }
        .info-label {
            color: #6b7280;
            font-weight: normal;
        }
        .info-value {
            color: #1f2937;
            font-weight: 600;
        }

        /* --- Table Section (Matching Invoice Table) --- */
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 32px;
            font-size: 10px;
        }
        .items-table th, .items-table td {
            padding: 8px 12px; /* Adjusted padding for better fit */
            border: 1px solid #d1d5db;
            text-align: left;
        }
        .items-table th {
            background-color: #f3f4f6; /* Light grey header background */
            font-weight: 600;
        }
        .text-center { text-align: center !important; }
        .text-right { text-align: right !important; }
        .text-green { color: #047857; font-weight: 600; }
        .text-red { color: #dc2626; font-weight: 600; }

        /* --- Totals/Payment Section (Matching Invoice Totals) --- */

        .totals-section-container {
            display: flex;
            justify-content: flex-end;
        }
        .totals-box {
            width: 256px; /* Matched width from reference */
        }
        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #d1d5db;
        }
        .current-payment-row { 
            padding: 12px 0;
            font-weight: bold;
            font-size: 18px;
            border-bottom: 2px solid #1f2937;
            color: #1d4ed8;
        }
        .current-payment-label {
            font-size: 14px;
            color: #4b5563;
        }
        .current-payment-amount {
            font-weight: bold;
        }

        /* --- Footer (Matching Invoice Footer) --- */

        .receipt-footer {
            margin-top: auto;
            padding-top: 32px;
            border-top: 1px solid #d1d5db;
            text-align: center;
            font-size: 10px; /* Slightly larger footer text */
            color: #4b5563;
        }
        .footer-line {
            margin: 2px 0;
        }
        .footer-bold {
            font-weight: 600;
            color: #1f2937;
        }
        .footer-blue {
            color: #2563eb;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="receipt-container">
        <div class="receipt-copy">
            
            <div class="copy-type-section">
                <h3 class="copy-header-title">ADMIN COPY</h3>
            </div>
            
            <div class="school-logo-section">
                ${e.hasSchoolLogo&&e.schoolLogo?`<img src="${e.schoolLogo}" alt="${e.schoolName} Logo" class="school-logo-actual" />`:'<div class="school-logo-placeholder"><div></div></div>'}
                <div>
                    <h1 class="school-name-title">${e.schoolName}</h1>
                    <p class="school-address">${e.address}</p>
                </div>
                <div style="flex-grow: 1; text-align: right;"></div>
            </div>

            <div class="doc-title-section">
                <h2 class="doc-title">PAYMENT RECEIPT</h2>
                <p class="receipt-number">#${a.receiptNumber}</p>
            </div>

            <div class="details-grid">
                <div>
                    <h3 class="details-box-title">PAID BY:</h3>
                    <div class="info-row">
                        <span class="info-label">Student Name:</span>
                        <span class="info-value">${t.name}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Student ID:</span>
                        <span class="info-value">${t.userId||t.studentId}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Class & Section:</span>
                        <span class="info-value">${t.class}-${t.section}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Academic Year:</span>
                        <span class="info-value">${t.academicYear}</span>
                    </div>
                </div>
                
                <div>
                    <h3 class="details-box-title" style="text-align: right;">PAYMENT INFO:</h3>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Payment Date:</span>
                        <span class="info-value">${u(a.paymentDate)}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Payment Method:</span>
                        <span class="info-value">${a.paymentMethod}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Reference:</span>
                        <span class="info-value">${a.paymentReference||"-"}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Installment Paid:</span>
                        <span class="info-value">${a.installmentName}</span>
                    </div>
                </div>
            </div>
            
            <h3 class="details-box-title" style="margin-bottom: 8px;">FEE & INSTALLMENT DETAILS</h3>

            <table class="items-table">
                <thead>
                    <tr>
                        <th style="width: 50%;">Installment / Fee Head</th>
                        <th style="width: 25%;" class="text-right">Amount Due</th>
                        <th style="width: 25%;" class="text-right">Paid to Date</th>
                    </tr>
                </thead>
                <tbody>
                    ${n.map(f=>`
                        <tr>
                            <td>${f.isCurrent?f.name+" (Current Payment)":f.name}</td>
                            <td class="text-right">${d(f.amount)}</td>
                            <td class="text-right text-green">${d(f.paid)}</td>
                        </tr>
                    `).join("")}
                    <tr style="background: #f9fafb; font-weight: 600;">
                        <td>Overall Total</td>
                        <td class="text-right">${d(s)}</td>
                        <td class="text-right text-green">${d(o)}</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="receipt-footer">
                <div class="footer-line footer-bold">Thank you for your payment!</div>
                <div class="footer-line">Powered by <span class="footer-blue">EduLogix</span></div>
                <div class="footer-line">This is a computer generated receipt.</div>
            </div>
        </div>

        <div class="receipt-copy">
            
            <div class="copy-type-section">
                <h3 class="copy-header-title">STUDENT COPY</h3>
            </div>
            
            <div class="school-logo-section">
                ${e.hasSchoolLogo&&e.schoolLogo?`<img src="${e.schoolLogo}" alt="${e.schoolName} Logo" class="school-logo-actual" />`:'<div class="school-logo-placeholder"><div></div></div>'}
                <div>
                    <h1 class="school-name-title">${e.schoolName}</h1>
                    <p class="school-address">${e.address}</p>
                </div>
                <div style="flex-grow: 1; text-align: right;"></div>
            </div>

            <div class="doc-title-section">
                <h2 class="doc-title">PAYMENT RECEIPT</h2>
                <p class="receipt-number">#${a.receiptNumber}</p>
            </div>

            <div class="details-grid">
                <div>
                    <h3 class="details-box-title">PAID BY:</h3>
                    <div class="info-row">
                        <span class="info-label">Student Name:</span>
                        <span class="info-value">${t.name}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Student ID:</span>
                        <span class="info-value">${t.userId||t.studentId}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Class & Section:</span>
                        <span class="info-value">${t.class}-${t.section}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Academic Year:</span>
                        <span class="info-value">${t.academicYear}</span>
                    </div>
                </div>
                
                <div>
                    <h3 class="details-box-title" style="text-align: right;">PAYMENT INFO:</h3>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Payment Date:</span>
                        <span class="info-value">${u(a.paymentDate)}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Payment Method:</span>
                        <span class="info-value">${a.paymentMethod}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Reference:</span>
                        <span class="info-value">${a.paymentReference||"-"}</span>
                    </div>
                    <div class="info-row" style="justify-content: flex-end;">
                        <span class="info-label" style="margin-right: 8px;">Installment Paid:</span>
                        <span class="info-value">${a.installmentName}</span>
                    </div>
                </div>
            </div>
            
            <h3 class="details-box-title" style="margin-bottom: 8px;">FEE & INSTALLMENT DETAILS</h3>

            <table class="items-table">
                <thead>
                    <tr>
                        <th style="width: 50%;">Installment / Fee Head</th>
                        <th style="width: 25%;" class="text-right">Amount Due</th>
                        <th style="width: 25%;" class="text-right">Paid to Date</th>
                    </tr>
                </thead>
                <tbody>
                    ${n.map(f=>`
                        <tr>
                            <td>${f.isCurrent?f.name+" (Current Payment)":f.name}</td>
                            <td class="text-right">${d(f.amount)}</td>
                            <td class="text-right text-green">${d(f.paid)}</td>
                        </tr>
                    `).join("")}
                    <tr style="background: #f9fafb; font-weight: 600;">
                        <td>Overall Total</td>
                        <td class="text-right">${d(s)}</td>
                        <td class="text-right text-green">${d(o)}</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="receipt-footer">
                <div class="footer-line footer-bold">Thank you for your payment!</div>
                <div class="footer-line">Powered by <span class="footer-blue">EduLogix</span></div>
                <div class="footer-line">This is a computer generated receipt.</div>
            </div>
        </div>
    </div>
</body>
</html>
    `;return r.jsxs("div",{className:"max-w-7xl mx-auto bg-white",children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @media print {
            @page {
              size: A4 landscape;
              margin: 8mm;
            }
            * {
              -webkit-print-color-adjust: exact !important;
              color-adjust: exact !important;
              print-color-adjust: exact !important;
            }
            body {
              margin: 0 !important;
              padding: 0 !important;
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            }
            .print-hidden {
              display: none !important;
            }
            .receipt-container {
              display: flex !important;
              gap: 8mm !important;
              width: 100% !important;
              height: 100vh !important;
              margin: 0 !important;
              padding: 0 !important;
            }
            .receipt-copy {
              flex: 1 !important;
              border: 1px solid #d1d5db !important;
              border-radius: 4px !important;
              overflow: hidden !important;
              display: flex !important;
              flex-direction: column !important;
              page-break-inside: avoid !important;
            }
            .receipt-header {
              background: #f9fafb !important;
              padding: 6px 8px !important;
              border-bottom: 1px solid #d1d5db !important;
              text-align: center !important;
            }
            .receipt-title {
              font-size: 12px !important;
              font-weight: 700 !important;
              color: #111827 !important;
              margin-bottom: 2px !important;
            }
            .school-info {
              font-size: 10px !important;
              color: #6b7280 !important;
              margin-bottom: 3px !important;
            }
            .copy-badge {
              background: #3b82f6 !important;
              color: white !important;
              padding: 2px 6px !important;
              border-radius: 3px !important;
              font-size: 8px !important;
              font-weight: 600 !important;
              display: inline-block !important;
              margin-top: 2px !important;
            }
            .receipt-number {
              background: #dbeafe !important;
              color: #1e40af !important;
              padding: 3px 8px !important;
              border-radius: 3px !important;
              font-size: 9px !important;
              font-weight: 600 !important;
              display: inline-block !important;
              margin-top: 3px !important;
            }
            .receipt-content {
              flex: 1 !important;
              padding: 6px 8px !important;
              display: flex !important;
              flex-direction: column !important;
            }
            .student-info, .payment-info {
              background: #f9fafb !important;
              padding: 6px !important;
              border-radius: 3px !important;
              margin-bottom: 6px !important;
              border: 1px solid #e5e7eb !important;
            }
            .info-row {
              display: flex !important;
              justify-content: space-between !important;
              margin-bottom: 2px !important;
              font-size: 9px !important;
            }
            .info-label {
              color: #6b7280 !important;
              font-weight: 500 !important;
            }
            .info-value {
              color: #111827 !important;
              font-weight: 600 !important;
            }
            .installment-table {
              width: 100% !important;
              border-collapse: collapse !important;
              margin: 6px 0 !important;
              font-size: 9px !important;
            }
            .installment-table th {
              background: #f3f4f6 !important;
              padding: 4px 6px !important;
              border: 1px solid #d1d5db !important;
              font-weight: 600 !important;
              text-align: left !important;
            }
            .installment-table td {
              padding: 4px 6px !important;
              border: 1px solid #d1d5db !important;
            }
            .installment-table .text-right {
              text-align: right !important;
            }
            .current-payment {
              background: #dbeafe !important;
              padding: 8px !important;
              border-radius: 4px !important;
              text-align: center !important;
              margin: 6px 0 !important;
            }
            .current-payment-label {
              font-size: 9px !important;
              color: #6b7280 !important;
              margin-bottom: 2px !important;
            }
            .current-payment-amount {
              font-size: 14px !important;
              font-weight: 700 !important;
              color: #1d4ed8 !important;
            }
            .receipt-footer {
              background: #f9fafb !important;
              padding: 6px 8px !important;
              border-top: 1px solid #d1d5db !important;
              text-align: center !important;
              font-size: 8px !important;
              color: #6b7280 !important;
              margin-top: auto !important;
            }
            .footer-line {
              margin-bottom: 1px !important;
            }
            .footer-bold {
              font-weight: 600 !important;
            }
            .footer-blue {
              color: #2563eb !important;
              font-weight: 600 !important;
            }
            .text-green {
              color: #047857 !important;
              font-weight: 600 !important;
            }
            .text-red {
              color: #dc2626 !important;
              font-weight: 600 !important;
            }
          }
        `}}),r.jsx("div",{className:"flex justify-end gap-3 mb-6 print:hidden",children:r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(qb,{size:16}),"Print Receipt"]})}),r.jsxs("div",{className:"receipt-container flex gap-4 print:gap-2",children:[r.jsxs("div",{className:"receipt-copy flex-1 border border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.hasSchoolLogo&&e.schoolLogo&&r.jsx("img",{src:e.schoolLogo,alt:`${e.schoolName} Logo`,className:"h-16 w-auto object-contain",onError:f=>{const x=f.target;x.style.display="none"}}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-800",children:e.schoolName}),r.jsxs("p",{className:"text-sm text-gray-600",children:["School Code: ",e.schoolCode]}),e.address&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.address})]})]}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-xs font-semibold",children:"ADMIN COPY"})}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm text-gray-600",children:u(a.paymentDate)}),r.jsx("div",{className:"mt-1",children:r.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-xs font-semibold",children:["Receipt #",a.receiptNumber]})})]})]})}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Student Name"}),r.jsx("span",{className:"font-medium",children:t.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Student ID"}),r.jsx("span",{className:"font-medium",children:t.userId||t.studentId})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Class & Section"}),r.jsxs("span",{className:"font-medium",children:[t.class,"-",t.section]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Academic Year"}),r.jsx("span",{className:"font-medium",children:t.academicYear})]})]})]})}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Payment Date"}),r.jsx("span",{className:"font-medium",children:u(a.paymentDate)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Payment Method"}),r.jsx("span",{className:"font-medium",children:a.paymentMethod})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Reference"}),r.jsx("span",{className:"font-medium",children:a.paymentReference||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Installment"}),r.jsx("span",{className:"font-medium",children:a.installmentName})]})]})]})}),r.jsxs("div",{className:"px-4 py-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-3 bg-gray-100 px-3 py-2 rounded",children:"Installment Details"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Installment"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Paid"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Remaining"})]})}),r.jsxs("tbody",{children:[n.map((f,x)=>r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2",children:f.isCurrent?r.jsxs("span",{className:"font-medium",children:[f.name," (Current)"]}):f.name}),r.jsx("td",{className:"px-3 py-2 text-right font-medium",children:d(f.amount)}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-green-600 font-medium",children:d(f.paid)})}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-red-600 font-medium",children:d(f.remaining)})})]},x)),r.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[r.jsx("td",{className:"px-3 py-2",children:"Total"}),r.jsx("td",{className:"px-3 py-2 text-right",children:d(s)}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-green-600",children:d(o)})}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-red-600",children:d(l)})})]})]})]})})]}),r.jsxs("div",{className:"px-4 py-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2 bg-gray-100 px-3 py-2 rounded",children:"Fee Summary"}),r.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-50",children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b border-gray-200",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 border-b border-gray-200",children:"Amount ()"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium",children:"Total Annual Fee"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:d(s)})]}),r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium text-green-700",children:"Total Amount Paid"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-green-700",children:d(o)})]}),r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium text-red-700",children:"Total Remaining"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-red-700",children:d(l)})]}),r.jsxs("tr",{className:"bg-gray-50 font-bold",children:[r.jsx("td",{className:"px-3 py-2",children:"Balance Due"}),r.jsx("td",{className:"px-3 py-2 text-right text-red-700",children:d(l)})]})]})]})]}),r.jsx("div",{className:"px-4 py-3 bg-blue-50 border-t border-gray-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Current Payment"}),r.jsx("div",{className:"text-2xl font-bold text-blue-800",children:d(a.amount)})]})}),r.jsxs("div",{className:"px-4 py-3 bg-gray-50 text-center text-xs text-gray-600 border-t border-gray-200",children:[r.jsx("div",{className:"font-semibold",children:"This is a computer generated copy."}),r.jsxs("div",{className:"mt-1",children:["Powered by ",r.jsx("span",{className:"font-semibold text-blue-600",children:"EduLogix"})]}),r.jsxs("div",{className:"mt-1",children:["Thank you for your payment!  ",e.website]}),r.jsxs("div",{className:"mt-1",children:[e.phone,"  ",e.email]})]})]}),r.jsxs("div",{className:"flex-1 border border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.hasSchoolLogo&&e.schoolLogo&&r.jsx("img",{src:e.schoolLogo,alt:`${e.schoolName} Logo`,className:"h-16 w-auto object-contain",onError:f=>{const x=f.target;x.style.display="none"}}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-800",children:e.schoolName}),r.jsxs("p",{className:"text-sm text-gray-600",children:["School Code: ",e.schoolCode]}),e.address&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.address})]})]}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-xs font-semibold",children:"STUDENT COPY"})}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm text-gray-600",children:u(a.paymentDate)}),r.jsx("div",{className:"mt-1",children:r.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-xs font-semibold",children:["Receipt #",a.receiptNumber]})})]})]})}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Student Name"}),r.jsx("span",{className:"font-medium",children:t.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Student ID"}),r.jsx("span",{className:"font-medium",children:t.userId||t.studentId})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Class & Section"}),r.jsxs("span",{className:"font-medium",children:[t.class,"-",t.section]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Academic Year"}),r.jsx("span",{className:"font-medium",children:t.academicYear})]})]})]})}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Payment Date"}),r.jsx("span",{className:"font-medium",children:u(a.paymentDate)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Payment Method"}),r.jsx("span",{className:"font-medium",children:a.paymentMethod})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Reference"}),r.jsx("span",{className:"font-medium",children:a.paymentReference||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Installment"}),r.jsx("span",{className:"font-medium",children:a.installmentName})]})]})]})}),r.jsxs("div",{className:"px-4 py-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-3 bg-gray-100 px-3 py-2 rounded",children:"Installment Details"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Installment"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Paid"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Remaining"})]})}),r.jsxs("tbody",{children:[n.map((f,x)=>r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2",children:f.isCurrent?r.jsxs("span",{className:"font-medium",children:[f.name," (Current)"]}):f.name}),r.jsx("td",{className:"px-3 py-2 text-right font-medium",children:d(f.amount)}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-green-600 font-medium",children:d(f.paid)})}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-red-600 font-medium",children:d(f.remaining)})})]},x)),r.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[r.jsx("td",{className:"px-3 py-2",children:"Total"}),r.jsx("td",{className:"px-3 py-2 text-right",children:d(s)}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-green-600",children:d(o)})}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("span",{className:"text-red-600",children:d(l)})})]})]})]})})]}),r.jsxs("div",{className:"px-4 py-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2 bg-gray-100 px-3 py-2 rounded",children:"Fee Summary"}),r.jsxs("table",{className:"w-full text-sm border border-gray-200 rounded",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-blue-50",children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b border-gray-200",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 border-b border-gray-200",children:"Amount ()"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium",children:"Total Annual Fee"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:d(s)})]}),r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium text-green-700",children:"Total Amount Paid"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-green-700",children:d(o)})]}),r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("td",{className:"px-3 py-2 font-medium text-red-700",children:"Total Remaining"}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-red-700",children:d(l)})]}),r.jsxs("tr",{className:"bg-gray-50 font-bold",children:[r.jsx("td",{className:"px-3 py-2",children:"Balance Due"}),r.jsx("td",{className:"px-3 py-2 text-right text-red-700",children:d(l)})]})]})]})]}),r.jsx("div",{className:"px-4 py-3 bg-blue-50 border-t border-gray-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Current Payment"}),r.jsx("div",{className:"text-2xl font-bold text-blue-800",children:d(a.amount)})]})}),r.jsxs("div",{className:"px-4 py-3 bg-gray-50 text-center text-xs text-gray-600 border-t border-gray-200",children:[r.jsx("div",{className:"font-semibold",children:"This is a computer generated copy."}),r.jsxs("div",{className:"mt-1",children:["Powered by ",r.jsx("span",{className:"font-semibold text-blue-600",children:"EduLogix"})]}),r.jsxs("div",{className:"mt-1",children:["Thank you for your payment!  ",e.website]}),r.jsxs("div",{className:"mt-1",children:[e.phone,"  ",e.email]})]})]})]})]})},w1=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("en-GB")}catch(t){return console.error("Error formatting date:",t),""}},N1=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),fJ=e=>{const[t,a]=S.useState(""),[n,s]=S.useState(!1),o=S.useCallback(()=>(new Date().getTime(),`CRN-TEMP-${Math.floor(Math.random()*1e3)}`),[]);return S.useEffect(()=>{const l=async()=>{if(e.chalanNumber&&e.chalanNumber.trim()!==""){a(e.chalanNumber.trim().toUpperCase());return}s(!0);try{const d=await yt.get("/chalans/next-chalan-number");if(d?.data?.success&&d?.data?.chalanNumber){a(d.data.chalanNumber);return}const u=o();a(u)}catch(d){console.error("Error fetching chalan number:",d);const u=o();a(u)}finally{s(!1)}};e.chalanNumber?a(e.chalanNumber):l()},[e.chalanNumber,o]),{chalanNumber:t,isLoading:n}},pJ=({chalan:e,copyType:t})=>{const a=e;ge.useEffect(()=>{console.group("Chalan props in ChalanCopy"),console.log("School Logo:",a?.schoolLogo),console.log("School Code:",a?.schoolCode),console.log("School Name:",a?.schoolName),console.log("Chalan Number:",a?.chalanNumber),console.log("Has Bank Details:",!!a?.bankDetails),console.log("Bank Details:",JSON.stringify(a?.bankDetails,null,2)),console.log("Has School Data Bank Details:",!!a?.schoolData?.bankDetails),console.log("School Data Bank Details:",JSON.stringify(a?.schoolData?.bankDetails,null,2)),console.groupEnd()},[a]);const n=S.useCallback(l=>l?l.startsWith("http")?l:l.startsWith("/uploads")?`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${l}`:l:"",[]),s=S.useCallback(()=>{if(a?.schoolLogo)return n(a.schoolLogo);const l=a?.schoolData?.logo||a?.schoolData?.logoUrl;return n(l||"/default-school-logo.svg")},[a?.schoolLogo,a?.schoolData,n]),o=S.useCallback(l=>{const d=l.target,m=n("/default-school-logo.svg");d.src!==m?d.src=m:(console.error("All logo loading attempts failed"),d.style.display="none")},[]);return r.jsxs("div",{className:"w-[90%] max-w-md mx-auto border-2 border-gray-400 p-4 mb-4",children:[r.jsxs("div",{className:"mb-4 border-b border-gray-200 pb-3",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-16 w-16 flex items-center justify-center border border-gray-200 rounded overflow-hidden",children:r.jsx("img",{src:s(),alt:`${a.schoolName||"School"} Logo`,className:"w-full h-full object-contain p-1",onError:o})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900",children:a.schoolName||"School Name"}),r.jsx("p",{className:"text-sm text-gray-600",children:S1(a.schoolAddress||a.schoolData?.address)||"Address not available"})]})]}),r.jsxs("div",{className:"text-center mt-3",children:[r.jsx("p",{className:"text-sm font-bold uppercase tracking-wide",children:"FEE PAYMENT CHALAN"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Academic Year: 2024-25"}),r.jsx("p",{className:"text-xs font-semibold text-blue-600 mt-1",children:t.toUpperCase()}),r.jsxs("p",{className:"text-sm font-semibold text-gray-700 mt-2",children:["Chalan: ",a.chalanNumber||"N/A"]})]})]}),r.jsx("div",{className:"border-t border-gray-200 my-2"}),r.jsxs("div",{className:"mt-2 px-4 text-xs",children:[r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:"text-xs font-medium",children:"Student Details"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Name:"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm font-medium text-gray-800",children:a.studentName||"N/A"})})]}),r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Student ID:"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm font-mono text-gray-800",children:(console.log("[ViewChalan Preview] Student ID values:",{userId:a.userId,admissionNumber:a.admissionNumber,studentId:a.studentId,mongoId:a.mongoId}),a.userId||a.admissionNumber||(a.studentId?.startsWith("KVS-")?a.studentId:a.studentId?.match(/^[0-9a-fA-F]{24}$/)?"N/A":a.studentId||"N/A"))})})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Class & Sec:"}),r.jsx("div",{className:"flex-1",children:r.jsxs("span",{className:"text-sm text-gray-800",children:[a.className||"N/A"," ",a.section?`- ${a.section}`:""]})})]})]}),r.jsx("div",{className:"border-t border-gray-100 my-2"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Payment Details:"}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Installment:"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm text-gray-900",children:a.installmentName||"N/A"})})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Amount:"}),r.jsx("span",{className:"text-sm font-bold text-blue-700",children:N1(a.amount)})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-28 text-xs text-gray-600 font-medium",children:"Due Date:"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm text-gray-900",children:w1(a.dueDate)||"N/A"})})]})]})]})]}),r.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-3",children:[r.jsx("p",{className:"font-semibold mb-2 text-left text-xs",children:"School Bank Details:"}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Bank Name:"}),r.jsx("p",{className:"text-sm text-gray-900",children:a.schoolData?.bankDetails?.bankName||a.bankDetails?.bankName||"Not Available"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Account Holder:"}),r.jsx("p",{className:"text-sm font-medium text-gray-800",children:a.schoolData?.bankDetails?.accountHolderName||a.bankDetails?.accountHolderName||"Not Available"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"A/c No:"}),r.jsx("p",{className:"text-sm font-mono text-gray-900",children:a.schoolData?.bankDetails?.accountNumber||a.bankDetails?.accountNumber||"Not Available"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"IFSC Code:"}),r.jsx("p",{className:"text-sm font-mono text-gray-900",children:a.schoolData?.bankDetails?.ifscCode||a.bankDetails?.ifscCode||"Not Available"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Branch:"}),r.jsx("p",{className:"text-sm text-gray-900",children:a.schoolData?.bankDetails?.branch||a.bankDetails?.branch||"Not Available"})]})]})]})]})]})},S1=e=>{if(!e)return"School Address, City, State - Pincode";if(typeof e=="string")return e;if(typeof e=="object"){const{street:t="",area:a="",city:n="",state:s="",country:o="",pinCode:l="",district:d=""}=e;return[t,a,n,s,o,l||""].filter(Boolean).join(", ")}return String(e)},gJ=({isOpen:e,onClose:t,chalan:a})=>{const{user:n}=dr(),[s,o]=S.useState(()=>({chalanNumber:a?.chalanNumber||"",chalanDate:"",chalanStatus:"generated",installmentName:"",amount:0,dueDate:"",studentName:"",studentId:"",className:"",section:"",academicYear:"",schoolName:"",schoolAddress:"",schoolPhone:"",schoolEmail:"",schoolLogo:"",schoolData:{},bankDetails:{bankName:"",accountNumber:"",ifscCode:"",branch:"",accountHolderName:""}}));S.useEffect(()=>{a&&(console.group("ViewChalan - Initial Chalan Data"),console.log("Received chalan data:",{chalanNumber:a.chalanNumber,studentName:a.studentName,studentId:a.studentId,amount:a.amount,status:a.status||a.chalanStatus,_id:a._id}),console.log("Full chalan object:",JSON.parse(JSON.stringify(a))),console.groupEnd())},[a]);const{chalanNumber:l}=fJ(s);S.useEffect(()=>{console.log("[ViewChalan] Fetched chalan number:",l)},[l]),S.useEffect(()=>{l&&e&&o(f=>{const x={...f,chalanNumber:l};return console.log("[ViewChalan] Updating chalan number:",l),x})},[l,e]),S.useEffect(()=>{console.log("Chalan data updated:",{hasUserId:!!s.userId,hasStudentId:!!s.studentId,chalanNumber:s.chalanNumber,rawChalan:s})},[s]),S.useEffect(()=>{console.log("Chalan data:",{userId:a.userId,studentId:a.studentId,rawChalan:a})},[a]),S.useEffect(()=>{if(console.log("=== DEBUG: Starting student ID resolution ==="),console.log("Initial chalan data:",{userId:s.userId,studentId:s.studentId,rawChalan:JSON.parse(JSON.stringify(s))}),s.userId){console.log("Using userId directly from chalan data:",s.userId);return}const f=async()=>{if(!s.studentId||s.studentId==="N/A"){console.warn("No valid student ID available");return}try{console.log(`Attempting to fetch student data for studentId: ${s.studentId}`);const x=await yt.get(`/students/${s.studentId}`);console.log("Student API response:",x.data);const w=x.data?.data||x.data;if(console.log("Processed student data:",w),w?.userId){console.log("Using userId from student data:",w.userId);return}if(w?.user?._id){console.log("Fetching user record for ID:",w.user._id);const j=await yt.get(`/users/${w.user._id}`);if(j.data?.data?.userId){console.log("Found userId in user record:",j.data.data.userId);return}}if(w?.user){const j=w.user._id||w.user.id;if(console.log("Using ID from user object:",j),j)return}if(w?.studentId){console.log("Using studentId from student data:",w.studentId);return}if(w?._id){console.log("Using _id from student data as fallback:",w._id);return}console.warn("No suitable ID found in student data, using studentId as fallback:",s.studentId)}catch(x){console.error("Error in fetchStudentData:",{message:x.message,response:x.response?.data,status:x.response?.status});const w=s.userId||s.studentId;console.warn("Using fallback ID:",w||"N/A")}};s.userId?console.log("Using userId directly from chalan data:",s.userId):s.studentId?(console.log("No userId found, will try to fetch using studentId:",s.studentId),f()):s.userId?console.log("Using provided userId:",s.userId):console.warn("No student ID or user ID found in chalan data")},[s.studentId,s.userId]);const[d,u]=S.useState(!0);if(S.useEffect(()=>{(async()=>{if(!(!a||!e))try{u(!0);let x={...a};console.log("[ViewChalan] Initial chalan received:",{studentId:a.studentId,userId:a.userId,studentName:a.studentName,hasBankDetails:!!a.bankDetails,bankDetails:JSON.stringify(a.bankDetails,null,2),hasSchoolData:!!a.schoolData,schoolDataBankDetails:JSON.stringify(a.schoolData?.bankDetails,null,2),allKeys:Object.keys(a)}),console.log("[ViewChalan] Starting to fetch school data...");const w=await yt.get("/schools/database/school-info");console.log("[ViewChalan] API Response:",w),console.log("[ViewChalan] Response data structure:",{hasData:!!w?.data,hasDataData:!!w?.data?.data,dataKeys:w?.data?Object.keys(w.data):[],dataDataKeys:w?.data?.data?Object.keys(w.data.data):[]});const j=w?.data?.data||w?.data;if(console.log("[ViewChalan] Fetched school data:",{hasData:!!j,hasBankDetails:!!j?.bankDetails,bankDetails:JSON.stringify(j?.bankDetails,null,2),schoolDataKeys:j?Object.keys(j):[]}),j){let v="";if(j.logoUrl||j.logo){const b=j.logoUrl||j.logo;b.startsWith("/uploads")?v=`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${b}`:v=b,console.log("School logo URL:",{rawLogoUrl:b,finalLogoUrl:v,apiBase:"https://erp-backend-1jtx.onrender.com/api",schoolData:j})}x={...x,schoolName:x.schoolName||j.name||j.schoolName||"School Name",schoolCode:x.schoolCode||j.code||j.schoolCode||"SCH001",schoolAddress:S1(j.address)||x.schoolAddress,schoolEmail:j.contact?.email||j.email||x.schoolEmail,schoolPhone:j.contact?.phone||j.phone||x.schoolPhone,schoolLogo:v||x.schoolLogo,bankDetails:j.bankDetails,schoolData:j},console.log("Bank details after fetch:",{fromSchoolData:j.bankDetails,inUpdatedChalan:x.bankDetails,hasData:!!x.bankDetails?.bankName})}x.studentId&&x.studentId.match(/^[0-9a-fA-F]{24}$/)&&x._id===x.studentId&&(x.studentId="N/A"),console.log("[ViewChalan] About to set chalan with bank details:",{hasBankDetails:!!x.bankDetails,bankDetailsPreview:x.bankDetails,hasSchoolData:!!x.schoolData}),o(x)}catch(x){console.error("Error fetching school data:",x),o({...a,schoolName:a.schoolName||"School Name",schoolCode:a.schoolCode||"SCH001"})}finally{u(!1)}})()},[e]),!e||!s||d)return null;const m=()=>{const f=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),x=s?.dueDate?new Date(s.dueDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",w=s?.schoolData?.name||s?.schoolName||"School",j=S1(s?.schoolData?.address||s?.schoolAddress),v=s?.schoolData?.phone||s?.schoolData?.contact?.phone||s?.schoolPhone||"",b=s?.schoolData?.email||s?.schoolData?.contact?.email||s?.schoolEmail||"",I=s?.academicYear||new Date().getFullYear()+"-"+(new Date().getFullYear()+1),T=s?.chalanNumber||a?.chalanNumber||"N/A";console.log("[Print] Using chalan number:",T);const P=s?.studentName||"N/A",A=s?.userId||s?.admissionNumber||(s?.studentId?.startsWith("KVS-")?s.studentId:s?.studentId?.match(/^[0-9a-fA-F]{24}$/)?"N/A":s?.studentId||"N/A"),k=`${s?.className||""}${s?.section?"-"+s.section:""}`,E=s?.installmentName||"N/A",_=s?.amount?`${s.amount.toLocaleString("en-IN")}`:"0";String(s?.status||s?.chalanStatus||"Status").toUpperCase(),console.log("[Print] Bank details check:",{hasSchoolDataBankDetails:!!s?.schoolData?.bankDetails,hasChalanBankDetails:!!s?.bankDetails,schoolDataBankDetails:s?.schoolData?.bankDetails,chalanBankDetails:s?.bankDetails});const R=s?.schoolData?.bankDetails?.accountHolderName||s?.bankDetails?.accountHolderName||"Not Available",$=s?.schoolData?.bankDetails?.bankName||s?.bankDetails?.bankName||"Not Available",H=s?.schoolData?.bankDetails?.accountNumber||s?.bankDetails?.accountNumber||"Not Available",L=s?.schoolData?.bankDetails?.ifscCode||s?.bankDetails?.ifscCode||"Not Available",Y=s?.schoolData?.bankDetails?.branch||s?.bankDetails?.branch||"Not Available",X=B=>B.startsWith("http")?B:B.startsWith("/uploads")?`${"https://erp-backend-1jtx.onrender.com/api".replace(/\/api\/?$/,"")}${B}`:B,me=s?.schoolLogo||s?.schoolData?.logo||s?.schoolData?.logoUrl||"/default-school-logo.svg",K=X(me),oe=`
      <!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fee Payment Challan</title>
        <style>
          .header-row { display: flex; flex-direction: row; align-items: flex-start; }
          .logo-box { flex: 0 0 60px; }
          .school-logo { height: 50px; width: 50px; object-fit: contain; border-radius: 4px; border: 1px solid #eee; background: #fff; }
          .school-info-block { display: flex; flex-direction: column; justify-content: flex-start; margin-left: 12px; }
          .school-info { font-size: 11px; color: #2c3e50; font-weight: bold; text-align: left; }
          .school-details { font-size: 10px; color: #555; line-height: 1.4; text-align: left; }
          .title-row { text-align: center; margin: 10px 0 2px 0; }
          .challan-title { font-size: 13px; font-weight: bold; color: #2c3e50; }
          .academic-year { font-size: 9px; color: #666; margin-bottom: 2px; }
          .copy-type { display: inline-block; padding: 2px 8px; font-size: 8px; font-weight: bold; border-radius: 2px; color: white; margin-top: 3px; }
          .student-copy .copy-type { background: #3498db; }
          .office-copy .copy-type { background: #e74c3c; }
          .admin-copy .copy-type { background: #27ae60; }
          .challan-number { font-weight: 600; font-size: 14px; color: #555; text-align: left; margin-top: 6px; padding-left: 4px; }
          .header { margin-bottom: 8px; }
          @page { size: A4 portrait; margin: 0; }
          body { font-family: Arial, sans-serif; background-color: white; margin: 0; padding: 0; }
          .challan-container { width: 250mm; min-height: 320mm; display: flex; flex-direction: row; padding: 16mm; gap: 8mm; page-break-after: avoid; }
          .challan-copy { flex: 1; border: 2px solid #333; padding: 16px; background: white; display: flex; flex-direction: column; height: fit-content; max-height: 300mm; }
          .content-section { display: flex; flex-direction: column; gap: 12px; }
          .info-group { margin-bottom: 12px; }
          .info-title { font-size: 16px; font-weight: bold; color: #2c3e50; margin-bottom: 6px; border-bottom: 1px solid #ddd; padding-bottom: 4px; }
          .info-row { display: flex; padding: 2px 0; font-size: 14px; line-height: 1.5; }
          .info-label { font-weight: 600; color: #555; min-width: 90px; font-size: 14px; }
          .info-value { color: #333; flex: 1; word-break: break-word; font-size: 14px; }
          .payment-status { margin-top: 16px; padding: 10px; border: 1px dashed #95a5a6; text-align: center; font-weight: bold; color: #7f8c8d; font-size: 14px; }
          .branding { text-align: center; font-size: 12px; color: #95a5a6; margin-top: 8px; padding-top: 6px; border-top: 1px solid #ecf0f1; }
          @media print { body { margin: 0; padding: 0; } .challan-container { page-break-after: avoid; } .challan-copy { page-break-inside: avoid; } }
        </style>
      </head>
      <body>
        <div class="challan-container">

          <!-- STUDENT COPY -->
          <div class="challan-copy student-copy">
            <div class="header">
              <div class="header-row">
                <div class="logo-box"><img src="${K}" alt="School Logo" class="school-logo" /></div>
                <div class="school-info-block">
                  <div class="school-info">${w}</div>
                  <div class="school-details">${j}<br>${v?`Phone: ${v}<br>`:""}${b?`Email: ${b}`:""}</div>
                </div>
              </div>
              <div class="title-row">
                <div class="challan-title">FEE PAYMENT CHALAN</div>
                <div class="academic-year">Academic Year: ${I}</div>
                <span class="copy-type">STUDENT COPY</span>
                <div class="challan-number">Chalan: ${T}</div>
              </div>
            </div>
        
            <div class="content-section">
              <div class="info-group">
                <div class="info-title">Bank Details:</div>
                <div class="info-row"><span class="info-label">Bank Name:</span><span class="info-value">${$}</span></div>
                <div class="info-row"><span class="info-label">Account Holder:</span><span class="info-value">${R}</span></div>
                <div class="info-row"><span class="info-label">A/c No:</span><span class="info-value">${H}</span></div>
                <div class="info-row"><span class="info-label">IFSC Code:</span><span class="info-value">${L}</span></div>
                <div class="info-row"><span class="info-label">Branch:</span><span class="info-value">${Y}</span></div>
                <div class="info-row"><span class="info-label">Date:</span><span class="info-value">${f}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Student Details</div>
                <div class="info-row"><span class="info-label">Name:</span><span class="info-value">${P}</span></div>
                <div class="info-row"><span class="info-label">Student ID:</span><span class="info-value">${A}</span></div>
                <div class="info-row"><span class="info-label">Class & Sec:</span><span class="info-value">${k}</span></div>
                <div class="info-row"><span class="info-label">Academic Year:</span><span class="info-value">${I}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Payment Details:</div>
                <div class="info-row"><span class="info-label">Installment:</span><span class="info-value">${E}</span></div>
                <div class="info-row"><span class="info-label">Amount:</span><span class="info-value">${_}</span></div>
                <div class="info-row"><span class="info-label">Due Date:</span><span class="info-value">${x}</span></div>
              </div>
            </div>
            <div class="branding">EduLogix - Institute Management System</div>
          </div>

          <!-- OFFICE COPY -->
          <div class="challan-copy office-copy">
            <div class="header">
              <div class="header-row">
                <div class="logo-box"><img src="${K}" alt="School Logo" class="school-logo" /></div>
                <div class="school-info-block">
                  <div class="school-info">${w}</div>
                  <div class="school-details">${j}<br>${v?`Phone: ${v}<br>`:""}${b?`Email: ${b}`:""}</div>
                </div>
              </div>
              <div class="title-row">
                <div class="challan-title">FEE PAYMENT CHALAN</div>
                <div class="academic-year">Academic Year: ${I}</div>
                <span class="copy-type">OFFICE COPY</span>
                <div class="challan-number">Chalan: ${T}</div>
              </div>
            </div>
         
            <div class="content-section">
              <div class="info-group">
                <div class="info-title">Bank Details:</div>
                <div class="info-row"><span class="info-label">Bank Name:</span><span class="info-value">${$}</span></div>
                <div class="info-row"><span class="info-label">Account Holder:</span><span class="info-value">${R}</span></div>
                <div class="info-row"><span class="info-label">A/c No:</span><span class="info-value">${H}</span></div>
                <div class="info-row"><span class="info-label">IFSC Code:</span><span class="info-value">${L}</span></div>
                <div class="info-row"><span class="info-label">Branch:</span><span class="info-value">${Y}</span></div>
                <div class="info-row"><span class="info-label">Date:</span><span class="info-value">${f}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Student Details</div>
                <div class="info-row"><span class="info-label">Name:</span><span class="info-value">${P}</span></div>
                <div class="info-row"><span class="info-label">Student ID:</span><span class="info-value">${A}</span></div>
                <div class="info-row"><span class="info-label">Class & Sec:</span><span class="info-value">${k}</span></div>
                <div class="info-row"><span class="info-label">Academic Year:</span><span class="info-value">${I}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Payment Details:</div>
                <div class="info-row"><span class="info-label">Installment:</span><span class="info-value">${E}</span></div>
                <div class="info-row"><span class="info-label">Amount:</span><span class="info-value">${_}</span></div>
                <div class="info-row"><span class="info-label">Due Date:</span><span class="info-value">${x}</span></div>
              </div>
            </div>
            <div class="branding">EduLogix - Institute Management System</div>
          </div>

          <!-- ADMIN COPY -->
          <div class="challan-copy admin-copy">
            <div class="header">
              <div class="header-row">
                <div class="logo-box"><img src="${K}" alt="School Logo" class="school-logo" /></div>
                <div class="school-info-block">
                  <div class="school-info">${w}</div>
                  <div class="school-details">${j}<br>${v?`Phone: ${v}<br>`:""}${b?`Email: ${b}`:""}</div>
                </div>
              </div>
              <div class="title-row">
                <div class="challan-title">FEE PAYMENT CHALAN</div>
                <div class="academic-year">Academic Year: ${I}</div>
                <span class="copy-type">ADMIN COPY</span>
                <div class="challan-number">Chalan: ${T}</div>
              </div>
            </div>
           
            <div class="content-section">
              <div class="info-group">
                <div class="info-title">Bank Details:</div>
                <div class="info-row"><span class="info-label">Bank Name:</span><span class="info-value">${$}</span></div>
                <div class="info-row"><span class="info-label">Account Holder:</span><span class="info-value">${R}</span></div>
                <div class="info-row"><span class="info-label">A/c No:</span><span class="info-value">${H}</span></div>
                <div class="info-row"><span class="info-label">IFSC Code:</span><span class="info-value">${L}</span></div>
                <div class="info-row"><span class="info-label">Branch:</span><span class="info-value">${Y}</span></div>
                <div class="info-row"><span class="info-label">Date:</span><span class="info-value">${f}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Student Details</div>
                <div class="info-row"><span class="info-label">Name:</span><span class="info-value">${P}</span></div>
                <div class="info-row"><span class="info-label">Student ID:</span><span class="info-value">${A}</span></div>
                <div class="info-row"><span class="info-label">Class & Sec:</span><span class="info-value">${k}</span></div>
                <div class="info-row"><span class="info-label">Academic Year:</span><span class="info-value">${I}</span></div>
              </div>
              <div class="info-group">
                <div class="info-title">Payment Details:</div>
                <div class="info-row"><span class="info-label">Installment:</span><span class="info-value">${E}</span></div>
                <div class="info-row"><span class="info-label">Amount:</span><span class="info-value">${_}</span></div>
                <div class="info-row"><span class="info-label">Due Date:</span><span class="info-value">${x}</span></div>
              </div>
            </div>
            <div class="branding">EduLogix - Institute Management System</div>
          </div>
        </div>
      </body>
      </html>
    `,G=window.open("","_blank","width=900,height=900");G?(G.document.write(oe),G.document.close(),G.onload=()=>{setTimeout(()=>{G.focus(),G.print()},250)}):alert("Please allow popups to print the challan")},p=[{type:"Student Copy",bgColor:"bg-blue-50"},{type:"Office Copy",bgColor:"bg-green-50"},{type:"Admin Copy",bgColor:"bg-purple-50"}];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 p-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Chalan Details"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:m,className:"p-2 text-gray-600 hover:text-blue-600",title:"Print",children:r.jsx(qb,{className:"h-5 w-5"})}),r.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-red-600",children:""})]})]}),r.jsxs("div",{className:"p-6 print:p-0",children:[r.jsx("style",{children:`
            @page {
              size: A4 landscape;
              margin: 0;
            }
            @media print {
              body * {
                visibility: hidden;
              }
              #chalan-print, #chalan-print * {
                visibility: visible;
              }
              #chalan-print {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                padding: 0;
                margin: 0;
              }
              .chalan-copy {
                page-break-inside: avoid;
                break-inside: avoid;
              }
              .no-print {
                display: none !important;
              }
            }
          `}),r.jsx("div",{id:"chalan-print",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-2 print:px-4 print:py-2",children:p.map((f,x)=>r.jsx("div",{className:`chalan-copy ${f.bgColor} print:bg-transparent print:border`,children:r.jsx(pJ,{chalan:s,copyType:f.type})},x))})}),r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),r.jsx("p",{className:"font-medium",children:s.className})]}),r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",r.jsx("span",{className:"font-medium",children:s.chalanDate?w1(s.chalanDate):""})]})})]})}),r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount ()"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2",children:[s.installmentName," - ",w1(s.dueDate)]}),r.jsx("td",{className:"px-4 py-2 text-right",children:N1(s.amount)})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 font-semibold",children:"Total Amount"}),r.jsx("td",{className:"px-4 py-2 text-right font-semibold",children:N1(s.amount)})]})]})]})}),r.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-3",children:[r.jsx("p",{className:"font-semibold mb-3 text-left text-sm",children:"Payment Instructions"}),r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 rounded",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 pt-0.5",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Please deposit the fee in the following bank account and keep this chalan for future reference."})})]})}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Account Name:"}),r.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.schoolData?.bankDetails?.accountHolderName||s.bankDetails?.accountHolderName||s.schoolData?.bankDetails?.accountName||s.bankDetails?.accountHolderName||"School Account"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Account No:"}),r.jsx("p",{className:"text-sm font-mono text-gray-900",children:s.schoolData?.bankDetails?.accountNumber||s.bankDetails?.accountNumber||"XXXXXXXXXXXX"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Bank Name:"}),r.jsx("p",{className:"text-sm text-gray-900",children:s.schoolData?.bankDetails?.bankName||s.bankDetails?.bankName||"Bank Name"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"IFSC Code:"}),r.jsx("p",{className:"text-sm font-mono text-gray-900",children:s.schoolData?.bankDetails?.ifscCode||s.bankDetails?.ifscCode||"XXXX0000000"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"w-28 text-xs text-gray-600 font-medium",children:"Branch:"}),r.jsx("p",{className:"text-sm text-gray-900",children:s.schoolData?.bankDetails?.branch||s.bankDetails?.branch||"Branch Name"})]})]})]}),r.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200 text-center text-xs text-gray-500",children:[r.jsx("p",{children:"This is a computer-generated chalan. No signature is required."}),r.jsx("p",{className:"mt-1",children:"For any queries, please contact the school office."})]})]}),r.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-end space-x-3 border-t border-gray-200 rounded-b-lg",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Close"}),r.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(qb,{className:"h-4 w-4 mr-2"}),"Print Chalan"]})]})]})})},xJ=()=>{const{user:e}=dr(),[t,a]=S.useState("ALL"),[n,s]=S.useState("ALL"),[o,l]=S.useState(""),[d,u]=S.useState({});S.useEffect(()=>{(async()=>{if(e?.schoolId)try{console.log("Fetching school details for:",e.schoolId);const Ae=(await Ha.getSchoolById(e.schoolId))?.data?.data||{};console.log("School API response:",Ae);const Xe={schoolName:Ae.name||Ae.schoolName||"School Name",schoolCode:Ae.code||Ae.schoolCode||"SCH",address:{addressLine1:Ae.address?.street||Ae.address?.addressLine1||"School Address",city:Ae.address?.city||"City",state:Ae.address?.state||"State",pincode:Ae.address?.pincode||"000000",area:Ae.address?.area||"",district:Ae.address?.district||"",country:Ae.address?.country||"India"},contact:{phone:Ae.contact?.phone||Ae.mobile||"+91 XXXXXXXXXX",email:Ae.contact?.email||Ae.principalEmail||"info@school.edu.in",website:Ae.website||""},logo:{finalLogoUrl:Ae.logoUrl?Ae.logoUrl.startsWith("http")?Ae.logoUrl:`${"https://erp-backend-1jtx.onrender.com/api".replace("/api","")||"https://erp-backend-1jtx.onrender.com/api"}${Ae.logoUrl}`:"",rawLogoUrl:Ae.logoUrl||"",apiBase:"https://erp-backend-1jtx.onrender.com/api"},bankDetails:Ae.bankDetails||{accountName:"School Account",accountNumber:"",bankName:"",ifscCode:"",branch:"",accountType:"Savings"}};console.log("Formatted school data:",Xe),u(Xe)}catch(et){console.error("Error fetching school:",et),u({schoolName:"School Name",schoolCode:"SC",address:{addressLine1:"School Address",city:"City",state:"State",pincode:"000000"},contact:{phone:"+91 XXXXXXXXXX",email:"info@school.edu.in"},logo:{rawLogoUrl:null,apiBase:null},bankDetails:{accountName:"School Account",accountNumber:"XXXXXXXXXXXX",bankName:"Bank Name",ifscCode:"IFSCXXXXXXX",branch:"Branch Name"}})}})()},[e?.schoolId]),console.log("FeePaymentsTab render",{schoolDetails:d});const[m,p]=S.useState([]),[f,x]=S.useState(!1),[w,j]=S.useState(null),[v,b]=S.useState(!1),[I,T]=S.useState(null),[P,A]=S.useState(""),[k,E]=S.useState(null),[_,R]=S.useState(!1);ge.useEffect(()=>{console.log("Chalan modal state changed:",{isChalanModalOpen:_,viewingChalan:k})},[_,k]);const[$,H]=S.useState(""),[L,Y]=S.useState("cash"),[X,me]=S.useState(""),[K,oe]=S.useState(""),[G,B]=S.useState(!1),[F,re]=S.useState(!1),[U,ae]=S.useState(!1),[W,fe]=S.useState(null),[Se,Ie]=S.useState(""),[te,se]=S.useState(null),[Q,de]=S.useState(!1),[we,ce]=S.useState(null),[Ve,Be]=S.useState(""),at=async()=>{try{x(!0),j(null),console.log("Fetching fee records with params:",{class:t,section:n,search:o});const De={search:o,limit:50,fields:"_id,userId,name,studentId,class,section,admissionNumber"};t&&t!=="ALL"&&(De.class=t),n&&n!=="ALL"&&(De.section=n);const[et,Ae]=await Promise.all([Xi.getStudentFeeRecords({class:t,section:n,search:o,limit:50,fields:"studentId,installments,totalAmount,paidAmount,balance"}),TM.getUsersByRole("student",De)]);console.log("Fee records response:",et),console.log("Students API response:",Ae),console.log("Students API response.data:",Ae.data),console.log("Students API response.data.data:",Ae.data?.data);const Xe=new Map;let ot=[];Array.isArray(Ae.data)?(ot=Ae.data,console.log("Using studentsRes.data (array)")):Ae.data?.data&&(ot=Array.isArray(Ae.data.data)?Ae.data.data:Ae.data.data?.students||[],console.log("Using studentsRes.data.data, count:",ot.length)),console.log("===== STUDENTS DATA ====="),console.log("Total students fetched:",ot.length),console.log("First student sample:",ot[0]),console.log("First 3 students:",ot.slice(0,3).map(gt=>({_id:gt._id,userId:gt.userId,name:gt.name?.displayName||gt.name}))),ot.forEach(gt=>{const nr=gt.userId,Rt=gt._id;Rt&&nr&&Xe.set(Rt.toString(),nr.toString())}),console.log("Student details map created with",Xe.size,"entries"),console.log("Sample map entries:",Array.from(Xe.entries()).slice(0,3)),console.log("Student details map:",Object.fromEntries(Xe));const Lt=(et.data?.data?.records||[]).map(gt=>{const nr=ot.find(Ne=>Ne._id?.toString()===gt.studentId?.toString()),Rt=nr?.userId||gt.userId||gt.studentId;console.log("Resolving userId for student:",{feeRecordStudentId:gt.studentId,matchingStudentFound:!!nr,matchingStudentUserId:nr?.userId,matchingStudentName:nr?.name?.displayName,finalUserId:Rt});const Pr=(gt.installments||[]).map(Ne=>({...Ne,chalanNumber:Ne.chalanNumber||"",chalanDate:Ne.chalanDate||"",chalanBank:Ne.chalanBank||"",chalanStatus:Ne.chalanStatus||"pending"})),N=Rt||gt.userId||(gt.user?gt.user.userId||gt.user._id:null)||Xe.get(gt.studentId?.toString());return console.log("Student record:",{name:gt.studentName,studentId:gt.studentId,userId:N,r_userId:gt.userId,class:gt.studentClass,section:gt.studentSection,userIdSource:N===gt.userId?"r.userId":gt.user&&(N===gt.user.userId||N===gt.user._id)?"r.user":Xe.has(gt.studentId?.toString())?"studentDetails map":"Not found",rawData:{...gt,_id:gt._id,userId:gt.userId,studentId:gt.studentId,user:gt.user?{_id:gt.user._id,userId:gt.user.userId,...Object.entries(gt.user).reduce((Ne,[Br,Zt])=>(typeof Zt!="object"&&!Array.isArray(Zt)?Ne[Br]=Zt:Br==="studentDetails"&&(Ne.studentDetails=Zt?"[...]":null),Ne),{})}:"No user object",studentDetails:gt.studentDetails?"[...]":"No studentDetails"},studentDetailsMapEntry:Xe.get(gt.studentId?.toString())?{userId:Xe.get(gt.studentId?.toString())}:"Not in studentDetails map"}),{id:gt.id,studentId:Rt||gt.studentId,userId:Rt,mongoId:gt.studentId,name:gt.studentName,class:gt.studentClass,section:gt.studentSection,rollNumber:gt.rollNumber,totalAmount:gt.totalAmount,totalPaid:gt.totalPaid,balance:gt.totalPending,status:gt.status,installments:Pr}});p(Lt)}catch(De){const et=De?.response?.data?.message||De.message||"Failed to load fee records";console.error("Error in fetchRecords:",{error:De,message:De.message,response:De.response?.data,stack:De.stack}),j(et),p([])}finally{x(!1)}},pe=async De=>{try{if(!W){pt.error("No payment history available");return}let et=null,Ae=null;for(const qe of W.installments||[]){for(const lt of qe.payments||[])if(lt.receiptNumber===De){et=lt,Ae=qe;break}if(et)break}if(!et&&W.payments){for(const qe of W.payments)if(qe.receiptNumber===De){et=qe,Ae=(W.installments||[]).find(lt=>lt.name===qe.installmentName);break}}if(!et){pt.error("Payment not found");return}let Xe={schoolName:e?.schoolName||"School Name",schoolCode:e?.schoolCode||"SCH001",address:"123 School Street, City, State 12345",phone:"+91-XXXXXXXXXX",email:"info@school.com",website:"www.edulogix.com",hasSchoolLogo:!1,schoolLogo:""};try{const qe=e?.schoolId||e?.schoolCode;if(qe){const lt=await Ha.getSchoolById(qe),ee=lt?.data?.data||lt?.data;if(ee){console.log("School data fetched from API:",ee);let Ce="";ee.address&&(typeof ee.address=="string"?Ce=ee.address:Ce=[ee.address.street,ee.address.area,ee.address.city,ee.address.district,ee.address.state,ee.address.pincode?`- ${ee.address.pincode}`:"",ee.address.country].filter(Boolean).join(", ")),Xe={schoolName:ee.name||ee.schoolName||Xe.schoolName,schoolCode:ee.code||ee.schoolCode||Xe.schoolCode,address:Ce||Xe.address,phone:ee.phone||ee.contact?.phone||ee.mobile||Xe.phone,email:ee.email||ee.contact?.email||ee.principalEmail||Xe.email,website:ee.website||Xe.website,hasSchoolLogo:!!(ee.logoUrl||ee.logo||Xe.schoolLogo),schoolLogo:ee.logoUrl?ee.logoUrl.startsWith("http")?ee.logoUrl:`${"https://erp-backend-1jtx.onrender.com/api".replace("/api","")||"https://erp-backend-1jtx.onrender.com/api"}${ee.logoUrl}`:Xe.schoolLogo},console.log("Processed school data for receipt:",Xe)}}}catch(qe){console.log("Failed to fetch school from API, trying template settings...",qe);try{const lt=localStorage.getItem("universalTemplate");if(lt){const ee=JSON.parse(lt);Xe.schoolName=ee.schoolName||Xe.schoolName,Xe.schoolCode=ee.schoolCode||Xe.schoolCode,Xe.address=ee.address||Xe.address,Xe.phone=ee.phone||Xe.phone,Xe.email=ee.email||Xe.email,Xe.website=ee.website||Xe.website;const Ce=ee.logoUrl;Xe.schoolLogo=Ce?`${"https://erp-backend-1jtx.onrender.com/api".replace("/api","")||"https://erp-backend-1jtx.onrender.com/api"}${Ce}`:Xe.schoolLogo,Xe.hasSchoolLogo=!!Xe.schoolLogo}}catch{console.log("Failed to load template settings, using defaults")}}let ot="";console.log("Student ID Debug - historyRecord:",{sequenceNumber:W.sequenceNumber,studentUniqueId:W.studentUniqueId,enrollmentNo:W.enrollmentNo,admissionNo:W.admissionNo,studentId:W.studentId,userId:W.userId,rollNumber:W.rollNumber,studentRollNumber:W.studentRollNumber,studentName:W.studentName}),console.log("Student ID Debug - historyStudent:",te);let Ot=te;console.log("Student ID Debug - Available userId sources:",{"historyRecord.userId":W.userId,"historyStudent?.userId":te?.userId,"historyRecord.studentId":W.studentId,"historyRecord._id":W._id});const Lt=W.userId||W.studentId||W._id;if(W.userId&&W.userId!=="undefined"&&W.userId!=="null")console.log("Student ID Debug - Found userId in fee record:",W.userId),Ot={userId:W.userId};else if(Lt&&!te?.userId)try{console.log("Fetching complete student data using userId:",Lt);const ee=((await Xi.getStudentFeeRecords({})).data?.data||[]).find(Ce=>Ce.userId===Lt||Ce.studentId===Lt||Ce._id===Lt);if(ee?(console.log("Found matching student in fee records:",ee),Ot=ee):(Ot=(await Xi.getStudentByUserId(Lt)).data?.data,console.log("Complete student data from students collection:",Ot)),!Ot?.userId&&Ot){const Ce=Ot;console.log("Student data structure:",{userId:Ce.userId,_id:Ce._id,studentId:Ce.studentId,allKeys:Object.keys(Ce)})}}catch(qe){console.log("Failed to fetch complete student data:",qe),console.log("Using existing data:",te)}const gt=[Ot?.userId,W.userId,W.sequenceNumber,W.studentUniqueId,W.enrollmentNo,W.admissionNo,W.studentId,W.rollNumber,W.studentRollNumber,Ot?.studentId,Ot?.studentDetails?.studentId,Ot?.rollNumber,Ot?.studentDetails?.rollNumber].filter(qe=>qe&&qe!=="undefined"&&qe!=="null"&&!/^[a-fA-F0-9]{24}$/.test(qe));if(console.log("Student ID Debug - possibleIds:",gt),console.log("Student ID Debug - completeStudentData:",Ot),gt.length>0)ot=String(gt[0]).trim(),console.log("Student ID Debug - Using found ID:",ot);else{console.log("Student ID Debug - No valid IDs found, using fallback logic");const qe=((Xe.schoolCode||"SC").toString().trim()||"SC").toUpperCase();let lt="";const ee=[W.rollNumber,W.studentRollNumber,Ot?.rollNumber,Ot?.studentDetails?.rollNumber];for(const Ce of ee)if(Ce&&Ce!=="undefined"&&Ce!=="null"){lt=String(Ce).trim();break}if(lt||(lt=(String(W.admissionNo||W.enrollmentNo||"").match(/\d+/g)||[]).join("").slice(-4)),lt){const Ce=parseInt(lt,10),Fe=Number.isFinite(Ce)?Ce.toString().padStart(4,"0"):lt.padStart(4,"0");ot=`${qe}-S-${Fe}`,console.log("Student ID Debug - Generated from roll number:",ot)}else{const Ce=(W.studentName||"STU").split(" ").map(ke=>ke[0]).join("").toUpperCase().slice(0,2),Fe=Date.now().toString().slice(-4);ot=`${qe}-${Ce}-${Fe}`,console.log("Student ID Debug - Generated from name initials:",ot,"from name:",W.studentName)}}console.log("Student ID Debug - Final studentId:",ot);const nr={name:W.studentName,studentId:ot,class:W.studentClass,section:W.studentSection,academicYear:W.academicYear||`${new Date().getFullYear()}-${String(new Date().getFullYear()+1).slice(-2)}`},Rt=et.paymentDate||et.date,Pr=new Date;let N;if(Rt){const qe=new Date(Rt);!isNaN(qe.getTime())&&qe<=Pr?N=Rt:N=Pr.toISOString()}else N=Pr.toISOString();const Ne={receiptNumber:De,paymentDate:N,paymentMethod:et.paymentMethod||et.method||"Cash",paymentReference:et.paymentReference||et.reference||"-",amount:et.amount||0,installmentName:Ae?.name||et.installmentName||"N/A"};console.log("Payment date from database:",Rt),console.log("Final payment date:",Ne.paymentDate),console.log("Current date:",Pr.toISOString());const Br=(W.installments||[]).map(qe=>({name:qe.name,amount:qe.amount||0,paid:qe.paidAmount||0,remaining:Math.max(0,(qe.amount||0)-(qe.paidAmount||0)),isCurrent:qe.name===Ae?.name})),Zt=W.totalAmount||0,Pe=W.totalPaid||0,st=Math.max(0,Zt-Pe);ce({schoolData:Xe,studentData:nr,paymentData:Ne,installments:Br,totalAmount:Zt,totalPaid:Pe,totalRemaining:st}),Be(De),de(!0)}catch(et){pt.error(et?.response?.data?.message||"Failed to generate receipt data")}},tt=async De=>{await pe(De)},ut=async De=>{try{ae(!0),re(!0),se(De),console.log("Student data:",JSON.stringify(De,null,2));const et=[{type:"admissionNumber",value:De.admissionNumber},{type:"_id",value:De._id},{type:"id",value:De.id},{type:"userId",value:De.userId},{type:"studentId",value:De.studentId}].filter(Lt=>Lt.value);if(console.log("Trying identifiers in order:",et),et.length===0)throw new Error("No valid student identifier found. Available fields: "+Object.keys(De).join(", "));let Ae,Xe;for(const{type:Lt,value:gt}of et)try{console.log(`Attempting to fetch fee record using ${Lt}:`,gt),Ae=await Xi.getStudentFeeRecord(gt),console.log(`Successfully fetched fee record using ${Lt}`,Ae);break}catch(nr){if(Xe=nr,console.warn(`Failed to fetch with ${Lt} ${gt}:`,nr.message),Lt===et[et.length-1].type){console.log("All identifiers failed, trying chalan API...");try{const Rt=await yt.get(`/api/chalans/student/${gt}`);if(Rt.data){console.log("Successfully fetched chalan data:",Rt.data),Ae={data:{data:Rt.data}};break}}catch(Rt){throw console.error("Chalan API also failed:",Rt),new Error(`Failed to fetch fee records. Last error: ${Xe?.message||"Unknown error"}`)}}}const ot=Ae?.data?.data||Ae?.data;fe(ot||null);const Ot=(ot?.installments||[])[0];if(Ie(Ot?.name||""),De?.rollNumber)return;try{const Lt=ot?.student?.rollNumber||ot?.studentDetails?.rollNumber;if(Lt){se(Rt=>({...Rt||{},rollNumber:Lt}));return}if(!(ot?.userId||ot?.student?.userId||ot?.studentId||De.id))return;const nr=ot?.rollNumber||ot?.student?.rollNumber||ot?.studentDetails?.rollNumber||String(ot?.admissionNo||"").slice(-4)||String(ot?.enrollmentNo||"").slice(-4);nr&&se(Rt=>({...Rt||{},rollNumber:nr}))}catch(Lt){console.log("Error processing roll number:",Lt)}}catch(et){console.error("Error in openHistoryModal:",et),pt.error(et?.response?.data?.message||"Failed to load payment history"),re(!1)}finally{ae(!1)}};ge.useEffect(()=>{(async()=>{if(e?.schoolId)try{const et=await Ha.getSchoolById(e.schoolId);u(et.data||{}),console.log("School details loaded:",et.data)}catch(et){console.error("Error fetching school details:",et),u({})}})(),at()},[e?.schoolId,t,n,o]),ge.useEffect(()=>{const De=setTimeout(()=>at(),400);return()=>clearTimeout(De)},[o]);const vt=De=>{switch(De){case"paid":return"text-green-600 bg-green-100";case"partial":return"text-yellow-600 bg-yellow-100";case"pending":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},Nt=De=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(De),tr=De=>{T(De),Y("cash"),me(new Date().toISOString().split("T")[0]),oe("");const et=De.installments||[],Ae=et.find(Xe=>Math.max(0,(Xe.amount||0)-(Xe.paidAmount||0))>0)||et[0];if(Ae){const Xe=Math.max(0,(Ae.amount||0)-(Ae.paidAmount||0));A(Ae.name||""),H(String(Xe||""))}else A(""),H("");b(!0)},ar=()=>{G||(b(!1),T(null))},jt=De=>{const et=Math.max(0,(De.amount||0)-(De.paidAmount||0));A(De.name),H(String(et||""))},Kt=async()=>{if(!I)return;const De=Number($);if(!P)return pt.error("Select an installment");if(Number.isNaN(De)||De<=0)return pt.error("Enter a valid amount");if(!X||X.trim()==="")return pt.error("Payment date is required");const et=new Date(X),Ae=new Date;if(Ae.setHours(23,59,59,999),et>Ae)return pt.error("Payment date cannot be in the future");const Xe=(I.installments||[]).find(Ot=>Ot.name===P);if(Xe){const Ot=Math.max(0,(Xe.amount||0)-(Xe.paidAmount||0));if(De>Ot)return pt.error(`Amount cannot exceed pending (${Nt(Ot)})`)}if(["cheque","bank_transfer","online"].includes(L)&&!String(K||"").trim())return pt.error("Reference / Remarks is required for Cheque, Bank Transfer, and Online payments");try{B(!0),await Xi.recordOfflinePayment(I.id,{installmentName:P,amount:De,paymentMethod:L,paymentDate:X,paymentReference:K||void 0}),await at(),b(!1),pt.success("Payment recorded successfully")}catch(Ot){pt.error(Ot?.response?.data?.message||"Failed to record payment")}finally{B(!1)}};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-full overflow-x-hidden",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6 overflow-hidden",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Fee Payments Management"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 items-end",children:[r.jsx("div",{className:"sm:col-span-2 lg:col-span-1",children:r.jsx(zj,{schoolCode:e?.schoolCode,valueClass:t,valueSection:n,onClassChange:a,onSectionChange:s})}),r.jsxs("div",{className:"relative sm:col-span-2 lg:col-span-1",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Tn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:o,onChange:De=>l(De.target.value),className:"block w-full pl-9 sm:pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",placeholder:"Search students..."})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Assigned"}),r.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:Nt(m.reduce((De,et)=>De+(et.totalAmount||0),0))})]})})}),r.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Collected"}),r.jsx("p",{className:"text-2xl font-semibold text-green-900",children:Nt(m.reduce((De,et)=>De+(et.totalPaid||0),0))})]})})}),r.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Outstanding"}),r.jsx("p",{className:"text-2xl font-semibold text-orange-900",children:Nt(m.reduce((De,et)=>De+(et.balance||0),0))})]})})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Student Fee Records"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Student"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Total Assigned"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Total Paid"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Balance"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Status"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Actions"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Chalan"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(De=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsxs("button",{type:"button",onClick:()=>ut(De),className:"text-left text-xs sm:text-sm font-medium text-blue-600 hover:underline flex items-center gap-1",children:[r.jsx(J6,{size:14}),De.name]}),(De.class||De.section||De.rollNumber)&&r.jsx("div",{className:"text-sm text-gray-500",children:[De.class&&De.section?`${De.class} - ${De.section}`:De.class||De.section||"",De.rollNumber?`(${De.rollNumber})`:""].filter(Boolean).join(" ")}),F&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Payment History",W?.studentName?` - ${W.studentName}`:""]}),r.jsx("button",{onClick:()=>re(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[U&&r.jsx("div",{className:"text-sm text-gray-500",children:"Loading history..."}),!U&&W&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-gray-700",children:"Installment:"}),r.jsx("select",{className:"px-2 py-1 border rounded text-sm",value:Se,onChange:et=>Ie(et.target.value),children:(W.installments||[]).map(et=>r.jsx("option",{value:et.name,children:et.name},et.name))})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Day"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[(W.payments||[]).filter(et=>!Se||et.installmentName===Se).map(et=>{const Ae=et.paymentDate?new Date(et.paymentDate):null,Xe=Ae?Ae.toLocaleDateString():"-",ot=Ae?Ae.toLocaleDateString("en-IN",{weekday:"long"}):"-";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:Nt(et.amount||0)}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:et.paymentMethod}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:et.paymentReference||"-"}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:Xe}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:ot}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:et.receiptNumber?r.jsx("button",{type:"button",onClick:()=>tt(et.receiptNumber),className:"text-blue-600 hover:underline",children:et.receiptNumber}):"-"})]},String(et.paymentId))}),(!W.payments||W.payments.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 py-3 text-sm text-gray-500",children:"No payments found for this installment."})})]})]})})]})]})]})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nt(De.totalAmount)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nt(De.totalPaid)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nt(De.balance)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${vt(De.status)}`,children:De.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("div",{className:"flex space-x-2",children:r.jsxs("button",{onClick:()=>tr(De),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[r.jsx(is,{className:"h-4 w-4 mr-1"}),"Record Payment"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:De.installments?.length>0&&r.jsxs("button",{onClick:()=>{console.log("=== DEBUG: Student Object ===",De),console.log("=== DEBUG: Student ID Fields ===",{"student.userId":De.userId,"student.studentId":De.studentId,"student.admissionNumber":De.admissionNumber,"student._id":De._id,"student.sequenceId":De.sequenceId,"student.rollNumber":De.rollNumber,"All available fields":Object.keys(De)}),console.log("=== DEBUG: Student Installments ===",De.installments),!De.userId&&De.studentDetails&&(console.log("=== DEBUG: student.studentDetails ===",De.studentDetails),console.log("student.studentDetails.userId:",De.studentDetails.userId),console.log("student.studentDetails.admissionNumber:",De.studentDetails.admissionNumber));const et=De.installments.find(Ae=>Ae.chalanNumber)||De.installments[0];if(console.log("Selected installment for chalan:",et),et){console.log("=== DEBUG: Student Object ==="),console.log(JSON.stringify(De,null,2)),console.log("Potential ID fields:",{userId:De.userId,studentId:De.studentId,admissionNumber:De.admissionNumber,rollNumber:De.rollNumber,id:De.id,_id:De._id,studentDetails:De.studentDetails?{userId:De.studentDetails.userId,admissionNumber:De.studentDetails.admissionNumber,rollNumber:De.studentDetails.rollNumber}:"No studentDetails",student:De.student?{userId:De.student.userId,studentId:De.student.studentId,admissionNumber:De.student.admissionNumber}:"No nested student object"});const Ae={...et,studentName:De.name,studentId:De.userId||De.studentId||De.admissionNumber||De.rollNumber||De.id||De._id||"N/A",userId:De.userId,className:De.class||"N/A",section:De.section||"N/A",academicYear:De.academicYear||"2024-25",schoolName:d.name||d.schoolName||"School Name",schoolAddress:[d.address?.addressLine1,d.address?.city,d.address?.state,d.address?.pincode].filter(Boolean).join(", "),schoolPhone:d.contact?.phone,schoolEmail:d.contact?.email,bankDetails:d.bankDetails?{bankName:d.bankDetails.bankName||"Bank not specified",accountNumber:d.bankDetails.accountNumber||"Not specified",ifscCode:d.bankDetails.ifscCode||"Not specified",branch:d.bankDetails.branch||"Not specified",accountHolderName:d.bankDetails.accountHolderName||d.bankDetails.accountName||d.schoolName||"School Account"}:{bankName:"Bank not specified",accountNumber:"Not specified",ifscCode:"Not specified",branch:"Not specified",accountHolderName:d.schoolName||"School Account"},schoolData:{bankDetails:d.bankDetails?{bankName:d.bankDetails.bankName,accountNumber:d.bankDetails.accountNumber,ifscCode:d.bankDetails.ifscCode,branch:d.bankDetails.branch,accountHolderName:d.bankDetails.accountHolderName||d.bankDetails.accountName}:null},chalanNumber:et.chalanNumber||null,chalanDate:et.chalanDate||et.dueDate||new Date().toISOString().split("T")[0],chalanBank:et.chalanBank||"School Bank",chalanStatus:et.chalanStatus||"generated",installmentName:et.name||"Fee Installment",amount:et.amount||0,dueDate:et.dueDate||""};console.log("Setting chalan data:",Ae),E(Ae),console.log("Opening chalan modal"),R(!0)}},className:"bg-green-100 hover:bg-green-200 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded flex items-center border border-green-200",title:"View Chalan",children:[r.jsx(oa,{className:"h-3 w-3 mr-1"}),"Chalan"]})})]},De.id))})]})})]}),v&&I&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Record Payment - ",I.name]}),r.jsx("button",{onClick:ar,className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Installment"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Due"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Pending"}),r.jsx("th",{className:"px-3 py-2"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(I.installments||[]).length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 py-3 text-sm text-gray-500",children:"No installments data available."})}):I.installments.map((De,et)=>{const Ae=Math.max(0,(De.amount||0)-(De.paidAmount||0));return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:De.name}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:De.dueDate?new Date(De.dueDate).toLocaleDateString():"-"}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:Nt(De.amount||0)}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:Nt(De.paidAmount||0)}),r.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:Nt(Ae)}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("button",{onClick:()=>jt(De),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Select"})})]},et)})})]})}),r.jsx("div",{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-sm text-gray-600",children:P?`Selected installment: ${P}`:"Select an installment from the table to proceed."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to collect"}),r.jsx("input",{type:"number",inputMode:"numeric",value:$,onChange:De=>H(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Select an installment first"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),r.jsxs("select",{value:L,onChange:De=>Y(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"chalan",children:"Chalan"}),r.jsx("option",{value:"cheque",children:"Cheque"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Date *"}),r.jsx("input",{type:"date",value:X,onChange:De=>me(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["cheque","bank_transfer","online","chalan"].includes(L)?"Reference / Remarks (required)":"Reference / Remarks (optional)"}),r.jsx("input",{type:"text",value:K,onChange:De=>oe(De.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:L==="chalan"?"Chalan number":"txn id, cheque no, note, etc.",required:["cheque","bank_transfer","online","chalan"].includes(L)})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[r.jsx("button",{onClick:ar,disabled:G,className:"px-4 py-2 rounded border text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:Kt,disabled:G||!P,className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:G?"Recording...":"Record Payment"})]})]})})]})]})}),f&&r.jsx("div",{className:"text-sm text-gray-500",children:"Loading records..."}),w&&r.jsx("div",{className:"text-sm text-red-600",children:w}),_&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:r.jsx(gJ,{isOpen:_,onClose:()=>{console.log("Closing chalan modal"),R(!1),E(null)},chalan:k})})}),Q&&we&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl mx-4 max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Payment Receipt - ",we.studentData.name]}),r.jsx("button",{onClick:()=>de(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-4",children:r.jsx(hJ,{schoolData:we.schoolData,studentData:we.studentData,paymentData:we.paymentData,installments:we.installments,totalAmount:we.totalAmount,totalPaid:we.totalPaid,totalRemaining:we.totalRemaining})})]})})]})},DP=()=>{const e=Gs(),t=()=>e.pathname.includes("/fees/structure")?"structure":e.pathname.includes("/fees/payments")?"payments":"structure",[a,n]=S.useState(t()),s=[{id:"structure",name:"Fee Structure",icon:fa,href:"/admin/fees/structure",description:"Create and manage fee structures"},{id:"payments",name:"Fee Payments",icon:fa,href:"/admin/fees/payments",description:"Record and track fee payments"}];return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6 max-w-full overflow-x-hidden",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx(Ul,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Fees Management"})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex flex-col sm:flex-row sm:space-x-8 px-4 sm:px-6 overflow-x-auto",children:s.map(o=>{const l=o.icon,d=a===o.id;return r.jsx("button",{onClick:()=>{n(o.id),window.history.pushState({},"",o.href)},className:`py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm w-full sm:w-auto text-left ${d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(l,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{children:o.name})]})},o.id)})})}),r.jsxs("div",{className:"p-4 sm:p-6",children:[a==="structure"&&r.jsx(mJ,{}),a==="payments"&&r.jsx(xJ,{})]})]})]})},yJ=async e=>(await bt.get("/reports/dues",{params:e})).data,bJ=async(e={})=>{try{return(await bt.get("/reports/summary",{params:{academicYear:e.academicYear,targetClass:e.class,targetSection:e.section,from:e.from,to:e.to}})).data}catch(t){throw console.error("Error fetching school summary:",t),t}};async function vJ(e){const t={type:"dues",class:e.class,section:e.section,status:e.status};e.search&&(t.search=e.search);const a=await bt.get("/reports/export",{params:t,responseType:"blob",headers:{Accept:"text/csv"}});if(a.data instanceof Blob)return a.data;if(a.data&&typeof a.data=="object"&&!(a.data instanceof Blob)){const n=a.data;throw new Error(n.message||"Failed to export data")}throw new Error("Unexpected response format from server")}const OP=async e=>(await bt.get("/reports/students-by-class",{params:e})).data,Ob=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),jJ=({status:e})=>{const a={paid:{bg:"bg-green-100",text:"text-green-800"},pending:{bg:"bg-yellow-100",text:"text-yellow-800"},overdue:{bg:"bg-red-100",text:"text-red-800"},partial:{bg:"bg-blue-100",text:"text-blue-800"}}[e.toLowerCase()]||{bg:"bg-gray-100",text:"text-gray-800"};return r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.bg} ${a.text}`,children:e.charAt(0).toUpperCase()+e.slice(1)})},wJ=()=>{const{user:e}=dr(),[t,a]=S.useState("ALL"),[n,s]=S.useState("ALL"),[o,l]=S.useState(""),[d,u]=S.useState(""),[m,p]=S.useState(!0),[f,x]=S.useState(null),[w,j]=S.useState("overview"),[v,b]=S.useState({totalStudents:0,avgAttendance:0,avgMarks:0,classWiseDues:[]}),[I,T]=S.useState(!1),[P,A]=S.useState([]),[k,E]=S.useState(new Set),[_,R]=S.useState(new Map),[$,H]=S.useState(new Set),[L,Y]=S.useState([]),[X,me]=S.useState(!1),[K,oe]=S.useState({page:1,limit:10,total:0,pages:1}),[G,B]=S.useState(""),[F,re]=S.useState("ALL"),U=async()=>{try{const Q=await vJ({class:t!=="ALL"?t:void 0,section:n!=="ALL"?n:void 0,search:G||void 0,status:F!=="ALL"?F:void 0}),de=window.URL.createObjectURL(Q),we=document.createElement("a"),ce=new Date().toISOString().replace(/[:.]/g,"-");we.href=de,we.setAttribute("download",`fee-due-report-${ce}.csv`),document.body.appendChild(we),we.click(),we.parentNode&&we.parentNode.removeChild(we),window.URL.revokeObjectURL(de)}catch(se){console.error("Error exporting to CSV:",se),x("Failed to export data. Please try again.")}},ae=S.useCallback(async()=>{try{me(!0),x(null);const se={class:t!=="ALL"?t:void 0,section:n!=="ALL"?n:void 0,page:K.page,limit:K.limit,search:G||void 0,status:F!=="ALL"?F:void 0},Q=await yJ(se);if(Q.success)Y(Q.data.records),oe(de=>({...de,total:Q.data.pagination.total,pages:Q.data.pagination.pages}));else throw new Error("Failed to fetch dues list")}catch(se){console.error("Error fetching dues list:",se),x("Failed to load dues data. Please try again.")}finally{me(!1)}},[t,n,K.page,K.limit,G,F]),W=S.useCallback(async()=>{console.log(" [fetchClassWiseCounts] Starting fetch with filters:",{class:t,section:n});try{console.log("Trying /reports/class-summary endpoint...");const se=await bt.get("/reports/class-summary",{params:{class:t!=="ALL"?t:void 0,section:n!=="ALL"?n:void 0}});if(console.log("API Response:",{status:se.status,data:se.data}),se.data?.success&&se.data.data){console.log("Using class-summary data");const de=se.data.data;if(de.classes&&Array.isArray(de.classes)){const we=de.classes.map(ce=>({className:ce.class||ce.className||ce.name||ce._id||"Unknown",sections:Array.isArray(ce.sections)?ce.sections.map(Ve=>({name:Ve.name||Ve.section||"All",count:Ve.count||Ve.totalStudents||0,avgMarks:Ve.avgMarks||0,avgAttendance:Ve.avgAttendance||0})):[{name:"All",count:ce.totalStudents||0,avgMarks:ce.avgMarks||0,avgAttendance:ce.avgAttendance||0}],total:ce.totalStudents||0}));A(we),x(null);return}if(Array.isArray(de)){const we=de.map(ce=>({className:ce.class||ce.className||ce.name||ce._id||"Unknown",sections:Array.isArray(ce.sections)?ce.sections.map(Ve=>({name:Ve.name||Ve.section||"All",count:Ve.count||Ve.totalStudents||0,avgMarks:Ve.avgMarks||0,avgAttendance:Ve.avgAttendance||0})):[{name:"All",count:ce.totalStudents||0,avgMarks:ce.avgMarks||0,avgAttendance:ce.avgAttendance||0}],total:ce.totalStudents||0}));A(we),x(null);return}}console.log("Trying alternative approach - fetching all students...");const Q=await bt.get("/students",{params:{limit:1e3}});if(Q.data?.success&&Array.isArray(Q.data.data?.students)){const de=Q.data.data.students,we=new Map;de.forEach(Ve=>{const Be=Ve.targetClass||"Unknown",at=Ve.targetSection||"All";we.has(Be)||we.set(Be,{className:Be,sections:new Map,total:0});const pe=we.get(Be);pe.total++,pe.sections.has(at)||pe.sections.set(at,0),pe.sections.set(at,pe.sections.get(at)+1)});const ce=Array.from(we.values()).map(Ve=>({className:Ve.className,sections:Array.from(Ve.sections.entries()).map(([Be,at])=>({name:Be,count:at})),total:Ve.total}));A(ce),x(null);return}console.warn("No class data found in any format"),A([]),x("No class data available")}catch(se){console.error(" Error fetching class data:",{message:se.message,response:se.response?.data,stack:se.stack});let Q="Failed to load class distribution data";se.response?se.response.status===404?Q="Class summary endpoint not found":se.response.status>=500?Q="Server error occurred while fetching class data":se.response.data?.message&&(Q=se.response.data.message):se.request&&(Q="No response from server. Please check your connection."),x(Q),A([])}},[t,n]),fe=S.useCallback(async()=>{try{p(!0),T(!0),x(null),console.log("Fetching school summary with params:",{class:t,section:n});const se=new Date,Q=new Date(se.getFullYear(),se.getMonth(),1),de=new Date(se.getFullYear(),se.getMonth()+1,0),we=await bJ({academicYear:`${se.getFullYear()}-${se.getFullYear()+1}`,class:t==="ALL"?void 0:t,section:n==="ALL"?void 0:n,from:Q.toISOString().split("T")[0],to:de.toISOString().split("T")[0]});if(console.log("School summary response:",we),we.success){const ce=we.data.summary||we.data;if(b({totalStudents:ce.totalStudents||0,avgAttendance:ce.avgAttendance||0,avgMarks:ce.avgMarks||0,classWiseDues:we.data.classWiseDues||[]}),console.log("Updated summary state:",{totalStudents:ce.totalStudents||0,avgAttendance:ce.avgAttendance||0,avgMarks:ce.avgMarks||0}),we.data.classWiseResults&&Array.isArray(we.data.classWiseResults)){console.log("Processing classWiseResults:",we.data.classWiseResults);const Ve=new Map;we.data.classWiseResults.forEach(at=>{const pe=at.class||"Unknown",tt=at.section;Ve.has(pe)||Ve.set(pe,{className:pe,sections:[],total:0});const ut=Ve.get(pe);ut.sections.push({name:tt,count:at.totalStudents||0,avgMarks:at.avgMarks||0,avgAttendance:at.avgAttendance||0}),ut.total+=at.totalStudents||0});const Be=Array.from(Ve.values());console.log("Formatted class-wise data:",Be),A(Be)}else console.warn("No classWiseResults in response"),A([])}}catch(se){console.error("Error in fetchSchoolSummary:",se),x("Failed to load school summary data. Please check the console for details.")}finally{p(!1),T(!1)}},[t,n,W]),Se=S.useCallback(async(se,Q)=>{const de=`${se}-${Q}`;if(!_.has(de))try{H(ce=>new Set(ce).add(de));const we=await OP({className:se,section:Q});we.success&&R(ce=>new Map(ce).set(de,we.students))}catch(we){console.error("Error fetching students:",we)}finally{H(we=>{const ce=new Set(we);return ce.delete(de),ce})}},[_]),Ie=S.useCallback((se,Q)=>{const de=`${se}-${Q}`;E(we=>{const ce=new Set(we);return ce.has(de)?ce.delete(de):(ce.add(de),Se(se,Q)),ce})},[Se]),te=S.useCallback(async()=>{try{const se=[];se.push("Class,Section,Students,Avg. Marks (%),Avg. Attendance (%)");for(const Ve of P)for(const Be of Ve.sections){se.push(`Class ${Ve.className},${Be.name},${Be.count},${Be.avgMarks?.toFixed(1)||"N/A"},${Be.avgAttendance?.toFixed(1)||"N/A"}`);const at=`${Ve.className}-${Be.name}`;let pe=_.get(at);if(!pe)try{const tt=await OP({className:Ve.className,section:Be.name==="All Sections"?void 0:Be.name});tt.success&&(pe=tt.students)}catch(tt){console.error("Error fetching students for export:",tt),pe=[]}pe&&pe.length>0&&(se.push("Student Details"),se.push("Student Name,Avg. Marks (%),Avg. Attendance (%)"),pe.forEach(tt=>{se.push(`"${tt.studentName}",${tt.avgMarks>0?tt.avgMarks.toFixed(1):"N/A"},${tt.avgAttendance>0?tt.avgAttendance.toFixed(1):"N/A"}`)})),se.push("")}const Q=se.join(`
`),de=new Blob([Q],{type:"text/csv;charset=utf-8;"}),we=document.createElement("a"),ce=URL.createObjectURL(de);we.setAttribute("href",ce),we.setAttribute("download",`school_report_detailed_${new Date().toISOString().split("T")[0]}.csv`),we.style.visibility="hidden",document.body.appendChild(we),we.click(),document.body.removeChild(we)}catch(se){console.error("Error exporting data:",se),x("Failed to export data")}},[P,_]);return S.useEffect(()=>{w==="dues"?ae():w==="overview"&&(fe(),W())},[w,ae,fe,W]),S.useEffect(()=>{w==="dues"&&oe(se=>({...se,page:1}))},[t,n,G,F,w]),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Wb,{className:"h-8 w-8 text-blue-600"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"School Reports"})]})}),r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f&&r.jsxs("div",{className:"flex-1 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg flex items-center",children:[r.jsx(Wa,{className:"h-5 w-5 mr-2"}),f]}),w==="overview"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:te,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center whitespace-nowrap",disabled:P.length===0,children:[r.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),r.jsx("button",{onClick:fe,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center whitespace-nowrap",disabled:I,children:I?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Stats"]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[r.jsx("button",{onClick:()=>j("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm ${w==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),r.jsx("button",{onClick:()=>j("dues"),className:`py-4 px-1 border-b-2 font-medium text-sm ${w==="dues"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Dues List"})]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:r.jsx(zj,{schoolId:e?.schoolId,valueClass:t,valueSection:n,onClassChange:a,onSectionChange:s})})}),w==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Total Students"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-blue-600",children:I?r.jsx("span",{className:"inline-block h-8 w-16 bg-gray-200 rounded animate-pulse"}):v.totalStudents.toLocaleString()})]}),r.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:r.jsx(ta,{className:"h-6 w-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Attendance"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-green-600",children:I?r.jsx("span",{className:"inline-block h-8 w-16 bg-gray-200 rounded animate-pulse"}):`${v.avgAttendance.toFixed(1)}%`})]}),r.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:r.jsx(as,{className:"h-6 w-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Marks"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-yellow-600",children:I?r.jsx("span",{className:"inline-block h-8 w-16 bg-gray-200 rounded animate-pulse"}):`${v.avgMarks.toFixed(1)}%`}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"current term"})]}),r.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:r.jsx(Wb,{className:"h-6 w-6 text-yellow-600"})})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow mt-6",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Students by Class & Section"})}),r.jsx("div",{className:"overflow-x-auto",children:m?r.jsx("div",{className:"p-6 space-y-4",children:[1,2,3].map(se=>r.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},se))}):P.length>0?r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Students"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Attendance"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map((se,Q)=>r.jsx(ge.Fragment,{children:se.sections.map((de,we)=>{const ce=`${se.className}-${de.name}`,Ve=k.has(ce),Be=_.get(ce)||[],at=$.has(ce);return r.jsxs(ge.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ie(se.className,de.name),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[Ve?r.jsx(z6,{className:"h-4 w-4 text-gray-500 mr-2"}):r.jsx(Us,{className:"h-4 w-4 text-gray-500 mr-2"}),r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Class ",se.className]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.name||"All Sections"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:de.count.toLocaleString()}),we===0&&se.sections.length>1&&r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Total: ",se.total,")"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900",children:de.avgMarks!==void 0?`${de.avgMarks.toFixed(1)}%`:"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900",children:de.avgAttendance!==void 0?`${de.avgAttendance.toFixed(1)}%`:"N/A"})})]}),Ve&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 bg-gray-50",children:at?r.jsxs("div",{className:"flex justify-center items-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading students..."})]}):Be.length>0?r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Student Details"}),r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Student Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Avg. Marks"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Avg. Attendance"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Be.map(pe=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:pe.studentName}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:pe.avgMarks>0?`${pe.avgMarks.toFixed(1)}%`:"N/A"}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:pe.avgAttendance>0?`${pe.avgAttendance.toFixed(1)}%`:"N/A"})]},pe.studentId))})]})]}):r.jsx("div",{className:"text-center py-4 text-gray-500",children:"No student data available"})})})]},ce)})},`${se.className}-${Q}`))})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No class/section data available"})})]})]}),w==="dues"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:U,disabled:X,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Ns,{className:"h-4 w-4 mr-2"}),X?"Exporting...":"Export to CSV"]}),r.jsx("button",{onClick:ae,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:X,children:X?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Outstanding Dues"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Tn,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",placeholder:"Search students...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:G,onChange:se=>B(se.target.value)})]}),r.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:F,onChange:se=>re(se.target.value),children:[r.jsx("option",{value:"ALL",children:"All Status"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"PAID",children:"Paid"}),r.jsx("option",{value:"OVERDUE",children:"Overdue"}),r.jsx("option",{value:"PARTIAL",children:"Partial"})]})]})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class / Section"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pending"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-4 text-center",children:r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})})}):L.length>0?L.map(se=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:se.studentName}),se.rollNumber&&r.jsx("div",{className:"text-sm text-gray-500",children:se.rollNumber})]})})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:se.studentClass}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Sec: ",se.studentSection]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ob(se.totalAmount)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:Ob(se.totalPaid)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:Ob(se.totalPending)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(jJ,{status:se.status.toLowerCase()})})]},se.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No dues records found"})})})]}),r.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[r.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>oe({...K,page:Math.max(1,K.page-1)}),disabled:K.page===1,className:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${K.page===1?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Previous"}),r.jsx("button",{onClick:()=>oe({...K,page:Math.min(K.pages,K.page+1)}),disabled:K.page>=K.pages,className:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${K.page>=K.pages?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Next"})]}),r.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",r.jsx("span",{className:"font-medium",children:(K.page-1)*K.limit+1})," to"," ",r.jsx("span",{className:"font-medium",children:Math.min(K.page*K.limit,K.total)})," ","of ",r.jsx("span",{className:"font-medium",children:K.total})," results"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[r.jsxs("button",{onClick:()=>oe({...K,page:Math.max(1,K.page-1)}),disabled:K.page===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${K.page===1?"text-gray-300":"text-gray-500 hover:bg-gray-50"}`,children:[r.jsx("span",{className:"sr-only",children:"Previous"}),""]}),Array.from({length:Math.min(5,K.pages)},(se,Q)=>{let de;return K.pages<=5||K.page<=3?de=Q+1:K.page>=K.pages-2?de=K.pages-4+Q:de=K.page-2+Q,r.jsx("button",{onClick:()=>oe({...K,page:de}),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${K.page===de?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:de},de)}),r.jsxs("button",{onClick:()=>oe({...K,page:Math.min(K.pages,K.page+1)}),disabled:K.page>=K.pages,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${K.page>=K.pages?"text-gray-300":"text-gray-500 hover:bg-gray-50"}`,children:[r.jsx("span",{className:"sr-only",children:"Next"}),""]})]})})]})]})]})]})]})]})]})]})},NJ=()=>{const{user:e,token:t}=dr(),[a,n]=S.useState([]),[s,o]=S.useState([]),[l,d]=S.useState(!0),[u,m]=S.useState("all"),[p,f]=S.useState(""),[x,w]=S.useState(null),[j,v]=S.useState(!1),[b,I]=S.useState(""),[T,P]=S.useState(!1),A=()=>t||localStorage.getItem("token");S.useEffect(()=>{k()},[]);const k=async()=>{d(!0);try{const L=A();if(console.log(" Token exists:",!!L),console.log(" Token length:",L?.length||0),console.log(" User:",e?.userId,e?.role),console.log(" School Code:",e?.schoolCode),!L){console.error(" No authentication token found"),xe.error("Authentication required. Please log in again."),d(!1);return}console.log(" Fetching leave requests from backend...");const Y=await bt.get("/leave-requests/admin/all");console.log(" Response status:",Y.status);const X=Y.data;if(console.log(" Leave requests API response:",X),console.log(" Number of requests:",X.data?.leaveRequests?.length||0),X.success&&X.data?.leaveRequests){const me=X.data.leaveRequests.map(K=>{const oe=new Date(K.startDate),G=new Date(K.endDate),B=Math.ceil((G.getTime()-oe.getTime())/(1e3*60*60*24))+1;return{_id:K._id,teacherId:K.teacherUserId||K.teacherId?._id||K.teacherId||"N/A",teacherName:K.teacherName||K.teacherId?.name?.displayName||"Unknown",teacherEmail:K.teacherEmail||K.teacherId?.email||"N/A",leaveType:K.leaveType||"other",subject:K.subjectLine||"No Subject",startDate:K.startDate,endDate:K.endDate,days:K.numberOfDays||B,reason:K.description||"No description provided",status:K.status,appliedOn:K.createdAt,reviewedBy:K.reviewedByName||K.reviewedBy?.name?.displayName,reviewedOn:K.reviewedAt,reviewComments:K.adminComments}});console.log(" Transformed data:",me),n(me),o(me)}else console.log(" No leave requests found in the database"),n([]),o([])}catch(L){console.error("Error fetching leave requests:",L),xe.error("Failed to load leave requests")}finally{d(!1)}};S.useEffect(()=>{let L=a;u!=="all"&&(L=L.filter(Y=>Y.status===u)),p&&(L=L.filter(Y=>Y.teacherName.toLowerCase().includes(p.toLowerCase())||Y.teacherEmail.toLowerCase().includes(p.toLowerCase())||Y.reason.toLowerCase().includes(p.toLowerCase()))),o(L)},[u,p,a]);const E=async L=>{P(!0);try{if(!A()){xe.error("Authentication required");return}(await bt.put(`/leave-requests/admin/${L}/status`,{status:"approved",adminComments:b||"Approved"})).data.success&&(xe.success("Leave request approved successfully"),v(!1),w(null),I(""),await k())}catch(Y){console.error("Error approving leave request:",Y),xe.error("Failed to approve leave request")}finally{P(!1)}},_=async L=>{P(!0);try{if(!A()){xe.error("Authentication required");return}(await bt.put(`/leave-requests/admin/${L}/status`,{status:"rejected",adminComments:b||"Rejected"})).data.success&&(xe.success("Leave request rejected"),v(!1),w(null),I(""),await k())}catch(Y){console.error("Error rejecting leave request:",Y),xe.error("Failed to reject leave request")}finally{P(!1)}},R=L=>{w(L),I(L.reviewComments||""),v(!0)},$=L=>{switch(L){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return l?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Leave Management"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Review and manage teacher leave requests"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Requests"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:a.length})]}),r.jsx(la,{className:"h-6 w-6 sm:h-8 sm:w-8 text-gray-400"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:a.filter(L=>L.status==="pending").length})]}),r.jsx(ls,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-400"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Approved"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:a.filter(L=>L.status==="approved").length})]}),r.jsx(Id,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Rejected"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-red-600",children:a.filter(L=>L.status==="rejected").length})]}),r.jsx(Ar,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-400"})]})})]}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm border border-gray-200 mb-4 sm:mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by teacher name, email, or reason...",value:p,onChange:L=>f(L.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx(t4,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),r.jsxs("select",{value:u,onChange:L=>m(L.target.value),className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.length===0?r.jsxs("div",{className:"px-6 py-8 text-center text-gray-500",children:[r.jsx(la,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No leave requests found"}),r.jsx("p",{className:"text-gray-600",children:"No leave requests match your current filters."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied On"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(L=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(yd,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.teacherName}),r.jsx("div",{className:"text-sm text-gray-500",children:L.teacherId})]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[H(L.startDate)," - ",H(L.endDate)]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[L.days," day",L.days>1?"s":""]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(L.appliedOn)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("button",{onClick:()=>R(L),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[r.jsx(fa,{className:"h-4 w-4"}),"View Details"]})})]},L._id))})]})}),r.jsx("div",{className:"lg:hidden divide-y divide-gray-200",children:s.map(L=>r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(yd,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:L.teacherName}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:L.teacherId})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subject:"}),r.jsx("span",{className:"text-gray-900 font-medium truncate ml-2",children:L.subject})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Duration:"}),r.jsxs("span",{className:"text-gray-900",children:[L.days," day",L.days>1?"s":""]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Period:"}),r.jsxs("span",{className:"text-gray-900 text-right",children:[H(L.startDate)," - ",H(L.endDate)]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Applied:"}),r.jsx("span",{className:"text-gray-900",children:H(L.appliedOn)})]})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("button",{onClick:()=>R(L),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:[r.jsx(fa,{className:"h-4 w-4"}),"View Details"]})})]},L._id))})]})}),j&&x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leave Request Details"}),r.jsx("button",{onClick:()=>{v(!1),w(null),I("")},className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ar,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Teacher Information"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(yd,{className:"h-5 w-5 text-gray-400 mr-2"}),r.jsx("span",{className:"font-medium text-gray-900",children:x.teacherName})]}),r.jsx("p",{className:"text-sm text-gray-600",children:x.teacherEmail}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",x.teacherId]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Leave Details"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Subject:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.subject})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Description:"}),r.jsx("p",{className:"text-sm text-gray-700",children:x.reason})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Start Date:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:H(x.startDate)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"End Date:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:H(x.endDate)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Duration:"}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[x.days," day",x.days>1?"s":""]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$(x.status)}`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})]})]})]}),x.status!=="pending"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Review Information"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Reviewed By:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.reviewedBy})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Reviewed On:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.reviewedOn&&H(x.reviewedOn)})]}),x.reviewComments&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600 block mb-1",children:"Comments:"}),r.jsx("p",{className:"text-sm text-gray-700",children:x.reviewComments})]})]})]}),x.status==="pending"&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("button",{onClick:()=>E(x._id),disabled:T,className:"flex-1 bg-green-600 text-white px-4 py-3 sm:py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base",children:[r.jsx(Id,{className:"h-5 w-5"}),T?"Processing...":"Approve"]}),r.jsxs("button",{onClick:()=>_(x._id),disabled:T,className:"flex-1 bg-red-600 text-white px-4 py-3 sm:py-2 rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base",children:[r.jsx(Ar,{className:"h-5 w-5"}),T?"Processing...":"Reject"]})]})]})})})]})};class _b extends ge.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("Error Boundary caught an error:",t,a)}render(){return this.state.hasError?this.props.fallback||r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Something went wrong with the component"}),r.jsxs("details",{className:"text-sm text-red-700",children:[r.jsx("summary",{className:"cursor-pointer",children:"Error Details"}),r.jsxs("pre",{className:"mt-2 whitespace-pre-wrap",children:[this.state.error?.toString(),`
`,this.state.error?.stack]})]})]})})}):this.props.children}}const _a=({permission:e,permissionName:t,children:a})=>{const{hasPermission:n,showPermissionDenied:s,setShowPermissionDenied:o,deniedPermissionName:l,setDeniedPermissionName:d,loading:u,permissions:m}=M1(),p=Zo(),[f,x]=ge.useState(!1);ge.useEffect(()=>{!u&&!f&&e&&(x(!0),n(e)||(o(!0),d(t)))},[u,f,e,t,n,o,d]),ge.useEffect(()=>{x(!1)},[e]);const w=()=>{o(!1),p("/admin")};return e?u?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center animate-spin",children:r.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),r.jsx("p",{className:"text-sm text-gray-600",children:"Loading permissions..."})]})}):n(e)?r.jsx(r.Fragment,{children:a}):r.jsxs(r.Fragment,{children:[r.jsx(R1,{isOpen:s,onClose:w,permissionName:l||t}),r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-yellow-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m0 0v2m0-2h2m-2 0H9m6-6a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Access Restricted"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["You don't have permission to access ",r.jsx("strong",{children:t})]}),r.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Please use the navigation menu on the left to access other sections"}),r.jsx("button",{onClick:()=>p("/admin"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})})]}):r.jsx(r.Fragment,{children:a})};function SJ(){return r.jsx(D4,{children:r.jsx(OM,{children:r.jsxs(JP,{children:[r.jsx(Nr,{index:!0,element:r.jsx(QY,{})}),r.jsx(Nr,{path:"users",element:r.jsx(_a,{permission:"manageUsers",permissionName:"User Management",children:r.jsx(CP,{})})}),r.jsx(Nr,{path:"manage-users",element:r.jsx(_a,{permission:"manageUsers",permissionName:"User Management",children:r.jsx(CP,{})})}),r.jsx(Nr,{path:"settings",element:r.jsx(_a,{permission:"manageSchoolSettings",permissionName:"School Settings",children:r.jsx(TP,{})})}),r.jsx(Nr,{path:"school-settings",element:r.jsx(_a,{permission:"manageSchoolSettings",permissionName:"School Settings",children:r.jsx(TP,{})})}),r.jsx(Nr,{path:"settings/idcard-templates",element:r.jsx(_a,{permission:"manageSchoolSettings",permissionName:"ID Card Templates",children:r.jsx(JX,{})})}),r.jsx(Nr,{path:"academic-details",element:r.jsx(_a,{permission:"viewAcademicDetails",permissionName:"Academic Details",children:r.jsx(_b,{children:r.jsx(XX,{})})})}),r.jsx(Nr,{path:"attendance",element:r.jsx(_a,{permission:"viewAttendance",permissionName:"Attendance",children:r.jsx(Db,{})})}),r.jsx(Nr,{path:"attendance/mark",element:r.jsx(_a,{permission:"viewAttendance",permissionName:"Mark Attendance",children:r.jsx(Db,{})})}),r.jsx(Nr,{path:"attendance/view",element:r.jsx(_a,{permission:"viewAttendance",permissionName:"View Attendance",children:r.jsx(Db,{})})}),r.jsx(Nr,{path:"assignments",element:r.jsx(_a,{permission:"viewAssignments",permissionName:"Assignments",children:r.jsx(_b,{children:r.jsx(aJ,{})})})}),r.jsx(Nr,{path:"results",element:r.jsx(_a,{permission:"viewResults",permissionName:"Results",children:r.jsx(nJ,{})})}),r.jsx(Nr,{path:"results/entry",element:r.jsx(_a,{permission:"viewResults",permissionName:"Results Entry",children:r.jsx(_b,{children:r.jsx(iJ,{})})})}),r.jsx(Nr,{path:"messages",element:r.jsx(_a,{permission:"messageStudentsParents",permissionName:"Messages",children:r.jsx(uJ,{})})}),r.jsx(Nr,{path:"fees/structure",element:r.jsx(_a,{permission:"viewFees",permissionName:"Fee Structure",children:r.jsx(DP,{})})}),r.jsx(Nr,{path:"fees/payments",element:r.jsx(_a,{permission:"viewFees",permissionName:"Fee Payments",children:r.jsx(DP,{})})}),r.jsx(Nr,{path:"reports",element:r.jsx(_a,{permission:"viewReports",permissionName:"Reports",children:r.jsx(wJ,{})})}),r.jsx(Nr,{path:"leave-management",element:r.jsx(_a,{permission:"viewLeaves",permissionName:"Leave Management",children:r.jsx(NJ,{})})}),r.jsx(Nr,{path:"*",element:r.jsx(Ls,{to:"/admin"})})]})})})}const CJ=({children:e,currentPage:t,onNavigate:a,onLogout:n})=>{const{user:s}=dr(),[o,l]=S.useState(!1),{hasPermission:d,showPermissionDenied:u,setShowPermissionDenied:m,deniedPermissionName:p,checkAndNavigate:f}=M1(),x=()=>{if(!s?.name)return"T";const v=s.name.split(" ");return v.length>=2?(v[0].charAt(0)+v[v.length-1].charAt(0)).toUpperCase():s.name.substring(0,2).toUpperCase()},w=[{name:"Dashboard",icon:P1,page:"dashboard",permission:null},{name:"Attendance",icon:as,page:"attendance",permission:"viewAttendance"},{name:"Assignments",icon:fa,page:"assignments",permission:"viewAssignments"},{name:"Results",icon:Rl,page:"view-results",permission:"viewResults"},{name:"Messages",icon:Qh,page:"messages",permission:"messageStudentsParents"},{name:"Leave Request",icon:la,page:"leave-request",permission:"viewLeaves"}],j=v=>{v.permission&&!d(v.permission)?f(v.permission,v.name,()=>{a(v.page),l(!1)}):(a(v.page),l(!1))};return r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o&&r.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 lg:hidden",onClick:()=>l(!1)}),r.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-lg transform ${o?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 rounded-lg mr-3",children:r.jsx(Fo,{className:"h-5 w-5 text-white"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"ERP Portal"})]}),r.jsx("button",{onClick:()=>l(!1),className:"lg:hidden p-1 rounded-md hover:bg-gray-100",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:w.map(v=>{const b=v.icon;return r.jsxs("button",{onClick:()=>j(v),className:`w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors ${t===v.page?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx(b,{className:"h-5 w-5 mr-3"}),v.name]},v.name)})}),r.jsx("div",{className:"px-4 py-6 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-white font-bold text-sm",children:x()})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.name||"Teacher"}),r.jsx("p",{className:"text-xs text-gray-500",children:s?.userId||s?.email})]})]})})]})]}),r.jsx(R1,{isOpen:u,onClose:()=>m(!1),permissionName:p}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 lg:hidden",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[r.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-md text-gray-600 hover:bg-gray-100",children:r.jsx(a4,{className:"h-6 w-6"})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:t.replace("-"," ")}),r.jsx("div",{className:"w-10"})]})}),r.jsx("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:e})]})]})},_P=({onNavigate:e})=>{const{user:t,token:a}=dr(),[n,s]=S.useState(!0),[o,l]=S.useState({totalAssignments:0,activeAssignments:0,leaveRequests:{total:0,pending:0,approved:0,rejected:0,year:new Date().getFullYear()},todayAttendance:{marked:!1,classesCount:0}}),[d,u]=S.useState([]),[m,p]=S.useState([]),[f,x]=S.useState(null);S.useEffect(()=>{w()},[a]);const w=async()=>{s(!0);try{console.log(" Fetching dashboard data...");let b={assignments:[]};try{if(b=(await bt.get("/assignments?limit=100")).data,console.log(" Assignments data:",b),!b||!b.data&&!b.assignments&&!Array.isArray(b)){console.log(" Trying direct assignments endpoint...");const K=(await bt.get("/assignments")).data;console.log(" Direct assignments data:",K),K&&(b=K)}}catch(X){console.warn(" Assignments API failed:",X);try{console.log(" Trying fallback assignments endpoint..."),b=(await bt.get("/assignments")).data,console.log(" Fallback assignments data:",b)}catch(me){console.error(" All assignment endpoints failed:",me)}}let I={success:!1,data:{leaveRequests:[]}};try{I=(await bt.get("/leave-requests/teacher/my-requests")).data,console.log(" Leave requests data:",I)}catch(X){console.warn(" Leave requests API failed:",X)}try{const me=(await bt.get("/messages/teacher/messages?limit=1")).data;console.log(" Messages data:",me),me.messages&&me.messages.length>0&&x(me.messages[0])}catch(X){console.warn(" Messages API failed:",X)}let T=[];if(console.log(" DEBUG: Raw assignmentsData structure:",{hasData:!!b.data,hasAssignments:!!b.assignments,isArray:Array.isArray(b),keys:Object.keys(b||{}),type:typeof b}),b.data&&Array.isArray(b.data))T=b.data,console.log(" Using assignmentsData.data:",T.length);else if(b.assignments&&Array.isArray(b.assignments))T=b.assignments,console.log(" Using assignmentsData.assignments:",T.length);else if(Array.isArray(b))T=b,console.log(" Using direct array:",T.length);else if(b&&typeof b=="object"){const X=Object.keys(b).filter(me=>Array.isArray(b[me]));X.length>0&&(T=b[X[0]],console.log(` Using ${X[0]}:`,T.length))}const P=T.filter(X=>!X||typeof X!="object"?!1:X._placeholder===!0?(console.log(" Skipping placeholder assignment in dashboard:",X._id),!1):!X.title&&!X.subject&&!X.class?(console.log(" Skipping incomplete assignment in dashboard:",X._id),!1):!0);console.log(" Valid assignments for dashboard:",P.length),T=P;const A=I.data?.leaveRequests||[];console.log(" Extracted assignments:",T.length),console.log(" Extracted leave requests:",A.length),u(T),p(A);const k=T.length,E=T.filter(X=>{const me=new Date(X.dueDate),K=new Date;return K.setHours(0,0,0,0),me>=K}).length,_=new Date().getFullYear(),R=A.filter(X=>X.startDate?new Date(X.startDate).getFullYear()===_:!1),$=R.length,H=R.filter(X=>X.status==="pending").length,L=R.filter(X=>X.status==="approved").length,Y=R.filter(X=>X.status==="rejected").length;console.log(" Leave request statuses:",A.map(X=>({id:X._id,status:X.status,startDate:X.startDate}))),console.log(` Yearly (${_}) leave stats:`,{totalYearlyLeaves:$,pendingLeaves:H,approvedLeaves:L,rejectedLeaves:Y,allTimeTotal:A.length}),console.log(" Calculated stats:",{totalAssignments:k,activeAssignments:E,totalLeaves:$,pendingLeaves:H,approvedLeaves:L}),l({totalAssignments:k,activeAssignments:E,leaveRequests:{total:$,pending:H,approved:L,rejected:Y,year:_},todayAttendance:{marked:!1,classesCount:0}})}catch(b){console.error(" Error fetching dashboard data:",b)}finally{s(!1)}},j=[{name:"Total Assignments",value:o.totalAssignments.toString(),icon:ss,color:"bg-blue-500",change:`${o.activeAssignments} active`,onClick:()=>e("assignments")},{name:`Leave Requests (${o.leaveRequests.year})`,value:o.leaveRequests.total.toString(),icon:la,color:"bg-green-500",change:`${o.leaveRequests.pending} pending`,onClick:()=>e("leave-request")},{name:`Approved Leaves (${o.leaveRequests.year})`,value:o.leaveRequests.approved.toString(),icon:Hn,color:"bg-emerald-500",change:`${o.leaveRequests.rejected} rejected`,onClick:()=>e("leave-request")},{name:"Attendance",value:o.todayAttendance.marked?"Marked":"Pending",icon:as,color:o.todayAttendance.marked?"bg-green-500":"bg-orange-500",change:"Today",onClick:()=>e("attendance")}],v=b=>{if(console.log(" DEBUG: Processing dueDate:",b,"Type:",typeof b),!b)return console.warn(" WARNING: dueDate is null, undefined, or empty"),{text:"No due date",color:"text-gray-700",bgColor:"bg-gray-100",priority:"low"};const I=new Date(b),T=new Date;if(isNaN(I.getTime()))return console.error(" ERROR: Invalid date format:",b),{text:"Invalid date",color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"};T.setHours(0,0,0,0),I.setHours(23,59,59,999);const P=I.getTime()-T.getTime(),A=Math.ceil(P/(1e3*60*60*24));if(console.log(" DEBUG: Calculated diffDays:",A,"for assignment due:",I.toDateString()),A<0){const k=Math.abs(A);return{text:`${k} day${k>1?"s":""} overdue`,color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"}}return A===0?{text:"Due Today",color:"text-orange-700",bgColor:"bg-orange-100",priority:"high"}:A===1?{text:"Due Tomorrow",color:"text-yellow-700",bgColor:"bg-yellow-100",priority:"medium"}:A<=3?{text:`${A} days left`,color:"text-amber-700",bgColor:"bg-amber-50",priority:"medium"}:A<=7?{text:`${A} days left`,color:"text-blue-700",bgColor:"bg-blue-50",priority:"normal"}:{text:`${A} days left`,color:"text-green-700",bgColor:"bg-green-50",priority:"low"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6 text-white",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:["Welcome back, ",t?.name||"Teacher","!"]}),r.jsxs("p",{className:"text-blue-100 mb-4 sm:mb-0",children:[t?.userId&&`ID: ${t.userId}  `,t?.schoolCode&&`School: ${t.schoolCode}`]})]}),r.jsxs("div",{className:"flex items-center bg-white bg-opacity-20 rounded-lg px-4 py-2",children:[r.jsx(ls,{className:"h-5 w-5 mr-2"}),r.jsx("span",{className:"font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]})}),n?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(b=>r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 animate-pulse",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"})]},b))}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((b,I)=>{const T=b.icon;return r.jsxs("button",{onClick:b.onClick,className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 hover:scale-105 text-left",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:`p-2 rounded-lg ${b.color}`,children:r.jsx(T,{className:"h-6 w-6 text-white"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:b.value}),r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:b.name}),r.jsx("p",{className:"text-xs text-gray-500",children:b.change})]},I)})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upcoming Deadlines"}),r.jsx("button",{onClick:()=>e("assignments"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All "})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:d.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(ss,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No assignments yet"}),r.jsx("button",{onClick:()=>e("assignments"),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Create your first assignment"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:d.slice(0,6).sort((b,I)=>{const T={urgent:0,high:1,medium:2,normal:3,low:4},P=v(b.dueDate).priority,A=v(I.dueDate).priority;return T[P]-T[A]}).map((b,I)=>{const T=v(b.dueDate),P=T.priority==="urgent"||T.priority==="high";return r.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${P?"border-l-4 border-red-400 bg-red-50":""}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:b.title||b.subject||"Untitled Assignment"}),P&&r.jsx(Wa,{className:"h-4 w-4 text-red-500"})]}),r.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500 mb-2",children:[b.subject&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(ss,{className:"h-3 w-3 mr-1"}),b.subject]}),(b.class||b.section)&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(ta,{className:"h-3 w-3 mr-1"}),b.class?`Class ${b.class}`:"",b.class&&b.section?"-":"",b.section||""]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(la,{className:"h-3 w-3 mr-1"}),b.dueDate?new Date(b.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"No due date"]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.bgColor} ${T.color}`,children:T.text}),P&&r.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Action Required"})]})]})},I)})})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Messages"}),r.jsx("button",{onClick:()=>e("messages"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All "})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:f?r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>e("messages"),children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold text-sm",children:f.senderName?.charAt(0).toUpperCase()||"U"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:f.senderName||"Unknown Sender"}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(f.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:f.subject}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:f.message}),f.recipientType&&r.jsxs("span",{className:"inline-block mt-2 px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:["To: ",f.recipientType]})]})]})}):r.jsxs("div",{className:"p-6 text-center",children:[r.jsx(Qh,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-xs",children:"No messages yet"}),r.jsx("button",{onClick:()=>e("messages"),className:"mt-2 text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Send a message"})]})})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Leave Status"}),r.jsxs("div",{className:"space-y-4",children:[o.leaveRequests.pending>0&&r.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border-2 border-yellow-200",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-yellow-100",children:r.jsx(ls,{className:"h-5 w-5 text-yellow-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"font-semibold text-yellow-900 text-sm",children:[o.leaveRequests.pending," Pending Leave Request",o.leaveRequests.pending>1?"s":""]}),r.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Awaiting admin approval"}),r.jsx("button",{onClick:()=>e("leave-request"),className:"mt-2 text-xs text-yellow-800 hover:text-yellow-900 font-medium",children:"View Details "})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Recent Leave Requests"})}),m.length===0?r.jsxs("div",{className:"p-6 text-center",children:[r.jsx(la,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-xs",children:"No leave requests"}),r.jsx("button",{onClick:()=>e("leave-request"),className:"mt-2 text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Apply for leave"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:m.slice(0,3).map((b,I)=>r.jsx("div",{className:"p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.subjectLine}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(b.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(b.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),r.jsx("span",{className:"mx-1",children:""}),b.numberOfDays," day",b.numberOfDays>1?"s":""]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.status==="approved"?"bg-green-100 text-green-700":b.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})]})},I))})]})]})]})]})},dO=()=>{const{user:e,token:t}=dr(),{classesData:a,getSectionsByClass:n}=gn(),[s,o]=S.useState(new Date().toISOString().split("T")[0]),[l,d]=S.useState(""),[u,m]=S.useState(""),[p,f]=S.useState("morning"),[x,w]=S.useState([]),[j,v]=S.useState([]),[b,I]=S.useState({}),[T,P]=S.useState(!1),[A,k]=S.useState({isMarked:!1,isFrozen:!1,canModify:!0}),E=a?.classes?.map(K=>K.className)||[];S.useEffect(()=>{if(l&&a){const K=n(l);w(K)}else w([]),m("")},[l,a,n]),S.useEffect(()=>{(async()=>{if(!l||!u){v([]);return}if(!t||!e?.schoolCode){pt.error("Authentication required");return}P(!0);try{console.log(" Fetching students for:",{class:l,section:u,schoolCode:e.schoolCode});const G=(await bt.get(`/users/role/student?class=${l}&section=${u}`)).data;console.log(" API Response:",G);const B=G.data||G||[];console.log(` Total users received: ${B.length}`);const F=B.filter(U=>{const ae=U.role==="student",W=U.academicInfo?.class===l||U.studentDetails?.class===l||U.studentDetails?.currentClass===l||U.class===l,fe=U.academicInfo?.section===u||U.studentDetails?.section===u||U.studentDetails?.currentSection===u||U.section===u;return ae&&W&&fe});console.log(` Filtered students: ${F.length}`);const re=F.map(U=>({_id:U._id,userId:U.userId,name:U.name,studentDetails:U.studentDetails,class:l,section:u}));v(re),I({}),re.length===0&&console.log(" No students found for this class and section")}catch(oe){console.error("Error fetching students:",oe),pt.error("Failed to load students")}finally{P(!1)}})()},[l,u,t,e?.schoolCode]),S.useEffect(()=>{l&&u&&s&&_()},[l,u,s,p]),S.useEffect(()=>{j.length>0&&s&&R()},[j.length,s,p]);const _=async()=>{if(!(!l||!u||!s))try{const K=await j1({class:l,section:u,date:s,session:p});k({isMarked:K.isMarked||!1,isFrozen:K.isFrozen||!1,canModify:K.canModify!==!1}),K.isFrozen&&pt.error("This session attendance is frozen and cannot be modified")}catch(K){console.warn("Could not check session status:",K),k({isMarked:!1,isFrozen:!1,canModify:!0})}},R=async()=>{if(!(!l||!u||!s))try{const K=await Yf({class:l,section:u,date:s,session:p});if(K.success&&K.data&&K.data.length>0){const oe=K.data.find(G=>G.session===p&&G.dateString===s);if(oe&&oe.students){const G={};oe.students.forEach(B=>{const F=j.find(re=>re.userId===B.studentId);F&&(G[F._id]=B.status)}),I(G),console.log(" Loaded existing attendance:",G)}}}catch(K){console.warn("Could not load existing attendance:",K)}},$=(K,oe)=>{if(A.isFrozen){pt.error("Attendance is frozen and cannot be modified");return}I(G=>({...G,[K]:oe}))},H=()=>{if(A.isFrozen){pt.error("Attendance is frozen and cannot be modified");return}const K={};j.forEach(oe=>{K[oe._id]="present"}),I(K),pt.success("Marked all students as present")},L=()=>{if(A.isFrozen){pt.error("Attendance is frozen and cannot be modified");return}const K={};j.forEach(oe=>{K[oe._id]="absent"}),I(K),pt.success("Marked all students as absent")},Y=async()=>{if(!l||!u||j.length===0){pt.error("Please select class and section first");return}if(A.isFrozen){pt.error("Attendance is frozen and cannot be modified");return}P(!0);try{const K=j.map(G=>({studentId:G.userId,status:b[G._id]||"present"})),oe=await sO({class:l,section:u,date:s,session:p,students:K});oe.success?(pt.success("Attendance saved successfully!"),await _()):pt.error(oe.message||"Failed to save attendance")}catch(K){console.error("Error saving attendance:",K),pt.error(K.response?.data?.message||"Failed to save attendance")}finally{P(!1)}},me=(()=>{const K=Object.values(b),oe=K.filter(F=>F==="present").length,G=K.filter(F=>F==="absent").length,B=j.length;return{present:oe,absent:G,total:B}})();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Mark Attendance"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 sm:mt-0",children:[A.isFrozen&&r.jsxs("div",{className:"flex items-center px-3 py-2 bg-yellow-100 text-yellow-800 rounded-lg text-sm font-medium",children:[r.jsx(E1,{className:"h-4 w-4 mr-2"}),"Attendance Frozen"]}),r.jsxs("button",{onClick:H,disabled:j.length===0||T||A.isFrozen,className:`flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed ${A.isFrozen?"opacity-50":""}`,title:A.isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Mark All Present"]}),r.jsxs("button",{onClick:L,disabled:j.length===0||T||A.isFrozen,className:`flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed ${A.isFrozen?"opacity-50":""}`,title:A.isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(yi,{className:"h-4 w-4 mr-2"}),"Mark All Absent"]}),r.jsxs("button",{onClick:Y,disabled:j.length===0||T||A.isFrozen,className:`flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed ${A.isFrozen?"opacity-50":""}`,title:A.isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Save Attendance"]})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",value:s,onChange:K=>o(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),r.jsxs("select",{value:l,onChange:K=>{d(K.target.value),m(""),v([])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Class"}),E.map(K=>r.jsxs("option",{value:K,children:["Class ",K]},K))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),r.jsxs("select",{value:u,onChange:K=>m(K.target.value),disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Class First"}),l&&x.map(K=>r.jsx("option",{value:K.value,children:K.label},K.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>f("morning"),className:`flex-1 flex items-center justify-center px-3 py-2 rounded-lg border-2 transition-colors ${p==="morning"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:[r.jsx(af,{className:"h-4 w-4 mr-1"}),"Morning"]}),r.jsxs("button",{onClick:()=>f("afternoon"),className:`flex-1 flex items-center justify-center px-3 py-2 rounded-lg border-2 transition-colors ${p==="afternoon"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:[r.jsx(ef,{className:"h-4 w-4 mr-1"}),"Afternoon"]})]})]})]})}),j.length===0&&r.jsx("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(ta,{className:"h-6 w-6 text-blue-600 mr-3 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Get Started"}),r.jsxs("ol",{className:"space-y-1 text-sm text-blue-800",children:[r.jsx("li",{children:"1. Select a date for attendance"}),r.jsx("li",{children:"2. Choose a class from the dropdown"}),r.jsx("li",{children:"3. Select a section to view students"}),r.jsx("li",{children:"4. Choose morning or afternoon session"}),r.jsx("li",{children:"5. Mark attendance for each student"}),r.jsx("li",{children:"6. Save the attendance record"})]})]})]})}),j.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Student Attendance"}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:["Total: ",r.jsx("strong",{children:me.total})]}),r.jsxs("span",{className:"text-green-600",children:["Present: ",r.jsx("strong",{children:me.present})]}),r.jsxs("span",{className:"text-red-600",children:["Absent: ",r.jsx("strong",{children:me.absent})]})]})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:j.map((K,oe)=>r.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:r.jsx("span",{className:"text-base font-semibold text-blue-700",children:(K.name?.firstName?.[0]||"")+(K.name?.lastName?.[0]||"")})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[K.name?.firstName," ",K.name?.lastName]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["User ID: ",K.userId||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[K.class," - Section ",K.section]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>$(K._id,"present"),disabled:A.isFrozen,className:`flex items-center px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${b[K._id]==="present"?"bg-green-100 text-green-800 border-green-200":b[K._id]==="absent"?"bg-white text-gray-400 border-gray-200":"bg-white text-gray-700 border-gray-300 hover:bg-green-50"} ${A.isFrozen?"opacity-50 cursor-not-allowed":""}`,title:A.isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(Hn,{className:"h-4 w-4 mr-1"}),"Present"]}),r.jsxs("button",{onClick:()=>$(K._id,"absent"),disabled:A.isFrozen,className:`flex items-center px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${b[K._id]==="absent"?"bg-red-100 text-red-800 border-red-200":b[K._id]==="present"?"bg-white text-gray-400 border-gray-200":"bg-white text-gray-700 border-gray-300 hover:bg-red-50"} ${A.isFrozen?"opacity-50 cursor-not-allowed":""}`,title:A.isFrozen?"Attendance is frozen and cannot be modified":"",children:[r.jsx(yi,{className:"h-4 w-4 mr-1"}),"Absent"]})]})]})},K._id))})]})]})},uO=()=>{const{token:e,user:t}=dr(),{classesData:a,loading:n,getSectionsByClass:s,hasClasses:o}=gn(),[l,d]=S.useState(new Date().toISOString().split("T")[0]),[u,m]=S.useState(""),[p,f]=S.useState(""),[x,w]=S.useState([]),[j,v]=S.useState("morning"),[b,I]=S.useState([]),[T,P]=S.useState([]),[A,k]=S.useState(""),[E,_]=S.useState(!1),[R,$]=S.useState(""),H=a?.classes?.map(F=>F.className)||[];S.useEffect(()=>{if(u&&a){const F=s(u);w(F),F.length>0?f(F[0].value):f("")}else w([]),f("")},[u,a]),S.useEffect(()=>{u&&p&&L()},[u,p,l,j]),S.useEffect(()=>{Y()},[b,A]);const L=async()=>{if(!u||!p||!e||!t?.schoolCode){I([]);return}try{_(!0),$("");const re=(await bt.get(`/users/role/student?class=${u}&section=${p}`)).data;let W=(re.data||re||[]).filter(fe=>{const Se=fe.role==="student",Ie=fe.academicInfo?.class===u||fe.studentDetails?.class===u||fe.studentDetails?.currentClass===u||fe.class===u,te=fe.academicInfo?.section===p||fe.studentDetails?.section===p||fe.studentDetails?.currentSection===p||fe.section===p;return Se&&Ie&&te}).map(fe=>({_id:fe._id,userId:fe.userId,name:fe.name?.displayName||`${fe.name?.firstName||""} ${fe.name?.lastName||""}`.trim()||"Unknown",class:u,section:p,morningStatus:null,afternoonStatus:null}));if(l)try{const fe=await Yf({class:u,section:p,date:l,session:j});if(fe.success&&fe.data&&fe.data.length>0){const Se=fe.data.find(Ie=>Ie.session===j&&Ie.dateString===l);Se&&Se.students&&(W=W.map(Ie=>{const te=Se.students.find(se=>se.studentId===Ie.userId);return te?{...Ie,[j==="morning"?"morningStatus":"afternoonStatus"]:te.status}:Ie}))}}catch(fe){console.warn("Could not load existing attendance:",fe)}I(W),W.length===0&&$(`No students found for Class ${u} Section ${p}`)}catch(F){$("Failed to fetch students"),console.error("Error:",F)}finally{_(!1)}},Y=()=>{if(!A){P(b);return}const F=b.filter(re=>re.name.toLowerCase().includes(A.toLowerCase())||re.userId.toLowerCase().includes(A.toLowerCase()));P(F)},X=F=>{m(F.target.value),f(""),I([])},me=F=>{f(F.target.value)},K=F=>F==="LKG"||F==="UKG"?F:`Class ${F}`,oe=F=>j==="morning"?F.morningStatus:F.afternoonStatus,B=(()=>{const F=j==="morning"?"morningStatus":"afternoonStatus",re=T.filter(W=>W[F]==="present").length,U=T.filter(W=>W[F]==="absent").length,ae=T.filter(W=>W[F]===null).length;return{present:re,absent:U,unmarked:ae,total:T.length}})();return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"View Attendance Records"})}),R&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:R}),r.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",value:l,onChange:F=>d(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),r.jsxs("select",{value:u,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:n||!o(),children:[r.jsx("option",{value:"",children:n?"Loading...":"Select Class"}),H.map(F=>r.jsx("option",{value:F,children:K(F)},F))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),r.jsxs("select",{value:p,onChange:me,disabled:!u||x.length===0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[r.jsx("option",{value:"",children:u?"Select Section":"Select Class First"}),x.map(F=>r.jsxs("option",{value:F.value,children:["Section ",F.section]},F.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session"}),r.jsxs("div",{className:"flex rounded-lg border border-gray-300",children:[r.jsxs("button",{type:"button",onClick:()=>v("morning"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-l-lg flex items-center justify-center ${j==="morning"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(af,{className:"h-4 w-4 mr-1"}),"Morning"]}),r.jsxs("button",{type:"button",onClick:()=>v("afternoon"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-r-lg flex items-center justify-center ${j==="afternoon"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(ef,{className:"h-4 w-4 mr-1"}),"Afternoon"]})]})]})]})}),u&&p&&r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"relative max-w-md",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or user ID...",value:A,onChange:F=>k(F.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u&&p&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Present"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:B.present})]}),r.jsx(Hn,{className:"h-8 w-8 text-green-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Absent"}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:B.absent})]}),r.jsx(yi,{className:"h-8 w-8 text-red-600"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Not Marked"}),r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:B.unmarked})]}),r.jsx(ls,{className:"h-8 w-8 text-gray-600"})]})})]}),u&&p&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[j.charAt(0).toUpperCase()+j.slice(1)," Attendance - ",K(u)," Section ",p]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",B.total," students"]})]}),E?r.jsx("div",{className:"text-center py-4",children:"Loading students..."}):T.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500",children:b.length===0?"No students found in this class and section":"No students match your search criteria"}):r.jsx("div",{className:"space-y-3",children:T.map(F=>{const re=oe(F);return r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(ta,{className:"h-5 w-5 text-blue-600"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:F.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["User ID: ",F.userId]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[F.class," - Section ",F.section]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[re==="present"&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-green-100 text-green-800 border border-green-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(Hn,{className:"h-4 w-4"}),r.jsx("span",{children:"Present"})]}),re==="absent"&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-red-100 text-red-800 border border-red-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(yi,{className:"h-4 w-4"}),r.jsx("span",{children:"Absent"})]}),re===null&&r.jsxs("span",{className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-600 border border-gray-200 text-sm font-medium flex items-center space-x-1",children:[r.jsx(ls,{className:"h-4 w-4"}),r.jsx("span",{children:"Not Marked"})]})]})]},F._id)})})]})}),!u||!p?r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ta,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Get Started"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[r.jsx("li",{children:"Select a date to view attendance"}),r.jsx("li",{children:"Choose a class from the dropdown"}),r.jsx("li",{children:"Select a section to view students"}),r.jsx("li",{children:"Choose morning or afternoon session"}),r.jsx("li",{children:"View the attendance records for that day"})]})})]})]})}):null]})},kJ=({onNavigate:e})=>{const[t,a]=S.useState("mark");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg",children:r.jsx(la,{className:"h-6 w-6 text-blue-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Management"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex space-x-8 px-6",children:[r.jsxs("button",{onClick:()=>a("mark"),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${t==="mark"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(as,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Mark Attendance"})]}),r.jsxs("button",{onClick:()=>a("view"),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${t==="view"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(oa,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"View Attendance"})]})]})}),r.jsx("div",{className:"p-6",children:t==="mark"?r.jsx(dO,{}):r.jsx(uO,{})})]})]})},mO=()=>{const{user:e}=dr(),{classesData:t,getSectionsByClass:a}=gn(),[n,s]=S.useState([]),[o,l]=S.useState([]),[d,u]=S.useState(!1),[m,p]=S.useState(""),[f,x]=S.useState(""),[w,j]=S.useState(""),[v,b]=S.useState(""),[I,T]=S.useState([]),[P,A]=S.useState([]),[k,E]=S.useState(null),[_,R]=S.useState(!1),$=t?.classes?.map(B=>B.className)||[];S.useEffect(()=>{H()},[]),S.useEffect(()=>{Y()},[n,m,f,w,v]),S.useEffect(()=>{if(f&&t){const B=a(f);T(B)}else T([]),j("")},[f,t]),S.useEffect(()=>{f&&w?L():(A([]),b(""))},[f,w]);const H=async()=>{try{u(!0),console.log(" Fetching assignments...");let B,F=[];try{if(console.log(" Teacher fetching all assignments for local filtering"),B=await iO(),console.log(" Raw API response:",B),console.log(" API response structure:",{hasData:!!B.data,hasAssignments:!!B.assignments,isArray:Array.isArray(B),keys:Object.keys(B||{}),dataLength:Array.isArray(B.data)?B.data.length:"not array",assignmentsLength:Array.isArray(B.assignments)?B.assignments.length:"not array"}),B.data&&Array.isArray(B.data))F=B.data,console.log(" Using data.data:",F.length);else if(B.assignments&&Array.isArray(B.assignments))F=B.assignments,console.log(" Using data.assignments:",F.length);else if(Array.isArray(B))F=B,console.log(" Using direct array:",F.length);else if(B&&typeof B=="object"){const U=Object.keys(B).filter(ae=>Array.isArray(B[ae]));U.length>0&&(F=B[U[0]],console.log(` Using ${U[0]}:`,F.length))}console.log(" Extracted assignments array:",F)}catch(U){console.error(" Error with regular endpoint:",U);const ae=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";console.log(" Trying direct endpoint with schoolCode:",ae),B=(await bt.get(`/direct-test/assignments?schoolCode=${ae}`)).data,console.log(" Direct endpoint response:",B),B.data&&Array.isArray(B.data)?F=B.data:B.assignments&&Array.isArray(B.assignments)?F=B.assignments:Array.isArray(B)&&(F=B)}console.log(` Total assignments before filtering: ${F.length}`),console.log(" Raw assignments data:",F);const re=F.filter(U=>!U||typeof U!="object"?(console.log(" Invalid assignment (not an object):",U),!1):U._id||U.id?U._placeholder===!0?(console.log(" Skipping placeholder assignment:",U._id),!1):!U.title&&!U.subject&&!U.class?(console.log(" Skipping assignment with missing essential fields:",U._id),!1):(console.log(" Valid assignment found:",{_id:U._id,title:U.title,subject:U.subject,class:U.class,section:U.section,dueDate:U.dueDate,isPlaceholder:U._placeholder,allFields:Object.keys(U)}),!0):(console.log(" Invalid assignment (missing ID):",U),!1));console.log(` Loaded ${re.length} valid assignments out of ${F.length} total`),console.log(" Valid assignments:",re),F.length>0&&re.length===0&&console.log(" INFO: All assignments are placeholders - no real assignments found"),s(re)}catch(B){console.error(" Error fetching assignments:",B),console.error("Error details:",B.message,B.response),s([])}finally{u(!1)}},L=async()=>{try{const ae=((await bt.get("/class-subjects/classes")).data?.data?.classes?.find(W=>W.className===f&&W.section===w)?.subjects||[]).filter(W=>W.isActive!==!1).map(W=>W.name).filter(Boolean);A(ae)}catch(B){console.error("Error fetching subjects:",B),A([])}},Y=()=>{let B=n.filter(F=>{if(!F||typeof F!="object")return!1;const re=(F?.title||"").toString().trim(),U=(F?.subject||"").toString().trim(),ae=(F?.class||"").toString().trim(),W=(F?.section||"").toString().trim();return(!m||m.trim()===""||re.toLowerCase().includes(m.toLowerCase())||U.toLowerCase().includes(m.toLowerCase()))&&(!f||f===""||ae===f||ae===""&&(!f||f===""))&&(!w||w===""||W===w||W===""&&(!w||w===""))&&(!v||v===""||U===v||U===""&&(!v||v===""))});console.log(" FILTERING DEBUG:",{totalAssignments:n.length,filteredCount:B.length,filters:{searchTerm:m,selectedClass:f,selectedSection:w,selectedSubject:v},sampleAssignment:n[0]?{title:n[0].title,class:n[0].class,section:n[0].section,subject:n[0].subject,_placeholder:n[0]._placeholder}:null}),l(B)},X=B=>{E(B),R(!0)},me=async B=>{if(k)try{const F=new FormData;F.append("title",B.title),F.append("subject",B.subject),F.append("class",B.class),F.append("section",B.section),F.append("startDate",B.startDate),F.append("dueDate",B.dueDate),F.append("instructions",B.description);const re=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";re&&F.append("schoolCode",re),await lO(k._id,F),alert("Assignment updated successfully"),R(!1),E(null),H()}catch(F){console.error("Error updating assignment:",F),alert(F.response?.data?.message||"Failed to update assignment")}},K=async B=>{if(window.confirm("Are you sure you want to delete this assignment?"))try{await cO(B),alert("Assignment deleted successfully"),H()}catch(F){console.error("Error deleting assignment:",F),alert("Failed to delete assignment")}},oe=B=>B?new Date(B).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",G=B=>{if(!B)return{text:"No due date",color:"text-gray-700",bgColor:"bg-gray-100",priority:"low"};const F=new Date(B),re=new Date;if(isNaN(F.getTime()))return{text:"Invalid date",color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"};re.setHours(0,0,0,0),F.setHours(23,59,59,999);const U=F.getTime()-re.getTime(),ae=Math.ceil(U/(1e3*60*60*24));if(ae<0){const W=Math.abs(ae);return{text:`${W} day${W>1?"s":""} overdue`,color:"text-red-700",bgColor:"bg-red-100",priority:"urgent"}}return ae===0?{text:"Due Today",color:"text-orange-700",bgColor:"bg-orange-100",priority:"high"}:ae===1?{text:"Due Tomorrow",color:"text-yellow-700",bgColor:"bg-yellow-100",priority:"medium"}:ae<=3?{text:`${ae} days left`,color:"text-amber-700",bgColor:"bg-amber-50",priority:"medium"}:ae<=7?{text:`${ae} days left`,color:"text-blue-700",bgColor:"bg-blue-50",priority:"normal"}:{text:`${ae} days left`,color:"text-green-700",bgColor:"bg-green-50",priority:"low"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search assignments...",value:m,onChange:B=>p(B.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),r.jsxs("select",{value:f,onChange:B=>{x(B.target.value),j(""),b("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"",children:"All Classes"}),$.map(B=>r.jsxs("option",{value:B,children:["Class ",B]},B))]}),r.jsxs("select",{value:w,onChange:B=>{j(B.target.value),b("")},disabled:!f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 text-sm",children:[r.jsx("option",{value:"",children:"All Sections"}),I.map(B=>r.jsxs("option",{value:B.value,children:["Section ",B.section]},B.value))]}),r.jsxs("select",{value:v,onChange:B=>b(B.target.value),disabled:!w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 text-sm",children:[r.jsx("option",{value:"",children:"All Subjects"}),P.map(B=>r.jsx("option",{value:B,children:B},B))]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Assignments"}),r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 text-xs sm:text-sm text-gray-600",children:[r.jsxs("span",{children:["Total: ",r.jsx("span",{className:"font-semibold text-gray-900",children:n.length})]}),(m||f||w||v)&&r.jsxs("span",{children:["Filtered: ",r.jsx("span",{className:"font-semibold text-blue-600",children:o.length})]})]})]})}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Class"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Section"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Subject"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 sm:px-6 py-6 sm:py-8 text-center text-xs sm:text-sm text-gray-500",children:"Loading assignments..."})}):o.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 sm:px-6 py-6 sm:py-8 text-center text-xs sm:text-sm text-gray-500",children:n.length===0?"No assignments created yet. Create your first assignment to get started!":"No assignments match your current filters. Try adjusting your search criteria."})}):o.map(B=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:B.title||B.subject||"Untitled Assignment"}),r.jsxs("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:[B.class&&`Class ${B.class}`,B.section&&`  Section ${B.section}`,B.subject&&`  ${B.subject}`]})]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:r.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:B.class||"N/A"})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap hidden md:table-cell",children:r.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:B.section||"N/A"})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:r.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:B.subject||"N/A"})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-900",children:[r.jsx(la,{className:"h-3 sm:h-4 w-3 sm:w-4 mr-1 text-gray-400"}),r.jsx("span",{className:"truncate",children:oe(B.dueDate)})]}),B.dueDate&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${G(B.dueDate).bgColor} ${G(B.dueDate).color}`,children:G(B.dueDate).text})]})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx("button",{onClick:()=>X(B),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit",children:r.jsx(zs,{className:"h-3 sm:h-4 w-3 sm:w-4"})}),r.jsx("button",{onClick:()=>K(B._id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete",children:r.jsx(pn,{className:"h-3 sm:h-4 w-3 sm:w-4"})})]})})]},B._id))})]})]}),_&&k&&r.jsx(IJ,{assignment:k,onClose:()=>{R(!1),E(null)},onUpdate:me})]})},IJ=({assignment:e,onClose:t,onUpdate:a})=>{const{user:n}=dr(),{classesData:s,getSectionsByClass:o}=gn(),[l,d]=S.useState({title:e.title||"",description:e.instructions||e.description||"",subject:e.subject||"",class:e.class||"",section:e.section||"",startDate:e.startDate?e.startDate.split("T")[0]:"",dueDate:e.dueDate?e.dueDate.split("T")[0]:""}),[u,m]=S.useState([]),[p,f]=S.useState([]),[x,w]=S.useState(!1),[j,v]=S.useState(!1),b=s?.classes?.map(T=>T.className)||[];S.useEffect(()=>{if(l.class&&s){const T=o(l.class);m(T)}else m([])},[l.class,s,o]),S.useEffect(()=>{(async()=>{if(!l.class||!l.section){f([]);return}w(!0);try{const _=((await bt.get("/class-subjects/classes")).data?.data?.classes?.find(R=>R.className===l.class&&R.section===l.section)?.subjects||[]).filter(R=>R.isActive!==!1).map(R=>R.name).filter(Boolean);f(_)}catch(P){console.error("Error fetching subjects:",P),f([])}finally{w(!1)}})()},[l.class,l.section,n?.schoolCode]);const I=async()=>{if(!l.title||!l.description||!l.class||!l.section||!l.subject||!l.startDate||!l.dueDate){alert("Please fill in all required fields");return}if(new Date(l.dueDate)<=new Date(l.startDate)){alert("Due date must be after start date");return}v(!0);try{await a(l)}finally{v(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Assignment"}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Title *"}),r.jsx("input",{type:"text",value:l.title,onChange:T=>d({...l,title:T.target.value}),placeholder:"Enter assignment title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),r.jsxs("select",{value:l.class,onChange:T=>d({...l,class:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Class"}),b.map(T=>r.jsxs("option",{value:T,children:["Class ",T]},T))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section *"}),r.jsxs("select",{value:l.section,onChange:T=>d({...l,section:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",disabled:!l.class,children:[r.jsx("option",{value:"",children:"Select Section"}),u.map(T=>r.jsxs("option",{value:T.value,children:["Section ",T.section]},T.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),r.jsxs("select",{value:l.subject,onChange:T=>d({...l,subject:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",disabled:!l.section||x,children:[r.jsx("option",{value:"",children:l.class?l.section?x?"Loading subjects...":"Select Subject":"Select Section First":"Select Class First"}),p.map(T=>r.jsx("option",{value:T,children:T},T))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",value:l.startDate,onChange:T=>d({...l,startDate:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),r.jsx("input",{type:"date",value:l.dueDate,onChange:T=>d({...l,dueDate:T.target.value}),min:l.startDate||new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Instructions *"}),r.jsx("textarea",{value:l.description,onChange:T=>d({...l,description:T.target.value}),rows:6,placeholder:"Write detailed instructions for the assignment...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:I,disabled:j,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[r.jsx(is,{className:"h-4 w-4 mr-2"}),j?"Updating...":"Update Assignment"]})]})]})]})})},hO=()=>{const{user:e,token:t}=dr(),{classesData:a,loading:n,getSectionsByClass:s}=gn(),[o,l]=S.useState(!0),[d,u]=S.useState([]),[m,p]=S.useState([]),[f,x]=S.useState(!1),[w,j]=S.useState(!1),[v,b]=S.useState({title:"",description:"",subject:"",class:"",section:"",startDate:"",dueDate:"",attachments:[]}),I=a?.classes?.map(k=>k.className)||[];S.useEffect(()=>{if(v.class&&a){const k=s(v.class);u(k)}else u([]),b(k=>({...k,section:"",subject:""})),p([])},[v.class,a,s]),S.useEffect(()=>{(async()=>{if(!v.class||!v.section){p([]);return}x(!0);try{const E=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!E)return;try{const L=((await bt.get("/class-subjects/classes")).data?.data?.classes?.find(Y=>Y.className===v.class&&Y.section===v.section)?.subjects||[]).filter(Y=>Y.isActive!==!1).map(Y=>Y.name).filter(Boolean);p(L);return}catch{}try{const $=((await bt.get(`/direct-test/class-subjects/${v.class}?schoolCode=${E}`)).data?.data?.subjects||[]).map(H=>H.name).filter(Boolean);p($);return}catch{}p([])}catch(E){console.error("Error fetching subjects:",E),p([])}finally{x(!1)}})()},[v.class,v.section,t,e?.schoolCode]);const T=async()=>{if(!v.title||!v.description||!v.class||!v.section||!v.subject||!v.startDate||!v.dueDate){alert("Please fill in all required fields");return}if(new Date(v.dueDate)<=new Date(v.startDate)){alert("Due date must be after start date");return}j(!0);try{const k=new FormData;k.append("title",v.title),k.append("subject",v.subject),k.append("class",v.class),k.append("section",v.section),k.append("startDate",v.startDate),k.append("dueDate",v.dueDate),k.append("instructions",v.description);const E=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";E&&(k.append("schoolCode",E),console.log(" Added schoolCode to request:",E)),console.log(" Creating assignment:",{title:v.title,subject:v.subject,class:v.class,section:v.section,startDate:v.startDate,dueDate:v.dueDate});const _=await oO(k);console.log(" Assignment created successfully:",_),alert(`Assignment created successfully for ${v.class}  Section ${v.section}`),b({title:"",description:"",subject:"",class:"",section:"",startDate:"",dueDate:"",attachments:[]})}catch(k){console.error(" Error creating assignment:",k),alert(k.response?.data?.message||k.message||"Failed to create assignment")}finally{j(!1)}},P=k=>{if(k){const E=Array.from(k).map(_=>_.name);b(_=>({..._,attachments:[..._.attachments,...E]}))}},A=k=>{b(E=>({...E,attachments:E.attachments.filter((_,R)=>R!==k)}))};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Add Assignments"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage assignments for your students"})]})}),o&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:[r.jsx("div",{className:"mb-4 sm:mb-6",children:r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Create New Assignment"})}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Title *"}),r.jsx("input",{type:"text",value:v.title,onChange:k=>b({...v,title:k.target.value}),placeholder:"Enter assignment title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),r.jsxs("select",{value:v.class,onChange:k=>b({...v,class:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:n,children:[r.jsx("option",{value:"",children:n?"Loading...":"Select Class"}),I.map(k=>r.jsxs("option",{value:k,children:["Class ",k]},k))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section *"}),r.jsxs("select",{value:v.section,onChange:k=>b({...v,section:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",disabled:!v.class||d.length===0,children:[r.jsx("option",{value:"",children:v.class?"Select Section":"Select Class First"}),d.map(k=>r.jsxs("option",{value:k.value,children:["Section ",k.section]},k.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),r.jsxs("select",{value:v.subject,onChange:k=>b({...v,subject:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",disabled:!v.section||f,children:[r.jsx("option",{value:"",children:v.class?v.section?f?"Loading subjects...":m.length===0?"No subjects found":"Select Subject":"Select Section First":"Select Class First"}),m.map(k=>r.jsx("option",{value:k,children:k},k))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",value:v.startDate,onChange:k=>b({...v,startDate:k.target.value}),placeholder:"dd-mm-yyyy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),r.jsx("input",{type:"date",value:v.dueDate,onChange:k=>b({...v,dueDate:k.target.value}),placeholder:"dd-mm-yyyy",min:v.startDate||new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Assignment Instructions *"}),r.jsx("textarea",{value:v.description,onChange:k=>b({...v,description:k.target.value}),rows:6,placeholder:"Write detailed instructions for the assignment...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Attachments (Optional)"}),r.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:r.jsx("input",{type:"file",multiple:!0,onChange:k=>P(k.target.files),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200"})}),v.attachments.length>0&&r.jsx("div",{className:"mt-4 space-y-2",children:v.attachments.map((k,E)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(fa,{className:"h-4 w-4 text-gray-400 mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]}),r.jsx("button",{onClick:()=>A(E),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:r.jsx(Ar,{className:"h-4 w-4"})})]},E))})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>{b({title:"",description:"",subject:"",class:"",section:"",startDate:"",dueDate:"",attachments:[]})},className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:T,disabled:w,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[r.jsx(is,{className:"h-4 w-4 mr-2"}),w?"Creating...":"Create Assignment"]})]})]})]})]})},AJ=({onNavigate:e})=>{const[t,a]=S.useState("view");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-lg",children:r.jsx(ss,{className:"h-6 w-6 text-purple-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assignments Management"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex space-x-8 px-6",children:[r.jsxs("button",{onClick:()=>a("view"),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${t==="view"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(oa,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"View Assignments"})]}),r.jsxs("button",{onClick:()=>a("add"),className:`flex items-center space-x-2 py-4 border-b-2 transition-colors ${t==="add"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(q6,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Add Assignment"})]})]})}),r.jsx("div",{className:"p-6",children:t==="view"?r.jsx(mO,{}):r.jsx(hO,{})})]})]})},PJ=()=>{const{user:e,token:t}=dr(),{classesData:a,getSectionsByClass:n}=gn(),[s,o]=S.useState(""),[l,d]=S.useState(""),[u,m]=S.useState(""),[p,f]=S.useState(""),[x,w]=S.useState([]),[j,v]=S.useState([]),[b,I]=S.useState([]),[T,P]=S.useState([]),[A,k]=S.useState(!1),[E,_]=S.useState(!1),[R,$]=S.useState(!1),[H,L]=S.useState(null),[Y,X]=S.useState(null),[me,K]=S.useState(null),[oe,G]=S.useState(!1),B=a?.classes?.map(te=>te.className)||[];S.useEffect(()=>{if(s&&a){const te=n(s);w(te)}else w([]),d(""),m(""),v([]),f(""),I([])},[s,a,n]);const F=S.useCallback(async te=>{if(!te){I([]);return}$(!0);try{if(a&&a.testsByClass){let se=a.testsByClass[te]||[];se.length===0&&a.tests&&(se=a.tests.filter(de=>String(de.className)===String(te)));const Q=se.filter(de=>typeof de?.maxMarks=="number"&&de.maxMarks>0);if(Q.length>0){const de=Q.map(ce=>ce.testName||ce.displayName||ce.name||ce.testType).filter(Boolean),we=[...new Set(de)];I(we),$(!1);return}}I([])}catch(se){console.error("Error fetching test types:",se),xe.error("Failed to load test types"),I([])}finally{$(!1)}},[a]);S.useEffect(()=>{s?F(s):I([])},[s,F]),S.useEffect(()=>{(async()=>{if(!s||!l){v([]),m("");return}_(!0);try{const se=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!se){xe.error("School code not available");return}try{const Ve=((await bt.get("/class-subjects/classes")).data?.data?.classes?.find(Be=>Be.className===s&&Be.section===l)?.subjects||[]).filter(Be=>Be.isActive!==!1).map(Be=>Be.name).filter(Boolean);v(Ve),m("");return}catch{}try{const we=((await bt.get(`/direct-test/class-subjects/${s}?schoolCode=${se}`)).data?.data?.subjects||[]).map(ce=>ce.name).filter(Boolean);v(we),m("");return}catch{}v([]),m(""),xe.error("No subjects found for selected class and section")}catch(se){console.error("Error fetching subjects:",se),xe.error("Failed to load subjects"),v([]),m("")}finally{_(!1)}})()},[s,l,t,e?.schoolCode]);const re=(te,se)=>{if(te==null||!se||se===0)return"N/A";const Q=te/se*100;return Q>=91?"A1":Q>=81?"A2":Q>=71?"B1":Q>=61?"B2":Q>=51?"C1":Q>=41?"C2":Q>=33?"D":Q>=21?"E1":"E2"},U=te=>["A1","A2"].includes(te)?"bg-green-100 text-green-800":["B1","B2"].includes(te)?"bg-blue-100 text-blue-800":["C1","C2"].includes(te)?"bg-yellow-100 text-yellow-800":te==="D"?"bg-orange-100 text-orange-800":["E1","E2"].includes(te)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600",ae=te=>{if(oe){xe.error("Results are frozen and cannot be edited");return}L(te._id||te.id),X(te.obtainedMarks)},W=()=>{L(null),X(null)},fe=async te=>{if(Y==null){xe.error("Please enter valid marks");return}const se=te.totalMarks||te.maxMarks;if(Y>se){xe.error(`Marks cannot exceed ${se}`);return}if(Y<0){xe.error("Marks cannot be negative");return}const Q=te._id||te.id;K(Q);try{const de=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";await $s.updateResult(Q,{schoolCode:de,class:te.className||s,section:te.section||l,subject:te.subject||u,testType:te.testType||p,maxMarks:te.maxMarks||se,obtainedMarks:Y,totalMarks:se,studentId:te.studentId,studentName:te.studentName,userId:te.userId});const we=re(Y,se);P(ce=>ce.map(Ve=>(Ve._id||Ve.id)===Q?{...Ve,obtainedMarks:Y,grade:we}:Ve)),L(null),X(null),xe.success("Result updated successfully!")}catch(de){console.error("Error updating result:",de),xe.error(de.response?.data?.message||"Failed to update result")}finally{K(null)}},Se={totalStudents:T.length,averageMarks:T.length>0?Math.round(T.reduce((te,se)=>te+(se.obtainedMarks||0),0)/T.length):0,averagePercentage:T.length>0?Math.round(T.reduce((te,se)=>{const Q=se.totalMarks?se.obtainedMarks/se.totalMarks*100:0;return te+Q},0)/T.length):0,highestScore:T.length>0?Math.max(...T.map(te=>te.obtainedMarks||0)):0,lowestScore:T.length>0?Math.min(...T.map(te=>te.obtainedMarks||0)):0},Ie=async()=>{if(T.length===0){xe.error("No results to export");return}try{const se=[["Student ID","Student Name","Subject","Test Type","Obtained Marks","Total Marks","Percentage","Grade","Date"].join(","),...T.map(ce=>[ce.userId||"",ce.studentName||ce.name||"",ce.subject||u||"",ce.testType||p||"",ce.obtainedMarks||0,ce.totalMarks||ce.maxMarks||0,ce.totalMarks?Math.round(ce.obtainedMarks/ce.totalMarks*100):0,re(ce.obtainedMarks,ce.totalMarks||ce.maxMarks),ce.createdAt?new Date(ce.createdAt).toLocaleDateString():""].join(","))].join(`
`),Q=new Blob([se],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a"),we=URL.createObjectURL(Q);de.setAttribute("href",we),de.setAttribute("download",`results_${s}_${l}_${u}_${p}_${new Date().toISOString().split("T")[0]}.csv`),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de),xe.success("Results exported successfully!")}catch(te){console.error("Error exporting results:",te),xe.error("Failed to export results")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"View Results"}),r.jsx("p",{className:"text-gray-600",children:"Student performance reports for your subjects"})]}),r.jsxs("button",{onClick:Ie,disabled:T.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors mt-4 sm:mt-0 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[r.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Export Results"]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Class"}),r.jsxs("select",{value:s,onChange:te=>{o(te.target.value),d(""),m(""),f("")},className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Class"}),B.map(te=>r.jsxs("option",{value:te,children:["Class ",te]},te))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Section"}),r.jsxs("select",{value:l,onChange:te=>{d(te.target.value),m(""),f("")},disabled:!s,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Section"}),s&&x.map(te=>r.jsx("option",{value:te.value,children:te.label},te.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subject"}),r.jsxs("select",{value:u,onChange:te=>{m(te.target.value),f("")},disabled:!l,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Subject"}),l&&j.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Exam Type"}),r.jsxs("select",{value:p,onChange:te=>f(te.target.value),disabled:!u,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select Exam Type"}),u&&b.map(te=>r.jsx("option",{value:te,children:te},te))]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{className:"w-full px-4 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!s||!l||!u||!p||A,onClick:async()=>{k(!0);try{const te=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"";if(!te){xe.error("School code not available"),k(!1);return}const Q=(await bt.get(`/results/teacher/view?schoolCode=${te}&class=${s}&section=${l}&subject=${u}&testType=${p}`)).data;if(Q.success){const de=Q.data.results||[];P(de);const ce=de[0]?.frozen||!1;G(ce),ce?xe.error(` Results are FROZEN and cannot be edited. Loaded ${de.length} result(s).`,{duration:5e3}):xe.success(`Found ${de.length} results`)}else xe.error(Q.message||"Failed to fetch results"),P([]),G(!1)}catch(te){console.error("Error fetching results:",te),xe.error("Failed to fetch results"),P([])}finally{k(!1)}},children:A?"Searching...":"Search"})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),r.jsx(Rl,{className:"h-5 w-5 text-blue-500"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.totalStudents})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Class Average"}),r.jsx(Wb,{className:"h-5 w-5 text-green-500"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Se.averagePercentage,"%"]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Highest Score"}),r.jsx(G6,{className:"h-5 w-5 text-yellow-500"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Se.highestScore,"/100"]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Lowest Score"}),r.jsx(Q6,{className:"h-5 w-5 text-red-500"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Se.lowestScore,"/100"]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Pass Rate"}),r.jsx(Rl,{className:"h-5 w-5 text-purple-500"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[T.length>0?Math.round(T.filter(te=>(te.percentage||0)>=40).length/T.length*100):0,"%"]})]})]}),T.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:["Existing Results for ",s,"-",l,u&&` - ${u}`,p&&` (${p})`]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Found ",T.length," results."]})]})})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obtained Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map((te,se)=>{const Q=re(te.obtainedMarks,te.totalMarks||te.maxMarks);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te.userId||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:te.studentName||te.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-xs font-medium",children:te.subject||u||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:r.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-md text-xs font-medium",children:te.testType||p})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:te.obtainedMarks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te.totalMarks||te.maxMarks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${U(Q)}`,children:Q})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te.createdAt?new Date(te.createdAt).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:H===(te._id||te.id)?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"number",value:Y||"",onChange:de=>X(Number(de.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:te.totalMarks||te.maxMarks,disabled:me===(te._id||te.id)}),r.jsx("button",{onClick:()=>fe(te),disabled:me===(te._id||te.id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-md transition-colors disabled:opacity-50",title:"Save",children:me===(te._id||te.id)?r.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-600 border-t-transparent rounded-full"}):r.jsx(cs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:W,disabled:me===(te._id||te.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50",title:"Cancel",children:r.jsx(Ar,{className:"h-4 w-4"})})]}):r.jsx("button",{onClick:()=>ae(te),disabled:oe||te.frozen,className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:bg-transparent",title:oe||te.frozen?"Results are frozen":"Edit marks",children:oe||te.frozen?r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):r.jsx(zs,{className:"h-4 w-4"})})})]},te.id||se)})})]})})]}),T.length===0&&s&&l&&u&&p&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx(Rl,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-lg font-medium",children:"No results available"}),r.jsx("p",{className:"text-sm mt-2",children:"No results found for the selected filters"})]})})]})},EJ=()=>{const{token:e,user:t}=dr(),[a,n]=S.useState([]),[s,o]=S.useState(!0);S.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const u=localStorage.getItem("erp.schoolCode")||t?.schoolCode||"",p=(await bt.get("/messages/teacher/messages")).data;if(p.success){const f=p.data?.messages||p.messages||[];n(f),console.log(" Fetched messages:",f),f.length===0&&console.log(" No messages found for teacher")}else xe.error(p.message||"Failed to fetch messages")}catch(u){console.error("Error fetching messages:",u),xe.error(u.message||"Failed to load messages")}finally{o(!1)}},d=u=>{const m=new Date(u),f=Math.floor((new Date().getTime()-m.getTime())/(1e3*60*60));return f<1?"Just now":f<24?`${f}h ago`:f<48?"Yesterday":m.toLocaleDateString()};return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Messages"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"View your messages"})]})}),r.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:r.jsx("div",{children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Recent Messages"})}),s?r.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[r.jsx("div",{className:"animate-spin h-8 w-8 sm:h-12 sm:w-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Loading messages..."})]}):a.length>0?r.jsx("div",{className:"p-3 sm:p-6 space-y-3 sm:space-y-4",children:a.map(u=>r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-3 sm:p-5 border border-blue-100 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-3 sm:mb-4 gap-2 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1 break-words",children:u.title}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 text-xs sm:text-sm",children:[r.jsxs("span",{className:"inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 w-fit",children:["Class ",u.class,"-",u.section]}),r.jsx("span",{className:"text-gray-500 hidden sm:inline",children:""}),r.jsx("span",{className:"text-gray-600 font-medium break-words",children:u.subject})]})]}),r.jsxs("div",{className:"flex flex-row sm:flex-col items-start sm:items-end gap-2 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center text-xs text-gray-500 bg-white px-2 py-1 rounded-md shadow-sm",children:[r.jsx(ls,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 mr-1"}),r.jsx("span",{className:"whitespace-nowrap",children:d(u.timestamp)})]}),r.jsx("span",{className:"text-xs text-gray-400 sm:mt-1 whitespace-nowrap",children:new Date(u.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),r.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 shadow-sm border border-gray-100",children:r.jsx("p",{className:"text-gray-700 text-xs sm:text-sm leading-relaxed whitespace-pre-wrap break-words",children:u.content||u.message})}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-3 pt-3 border-t border-blue-100 gap-2 sm:gap-0",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1.5"}),"From Admin"]})}),r.jsx("span",{className:"text-xs text-gray-500 italic",children:u.messageAge})]})]},u.id))}):r.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[r.jsx(K6,{className:"h-8 w-8 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Messages will appear here when available"})]})]})})})]})},TJ=()=>{const{user:e,token:t}=dr(),[a,n]=S.useState(!1),[s,o]=S.useState({teacherName:"",teacherId:"",subjectLine:"",startDate:"",endDate:"",description:""});S.useEffect(()=>{if(e){const u=e.userId||e.id||"";console.log(" Updating form with user data:",{name:e.name,userId:e.userId,id:e.id,finalTeacherId:u}),o(m=>({...m,teacherName:e.name||"",teacherId:u}))}},[e]);const l=u=>{const{name:m,value:p}=u.target;o(f=>({...f,[m]:p}))},d=async u=>{if(u.preventDefault(),!s.subjectLine||!s.startDate||!s.endDate||!s.description){xe.error("Please fill in all required fields");return}if(new Date(s.endDate)<new Date(s.startDate)){xe.error("End date must be after or equal to start date");return}n(!0);try{const m=localStorage.getItem("erp.schoolCode")||e?.schoolCode||"",f=(await bt.post("/leave-requests/teacher/create",{...s,schoolCode:m})).data;f.success?(xe.success("Leave request submitted successfully!"),o({teacherName:e?.name||"",teacherId:e?.userId||"",subjectLine:"",startDate:"",endDate:"",description:""})):xe.error(f.message||"Failed to submit leave request")}catch(m){console.error(" Error submitting leave request:",m),xe.error(m.message||"Failed to submit leave request")}finally{n(!1)}};return r.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Submit Leave Request"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Fill in the details below to request leave"})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher Name *"}),r.jsx("input",{type:"text",name:"teacherName",value:s.teacherName,readOnly:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher ID *"}),r.jsx("input",{type:"text",name:"teacherId",value:s.teacherId,readOnly:!0,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Line *"}),r.jsx("input",{type:"text",name:"subjectLine",value:s.subjectLine,onChange:l,placeholder:"e.g., Medical Leave, Personal Leave",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Start Date *"}),r.jsx("input",{type:"date",name:"startDate",value:s.startDate,onChange:l,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave End Date *"}),r.jsx("input",{type:"date",name:"endDate",value:s.endDate,onChange:l,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),r.jsx("textarea",{name:"description",value:s.description,onChange:l,rows:4,placeholder:"Provide details about your leave request...",className:"w-full px-3 sm:px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm",required:!0})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{o({teacherName:e?.name||"",teacherId:e?.userId||"",subjectLine:"",startDate:"",endDate:"",description:""})},className:"px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base w-full sm:w-auto",children:"Cancel"}),r.jsx("button",{type:"submit",onClick:d,disabled:a,className:"px-4 sm:px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-sm sm:text-base w-full sm:w-auto",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),r.jsx("span",{children:"Submitting..."})]}):r.jsx("span",{children:"Submit Request"})})]})]})]})})},DJ=()=>{const{token:e}=dr(),[t,a]=S.useState([]),[n,s]=S.useState(!0),[o,l]=S.useState("all");S.useEffect(()=>{d()},[e]);const d=async()=>{s(!0);try{const w=(await bt.get("/leave-requests/teacher/my-requests")).data;w.success?a(w.data.leaveRequests):xe.error("Failed to fetch leave requests")}catch(x){console.error("Error fetching leave requests:",x),xe.error("Failed to fetch leave requests")}finally{s(!1)}},u=x=>{const w="px-3 py-1 rounded-full text-xs font-medium";switch(x){case"approved":return`${w} bg-green-100 text-green-800`;case"rejected":return`${w} bg-red-100 text-red-800`;case"pending":return`${w} bg-yellow-100 text-yellow-800`;default:return`${w} bg-gray-100 text-gray-800`}},m=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=t.filter(x=>o==="all"?!0:x.status===o),f={total:t.length,pending:t.filter(x=>x.status==="pending").length,approved:t.filter(x=>x.status==="approved").length,rejected:t.filter(x=>x.status==="rejected").length};return n?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Requests"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:f.total})]}),r.jsx(la,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-yellow-600",children:f.pending})]}),r.jsx(ls,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Approved"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-600",children:f.approved})]}),r.jsx(Hn,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})]})}),r.jsx("div",{className:"bg-white p-3 sm:p-4 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Rejected"}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-600",children:f.rejected})]}),r.jsx(yi,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-600"})]})})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4",children:r.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:space-x-2 gap-2 sm:gap-0",children:[r.jsx("button",{onClick:()=>l("all"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm ${o==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),r.jsx("button",{onClick:()=>l("pending"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm ${o==="pending"?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending"}),r.jsx("button",{onClick:()=>l("approved"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm ${o==="approved"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Approved"}),r.jsx("button",{onClick:()=>l("rejected"),className:`px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm ${o==="rejected"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Rejected"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:p.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(la,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No leave requests found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reviewed By"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.subjectLine})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm text-gray-600 max-w-xs",children:[x.description,x.adminComments&&r.jsxs("div",{className:"mt-1 text-xs text-gray-500 italic",children:['Admin: "',x.adminComments,'"']})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(x.startDate)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(x.endDate)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.numberOfDays," ",x.numberOfDays===1?"day":"days"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:u(x.status),children:x.status.toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(x.createdAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.reviewedByName?r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"text-gray-900",children:x.reviewedByName}),x.reviewedAt&&r.jsx("div",{className:"text-gray-500 text-xs",children:m(x.reviewedAt)})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},x._id))})]})})})]})},OJ=({onNavigate:e})=>{const[t,a]=S.useState("request");return r.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg",children:r.jsx(fa,{className:"h-4 w-4 sm:h-6 sm:w-6 text-blue-600"})}),r.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Leave Request Management"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 px-4 sm:px-6 overflow-x-auto",children:[r.jsxs("button",{onClick:()=>a("request"),className:`flex items-center justify-center sm:justify-start space-x-2 py-3 sm:py-4 border-b-2 transition-colors w-full sm:w-auto ${t==="request"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(i4,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Leave Request"})]}),r.jsxs("button",{onClick:()=>a("view"),className:`flex items-center justify-center sm:justify-start space-x-2 py-3 sm:py-4 border-b-2 transition-colors w-full sm:w-auto ${t==="view"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(oa,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"font-medium text-sm sm:text-base",children:"View Leaves"})]})]})}),r.jsx("div",{className:"p-4 sm:p-6",children:t==="request"?r.jsx(TJ,{}):r.jsx(DJ,{})})]})]})};function _J(){const[e,t]=S.useState(!1),[a,n]=S.useState("dashboard"),s=()=>{t(!1),n("dashboard")},o=d=>{n(d)},l=()=>{switch(a){case"dashboard":return r.jsx(_P,{onNavigate:o});case"attendance":return r.jsx(kJ,{onNavigate:o});case"mark-attendance":return r.jsx(dO,{});case"view-attendance":return r.jsx(uO,{});case"assignments":return r.jsx(AJ,{onNavigate:o});case"add-assignments":return r.jsx(hO,{});case"view-assignments":return r.jsx(mO,{});case"view-results":return r.jsx(PJ,{});case"messages":return r.jsx(EJ,{});case"leave-request":return r.jsx(_a,{permission:"viewLeaves",permissionName:"Leave Management",children:r.jsx(OJ,{onNavigate:o})});default:return r.jsx(_P,{onNavigate:o})}};return r.jsx(D4,{children:r.jsx(CJ,{currentPage:a,onNavigate:o,onLogout:s,children:l()})})}const MJ=[],RJ={},MP={totalSchools:0,totalUsers:0,lastLogin:""},fO=S.createContext(void 0);function $J({children:e}){console.log("[AppProvider] Rendering AppProvider");const[t,a]=S.useState(MJ),[n,s]=S.useState(RJ),[o,l]=S.useState("dashboard"),[d,u]=S.useState(null),[m,p]=S.useState(MP);S.useEffect(()=>{async function P(){try{console.log("Fetching schools from backend...");const A=await Ha.getAllSchools();console.log("Schools response:",A.data);const k=(A.data||[]).map(_=>{const R="https://erp-backend-1jtx.onrender.com/api".replace("/api",""),$=_.logoUrl?_.logoUrl.startsWith("http")?_.logoUrl:`${R}${_.logoUrl}`:"/default-school-logo.svg",H={admin:{manageUsers:!0,manageSchoolSettings:!0,viewAcademicDetails:!0,viewAttendance:!0,viewAssignments:!0,viewResults:!0,viewLeaves:!0,messageStudentsParents:!0,viewFees:!0,viewReports:!0},teacher:{manageUsers:!1,manageSchoolSettings:"limited",viewAcademicDetails:!0,viewAttendance:!0,viewAssignments:!0,viewResults:"own",viewLeaves:"own",messageStudentsParents:!0,viewFees:!1,viewReports:!1},student:{manageUsers:!1,manageSchoolSettings:!1,viewAcademicDetails:!1,viewAttendance:!1,viewAssignments:!0,viewResults:!0,viewLeaves:!1,messageStudentsParents:!1,viewFees:!1,viewReports:!1},parent:{manageUsers:!1,manageSchoolSettings:!1,viewAcademicDetails:!1,viewAttendance:!1,viewAssignments:!1,viewResults:!1,viewLeaves:!1,messageStudentsParents:!1,viewFees:!1,viewReports:!1}},L=_.accessMatrix||{},Y={admin:{...H.admin,...L.admin},teacher:{...H.teacher,...L.teacher},student:{...H.student,...L.student},parent:{...H.parent,...L.parent}};return{id:_._id||_.id,name:_.name,code:_.code||"",logo:$,area:_.address?.area||_.address?.street||"",district:_.address?.district||_.address?.city||"",pinCode:_.address?.pinCode||_.address?.zipCode||"",mobile:_.mobile||_.contact?.phone||"",principalName:_.principalName||"",principalEmail:_.principalEmail||_.contact?.email||"",bankDetails:_.bankDetails||{},accessMatrix:Y}});console.log("Mapped schools:",k),a(k),console.log("Fetching total users across all schools...");try{const _=await Ha.getAllSchoolsStats();console.log("All schools stats response:",_.data),p(R=>({...R,totalSchools:k.length,totalUsers:_.data?.totalUsers||0}))}catch(_){console.error("Error fetching all schools stats:",_),p(R=>({...R,totalSchools:k.length,totalUsers:0}))}const E=localStorage.getItem("erp.auth")||sessionStorage.getItem("erp.auth");if(E)try{const R=JSON.parse(E).user?.lastLogin;if(console.log("[AppContext] Last login from auth:",R),R){const H=new Date(R).toLocaleString();console.log("[AppContext] Formatted last login:",H),p(L=>({...L,lastLogin:H}))}else console.log("[AppContext] No lastLogin found in auth data")}catch(_){console.error("[AppContext] Error parsing auth data:",_)}else console.log("[AppContext] No auth data found in storage")}catch(A){console.error("Error fetching schools:",A),a([]),p(MP)}}P()},[]);const f=async P=>{const A=new FormData;A.append("name",String(P.name||"")),A.append("code",String(P.code||"")),A.append("mobile",String(P.mobile||"")),A.append("principalName",String(P.principalName||"")),A.append("principalEmail",String(P.principalEmail||"")),A.append("area",String(P.area||"")),A.append("district",String(P.district||"")),A.append("pinCode",String(P.pinCode||"")),A.append("address",JSON.stringify({street:P.address?.street||"",area:P.address?.area||P.area||"",city:P.address?.city||"",district:P.address?.district||P.district||"",taluka:P.address?.taluka||"",state:P.address?.state||"",stateId:P.address?.stateId||null,districtId:P.address?.districtId||null,talukaId:P.address?.talukaId||null,country:P.address?.country||"India",pinCode:P.address?.pinCode||P.pinCode||"",zipCode:P.address?.pinCode||P.pinCode||""})),A.append("contact",JSON.stringify({phone:P.contact?.phone||P.mobile||"",email:P.contact?.email||P.principalEmail||"",website:P.contact?.website||P.website||""})),A.append("bankDetails",JSON.stringify({bankName:P.bankDetails?.bankName||"",accountNumber:P.bankDetails?.accountNumber||"",ifscCode:P.bankDetails?.ifscCode||"",branch:P.bankDetails?.branch||"",accountHolderName:P.bankDetails?.accountHolderName||""})),A.append("accessMatrix",JSON.stringify(P.accessMatrix||{admin:{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,messageStudentsParents:!0},teacher:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!0},student:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!1},parent:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!1}})),A.append("schoolType",String(P.schoolType||"Public")),A.append("establishedYear",String(P.establishedYear||new Date().getFullYear())),A.append("affiliationBoard",String(P.affiliationBoard||"CBSE")),A.append("website",String(P.website||"")),A.append("secondaryContact",String(P.secondaryContact||"")),A.append("settings",JSON.stringify({academicYear:{startDate:new Date().toISOString(),endDate:new Date().toISOString(),currentYear:"2024-25"}})),A.append("features",JSON.stringify({})),P.logoFile&&A.append("logo",P.logoFile);try{let k=localStorage.getItem("token");if(k||(k=localStorage.getItem("authToken")),!k){const R=localStorage.getItem("erp.auth");if(R)try{k=JSON.parse(R).token}catch($){console.error("Error parsing auth data:",$)}}if(console.log("Retrieved token:",k),!k)throw new Error("Authorization token is missing");const E=await Ha.createSchool(A),_=E.data?.school||E.data;if(_){const R="https://erp-backend-1jtx.onrender.com/api".replace("/api",""),$=_.logoUrl?_.logoUrl.startsWith("http")?_.logoUrl:`${R}${_.logoUrl}`:"";a(H=>[...H,{id:_._id||_.id,name:_.name,code:_.code||"",logo:$,area:_.address?.street||"",district:_.address?.city||"",pinCode:_.address?.zipCode||"",mobile:_.contact?.phone||"",principalName:_.principalName||"",principalEmail:_.contact?.email||"",bankDetails:_.bankDetails||{},accessMatrix:_.accessMatrix||{}}]),p(H=>({...H,totalSchools:H.totalSchools+1}));try{const H=await Ha.getAllSchoolsStats();p(L=>({...L,totalUsers:H.data?.totalUsers||0})),console.log("[ADD] Updated total users count after school addition")}catch(H){console.error("[ADD] Error refreshing total users count:",H)}}}catch(k){console.error("Error adding school:",k);let E="Failed to create school";throw k?.response?.data?.message?E=k.response.data.message:k?.message&&(E=k.message),new Error(E)}},x=async P=>{try{console.log(`[DELETE] Starting deletion process for school ID: ${P}`);const A=await Ha.deleteSchool(P);if(console.log("[DELETE] Backend response:",A.data),A.data?.success===!1)throw new Error(A.data?.message||"Backend reported failure");a(k=>{const E=k.find(R=>R.id===P),_=k.filter(R=>R.id!==P);return console.log(`[DELETE] Removed school "${E?.name}" from UI. Remaining schools: ${_.length}`),_}),p(k=>({...k,totalSchools:k.totalSchools-1})),console.log("[DELETE] School successfully deleted from UI state");try{const k=await Ha.getAllSchoolsStats();p(E=>({...E,totalUsers:k.data?.totalUsers||0})),console.log("[DELETE] Updated total users count after school deletion")}catch(k){console.error("[DELETE] Error refreshing total users count:",k)}return A.data}catch(A){throw console.error("[DELETE] Error deleting school:",{error:A,response:A?.response?.data,status:A?.response?.status,message:A?.message}),A?.response?.status===401?new Error("Authentication failed. Please log in again."):A?.response?.status===403?new Error("Permission denied. Only super admin can delete schools."):A?.response?.status===404?new Error("School not found or already deleted."):A?.response?.data?.message?new Error(A.response.data.message):new Error(A?.message||"Failed to delete school. Please try again.")}},w=async P=>{const A=await Ha.updateSchool(P.id,P),k=A.data?.school||A.data;a(E=>E.map(_=>_.id===P.id?{..._,name:k.name??_.name,code:k.code??_.code,logo:k.logoUrl?String(k.logoUrl).startsWith("http")?k.logoUrl:`https://erp-backend-1jtx.onrender.com/api${k.logoUrl}`:_.logo,area:k.address?.street??_.area,district:k.address?.city??_.district,pinCode:k.address?.zipCode??_.pinCode,mobile:k.contact?.phone??_.mobile,principalName:k.principalName??_.principalName,principalEmail:k.principalEmail??_.principalEmail,bankDetails:k.bankDetails??_.bankDetails,accessMatrix:k.accessMatrix??_.accessMatrix}:_))},j=async(P,A)=>{const k=await Ha.updateAccessMatrix(P,A),E=k.data?.school||k.data;a(_=>_.map(R=>R.id===P?{...R,accessMatrix:E.accessMatrix||A}:R))},v=async(P,A)=>{const k=await Ha.updateBankDetails(P,A),E=k.data?.bankDetails||k.data?.school?.bankDetails||A;a(_=>_.map(R=>R.id===P?{...R,bankDetails:E}:R))},b=async(P,A,k)=>{await Ha.updateUserRole(P,A,k)},I=async(P,A)=>{const k=await Ha.updateSchoolSettings(P,A),E=k.data?.school||k.data;a(_=>_.map(R=>R.id===P?{...R,bankDetails:E.bankDetails??R.bankDetails,accessMatrix:E.accessMatrix??R.accessMatrix}:R)),s(_=>({..._,[P]:{..._[P]||{},settings:E.settings||A}}))},T=P=>n[P];return r.jsx(fO.Provider,{value:{schools:t,schoolsData:n,currentView:o,selectedSchoolId:d,stats:m,setCurrentView:l,setSelectedSchoolId:u,addSchool:f,updateSchool:w,deleteSchool:x,updateSchoolAccess:j,updateBankDetails:v,updateUserRole:b,updateSchoolSettings:I,getSchoolData:T},children:e})}function Ai(){const e=S.useContext(fO);if(console.log("[useApp] Context value:",e),e===void 0)throw console.error("[useApp] Context is undefined - this should not happen if AppProvider is properly set up"),new Error("useApp must be used within an AppProvider");return e}function LJ(){const{currentView:e,setCurrentView:t,stats:a}=Ai(),n=[{id:"dashboard",label:"Dashboard",icon:P1},{id:"add-school",label:"Add New School",icon:is}];return r.jsxs("div",{className:"bg-white border-r border-gray-200 w-full lg:w-64 lg:min-h-screen flex flex-col",children:[r.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Fo,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),r.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Super Admin"})]})}),r.jsx("nav",{className:"flex-1 p-3 sm:p-4",children:r.jsx("ul",{className:"space-y-1 sm:space-y-2 lg:block flex lg:flex-col",children:n.map(s=>{const o=s.icon;return r.jsx("li",{className:"flex-1 lg:flex-none",children:r.jsxs("button",{onClick:()=>t(s.id),className:`w-full flex items-center justify-center lg:justify-start space-x-2 lg:space-x-3 px-3 lg:px-4 py-2 lg:py-3 rounded-lg transition-colors duration-200 text-sm lg:text-base ${e===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(o,{className:"h-4 w-4 lg:h-5 lg:w-5"}),r.jsx("span",{className:"font-medium hidden sm:inline lg:inline",children:s.label})]})},s.id)})})}),r.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 hidden lg:block",children:r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 mb-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Quick Stats"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-600",children:"Schools"}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:a.totalSchools})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-600",children:"Users"}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:a.totalUsers})]})]})]})})]})}function RP(){const{schools:e,stats:t,setCurrentView:a,setSelectedSchoolId:n,deleteSchool:s}=Ai(),[o,l]=S.useState(""),d=j=>{n(j),a("view-access")},u=j=>{n(j),a("account-details")},m=j=>{n(j),a("school-details")},p=j=>{n(j),a("edit-school")},f=async(j,v)=>{const b=`  PERMANENT DELETION WARNING  

You are about to delete school: "${v}"

This action will PERMANENTLY DELETE:
 School record and all settings
 All users (admins, teachers, students, parents)
 All classes, sections, and subjects
 All test records and results
 All attendance data
 School database and all data

 THIS ACTION CANNOT BE UNDONE 

Are you sure you want to proceed?`;if(!window.confirm(b)){console.log(`User cancelled deletion of school: ${v}`);return}const I=` FINAL CONFIRMATION 

Type the school name "${v}" to confirm deletion:

Note: This will delete ALL data permanently.`,T=window.prompt(I);if(T!==v){T!==null&&alert(` School name does not match. Deletion cancelled.

You entered: "${T}"
Required: "${v}"`),console.log(`User provided incorrect school name or cancelled: entered "${T}", required "${v}"`);return}try{console.log(`User confirmed deletion of school: ${v} (${j})`),window.confirm(` Processing deletion of "${v}"...

This may take a few moments. Click OK to proceed.`)&&(await s(j),console.log(`Successfully deleted school: ${v}`),alert(` School "${v}" and all associated data have been permanently deleted.`))}catch(P){console.error("Failed to delete school:",P);const A=P?.response?.data?.message||P?.message||"Unknown error occurred";alert(` Failed to delete school "${v}".

Error: ${A}

Please try again or contact support.`)}},x=[{title:"Total Schools",value:t.totalSchools,icon:Fo,color:"text-blue-600",bg:"bg-blue-50"},{title:"Total Users",value:t.totalUsers,icon:ta,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Last Login",value:t.lastLogin,icon:ls,color:"text-orange-600",bg:"bg-orange-50"}],w=e.filter(j=>{const v=o.toLowerCase();return j.name.toLowerCase().includes(v)||j.code?.toLowerCase().includes(v)||j.area.toLowerCase().includes(v)||j.district.toLowerCase().includes(v)||j.principalName.toLowerCase().includes(v)||j.principalEmail.toLowerCase().includes(v)});return r.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"School Management Dashboard"}),r.jsxs("button",{onClick:()=>a("add-school"),className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2 text-sm sm:text-base w-full sm:w-auto justify-center",children:[r.jsx(Fo,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{children:"Add New School"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:x.map((j,v)=>{const b=j.icon;return r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:j.title}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:j.value})]}),r.jsx("div",{className:`${j.bg} p-3 rounded-lg`,children:r.jsx(b,{className:`h-6 w-6 ${j.color}`})})]})},v)})}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Registered Schools"})}),r.jsxs("div",{className:"mt-4 relative",children:[r.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search schools by name, code, area, district, principal...",value:o,onChange:j=>l(j.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),r.jsx("div",{className:"p-4 sm:p-6",children:w.length===0?r.jsxs("div",{className:"text-center py-8 sm:py-12",children:[r.jsx(Fo,{className:"h-8 w-8 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No schools found matching your search."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:w.map(j=>r.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 sm:p-6 hover:shadow-md transition-shadow duration-200",children:[r.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[r.jsx("img",{src:j.logo,alt:`${j.logo} logo`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-lg object-cover border border-gray-200"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:j.name}),r.jsx("div",{className:"flex items-center space-x-2 mt-1",children:r.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded",children:j.code||"No Code"})}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:[j.area,", ",j.district]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["PIN: ",j.pinCode]})]})]}),r.jsxs("div",{className:"mt-3 sm:mt-4 space-y-1 sm:space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Principal:"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600 truncate",children:j.principalName})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Contact:"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:j.mobile})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Email:"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600 truncate",children:j.principalEmail})]})]}),r.jsxs("div",{className:"mt-4 sm:mt-6 flex flex-wrap gap-1 sm:gap-2",children:[r.jsxs("button",{onClick:()=>d(j.id),className:"flex items-center space-x-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors duration-200 text-xs sm:text-sm font-medium",children:[r.jsx(oa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"View Access"}),r.jsx("span",{className:"sm:hidden",children:"View"})]}),r.jsxs("button",{onClick:()=>u(j.id),className:"flex items-center space-x-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors duration-200 text-xs sm:text-sm font-medium",children:[r.jsx(Ul,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Account Details"}),r.jsx("span",{className:"sm:hidden",children:"Account"})]}),r.jsxs("button",{onClick:()=>m(j.id),className:"flex items-center space-x-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors duration-200 text-xs sm:text-sm font-medium",children:[r.jsx(fa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Details"})]}),r.jsxs("button",{onClick:()=>p(j.id),className:"flex items-center space-x-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 text-xs sm:text-sm font-medium",children:[r.jsx(zs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>f(j.id,j.name),className:"flex items-center space-x-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors duration-200 text-xs sm:text-sm font-medium",children:[r.jsx(pn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Delete"})]})]})]},j.id))})})]})]})}Array.from({length:10},(e,t)=>(t+1).toString());(()=>{const e=new Date().getFullYear(),t=[];for(let a=-2;a<=2;a++){const n=e+a,s=n+1;t.push(`${n}-${s}`)}return t})();const hd={mobile:/^\d{10}$/,pinCode:/^\d{6}$/,ifsc:/^[A-Z]{4}0[A-Z0-9]{6}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/};function FJ(){const{setCurrentView:e,addSchool:t}=Ai(),[a,n]=S.useState({name:"",code:"",street:"",area:"",city:"",district:"",taluka:"",state:"",stateId:"",districtId:"",talukaId:"",districtText:"",talukaText:"",pinCode:"",mobile:"",principalName:"",principalEmail:"",website:"",bankName:"",accountNumber:"",ifscCode:"",branch:"",accountHolderName:"",schoolType:"",establishedYear:"",affiliationBoard:"",secondaryContact:""}),[s,o]=S.useState(null),[l,d]=S.useState(null),[u,m]=S.useState(null),[p,f]=S.useState(null),[x,w]=S.useState({}),j=()=>{const R={};if(a.name.trim()||(R.name="School name is required"),a.code.trim()||(R.code="School code is required"),a.area.trim()||(R.area="Area is required"),a.district.trim()||(R.district="District is required"),a.pinCode.trim()?hd.pinCode.test(a.pinCode.trim())||(R.pinCode="Pin code must be 6 digits"):R.pinCode="Pin code is required",a.mobile.trim()?hd.mobile.test(a.mobile.trim())||(R.mobile="Mobile number must be 10 digits"):R.mobile="Mobile number is required",a.principalName.trim()||(R.principalName="Principal name is required"),a.principalEmail.trim()?hd.email.test(a.principalEmail.trim())||(R.principalEmail="Please enter a valid email address"):R.principalEmail="Principal email is required",a.schoolType||(R.schoolType="School type is required"),!a.establishedYear.trim())R.establishedYear="Established year is required";else{const $=parseInt(a.establishedYear),H=new Date().getFullYear();isNaN($)||$<1800||$>H?R.establishedYear=`Year must be between 1800 and ${H}`:a.establishedYear.length!==4&&(R.establishedYear="Year must be exactly 4 digits")}return a.affiliationBoard||(R.affiliationBoard="Affiliation board is required"),a.bankName.trim()||(R.bankName="Bank name is required"),a.accountNumber.trim()?/^\d{16}$/.test(a.accountNumber.trim())||(R.accountNumber="Account number must be exactly 16 digits"):R.accountNumber="Account number is required",a.ifscCode.trim()?hd.ifsc.test(a.ifscCode.trim().toUpperCase())||(R.ifscCode="IFSC code must be 11 characters (format: ABCD0123456)"):R.ifscCode="IFSC code is required",a.branch.trim()||(R.branch="Branch name is required"),a.accountHolderName.trim()||(R.accountHolderName="Account holder name is required"),a.secondaryContact.trim()&&!hd.mobile.test(a.secondaryContact.trim())&&(R.secondaryContact="Secondary contact must be 10 digits"),w(R),Object.keys(R).length===0},v=R=>{const $=R.target.files?.[0];if($){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes($.type)){w(Y=>({...Y,logo:"Only image files (JPEG, PNG, GIF, WebP) are allowed"}));return}if($.size>10*1024*1024){w(Y=>({...Y,logo:"File size must be less than 10MB"}));return}o($),w(Y=>({...Y,logo:""}));const L=new FileReader;L.onloadend=()=>{d(L.result)},L.readAsDataURL($)}},b=async R=>{if(R.preventDefault(),m(null),f(null),!j()){f("Please fix the validation errors below");return}try{await t({name:a.name.trim(),code:a.code.trim().toUpperCase(),mobile:a.mobile.trim(),principalName:a.principalName.trim(),principalEmail:a.principalEmail.trim(),logoFile:s||void 0,address:{street:a.street.trim(),area:a.area.trim(),city:a.city.trim(),district:a.district.trim(),taluka:a.taluka.trim(),state:a.state.trim(),stateId:a.stateId?parseInt(a.stateId):void 0,districtId:a.districtId?parseInt(a.districtId):void 0,talukaId:a.talukaId?parseInt(a.talukaId):void 0,pinCode:a.pinCode.trim(),country:"India"},contact:{phone:a.mobile.trim(),email:a.principalEmail.trim(),website:a.website.trim()},bankDetails:{bankName:a.bankName.trim(),accountNumber:a.accountNumber.trim(),ifscCode:a.ifscCode.trim().toUpperCase(),branch:a.branch.trim(),accountHolderName:a.accountHolderName.trim()},accessMatrix:{admin:{manageUsers:!0,manageSchoolSettings:!0,viewAttendance:!0,viewResults:!0,messageStudentsParents:!0},teacher:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!0},student:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!1},parent:{manageUsers:!1,manageSchoolSettings:!1,viewAttendance:!0,viewResults:!0,messageStudentsParents:!1}},schoolType:a.schoolType.trim(),establishedYear:a.establishedYear.trim(),affiliationBoard:a.affiliationBoard.trim(),secondaryContact:a.secondaryContact.trim()}),m("School created successfully!"),setTimeout(()=>{e("dashboard")},1200)}catch($){f($?.message||"Failed to create school")}o(null),d(null)},I=()=>{n({name:"",code:"",street:"",area:"",city:"",district:"",taluka:"",state:"",stateId:"",districtId:"",talukaId:"",districtText:"",talukaText:"",pinCode:"",mobile:"",principalName:"",principalEmail:"",website:"",bankName:"",accountNumber:"",ifscCode:"",branch:"",accountHolderName:"",schoolType:"",establishedYear:"",affiliationBoard:"",secondaryContact:""}),o(null),d(null),w({}),f(null),m(null)},T=(R,$)=>{n(H=>({...H,stateId:R.toString(),state:$.name,districtId:"",district:"",talukaId:"",taluka:"",districtText:"",talukaText:""}))},P=(R,$)=>{n(H=>({...H,districtId:R.toString(),district:$.name,talukaId:"",taluka:"",talukaText:""}))},A=(R,$)=>{n(H=>({...H,talukaId:R.toString(),taluka:$.name}))},k=R=>{n($=>({...$,districtText:R,district:R,talukaText:""}))},E=R=>{n($=>({...$,talukaText:R,taluka:R}))},_=R=>x[R]?r.jsx("p",{className:"text-red-500 text-xs mt-1",children:x[R]}):null;return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New School"})}),u&&r.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded-lg",children:u}),p&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-800 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Ar,{className:"h-5 w-5 text-red-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:p.includes("already exists")?"School Code Already Used":"Error Creating School"}),r.jsx("div",{className:"mt-1 text-sm text-red-700",children:p})]})]})}),r.jsxs("form",{onSubmit:b,className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"School Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name"}),r.jsx("input",{type:"text",required:!0,value:a.name,onChange:R=>n({...a,name:R.target.value}),className:`w-full px-3 py-2 border ${x.name?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter school name"}),_("name")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Code"}),r.jsx("input",{type:"text",required:!0,value:a.code,onChange:R=>n({...a,code:R.target.value.toUpperCase()}),className:`w-full px-3 py-2 border ${x.code?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter school code (e.g., NPS, DAV, KVS)",maxLength:10}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This code will be used for admin and teacher panel identification. Must be unique across all schools."}),_("code")]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Logo"}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:v,className:`w-full px-3 py-2 border ${x.logo?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload school logo (JPEG, PNG, GIF, WebP). Max size: 10MB. Image will be compressed automatically."}),_("logo")]}),l&&r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"relative w-24 h-24 border-2 border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("img",{src:l,alt:"Logo preview",className:"w-full h-full object-contain"}),r.jsx("button",{type:"button",onClick:()=>{o(null),d(null)},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:r.jsx(Ar,{className:"h-3 w-3"})})]})})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),r.jsx("input",{type:"text",required:!0,value:a.street,onChange:R=>n({...a,street:R.target.value}),className:`w-full px-3 py-2 border ${x.street?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter street address"}),_("street")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area/Locality"}),r.jsx("input",{type:"text",required:!0,value:a.area,onChange:R=>n({...a,area:R.target.value}),className:`w-full px-3 py-2 border ${x.area?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter area/locality"}),_("area")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",required:!0,value:a.city,onChange:R=>n({...a,city:R.target.value}),className:`w-full px-3 py-2 border ${x.city?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter city"}),_("city")]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Location Details"}),r.jsx(Jh,{selectedState:a.stateId,selectedDistrict:a.districtId,selectedTaluka:a.talukaId,districtText:a.districtText,talukaText:a.talukaText,onStateChange:T,onDistrictChange:P,onTalukaChange:A,onDistrictTextChange:k,onTalukaTextChange:E,required:!0,className:"grid grid-cols-1 md:grid-cols-3 gap-4"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pin Code"}),r.jsx("input",{type:"text",required:!0,maxLength:6,value:a.pinCode,onChange:R=>{const $=R.target.value.replace(/\D/g,"");n({...a,pinCode:$})},className:`w-full px-3 py-2 border ${x.pinCode?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter 6-digit pin code"}),_("pinCode")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),r.jsx("input",{type:"tel",required:!0,maxLength:10,value:a.mobile,onChange:R=>{const $=R.target.value.replace(/\D/g,"");n({...a,mobile:$})},className:`w-full px-3 py-2 border ${x.mobile?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter 10-digit mobile number"}),_("mobile")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Principal Name"}),r.jsx("input",{type:"text",required:!0,value:a.principalName,onChange:R=>n({...a,principalName:R.target.value}),className:`w-full px-3 py-2 border ${x.principalName?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter principal name"}),_("principalName")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Principal Email ID"}),r.jsx("input",{type:"email",required:!0,value:a.principalEmail,onChange:R=>n({...a,principalEmail:R.target.value}),className:`w-full px-3 py-2 border ${x.principalEmail?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter principal email"}),_("principalEmail")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),r.jsx("input",{type:"url",value:a.website,onChange:R=>n({...a,website:R.target.value}),className:`w-full px-3 py-2 border ${x.website?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter website URL (optional)"}),_("website")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Type"}),r.jsxs("select",{required:!0,value:a.schoolType,onChange:R=>n({...a,schoolType:R.target.value}),className:`w-full px-3 py-2 border ${x.schoolType?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[r.jsx("option",{value:"",children:"Select School Type"}),r.jsx("option",{value:"Public",children:"Public"}),r.jsx("option",{value:"Private",children:"Private"}),r.jsx("option",{value:"International",children:"International"})]}),_("schoolType")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Established Year"}),r.jsx("input",{type:"number",required:!0,min:1800,max:new Date().getFullYear(),maxLength:4,pattern:"[0-9]{4}",value:a.establishedYear,onChange:R=>{const $=R.target.value.replace(/\D/g,"");$.length<=4&&n({...a,establishedYear:$})},className:`w-full px-3 py-2 border ${x.establishedYear?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter year"}),_("establishedYear")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affiliation Board"}),r.jsxs("select",{required:!0,value:a.affiliationBoard,onChange:R=>n({...a,affiliationBoard:R.target.value}),className:`w-full px-3 py-2 border ${x.affiliationBoard?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[r.jsx("option",{value:"",children:"Select Affiliation Board"}),r.jsx("option",{value:"CBSE",children:"CBSE"}),r.jsx("option",{value:"ICSE",children:"ICSE"}),r.jsx("option",{value:"State Board",children:"State Board"}),r.jsx("option",{value:"IB",children:"IB"})]}),_("affiliationBoard")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Contact Number"}),r.jsx("input",{type:"tel",maxLength:10,value:a.secondaryContact,onChange:R=>{const $=R.target.value.replace(/\D/g,"");n({...a,secondaryContact:$})},className:`w-full px-3 py-2 border ${x.secondaryContact?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter 10-digit secondary contact number"}),_("secondaryContact")]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Bank Account Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),r.jsx("input",{type:"text",required:!0,value:a.bankName,onChange:R=>n({...a,bankName:R.target.value}),className:`w-full px-3 py-2 border ${x.bankName?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter bank name"}),_("bankName")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),r.jsx("input",{type:"text",required:!0,maxLength:16,value:a.accountNumber,onChange:R=>{const $=R.target.value.replace(/\D/g,"");n({...a,accountNumber:$})},className:`w-full px-3 py-2 border ${x.accountNumber?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter 16-digit account number"}),_("accountNumber")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),r.jsx("input",{type:"text",required:!0,maxLength:11,value:a.ifscCode,onChange:R=>n({...a,ifscCode:R.target.value.toUpperCase()}),className:`w-full px-3 py-2 border ${x.ifscCode?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter 11-character IFSC code (e.g., SBIN0123456)"}),_("ifscCode")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch"}),r.jsx("input",{type:"text",required:!0,value:a.branch,onChange:R=>n({...a,branch:R.target.value}),className:`w-full px-3 py-2 border ${x.branch?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter branch name"}),_("branch")]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name"}),r.jsx("input",{type:"text",required:!0,value:a.accountHolderName,onChange:R=>n({...a,accountHolderName:R.target.value}),className:`w-full px-3 py-2 border ${x.accountHolderName?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter account holder name"}),_("accountHolderName")]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{type:"button",onClick:()=>e("dashboard"),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 font-medium",children:"Cancel"}),r.jsx("button",{type:"button",onClick:I,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 font-medium",children:"Clear"}),r.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Submit"})]})]})]})})}const BJ=[{key:"manageUsers",label:"Manage Users",description:"Access to add, edit, and delete users"},{key:"manageSchoolSettings",label:"Manage School Settings",description:"Access to configure school settings"},{key:"viewAcademicDetails",label:"Academic Details",description:"Access to manage academic year and classes"},{key:"viewAttendance",label:"Attendance",description:"Access to view and mark attendance"},{key:"viewAssignments",label:"Assignments",description:"Access to manage assignments"},{key:"viewResults",label:"Results",description:"Access to view student results"},{key:"viewLeaves",label:"Leave Management",description:"Access to manage leave requests and approvals"},{key:"messageStudentsParents",label:"Message Students/Parents",description:"Access to send messages to students and parents"},{key:"viewFees",label:"Manage Fees",description:"Access to manage fee structure and payments"},{key:"viewReports",label:"View Reports",description:"Access to generate and view reports"}],$P=[{key:"viewAttendance",label:"Attendance",description:"Access to view and mark attendance"},{key:"viewAssignments",label:"Assignments",description:"Access to view assignments"},{key:"viewResults",label:"Results",description:"Access to view student results"},{key:"viewLeaves",label:"Leave Management",description:"Access to manage own leave requests"},{key:"messageStudentsParents",label:"Message Students/Parents",description:"Access to send messages to students and parents"}],LP=BJ,UJ=["admin","teacher"];function zJ(){const{schools:e,selectedSchoolId:t,setCurrentView:a,updateSchoolAccess:n}=Ai(),[s,o]=S.useState(null),l=e.find(p=>p.id===t);if(S.useEffect(()=>{l&&o(l.accessMatrix)},[l]),!l||!s)return r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-gray-600",children:"School not found"})});const d=(p,f)=>{s&&o(x=>{const w=x[p][f];let j;return p==="teacher"&&f==="viewLeaves"||p==="teacher"&&f==="viewResults"?j=w==="own"||w===!0?!1:"own":p==="teacher"&&f==="manageSchoolSettings"?j=w==="limited"||w===!0?!1:"limited":j=!w,{...x,[p]:{...x[p],[f]:j}}})},u=async()=>{if(s&&t)try{await n(t,s),xe.success("Access permissions updated successfully!"),await new Promise(p=>setTimeout(p,500)),window.dispatchEvent(new Event("permission-refresh")),a("dashboard")}catch(p){xe.error("Failed to update access permissions"),console.error("Error updating access matrix:",p)}},m=({role:p})=>{const f=p==="teacher"?$P:LP,x=f.filter(w=>!!s[p][w.key]).length;return r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 capitalize",children:[p," Access Matrix"]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:["Configure access permissions for ",p," role"]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"text-left sm:text-right",children:[r.jsxs("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:[x," of ",f.length," permissions enabled"]}),r.jsx("div",{className:"w-24 sm:w-32 bg-gray-200 rounded-full h-2 mt-1",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x/f.length*100}%`}})})]})})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900 min-w-[250px] sm:min-w-[300px]",children:"Permissions"}),r.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-center text-xs sm:text-sm font-semibold text-gray-900 min-w-[80px] sm:min-w-[120px]",children:"Access"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900",children:w.label}),"description"in w&&r.jsx("span",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:w.description})]})}),r.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-center",children:r.jsx("label",{className:"inline-flex items-center",children:r.jsx("input",{type:"checkbox",checked:!!s[p][w.key],onChange:()=>d(p,w.key),className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"})})})]},w.key))})]})})]})};return r.jsx("div",{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{children:r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:["Access Control - ",l.name]})}),r.jsxs("button",{onClick:u,className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 w-full sm:w-auto text-sm sm:text-base",children:[r.jsx(cs,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{className:"font-semibold",children:"Access Control:"})," When you uncheck a permission, users of that role will see a popup notification when they try to access that feature. Changes take effect immediately for logged-in users."]})})]}),r.jsx("div",{className:"mb-6",children:r.jsx(m,{role:"admin"})}),r.jsx("div",{className:"mb-6",children:r.jsx(m,{role:"teacher"})}),r.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:UJ.map(p=>{const f=p==="teacher"?$P:LP,x=f.filter(w=>!!s[p][w.key]).length;return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 capitalize mb-2",children:[p," Role Summary"]}),r.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[x," of ",f.length," permissions enabled"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x/f.length*100}%`}})})]},p)})})]})})}function qJ(){const{schools:e,selectedSchoolId:t,setCurrentView:a,updateBankDetails:n}=Ai(),[s,o]=S.useState(null),[l,d]=S.useState(!1),u=e.find(f=>f.id===t);if(S.useEffect(()=>{u&&o(u.bankDetails)},[u]),!u||!s)return r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-gray-600",children:"School not found"})});const m=()=>{s&&t&&(n(t,s),d(!1))},p=()=>{u&&(o(u.bankDetails),d(!1))};return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("div",{children:r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Account Details - ",u.name]})}),l?r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),r.jsxs("button",{onClick:m,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[r.jsx(cs,{className:"h-5 w-5"}),r.jsx("span",{children:"Save Changes"})]})]}):r.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[r.jsx(zs,{className:"h-5 w-5"}),r.jsx("span",{children:"Edit Details"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ul,{className:"h-6 w-6 text-blue-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fee Payment Account Information"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bank account details for fee collection"})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),l?r.jsx("input",{type:"text",value:s.bankName,onChange:f=>o({...s,bankName:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900",children:s.bankName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),l?r.jsx("input",{type:"text",value:s.accountNumber,onChange:f=>o({...s,accountNumber:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900 font-mono",children:s.accountNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),l?r.jsx("input",{type:"text",value:s.ifscCode,onChange:f=>o({...s,ifscCode:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900 font-mono",children:s.ifscCode})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch"}),l?r.jsx("input",{type:"text",value:s.branch,onChange:f=>o({...s,branch:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900",children:s.branch})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name"}),l?r.jsx("input",{type:"text",value:s.accountHolderName,onChange:f=>o({...s,accountHolderName:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900",children:s.accountHolderName})]})]}),!l&&r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Account Status"}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("span",{className:"text-sm text-blue-800",children:"Active for fee collection"})})]})]})]})]})})}const HJ=()=>{const e=Ai(),t=e?.selectedSchoolId||"",a=e?.schools||[],[n,s]=S.useState("classes"),[o,l]=S.useState([]),[d,u]=S.useState([]),[m,p]=S.useState(!1),[f,x]=S.useState(""),[w,j]=S.useState(""),[v,b]=S.useState(""),[I,T]=S.useState(""),[P,A]=S.useState(!1),[k,E]=S.useState(!1),_=a.find(G=>G.id===t),R=[{id:"classes",title:"Classes",description:"Manage school classes",icon:ss,color:"blue",count:o.length},{id:"sections",title:"Sections",description:"Manage class sections",icon:ta,color:"green",count:o.reduce((G,B)=>G+B.sections.length,0)},{id:"tests",title:"Tests",description:"Manage academic tests",icon:Bb,color:"purple",count:d.length}],$=async()=>{if(t)try{p(!0),console.log("Fetching classes for school:",t);const G=await ad.getSchoolClasses(t);if(console.log("Classes response:",G),G.success){console.log("Classes data:",G.data.classes);const B=(G.data.classes||[]).sort((F,re)=>{const U=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],ae=U.indexOf(F.className),W=U.indexOf(re.className);return ae!==-1&&W!==-1?ae-W:ae!==-1?-1:W!==-1?1:F.className.localeCompare(re.className)});B.forEach(F=>{F.sections&&F.sections.length>0&&F.sections.sort((re,U)=>re.localeCompare(U))}),l(B)}}catch(G){console.error("Error fetching classes:",G),xe.error("Error fetching classes")}finally{p(!1)}},H=async()=>{if(t)try{p(!0),console.log("Fetching tests for school:",t);const G=await Im.getSchoolTests(t);if(console.log("Tests response:",G),G.success){console.log("Tests data:",G.data.tests),console.log("School info:",{schoolId:G.data.schoolId,schoolCode:G.data.schoolCode,schoolName:G.data.schoolName});const B=(G.data.tests||[]).sort((F,re)=>{const U=["LKG","UKG","1","2","3","4","5","6","7","8","9","10","11","12"],ae=U.indexOf(F.className),W=U.indexOf(re.className);return ae!==-1&&W!==-1?ae-W:ae!==-1?-1:W!==-1?1:F.className.localeCompare(re.className)});u(B),console.log(" Tests sorted by class order:",B)}}catch(G){console.error("Error fetching tests:",G),xe.error("Error fetching tests")}finally{p(!1)}},L=async()=>{if(!f.trim()){xe.error("Please enter class name");return}try{const G=await ad.addClass(t,{className:f.trim(),academicYear:"2024-25"});if(G.success)xe.success(`Class ${f} created successfully`),x(""),await $();else throw new Error(G.message||"Failed to create class")}catch(G){console.error("Error adding class:",G),xe.error(G.message||"Failed to add class")}},Y=async()=>{if(!v||!w.trim()){xe.error("Please select class and enter section name");return}try{const G=await ad.addSectionToClass(t,v,w.trim());if(G.success)xe.success(`Section ${w} added successfully`),j(""),await $();else throw new Error(G.message||"Failed to add section")}catch(G){console.error("Error adding section:",G),xe.error(G.message||"Failed to add section")}},X=async(G,B)=>{const F=o.find(W=>W._id===G);if(!F){xe.error("Class not found");return}const re=F.className,U=d.filter(W=>W.className===re),ae=U.length>0?`Remove section ${B} from Class ${re}? Note: This may affect ${U.length} test(s) for this class: ${U.map(W=>W.name).join(", ")}`:`Remove section ${B} from Class ${re}?`;if(confirm(ae))try{const W=await ad.removeSectionFromClass(t,G,B);if(W.success)xe.success(`Section ${B} removed successfully`),await $(),await H();else throw new Error(W.message||"Failed to remove section")}catch(W){console.error("Error removing section:",W),xe.error(W.message||"Failed to remove section")}},me=async(G,B)=>{const F=d.filter(ae=>ae.className===B),re=F.length,U=re>0?`Delete class ${B}? This will also remove all sections and ${re} related test(s): ${F.map(ae=>ae.name).join(", ")}`:`Delete class ${B}? This will also remove all sections.`;if(confirm(U))try{if(F.length>0){console.log(`Deleting ${F.length} tests related to class ${B}:`,F.map(W=>W.name));for(const W of F)try{console.log(`Deleting test: ${W.name} (${W._id})`);const fe=await Im.deleteTest(t,W._id);fe.success||console.warn(`Failed to delete test ${W.name}:`,fe.message)}catch(fe){console.warn(`Error deleting test ${W.name}:`,fe.message)}}const ae=await ad.deleteClass(t,G);if(ae.success){const W=re>0?`Class ${B} and ${re} related test(s) deleted successfully`:`Class ${B} deleted successfully`;xe.success(W),await $(),await H()}else throw new Error(ae.message||"Failed to delete class")}catch(ae){console.error("Error deleting class:",ae),xe.error(ae.message||"Failed to delete class")}},K=async()=>{if(!k&&!v){xe.error('Please select a class or choose "All Classes"');return}if(!I.trim()){xe.error("Please enter test name");return}try{let G={name:I.trim(),description:k?"Test for all classes":`Test for Class ${o.find(F=>F._id===v)?.className}`,isActive:!0,academicYear:"2024-25",allSections:P,allClasses:k};if(!k){const F=o.find(re=>re._id===v);if(!F){xe.error("Selected class not found");return}G.className=F.className,P?G.sections=F.sections||[]:G.sections=F.sections||[]}const B=await Im.addTest(t,G);if(console.log("Add test response:",B),B.success){const F=k?`Test "${I}" created for all classes`:P?`Test "${I}" created for all sections of Class ${G.className}`:`Test "${I}" created for Class ${G.className}`;xe.success(F),T(""),b(""),A(!1),E(!1),await H()}else throw new Error(B.message||"Failed to create test")}catch(G){console.error("Error adding test:",G),xe.error(G.response?.data?.message||"Failed to add test")}},oe=async(G,B)=>{if(confirm(`Delete test "${B}"? Note: This will only delete the test - classes and sections will remain unaffected.`))try{console.log("Deleting test:",{testId:G,testName:B,selectedSchoolId:t});const F=await Im.deleteTest(t,G);if(console.log("Delete test response:",F),F.success)xe.success(`Test "${B}" deleted successfully`),await H();else throw new Error(F.message||"Failed to delete test")}catch(F){console.error("Error deleting test:",F),xe.error(F.message||"Failed to delete test")}};return ge.useEffect(()=>{t&&($(),H())},[t]),!t||!_?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Academic Management"}),r.jsx("p",{className:"text-gray-600",children:"Please select a school to manage academic settings."})]})})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Academic Management"}),r.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Manage classes, sections, and tests for ",_.name]}),r.jsxs("div",{className:"mt-2 text-xs sm:text-sm text-gray-500",children:["School Code: ",_.code," | Total Classes: ",o.length]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-6",children:R.map(G=>{const B=G.icon,F=n===G.id;return r.jsx("div",{onClick:()=>s(G.id),className:`bg-white rounded-lg shadow-md p-4 sm:p-6 cursor-pointer transition-all duration-200 hover:shadow-lg ${F?"ring-2 ring-blue-500":""}`,children:r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[r.jsx("div",{className:`p-2 sm:p-3 rounded-lg ${G.color==="blue"?"bg-blue-100 text-blue-600":G.color==="green"?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}`,children:r.jsx(B,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 truncate",children:G.title}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:G.description}),r.jsx("div",{className:"mt-1 sm:mt-2 text-xl sm:text-2xl font-bold text-gray-900",children:G.count})]})]})},G.id)})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[n==="classes"&&r.jsxs("div",{children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-4",children:r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Classes Management"})}),r.jsxs("div",{className:"mb-4 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"text-sm sm:text-md font-medium text-gray-800 mb-3",children:"Add New Class"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center",children:[r.jsxs("select",{value:f,onChange:G=>x(G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[r.jsx("option",{value:"",children:"Select class..."}),r.jsx("option",{value:"LKG",children:"LKG"}),r.jsx("option",{value:"UKG",children:"UKG"}),[1,2,3,4,5,6,7,8,9,10,11,12].map(G=>r.jsxs("option",{value:G.toString(),children:["Class ",G]},G))]}),r.jsxs("button",{onClick:L,disabled:!f.trim()||m,className:"px-4 sm:px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Class"}),r.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),r.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[r.jsxs("p",{className:"text-sm text-yellow-800",children:["Debug: Classes count: ",o.length," | Loading: ",m.toString()]}),r.jsxs("p",{className:"text-xs text-yellow-600",children:["Selected School ID: ",t]})]}),r.jsx("div",{className:"space-y-4",children:o.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Found"}),r.jsx("p",{className:"text-gray-600",children:"Create your first class to get started."})]}):o.map(G=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Class ",G.className]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[G.sections.length," sections  Academic Year: ",G.academicYear]}),G.sections.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:G.sections.map((B,F)=>r.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:["Section ",B]},F))})]}),r.jsx("button",{onClick:()=>me(G._id,G.className),className:"p-2 text-red-600 hover:bg-red-100 rounded",title:"Delete class",children:r.jsx(pn,{className:"h-4 w-4"})})]})},G._id))})]}),n==="sections"&&r.jsxs("div",{children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-4",children:r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Sections Management"})}),r.jsxs("div",{className:"mb-4 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"text-sm sm:text-md font-medium text-gray-800 mb-3",children:"Add New Section"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center",children:[r.jsxs("select",{value:v,onChange:G=>b(G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 text-sm",children:[r.jsx("option",{value:"",children:"Select a class..."}),o.map(G=>r.jsxs("option",{value:G._id,children:["Class ",G.className]},G._id))]}),r.jsx("input",{type:"text",value:w,onChange:G=>j(G.target.value.toUpperCase()),placeholder:"Section (e.g., A, B, C)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 text-sm"}),r.jsxs("button",{onClick:Y,disabled:!v||!w.trim()||m,className:"px-4 sm:px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Section"}),r.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),r.jsx("div",{className:"space-y-4",children:o.map(G=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:["Class ",G.className]}),G.sections.length===0?r.jsx("p",{className:"text-gray-500 text-sm",children:"No sections added yet"}):r.jsx("div",{className:"flex flex-wrap gap-2",children:G.sections.map((B,F)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full",children:[r.jsxs("span",{className:"text-sm",children:["Section ",B]}),r.jsx("button",{onClick:()=>X(G._id,B),className:"text-red-600 hover:text-red-800",title:"Remove section",children:r.jsx(pn,{className:"h-3 w-3"})})]},F))})]},G._id))})]}),n==="tests"&&r.jsxs("div",{children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-4",children:r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Tests Management"})}),r.jsxs("div",{className:"mb-4 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"text-sm sm:text-md font-medium text-gray-800 mb-3",children:"Add New Test"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-3 items-stretch sm:items-center",children:[r.jsxs("select",{value:v,onChange:G=>b(G.target.value),disabled:k,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 disabled:bg-gray-200 text-sm",children:[r.jsx("option",{value:"",children:"Select a class..."}),o.map(G=>r.jsxs("option",{value:G._id,children:["Class ",G.className]},G._id))]}),r.jsx("input",{type:"text",value:I,onChange:G=>T(G.target.value),placeholder:"Test name (e.g., Midterm, Unit Test 1)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"}),r.jsxs("button",{onClick:K,disabled:!k&&!v||!I.trim()||m,className:"px-4 sm:px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base w-full sm:w-auto",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Test"}),r.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:P,onChange:G=>A(G.target.checked),disabled:k,className:"rounded"}),r.jsx("span",{children:"All sections"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:k,onChange:G=>{E(G.target.checked),G.target.checked&&(b(""),A(!0))},className:"rounded"}),r.jsx("span",{className:"font-medium",children:"All classes"})]})]})]}),r.jsx("div",{className:"space-y-4",children:d.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Bb,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tests Found"}),r.jsx("p",{className:"text-gray-600",children:"Create your first test to get started."})]}):d.map(G=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:G.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Test for Class ",G.className]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Scoring configured by school admin"})]}),r.jsx("button",{onClick:()=>oe(G._id,G.name),className:"p-2 text-red-600 hover:bg-red-100 rounded",title:"Delete test",children:r.jsx(pn,{className:"h-4 w-4"})})]})},G._id))})]})]})]})})},WJ=()=>r.jsx(HJ,{});function VJ({schoolCode:e,onClose:t,onSuccess:a}){const[n,s]=S.useState(null),[o,l]=S.useState(null),[d,u]=S.useState(!1),[m,p]=S.useState(null),[f,x]=S.useState("student"),w=S.useRef(null),j=()=>{const _=localStorage.getItem("erp.auth");if(_)try{return JSON.parse(_).token}catch(R){console.error("Failed to parse erp.auth:",R)}return localStorage.getItem("token")},v=_=>{const R=_.target.files?.[0];if(R){if(R.type!=="text/csv"&&!R.name.endsWith(".csv")){l("Invalid file type. Please upload a .csv file."),s(null),w.current&&(w.current.value="");return}s(R),l(null),p(null)}},b=async()=>{if(!n){l("Please select a file to import.");return}if(!e){l("School code is missing. Cannot import.");return}const _=j();if(!_){l("Authentication token not found. Please log in again.");return}u(!0),l(null),p(null);try{const R=await un.importUsers(e,n,f,_);p(R.data),console.log("Import API response:",R.data)}catch(R){console.error("Import failed:",R),l(R.message||R.error||"Failed to import users. Check console for details."),R.results&&p({success:!1,message:R.message||"Import failed with partial results.",results:R.results})}finally{u(!1)}},I=()=>{s(null),l(null),u(!1),p(null),w.current&&(w.current.value="")},T=()=>{I(),t()},P=()=>{a(),T()},A=()=>{if(!m||!m.results.successData.length)return;const _=["UserID","Name","Email","Password"],R=m.results.successData.map(X=>[`"${X.userId||""}"`,`"${(X.name||"").replace(/"/g,'""')}"`,`"${X.email||""}"`,`"${X.password||""}"`]),$=_.join(",")+`
`+R.map(X=>X.join(",")).join(`
`),H=new Blob([$],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),Y=URL.createObjectURL(H);L.setAttribute("href",Y),L.setAttribute("download",`${e}_${f}_credentials.csv`),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L)},k=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-6",children:[o&&r.jsxs("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg flex items-start",children:[r.jsx(Vb,{className:"h-5 w-5 mt-0.5 mr-2 flex-shrink-0"}),r.jsx("p",{children:o})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Role to Import:"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("label",{className:"flex items-center cursor-pointer p-2 rounded-md hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"role",value:"student",checked:f==="student",onChange:()=>x("student"),className:"form-radio h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),r.jsx("span",{className:"ml-2 text-sm text-gray-800",children:"Student"})]}),r.jsxs("label",{className:"flex items-center cursor-pointer p-2 rounded-md hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"role",value:"teacher",checked:f==="teacher",onChange:()=>x("teacher"),className:"form-radio h-4 w-4 text-blue-600 transition duration-150 ease-in-out"}),r.jsx("span",{className:"ml-2 text-sm text-gray-800",children:"Teacher"})]})]})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50 hover:bg-gray-100 transition-colors",children:[r.jsx("input",{type:"file",ref:w,onChange:v,accept:".csv",className:"hidden",id:"csv-upload-input"}),n?r.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[r.jsx(fa,{className:"h-6 w-6 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:n.name}),r.jsx("button",{onClick:()=>{s(null),l(null),w.current&&(w.current.value="")},className:"text-red-600 hover:text-red-700 flex-shrink-0","aria-label":"Remove file",children:r.jsx(Ar,{size:18})})]}):r.jsxs("label",{htmlFor:"csv-upload-input",className:"cursor-pointer",children:[r.jsx(Bo,{className:"h-10 w-10 mx-auto text-gray-400 mb-3"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Drop your CSV file here or"}),r.jsx("span",{className:"mt-1 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"browse files"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Only .csv files are accepted"})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2 text-sm",children:"Instructions:"}),f==="student"?r.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[r.jsx("li",{children:"Ensure your CSV has headers (e.g., `firstname`, `lastname`, `email`, `class`, `section`)."}),r.jsx("li",{children:"Required fields: `firstname`, `lastname`, `email`, `primaryphone`, `dateofbirth`, `gender`, `currentclass`, `currentsection`, `fathername`, `mothername`."}),r.jsx("li",{children:"Date format should be `DD-MM-YYYY`, `DD/MM/YYYY`, or `YYYY-MM-DD`."}),r.jsx("li",{children:r.jsx("a",{href:"/api/public/templates/student_import_template.csv",download:!0,className:"underline hover:text-blue-900",children:"Download student template"})})]}):r.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[r.jsx("li",{children:"Ensure your CSV has headers (e.g., `firstName`, `lastName`, `email`, `primaryPhone`)."}),r.jsx("li",{children:"Required fields: `firstName`, `lastName`, `email`, `primaryPhone`, `dateOfBirth`, `gender`, `joiningDate`, `highestQualification`, `totalExperience`."}),r.jsx("li",{children:"Recommended fields: `subjects` (comma-separated), `specialization`, `employeeId`."}),r.jsx("li",{children:"Date format should be `DD-MM-YYYY`, `DD/MM/YYYY`, or `YYYY-MM-DD`."}),r.jsx("li",{children:r.jsx("a",{href:"/api/public/templates/teacher_import_template.csv",download:!0,className:"underline hover:text-blue-900",children:"Download teacher template"})})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 p-4 bg-gray-50 border-t rounded-b-xl",children:[r.jsx("button",{onClick:T,type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 text-sm font-medium",children:"Cancel"}),r.jsx("button",{onClick:b,type:"button",disabled:!n||d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[120px] text-sm font-medium",children:d?r.jsx(Hm,{className:"h-5 w-5 animate-spin"}):"Import Users"})]})]}),E=()=>{if(!m)return null;const{successData:_=[],errors:R=[],totalRows:$=0,insertedCount:H=0}=m.results||{},L=_.length,Y=R.length;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[m.success&&Y===0?r.jsx(Id,{className:"h-12 w-12 mx-auto text-green-500 bg-green-100 rounded-full p-2"}):r.jsx(Vb,{className:`h-12 w-12 mx-auto rounded-full p-2 ${Y>0?"text-red-500 bg-red-100":"text-yellow-500 bg-yellow-100"}`}),r.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Import Complete"}),r.jsx("p",{className:`mt-1 text-sm ${Y>0?"text-red-600":"text-gray-600"}`,children:m.message})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center border border-green-200",children:[r.jsx("div",{className:"text-3xl font-bold text-green-700",children:L}),r.jsx("div",{className:"text-sm font-medium text-green-800 mt-1",children:"Users Imported Successfully"})]}),r.jsxs("div",{className:`p-4 rounded-lg text-center border ${Y>0?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[r.jsx("div",{className:`text-3xl font-bold ${Y>0?"text-red-700":"text-gray-700"}`,children:Y}),r.jsx("div",{className:`text-sm font-medium mt-1 ${Y>0?"text-red-800":"text-gray-800"}`,children:"Rows Failed"})]})]}),Y>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Error Details (showing first 5):"}),r.jsxs("div",{className:"max-h-32 overflow-y-auto bg-gray-100 border border-gray-300 rounded-lg p-3 text-xs space-y-2",children:[R.slice(0,5).map((X,me)=>r.jsxs("div",{className:"p-2 bg-red-100 border border-red-200 rounded",children:[r.jsxs("p",{className:"font-semibold text-red-800",children:["Row ",X.row,":"]}),r.jsx("p",{className:"text-red-700 break-words",children:X.error})]},me)),R.length>5&&r.jsxs("p",{className:"text-center text-gray-500 text-xs mt-2",children:["... and ",R.length-5," more errors."]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 bg-gray-50 border-t rounded-b-xl space-y-2 sm:space-y-0",children:[r.jsxs("button",{onClick:A,type:"button",disabled:L===0,className:"w-full sm:w-auto flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[r.jsx(Ns,{className:"h-4 w-4"}),r.jsxs("span",{children:["Download Credentials (",L,")"]})]}),r.jsx("button",{onClick:P,type:"button",className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Done"})]})]})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-auto overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:m?"Import Results":"Import Users from CSV"}),r.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600 rounded-full p-1 hover:bg-gray-100",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),m?E():k()]})})}function GJ(){try{return r.jsx(KJ,{})}catch(e){return console.error("FATAL ERROR IN SCHOOL DETAILS:",e),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4",children:[r.jsx("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Error Rendering School Details"}),r.jsx("p",{className:"text-red-700 mb-2",children:"An unexpected error occurred while rendering this page."}),r.jsxs("p",{className:"text-sm text-red-700 mb-4",children:["Error: ",String(e)]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Reload Page"})]})})}}function KJ(){const e=()=>{let pe;const tt=localStorage.getItem("erp.auth")||sessionStorage.getItem("erp.auth");if(tt)try{pe=JSON.parse(tt).token,console.log("[SchoolDetails] Token found in erp.auth:",pe?pe.substring(0,20)+"...":"null")}catch(ut){console.log("[SchoolDetails] Failed to parse erp.auth:",ut)}return pe||(pe=localStorage.getItem("token")||sessionStorage.getItem("token"),console.log("[SchoolDetails] Token found in direct storage:",pe?pe.substring(0,20)+"...":"null")),pe||(pe=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),console.log("[SchoolDetails] Token found in authToken:",pe?pe.substring(0,20)+"...":"null")),pe||console.error("[SchoolDetails] No authentication token found in any storage"),pe},t=Ai(),a=t?.schools||[],n=t?.selectedSchoolId||"";t?.setCurrentView,t?.getSchoolData,t?.updateUserRole,t?.updateSchoolSettings;const[s,o]=S.useState(!0),[l,d]=S.useState(null),[u,m]=S.useState(null),[p,f]=S.useState("overview"),[x,w]=S.useState(null),[j,v]=S.useState(!1),[b,I]=S.useState({}),[T,P]=S.useState(!1),[A,k]=S.useState(!1),[E,_]=S.useState(null),[R,$]=S.useState({firstName:"",lastName:"",email:"",role:"admin",phone:""}),[H,L]=S.useState(!1),[Y,X]=S.useState(null),[me,K]=S.useState(null),[oe,G]=S.useState({}),[B,F]=S.useState(0),[re,U]=S.useState(null),[ae,W]=S.useState(null),[fe,Se]=S.useState(!1),[Ie,te]=S.useState(""),[se,Q]=S.useState("all"),de=a.find(pe=>pe.id===n);S.useEffect(()=>{console.log("SchoolDetails - Debug Info:"),console.log("- selectedSchoolId:",n),console.log("- school found:",de?"yes":"no"),console.log("- school name:",de?.name),console.log("- loading state:",s),console.log("- error state:",l),console.log("- data loaded:",u?"yes":"no"),console.log("- schoolCode:",E)},[n,de,s,l,u,E]),S.useEffect(()=>{let pe=!0,tt;async function ut(){if(!n){console.log("No selectedSchoolId, skipping data fetch");return}console.log("Fetching data for school:",n,"reloadKey:",B),o(!0),d(null),_(null),tt=setTimeout(()=>{pe&&(o(!1),d("Request timed out after 10 seconds"))},1e4);try{console.log("Making API calls for school data...");let vt,Nt,tr;try{vt=await bt.get(`/schools/${n}/info`),Nt=vt.data?.data||vt.data||{},tr=Nt.code}catch{console.log("School info endpoint failed, trying regular endpoint...");try{vt=await bt.get(`/schools/${n}`),Nt=vt.data?.school||vt.data||{},tr=Nt.code}catch{console.log("Regular endpoint failed, trying to find school by ID from context...");const ot=a.find(Ot=>Ot.id===n);if(ot)tr=ot.code,Nt={code:ot.code,name:ot.name,_id:ot.id};else throw new Error("School not found in any source")}}if(!pe)return;if(!tr)throw new Error("School code not found");_(tr),console.log("Fetching users for school code:",tr);const ar=e();if(!ar)throw new Error("No authentication token found");const jt=await un.getAllUsers(tr,ar);if(!pe)return;clearTimeout(tt),console.log("API responses received:",{school:Nt,users:jt});let Kt=[];jt&&jt.data&&Array.isArray(jt.data)?(Kt=jt.data,console.log("Processing user data (new format):",{totalUsers:Kt.length,breakdown:jt.breakdown||{}})):jt&&typeof jt=="object"?(console.log("Processing user data (old format):",{hasAdmins:!!jt.admin,hasTeachers:!!jt.teacher,hasStudents:!!jt.student,hasParents:!!jt.parent,adminCount:jt.admin?.length||0,teacherCount:jt.teacher?.length||0,studentCount:jt.student?.length||0,parentCount:jt.parent?.length||0}),jt.admin&&Array.isArray(jt.admin)&&(console.log("Processing",jt.admin.length,"admins"),Kt.push(...jt.admin.map(Ae=>({...Ae,role:"admin"})))),jt.teacher&&Array.isArray(jt.teacher)&&(console.log("Processing",jt.teacher.length,"teachers"),Kt.push(...jt.teacher.map(Ae=>({...Ae,role:"teacher"})))),jt.student&&Array.isArray(jt.student)&&(console.log("Processing",jt.student.length,"students"),Kt.push(...jt.student.map(Ae=>({...Ae,role:"student"})))),jt.parent&&Array.isArray(jt.parent)&&(console.log("Processing",jt.parent.length,"parents"),Kt.push(...jt.parent.map(Ae=>({...Ae,role:"parent"}))))):(console.log("No user data received or unexpected format"),Kt=[]),console.log("Processing",Kt.length,"users...");const De=Kt.find(Ae=>Ae.role==="student");De&&console.log("Sample student data:",De),console.log("User breakdown:",{total:Kt.length,byRole:Kt.reduce((Ae,Xe)=>(Ae[Xe.role]=(Ae[Xe.role]||0)+1,Ae),{})});const et={users:Kt.filter(Ae=>!Ae._placeholder),results:[],attendance:[],marks:[],settings:{schoolName:Nt?.name||"School",academicYear:Nt?.settings?.academicYear?.currentYear||"2024-2025",attendanceThreshold:Number(Nt?.settings?.attendanceThreshold)||75,schoolHours:{start:Nt?.settings?.workingHours?.start||"08:00",end:Nt?.settings?.workingHours?.end||"15:00"},subjects:Array.isArray(Nt?.settings?.subjects)?Nt.settings.subjects:[],classes:Array.isArray(Nt?.settings?.classes)?Nt.settings.classes:[]},schoolCode:tr,accessMatrix:Nt?.accessMatrix||{}};console.log("Final processed data:",{totalUsers:et.users.length,userRoles:et.users.reduce((Ae,Xe)=>(Ae[Xe.role]=(Ae[Xe.role]||0)+1,Ae),{})}),m(et),o(!1)}catch(vt){if(!pe)return;clearTimeout(tt),console.error("Failed to load school details:",vt),console.error("Error response:",vt.response?.data),d(vt?.response?.data?.message||vt?.message||"Failed to load school details"),o(!1)}}return ut(),()=>{pe=!1,clearTimeout(tt)}},[n,B]);const we=async pe=>{try{if(!E)throw new Error("School code not found");const tt=e();if(!tt)throw new Error("No authentication token found");const ut=at?.users.find(Nt=>Nt._id===pe);if(!ut)throw new Error("User not found");const vt={"name.firstName":oe.firstName||ut.name.firstName,"name.lastName":oe.lastName||ut.name.lastName,email:oe.email||ut.email,"contact.primaryPhone":oe.phone||ut.contact.primaryPhone};if(oe.password&&oe.password.trim()){if(oe.password!==oe.confirmPassword)throw new Error("Passwords do not match");vt.password=oe.password}oe.role&&oe.role!==ut.role&&(vt.role=oe.role),oe.isActive!==void 0&&oe.isActive!==ut.isActive&&(vt.isActive=oe.isActive),await un.updateUser(E,ut.userId,vt,tt),K(null),G({}),F(Nt=>Nt+1),alert("User updated successfully!")}catch(tt){console.error("Failed to update user:",tt),alert("Failed to update user: "+tt.message)}},ce=pe=>{K(pe._id),G({firstName:pe.name?.firstName||"",lastName:pe.name?.lastName||"",email:pe.email||"",phone:pe.contact?.primaryPhone||"",role:pe.role||"",isActive:pe.isActive!==void 0?pe.isActive:!0,password:"",confirmPassword:""})},Ve=async pe=>{try{const tt=e();if(!tt)throw new Error("No authentication token found");if(!E)throw new Error("School code not found");const ut=at?.users.find(vt=>vt._id===pe);if(!ut)throw new Error("User not found");await un.deleteUser(E,ut.userId,tt),X(null),F(vt=>vt+1),alert("User deleted successfully!")}catch(tt){console.error("Failed to delete user:",tt),alert("Failed to delete user: "+tt.message)}},Be=async()=>{L(!0);try{if(!E)throw new Error("School code not found");if(console.log("Adding user with data:",{firstName:R.firstName,lastName:R.lastName,email:R.email,role:R.role,phone:R.phone,selectedSchoolId:n}),!R.firstName||!R.lastName||!R.email||!R.role)throw new Error("Please fill in all required fields");const pe=e();if(!pe)throw new Error("No authentication token found");const tt={firstName:R.firstName,lastName:R.lastName,email:R.email,role:R.role,phone:R.phone};console.log("Making API call to create user in school:",E);const ut=await un.addUser(E,tt,pe);console.log("User creation response:",ut),P(!1),$({firstName:"",lastName:"",email:"",role:"admin",phone:""}),console.log("Triggering data refresh..."),F(vt=>vt+1),alert(`User added successfully!

Credentials:
User ID: ${ut.data.credentials.userId}
Email: ${ut.data.credentials.email}
Password: ${ut.data.credentials.password}

Please share these credentials with the user.`)}catch(pe){console.error("Failed to add user:",pe),console.error("Error response:",pe.response?.data);const tt=pe.response?.data?.message||pe.message||"Failed to add user. Please try again.";alert(tt)}finally{L(!1)}},at=u;return n?de?s?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["School Details - ",de.name]})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),r.jsx("p",{children:"Loading school details..."})]})]}):l?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["School Details - ",de.name]})}),r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"font-medium",children:"Error loading school details"}),r.jsx("p",{className:"mt-1",children:l})]}),r.jsx("button",{onClick:()=>F(pe=>pe+1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 sm:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:de.name}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:["School Code: ",E||"N/A"]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 sm:p-4 rounded-lg mb-4 sm:mb-6",children:[r.jsx("h2",{className:"font-bold text-blue-800 mb-2 text-sm sm:text-base",children:"Debug Information"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"School ID:"})," ",n]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"School Name:"})," ",de.name]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"School Code:"})," ",E||"N/A"]})]}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Data Loaded:"})," ",at?"":""]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Loading State:"})," ",s?"Loading":"Complete"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Users Count:"})," ",at?.users?.length||0]})]})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm mb-4 sm:mb-6 p-1 sm:p-2",children:r.jsxs("nav",{className:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-2",children:[r.jsxs("button",{className:`flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium text-xs sm:text-sm transition-all duration-200 ${p==="overview"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>f("overview"),children:[r.jsx(Rl,{className:"h-4 w-4"}),r.jsx("span",{children:"Overview"})]}),r.jsxs("button",{className:`flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium text-xs sm:text-sm transition-all duration-200 ${p==="users"?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>f("users"),children:[r.jsx(ta,{className:"h-4 w-4"}),r.jsx("span",{children:"Users"})]}),r.jsxs("button",{className:`flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium text-xs sm:text-sm transition-all duration-200 ${p==="academics"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>f("academics"),children:[r.jsx(Ho,{className:"h-4 w-4"}),r.jsx("span",{children:"Academics"})]})]})}),p==="overview"&&r.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl",children:r.jsx(Fo,{className:"h-6 w-6 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"School Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-4 text-lg",children:"Basic Info"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Name:"})," ",de.name]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Code:"})," ",E||"N/A"]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Contact:"})," ",at?.settings?.schoolName||"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-4 text-lg",children:"User Counts"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Total Users:"})," ",at?.users?.length||0]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Admin Users:"})," ",at?.users?.filter(pe=>pe.role==="admin").length||0]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Teachers:"})," ",at?.users?.filter(pe=>pe.role==="teacher").length||0]}),r.jsxs("p",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Students:"})," ",at?.users?.filter(pe=>pe.role==="student").length||0]})]})]})]})]})}),p==="users"&&r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Users Management"}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs("button",{onClick:()=>P(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[r.jsx(is,{className:"h-4 w-4"}),r.jsx("span",{children:"Add User"})]})})]}),s&&r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"text-gray-500",children:"Loading users..."})}),l&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[r.jsx("div",{className:"text-red-800 font-medium",children:"Error loading users"}),r.jsx("div",{className:"text-red-600 text-sm mt-1",children:l}),r.jsx("button",{onClick:()=>F(pe=>pe+1),className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Try again"})]}),!s&&!l&&at&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"searchUsers",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Users"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"searchUsers",type:"text",placeholder:"Search by name or email...",value:Ie,onChange:pe=>te(pe.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-100 rounded-lg",children:[r.jsx("div",{className:"font-medium text-purple-800",children:"Admins"}),r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:at.users.filter(pe=>pe.role==="admin").length})]}),r.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Teachers"}),r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:at.users.filter(pe=>pe.role==="teacher").length})]}),r.jsxs("div",{className:"p-4 bg-green-50 border border-green-100 rounded-lg",children:[r.jsx("div",{className:"font-medium text-green-800",children:"Students"}),r.jsx("div",{className:"text-2xl font-bold text-green-900",children:at.users.filter(pe=>pe.role==="student").length})]}),r.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-100 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-800",children:"Total Users"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:at.users.length})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[at.users.filter(pe=>{if(Ie){const tt=Ie.toLowerCase();return(pe.name?.displayName||pe.name?.firstName||pe.email||"").toLowerCase().includes(tt)||(pe.email||"").toLowerCase().includes(tt)||(pe.userId||"").toLowerCase().includes(tt)}return!0}).map(pe=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-gray-200 rounded-full overflow-hidden",children:pe.profileImage?r.jsx("img",{src:`http://localhost:5050${pe.profileImage}`,alt:pe.name?.displayName||"User",className:"h-full w-full object-cover",onError:tt=>{const ut=tt.target;ut.style.display="none";const vt=ut.parentElement;vt&&(vt.innerHTML=`<div class="h-full w-full flex items-center justify-center bg-blue-100 text-blue-800 font-medium">${pe.name?.firstName?.[0]?.toUpperCase()||pe.name?.displayName?.[0]?.toUpperCase()||"U"}${pe.name?.lastName?.[0]?.toUpperCase()||pe.name?.displayName?.[1]?.toUpperCase()||"U"}</div>`)}}):r.jsxs("div",{className:"h-full w-full flex items-center justify-center bg-blue-100 text-blue-800 font-medium",children:[pe.name?.firstName?.[0]?.toUpperCase()||pe.name?.displayName?.[0]?.toUpperCase()||"U",pe.name?.lastName?.[0]?.toUpperCase()||pe.name?.displayName?.[1]?.toUpperCase()||"U"]})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:pe.name?.displayName||pe.name?.firstName||pe.email||"Unknown User"}),r.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",pe.userId||"N/A"]}),pe.role==="student"&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Class: ",r.jsx("strong",{children:pe.studentDetails?.currentClass||"N/A"})," - ",r.jsx("strong",{children:pe.studentDetails?.currentSection||"N/A"})]}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Since ",pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"Unknown"]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-medium rounded-full ${pe.role==="admin"?"bg-purple-100 text-purple-800":pe.role==="teacher"?"bg-blue-100 text-blue-800":pe.role==="student"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(pe.role||"unknown").charAt(0).toUpperCase()+(pe.role||"unknown").slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.email||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-medium rounded-full ${pe.isActive!==!1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:pe.isActive!==!1?"Active":"Inactive"})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsxs("button",{className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",onClick:()=>ce(pe),title:"Edit User",children:[r.jsx(zs,{size:16}),"Edit"]}),r.jsxs("button",{className:"text-red-600 hover:text-red-900 inline-flex items-center gap-1",onClick:()=>X(pe._id),title:"Delete User",children:[r.jsx(pn,{size:16}),"Delete"]})]})]},pe._id)),at.users.filter(pe=>{if(Ie){const tt=Ie.toLowerCase();return(pe.name?.displayName||pe.name?.firstName||pe.email||"").toLowerCase().includes(tt)||(pe.email||"").toLowerCase().includes(tt)||(pe.userId||"").toLowerCase().includes(tt)}return!0}).length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-500",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-lg font-medium",children:"No users found"}),r.jsx("p",{className:"text-sm mt-1",children:Ie?`No users match the search "${Ie}"`:"There are no users to display"}),Ie&&r.jsx("button",{onClick:()=>te(""),className:"mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Clear search"})]})})})]})]})})]})]}),p==="academics"&&r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Academic Test Configuration"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Configure test types and academic settings for ",de?.name]})]}),r.jsx(WJ,{})]}),!1,T&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Add New User"}),r.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:pe=>{pe.preventDefault(),Be()},children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",value:R.firstName,onChange:pe=>$({...R,firstName:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"First Name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:R.lastName,onChange:pe=>$({...R,lastName:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Last Name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:R.email,onChange:pe=>$({...R,email:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email Address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsx("input",{type:"text",value:"Admin",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Super Admin can only create Admin users"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone (Optional)"}),r.jsx("input",{type:"tel",value:R.phone,onChange:pe=>$({...R,phone:pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Phone Number"})]}),r.jsx("div",{children:r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Password Auto-Generation:"})," A secure password and user ID will be automatically generated for this user. You'll receive the credentials after user creation."]})})]})})})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:H,className:`flex-1 px-4 py-2 rounded-lg text-white transition-colors duration-200 ${H?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:H?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):"Add User"})]})]})]})}),A&&E&&r.jsx(VJ,{schoolCode:E,onClose:()=>k(!1),onSuccess:()=>{k(!1),F(pe=>pe+1),alert("Users imported successfully! The user list has been updated.")}}),Y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-red-600",children:"Confirm Delete"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>X(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:()=>Ve(Y),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),me&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Edit User"}),r.jsx("button",{onClick:()=>{K(null),G({})},className:"text-gray-500 hover:text-gray-700",children:r.jsx(Ar,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:pe=>{pe.preventDefault(),we(me)},children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",value:oe.firstName||"",onChange:pe=>G({...oe,firstName:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:oe.lastName||"",onChange:pe=>G({...oe,lastName:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:oe.email||"",onChange:pe=>G({...oe,email:pe.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:oe.phone||"",onChange:pe=>G({...oe,phone:pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Password Management"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password (Optional)"}),r.jsx("input",{type:"password",value:oe.password||"",onChange:pe=>G({...oe,password:pe.target.value}),placeholder:"Leave blank to keep current password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep the current password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:"password",value:oe.confirmPassword||"",onChange:pe=>G({...oe,confirmPassword:pe.target.value}),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{type:"button",onClick:async()=>{const pe=at?.users.find(tt=>tt._id===me);if(pe)try{U(me);const tt=e();if(!tt)throw new Error("No authentication token");if(!E)throw new Error("School code not found");const ut=await un.resetPassword(E,pe.userId,tt),vt=ut.data.password;G({...oe,password:vt,confirmPassword:vt}),W(ut.data),U(null),alert(`New password generated: ${vt}

The password has been set in the form above. Click "Save Changes" to apply it.`)}catch(tt){console.error("Failed to generate new password:",tt),U(null),alert("Failed to generate new password: "+tt.message)}},disabled:re===me,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:re===me?r.jsxs(r.Fragment,{children:[r.jsx(tf,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Generating..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(H6,{className:"h-4 w-4"}),r.jsx("span",{children:"Generate New Password"})]})}),r.jsx("div",{className:"text-sm text-gray-600",children:"This will generate a secure password and update the form fields above"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Role & Status"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsxs("select",{value:oe.role||"",onChange:pe=>G({...oe,role:pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"teacher",children:"Teacher"}),r.jsx("option",{value:"student",children:"Student"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:oe.isActive!==void 0?oe.isActive.toString():"",onChange:pe=>G({...oe,isActive:pe.target.value==="true"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]})]})]})]}),r.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>{K(null),G({})},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})})]})}):r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-xl font-bold mb-4",children:"School Details"}),r.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[r.jsx("p",{children:"School not found. The school ID may be invalid."}),r.jsxs("p",{className:"text-sm mt-2",children:["ID: ",n]})]})]}):r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-xl font-bold mb-4",children:"School Details"}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:r.jsx("p",{children:"No school selected. Please go back and select a school."})})]})}const YJ=()=>{const{selectedSchoolId:e,setCurrentView:t,updateSchool:a}=Ai(),[n,s]=S.useState(null),[o,l]=S.useState({}),[d,u]=S.useState(!1),[m,p]=S.useState(null),[f,x]=S.useState(null),[w,j]=S.useState(null);console.log("[SchoolEditDetails] Component rendered, selectedSchoolId:",e),S.useEffect(()=>{console.log("[SchoolEditDetails] useEffect triggered, selectedSchoolId:",e),(async()=>{if(!e){console.log("[SchoolEditDetails] No selectedSchoolId, skipping fetch");return}console.log("[SchoolEditDetails] Starting fetch for school:",e),u(!0),p(null);try{const $=await bt.get(`/schools/${e}`);console.log("[SchoolEditDetails] Raw API response:",$.data);const H=$.data.data||$.data;if(console.log("[SchoolEditDetails] Extracted school data:",H),console.log("[SchoolEditDetails] Key fields check:",{mobile:H.mobile,contactPhone:H.contact?.phone,principalName:H.principalName,principalEmail:H.principalEmail,address:H.address,contact:H.contact,street:H.street,area:H.area,city:H.city,district:H.district,pinCode:H.pinCode,state:H.state}),!H)throw new Error("No data received from API");s(H),l(H),console.log("[SchoolEditDetails] Profile and form state updated successfully")}catch($){console.error("[SchoolEditDetails] Error fetching school data:",$),console.error("[SchoolEditDetails] Error details:",{message:$?.message,response:$?.response?.data,status:$?.response?.status}),p($?.response?.data?.message||$?.message||"Failed to load school data")}finally{u(!1),console.log("[SchoolEditDetails] Fetch complete, loading set to false")}})()},[e]);const v=(R,$)=>{l(H=>{const L={...H||{}},Y=R.split(".");let X=L;for(let me=0;me<Y.length-1;me++){const K=Y[me];(X[K]==null||typeof X[K]!="object")&&(X[K]={}),X=X[K]}return X[Y[Y.length-1]]=$,L})},b=(R,$)=>{v("address.stateId",R),v("address.state",$.name),v("address.districtId",""),v("address.district",""),v("address.talukaId",""),v("address.taluka","")},I=(R,$)=>{v("address.districtId",R),v("address.district",$.name),v("address.talukaId",""),v("address.taluka","")},T=(R,$)=>{v("address.talukaId",R),v("address.taluka",$.name)},P=R=>{v("address.district",R),v("address.taluka","")},A=R=>{v("address.taluka",R)},k=R=>{const $=R.target.files?.[0];if($){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes($.type)){p("Only image files (JPEG, PNG, GIF, WebP) are allowed");return}if($.size>10*1024*1024){p("File size must be less than 10MB");return}x($);const L=new FileReader;L.onloadend=()=>{j(L.result)},L.readAsDataURL($),p(null)}},E=()=>{x(null),j(null)},_=async()=>{if(e){u(!0),p(null);try{const R=new FormData;Object.keys(o).forEach(L=>{const Y=o[L];Y!=null&&(typeof Y=="object"&&!Array.isArray(Y)?R.append(L,JSON.stringify(Y)):R.append(L,String(Y)))}),f&&R.append("logo",f);const $=await bt.put(`/schools/${e}`,R,{headers:{"Content-Type":"multipart/form-data"}}),H=$.data?.school||$.data;s(H),await a({id:H._id||H.id||e,name:H.name,logo:H.logoUrl?String(H.logoUrl).startsWith("http")?H.logoUrl:`https://erp-backend-1jtx.onrender.com/api${H.logoUrl}`:"",area:H.address?.area||"",district:H.address?.district||"",pinCode:H.address?.pinCode||H.address?.zipCode||"",mobile:H.contact?.phone||"",principalName:H.principalName||"",principalEmail:H.principalEmail||H.contact?.email||"",bankDetails:H.bankDetails||{},accessMatrix:H.accessMatrix||{},address:H.address||{},contact:H.contact||{},schoolType:H.schoolType||"",establishedYear:H.establishedYear||"",affiliationBoard:H.affiliationBoard||"",website:H.contact?.website||"",secondaryContact:H.secondaryContact||""}),alert("School updated successfully"),t("school-details")}catch(R){p(R?.response?.data?.message||R?.message||"Failed to save")}finally{u(!1)}}};return d&&!n?r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsxs("button",{onClick:()=>t("school-details"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Fb,{className:"h-5 w-5"}),r.jsx("span",{children:"Back to Details"})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit School"})]}),r.jsx("div",{className:"py-10 text-center text-gray-600",children:"Loading"})]}):n?r.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t("school-details"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(Fb,{className:"h-5 w-5"}),r.jsx("span",{children:"Back to Details"})]}),r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit: ",n.name]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>t("school-details"),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(Ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Cancel"})]}),r.jsxs("button",{onClick:_,disabled:d,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[r.jsx(cs,{className:"h-4 w-4"}),r.jsx("span",{children:"Save"})]})]})]}),m&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 rounded p-4",children:m}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(d2,{className:"h-6 w-6 text-blue-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"School Logo"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[r.jsxs("div",{className:"flex-shrink-0",children:[r.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 overflow-hidden",children:w?r.jsx("img",{src:w,alt:"Logo preview",className:"w-full h-full object-contain"}):n?.logoUrl?r.jsx("img",{src:n.logoUrl,alt:"Current logo",className:"w-full h-full object-contain"}):r.jsx(d2,{className:"h-12 w-12 text-gray-400"})}),(w||n?.logoUrl)&&r.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:w?"New logo":"Current logo"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload New Logo"}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Supported formats: JPEG, PNG, GIF, WebP (Max 10MB). Logo will be compressed to ~30KB."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("label",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:[r.jsx(Bo,{className:"h-4 w-4"}),r.jsx("span",{children:"Choose File"}),r.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:k,className:"hidden"})]}),w&&r.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(Ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Remove"})]})]}),f&&r.jsxs("p",{className:"text-sm text-green-600 mt-2",children:[" Selected: ",f.name," (",(f.size/1024).toFixed(2)," KB)"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Ub,{className:"h-6 w-6 text-indigo-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.name||"",onChange:R=>v("name",R.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Code"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg font-mono",value:o?.code||"",onChange:R=>v("code",R.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Principal Name"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.principalName||"",onChange:R=>v("principalName",R.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Principal Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 border rounded-lg",value:o?.principalEmail||o?.contact?.email||"",onChange:R=>v("principalEmail",R.target.value)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(r4,{className:"h-6 w-6 text-green-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Address"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.address?.street||o?.street||"",onChange:R=>v("address.street",R.target.value),placeholder:"Enter street address",title:`Current value: ${o?.address?.street||o?.street||"Empty"}`})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area/Locality"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.address?.area||o?.area||"",onChange:R=>v("address.area",R.target.value),placeholder:"Enter area/locality"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.address?.city||o?.city||"",onChange:R=>v("address.city",R.target.value),placeholder:"Enter city"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Location Details"}),r.jsx(Jh,{selectedState:o?.address?.stateId||"",selectedDistrict:o?.address?.districtId||"",selectedTaluka:o?.address?.talukaId||"",districtText:o?.address?.district||o?.district||"",talukaText:o?.address?.taluka||o?.taluka||"",onStateChange:b,onDistrictChange:I,onTalukaChange:T,onDistrictTextChange:P,onTalukaTextChange:A,required:!1,className:"grid grid-cols-1 md:grid-cols-3 gap-4"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pin Code"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.address?.pinCode||o?.address?.zipCode||o?.pinCode||"",onChange:R=>{v("address.pinCode",R.target.value),v("address.zipCode",R.target.value),v("pinCode",R.target.value)},placeholder:"Enter pin code"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg bg-gray-50",value:o?.address?.country||"India",readOnly:!0})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(X6,{className:"h-6 w-6 text-purple-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contact"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Phone"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.mobile||o?.contact?.phone||"",onChange:R=>{v("mobile",R.target.value),v("contact.phone",R.target.value)},placeholder:"Enter primary phone number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Phone"}),r.jsx("input",{className:"w-full px-3 py-2 border rounded-lg",value:o?.secondaryContact||"",onChange:R=>v("secondaryContact",R.target.value),placeholder:"Enter secondary phone number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-3 py-2 border rounded-lg",value:o?.principalEmail||o?.contact?.email||"",onChange:R=>{v("principalEmail",R.target.value),v("contact.email",R.target.value)},placeholder:"Enter email address"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),r.jsx("input",{type:"url",className:"w-full px-3 py-2 border rounded-lg",value:o?.contact?.website||"",onChange:R=>v("contact.website",R.target.value),placeholder:"Enter website URL"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Ub,{className:"h-6 w-6 text-blue-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"School Details"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Type"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:o?.schoolType||"",onChange:R=>v("schoolType",R.target.value),children:[r.jsx("option",{value:"",children:"Select School Type"}),r.jsx("option",{value:"Public",children:"Public"}),r.jsx("option",{value:"Private",children:"Private"}),r.jsx("option",{value:"International",children:"International"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Established Year"}),r.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded-lg",value:o?.establishedYear||"",onChange:R=>v("establishedYear",parseInt(R.target.value)),placeholder:"Enter established year",min:"1800",max:"2030"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Affiliation Board"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:o?.affiliationBoard||"",onChange:R=>v("affiliationBoard",R.target.value),children:[r.jsx("option",{value:"",children:"Select Affiliation Board"}),r.jsx("option",{value:"CBSE",children:"CBSE"}),r.jsx("option",{value:"ICSE",children:"ICSE"}),r.jsx("option",{value:"State Board",children:"State Board"}),r.jsx("option",{value:"IB",children:"IB"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Established Date"}),r.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded-lg",value:o?.establishedDate?String(o.establishedDate).substring(0,10):"",onChange:R=>v("establishedDate",R.target.value)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(rf,{className:"h-6 w-6 text-gray-700"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Status & Timestamps"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Status"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:o?.isActive?"true":"false",onChange:R=>v("isActive",R.target.value==="true"),children:[r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created At"}),r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900",children:n.createdAt?new Date(n.createdAt).toLocaleString():""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Updated"}),r.jsx("p",{className:"px-3 py-2 bg-gray-50 rounded-lg text-gray-900",children:n.updatedAt?new Date(n.updatedAt).toLocaleString():""})]})]})]})]})]}):r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit School"})}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded p-4 mb-4",children:[r.jsx("p",{className:"font-semibold mb-2",children:"No school data loaded"}),r.jsxs("p",{className:"text-sm",children:["Selected School ID: ",e||"None"]}),r.jsxs("p",{className:"text-sm mt-2",children:["Error: ",m||"No error message"]}),r.jsx("p",{className:"text-sm mt-2",children:"Check the browser console for more details."})]})]})};function XJ({onLoginSuccess:e,onBack:t}){const[a,n]=S.useState({email:"",password:""}),[s,o]=S.useState(!1),[l,d]=S.useState(!1),[u,m]=S.useState(null),p=async x=>{if(x.preventDefault(),m(null),!a.email||!a.password){m("Please fill in all fields");return}d(!0);try{const j=(await bt.post("/auth/login",{email:a.email,password:a.password})).data;j.success&&j.token?(localStorage.setItem("authToken",j.token),localStorage.setItem("userInfo",JSON.stringify(j.user)),e?e(j.user):alert(`Login successful!
Welcome ${j.user.name}
Role: ${j.user.role}
School: ${j.user.schoolName}`)):m("Invalid login credentials")}catch(w){console.error("Login error:",w),m(w.response?.data?.message||"Login failed. Please check your credentials and try again.")}finally{d(!1)}},f=(x,w)=>{n(j=>({...j,[x]:w})),u&&m(null)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[t&&r.jsxs("button",{onClick:t,className:"mb-4 inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(Fb,{className:"h-4 w-4"}),r.jsx("span",{children:"Back to Dashboard"})]}),r.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(Fo,{className:"h-8 w-8 text-white"})}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"School Portal Login"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your school account"})]}),r.jsx("form",{className:"mt-8 space-y-6",onSubmit:p,children:r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 space-y-6",children:[u&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-3",children:[r.jsx(Wa,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-700",children:u})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(yd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:x=>f("email",x.target.value),className:"pl-10 w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:a.password,onChange:x=>f("password",x.target.value),onFocus:()=>o(!0),onBlur:()=>o(!1),className:"w-full px-3 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Enter your password"}),r.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?r.jsx(mi,{className:"h-5 w-5"}):r.jsx(oa,{className:"h-5 w-5"})})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:l,className:`w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white transition-colors ${l?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:l?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Signing in..."})]}):"Sign In"})})]})}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Having trouble logging in?"," ",r.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Contact your school administrator"})]})})]})})}function JJ({onClose:e,onSuccess:t}){const[a,n]=S.useState(""),[s,o]=S.useState(""),[l,d]=S.useState(""),[u,m]=S.useState(!1),[p,f]=S.useState(!1),[x,w]=S.useState(!1),[j,v]=S.useState(""),[b,I]=S.useState(!1),T=async P=>{if(P.preventDefault(),v(""),!a||!s||!l){v("All fields are required");return}if(s.length<6){v("New password must be at least 6 characters long");return}if(s!==l){v("New passwords do not match");return}if(a===s){v("New password must be different from current password");return}I(!0);try{const A=localStorage.getItem("erp.auth")||sessionStorage.getItem("erp.auth");if(!A)throw new Error("No authentication data found");const{token:k}=JSON.parse(A);if(!k)throw new Error("No authentication token found");const E=await bt.post("/auth/change-password",{currentPassword:a,newPassword:s});E.data.success?(alert("Password changed successfully! Please login again with your new password."),t()):v(E.data.message||"Failed to change password")}catch(A){console.error("Error changing password:",A),v(A.response?.data?.message||A.message||"Failed to change password")}finally{I(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(E1,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Change Password"}),r.jsx("p",{className:"text-sm text-gray-500",children:"You must change your password to continue"})]})]}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:b,children:r.jsx(Ar,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[j&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-600",children:j})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:u?"text":"password",value:a,onChange:P=>n(P.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password",disabled:b,required:!0}),r.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,children:u?r.jsx(mi,{className:"h-5 w-5"}):r.jsx(oa,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:p?"text":"password",value:s,onChange:P=>o(P.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",disabled:b,required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,children:p?r.jsx(mi,{className:"h-5 w-5"}):r.jsx(oa,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:x?"text":"password",value:l,onChange:P=>d(P.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password",disabled:b,required:!0}),r.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,children:x?r.jsx(mi,{className:"h-5 w-5"}):r.jsx(oa,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:b,children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:b,children:b?"Changing...":"Change Password"})]})]})]})})}function ZJ(){console.log("[AppContent] Rendering AppContent");const{currentView:e,setCurrentView:t}=Ai(),a=Zo(),{user:n,logout:s}=dr(),[o,l]=S.useState(!1);S.useEffect(()=>{n&&n.passwordChangeRequired&&(console.log("[SuperAdmin] Password change required for user"),l(!0))},[n]);const d=()=>{switch(e){case"dashboard":return r.jsx(RP,{});case"add-school":return r.jsx(FJ,{});case"view-access":return r.jsx(zJ,{});case"account-details":return r.jsx(qJ,{});case"school-details":return r.jsx(GJ,{});case"edit-school":return r.jsx(YJ,{});case"school-login":return r.jsx(XJ,{onLoginSuccess:p=>{console.log("[SuperAdmin] School login successful, navigating to school dashboard"),p.role==="admin"?a("/admin",{replace:!0}):p.role==="teacher"?a("/teacher",{replace:!0}):(alert(`Login successful!
Welcome ${p.name}
Role: ${p.role}
School: ${p.schoolName}`),t("dashboard"))},onBack:()=>t("dashboard")});default:return r.jsx(RP,{})}},u=()=>{l(!1),alert("Password changed successfully! Please login again."),s(),a("/login",{replace:!0})},m=()=>{if(n&&n.passwordChangeRequired){alert("You must change your password to continue using the system.");return}l(!1)};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col lg:flex-row",children:[e!=="school-login"&&r.jsx(LJ,{}),r.jsx("main",{className:`flex-1 overflow-y-auto ${e==="school-login"?"w-full":""}`,children:d()}),o&&r.jsx(JJ,{onClose:m,onSuccess:u})]})}function QJ(){return console.log("[App] Rendering App component"),r.jsx($J,{children:r.jsx(ZJ,{})})}const El={superadmin:{title:"Super Admin",subtitle:"All-powerful ruler",icon:r.jsx(Hb,{className:"w-5 h-5"}),demoEmail:"super@erp.com",demoPass:"super123"},admin:{title:"Admin",subtitle:"System wizard",icon:r.jsx(rf,{className:"w-5 h-5"}),demoEmail:"admin@test.com",demoPass:"t8qW7Y58"},teacher:{title:"Teacher",subtitle:"Knowledge master",icon:r.jsx(Ho,{className:"w-5 h-5"}),demoEmail:"teacher@test.com",demoPass:"fFvja2L5"}};function eZ(){const{login:e}=dr(),[t,a]=S.useState("superadmin"),[n,s]=S.useState(El.superadmin.demoEmail),[o,l]=S.useState(El.superadmin.demoPass),[d,u]=S.useState(""),[m,p]=S.useState(!1),[f,x]=S.useState(!1),[w,j]=S.useState(""),[v,b]=S.useState(!1),I=Zo(),T=Gs();S.useEffect(()=>{u("")},[t]);const P=E=>{a(E),E==="superadmin"?(s(El[E].demoEmail),l(El[E].demoPass),u("")):(s(""),l(""),u(""))},A=S.useMemo(()=>Object.keys(El).map(E=>{const _=E===t,R=El[E];return r.jsxs("button",{type:"button",onClick:()=>P(E),className:["flex-1 min-w-[120px] sm:min-w-[160px] p-3 sm:p-4 rounded-xl border transition shadow-sm text-left",_?"border-violet-500 bg-white ring-2 ring-violet-200":"border-slate-200 bg-white/80 hover:border-slate-300"].join(" "),children:[r.jsx("div",{className:["w-9 h-9 rounded-full mb-2 flex items-center justify-center",_?"bg-violet-100 text-violet-700":"bg-slate-100 text-slate-700"].join(" "),"aria-hidden":!0,children:R.icon}),r.jsxs("div",{className:"text-sm sm:font-medium text-slate-800 flex items-center gap-2",children:[R.title,E==="superadmin"&&r.jsx("span",{}),E==="admin"&&r.jsx("span",{}),E==="teacher"&&r.jsx("span",{})]}),r.jsx("div",{className:"text-xs text-slate-500 hidden sm:block",children:R.subtitle})]},E)}),[t]),k=async E=>{E.preventDefault(),j(""),b(!0);try{const _=d&&d.trim()?{email:n,password:o,schoolCode:d.trim(),role:t}:{email:n,password:o,role:t};await e(_);const R=T.state?.from;I(R??"/",{replace:!0})}catch(_){j(_?.message||"Login failed")}finally{b(!1)}};return r.jsxs("div",{className:"min-h-screen bg-login-gradient relative overflow-hidden",children:[r.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[r.jsx("div",{className:"floating-emoji left-[5%] top-[12%]",children:""}),r.jsx("div",{className:"floating-emoji left-[94%] top-[18%]",children:""}),r.jsx("div",{className:"floating-emoji left-[8%] top-[70%]",children:""}),r.jsx("div",{className:"floating-emoji left-[96%] top-[75%]",children:""})]}),r.jsx("div",{className:"container mx-auto px-4 py-6 sm:py-12",children:r.jsx("div",{className:"max-w-5xl mx-auto bg-white/90 backdrop-blur shadow-2xl rounded-2xl sm:rounded-3xl px-4 sm:px-6 md:px-12 py-6 sm:py-10",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 sm:gap-10 items-center",children:[r.jsxs("div",{className:"space-y-3 sm:space-y-4 flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-32 h-32 sm:w-40 sm:h-40 rounded-2xl sm:rounded-3xl bg-violet-100 flex items-center justify-center overflow-hidden shadow-lg",children:r.jsx("img",{src:"/logo.png",alt:"School Logo",className:"w-28 h-28 sm:w-36 sm:h-36 object-contain"})}),r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold",children:r.jsx("span",{className:"bg-gradient-to-r from-fuchsia-500 via-violet-500 to-blue-500 bg-clip-text text-transparent",children:"EduLogix"})}),r.jsx("p",{className:"text-slate-500 text-lg sm:text-xl md:text-2xl font-semibold",children:"Welcome back, superstar! "})]}),r.jsxs("form",{onSubmit:k,className:"space-y-4 sm:space-y-5",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-slate-700 mb-2 sm:mb-3",children:"Choose your adventure "}),r.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:A})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm text-slate-600",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",className:"w-full border border-slate-200 rounded-xl px-3 sm:px-4 py-2.5 sm:py-3 pr-10 focus:outline-none focus:ring-2 focus:ring-violet-200 focus:border-violet-400 text-sm sm:text-base",placeholder:"your.email@school.com ",value:n,onChange:E=>s(E.target.value),required:!0,autoComplete:"username"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm text-slate-600",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:f?"text":"password",className:"w-full border border-slate-200 rounded-xl px-3 sm:px-4 py-2.5 sm:py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-violet-200 focus:border-violet-400 text-sm sm:text-base",placeholder:"Your super secret password ",value:o,onChange:E=>l(E.target.value),required:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>x(E=>!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700","aria-label":f?"Hide password":"Show password",children:f?r.jsx(mi,{className:"w-5 h-5"}):r.jsx(oa,{className:"w-5 h-5"})})]})]}),t!=="superadmin"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm text-slate-600",children:"School Code"}),r.jsx("input",{type:"text",className:"w-full border border-slate-200 rounded-xl px-3 sm:px-4 py-2.5 sm:py-3 focus:outline-none focus:ring-2 focus:ring-violet-200 focus:border-violet-400 text-sm sm:text-base",placeholder:"Enter school code (e.g., 'p')",value:d,onChange:E=>u(E.target.value),required:!0})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-600",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300",checked:m,onChange:E=>p(E.target.checked)}),"Remember me"]}),r.jsx("button",{type:"button",onClick:()=>alert("Hook this to your /auth/forgot-password route"),className:"text-xs sm:text-sm text-slate-600 hover:text-slate-900 text-left sm:text-right",children:"Forgot your password?"})]}),w&&r.jsx("div",{className:"text-sm text-red-600",children:w}),r.jsx("button",{disabled:v,className:`w-full h-10 sm:h-12 rounded-xl text-white text-sm sm:text-base font-medium shadow-lg disabled:opacity-60\r
                  bg-gradient-to-r from-violet-600 via-fuchsia-500 to-blue-500 hover:opacity-95 transition`,children:v?"Signing you in":"Let's Go!"}),r.jsx("p",{className:"text-xs text-slate-500 text-center sm:text-left",children:"Tip: Only SuperAdmin has auto-filled demo credentials. Admin and Teacher require manual entry."})]})]})})})]})}function tZ(){const{user:e}=dr();return e?e.role==="superadmin"?r.jsx(Ls,{to:"/super-admin",replace:!0}):e.role==="admin"?r.jsx(Ls,{to:"/admin",replace:!0}):e.role==="teacher"?r.jsx(Ls,{to:"/teacher",replace:!0}):r.jsx(Ls,{to:"/login",replace:!0}):r.jsx(Ls,{to:"/login",replace:!0})}function rZ(){const{user:e,logout:t}=dr(),a=Zo();return e?r.jsx("div",{className:"w-full bg-slate-100 border-b",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-2 flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-slate-700",children:["Signed in as ",r.jsx("b",{children:e.name})," (",e.role,")"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qm,{className:"text-blue-600 hover:underline",to:"/",children:"Home"}),r.jsx("button",{className:"px-3 py-1 rounded-lg bg-slate-800 text-white hover:bg-black",onClick:()=>{t(),a("/login",{replace:!0})},children:"Logout"})]})]})}):null}function aZ(){const{user:e,loading:t,token:a}=dr();return console.log("[APP] Render state:",{hasUser:!!e,userRole:e?.role,hasToken:!!a,loading:t}),r.jsxs(r.Fragment,{children:[r.jsx(rZ,{}),r.jsxs(JP,{children:[r.jsx(Nr,{path:"/login",element:r.jsx(eZ,{})}),r.jsxs(Nr,{element:r.jsx(M6,{}),children:[r.jsx(Nr,{index:!0,element:r.jsx(tZ,{})}),r.jsx(Nr,{element:r.jsx(wg,{allow:["superadmin"]}),children:r.jsx(Nr,{path:"/super-admin/*",element:r.jsx(QJ,{})})}),r.jsx(Nr,{element:r.jsx(wg,{allow:["admin"]}),children:r.jsx(Nr,{path:"/admin/*",element:r.jsx(SJ,{})})}),r.jsx(Nr,{element:r.jsx(wg,{allow:["teacher"]}),children:r.jsx(Nr,{path:"/teacher/*",element:r.jsx(_J,{})})})]}),r.jsx(Nr,{path:"*",element:r.jsx(Ls,{to:"/",replace:!0})})]})]})}I5.createRoot(document.getElementById("root")).render(r.jsx(I6,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:r.jsxs(_6,{children:[r.jsx(UX,{position:"top-right"}),r.jsx(aZ,{})]})}));
